(self.webpackChunktraceability=self.webpackChunktraceability||[]).push([[442],{51671:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>rl});var s=a(94109),n=a(92314),i=a(79216),l=a(85865),r=a(55263),o=a(17392),d=a(70378),c=a(32143),u=a(2050),m=a(48734),h=a(96446),p=a(35721),x=a(71322),g=a(44208),w=a(30279),y=a(65043),v=a(39336),f=a(83003),j=a(74117),A=a(52101),S=a(58293),b=a(32069),_=a(38635),C=a(89237),N=a(59906),k=a(62252),E=a(64391),I=a(38323),T=a(37402),D=a(15415),R=a(45903),P=a(73216),O=a(91036),$=a(23178),L=a(21136),M=a(79687),U=a(52359),z=a(2670);const F=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{superUsers:async function(){const e=new M.Ay,a=await e.get(`${U.H.USERS}/?page=1&page_size=1000&is_operator=0`,{},t,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},listUsers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.get(`${U.H.USERS}/?page=${e}&page_size=10&is_operator=${a}`,{},t,L.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},list:async function(){const e=new M.Ay,a=await e.get(`${U.H.USERS}/`,{},t,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},usersAll:async e=>{const a=new M.Ay,s=await a.get("users/?page=1&page_size=1000&is_operator=0",{},t,L.So);return null!==s&&void 0!==s&&s.data?s.data.results.map((e=>({value:e.username,key:e.id}))):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post(`${U.H.USERS}/`,e,t,(e=>(0,L.So)(e,null,"User created successfully!")));return null===s||void 0===s?void 0:s.data},userProfile:async e=>{const a=new M.Ay,s=await a.get(`${U.H.USER}-${U.H.PROFILE}/${e}/`,{},t,L.So);return null!==s&&void 0!==s&&s.data?null===s||void 0===s?void 0:s.data:[[],0]},updateProfile:async(e,a)=>{const s=new M.Ay,n=await s.put(`${U.H.USER}-${U.H.PROFILE}/${e}/`,a,t,(e=>(0,L.So)(e,null,"User Updated successfully!")));return null===n||void 0===n?void 0:n.data},update:async(e,a)=>{const s=new M.Ay,n=await s.put(`${U.H.USER}/${e}/`,a,t,(e=>(0,L.So)(e,null,"User Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{if(!e)return;const a=new M.Ay,s=await a.delete(`${U.H.USER}/${e}/`,t,(e=>(0,L.So)(e,null,"User deleted successfully!")));return null===s||void 0===s?void 0:s.data},opratorList:async function(){var e;const a=new M.Ay,s=await a.get(`${U.H.OPERATORS}/`,{},t,L.So);return(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.results.length)>0?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data.results,s.data.count]):[[],0]},createOperator:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post(`${U.H.OPERATORS}/`,e,t,(e=>(0,L.So)(e,null,"User created successfully!")));return null===s||void 0===s?void 0:s.data},updateOperator:async(e,a)=>{const s=new M.Ay,n=await s.put(`${U.H.OPERATOR}/${e}/`,a,t,(e=>(0,L.So)(e,null,"Operator Updated successfully!")));return null===n||void 0===n?void 0:n.data},removeOperator:async e=>{if(!e)return;const a=new M.Ay,s=await a.delete(`${U.H.OPERATOR}/${e}/`,t,(e=>(0,L.So)(e,null,"Operator deleted successfully!")));return null===s||void 0===s?void 0:s.data},listByUserName:async e=>{const a={username:e},s=new M.Ay,n=await s.post("search-by-username/?is_operator=0",a,t,(e=>(0,L.So)(e,null)));return null!==n&&void 0!==n&&n.data?null===n||void 0===n?void 0:n.data:[[]]},listByAadhar:async e=>{const a={aadhar_number:e},s=new M.Ay,n=await s.post("search-by-aadhar/?is_operator=1",a,t,(e=>(0,L.So)(e,null)));return null!==n&&void 0!==n&&n.data?null===n||void 0===n?void 0:n.data:[[]]},listByAadhar2:async e=>{const a=new M.Ay,s=await a.get(`${U.H.USERS}/?is_operator=1&page=1&page_size=1000`,{},t,L.So);if(null!==s&&void 0!==s&&s.data){return s.data.results.filter((e=>e.status)).map((e=>({value:e.username,key:e.id})))}return[[],0]},listByAadhar3:async e=>{const a={aadhar_number:e},s=new M.Ay,n=await s.post("search-by-aadhar/?is_operator=1",a,t,(e=>(0,L.So)(e,null)));if(null!==n&&void 0!==n&&n.data){return n.data.results.filter((e=>e.status)).map((e=>({value:e.username,key:e.id})))}return[[]]},listByAadharFortestPortal:async e=>{const a={aadhar_number:e},s=new M.Ay,n=await s.post("search-by-aadhar/?is_operator=1",a,t,(e=>(0,L.So)(e,null)));if(null!==n&&void 0!==n&&n.data){return n.data.filter((e=>e.user.status)).map((e=>({value:e.user.username,key:e.user.id})))}return[[]]},updateOpSkill:async(e,a)=>{const s=new M.Ay,n=await s.post(`training/update-skill/${e}/`,a,t,(e=>(0,L.So)(e,null,"Skill Updated successfully!")));return null===n||void 0===n?void 0:n.data},createByCsv:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post(`${U.H.USERS}/`,e,t,(e=>(0,L.So)(e,null,"")));return null===s||void 0===s?void 0:s.data},updateProfileCSV:async(e,a)=>{const s=new M.Ay,n=await s.put(`${U.H.USER}-${U.H.PROFILE}/${e}/`,a,t,(e=>(0,L.So)(e,null)));return null===n||void 0===n?void 0:n.data},getNotification:async e=>{const a=new M.Ay,s=await a.get("notifications/user-settings/",{},t,L.So);return null!==s&&void 0!==s&&s.data?s.data:[[],0]},postNotification:async e=>{console.log("notification data-----",e);const a=new M.Ay,s=await a.put("notifications/user-settings/",e,t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data},activeOperators:async e=>{const a=new M.Ay,s=await a.get(`${U.H.USERS}/?is_operator=1&page=1&page_size=1000`,{},t,L.So);if(null!==s&&void 0!==s&&s.data){return s.data.results.filter((e=>e.status)).map((e=>({value:e.username,key:e.id})))}return[[],0]},activeUsers:async e=>{const a=new M.Ay,s=await a.get("users/?page=1&page_size=1000&is_operator=0",{},t,L.So);if(null!==s&&void 0!==s&&s.data){return s.data.results.filter((e=>e.status)).map((e=>({value:e.username,key:e.id})))}return[[],0]}}};var H=a(10949),q=a(7810),G=a(38426),B=a(92378),Q=a(56467),Y=a(98595),W=a(65786),V=a(70579);const X=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,handleAdd2:o,loading:d,tab:c}=e;const{t:u,i18n:m}=(0,j.Bd)(),h=[{title:u("user_name"),placeholder:u("enterUserName"),type:Q.wN.INPUT,name:"username",validator:Q.wY.NAME},{title:u("email"),placeholder:u("enterEmail"),type:Q.wN.INPUT,name:"email",validator:Q.wY.EMAIL},{title:u("full_name"),placeholder:u("enterFullName"),type:Q.wN.INPUT,name:"fullname"}],p=[{title:u("aadhaarNumber"),placeholder:u("aadhaarNumber"),type:Q.wN.INPUT,name:"aadhar_no",inputType:"number",validator:Q.wY.REQUIRED&&Q.wY.AADHAR},{title:u("full_name"),placeholder:u("enterFullName"),type:Q.wN.INPUT,name:"fullname"}],x=[{title:u("phoneNumber"),placeholder:u("phoneNumber"),type:Q.wN.INPUT,name:"phone_number",inputType:"number",validator:Q.wY.PHONE},{title:u("employeeID"),placeholder:u("employeeID"),type:Q.wN.INPUT,name:"employee_id"},0===c&&{title:"Aadhar Number",placeholder:"Aadhar Number",type:Q.wN.INPUT,name:"aadhar_number",inputType:"number",validator:Q.wY.AADHAR},{title:u("employeeType"),placeholder:u("employeeType"),type:Q.wN.INPUT,name:"employee_type"},{title:u("date_of_joining"),placeholder:u("date_of_joining"),type:Q.wN.DATE,name:"date_of_joining"}],[g,w]=(0,y.useState)(new Map),[v,f]=(0,y.useState)(0);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"50vw",top:"10vh",hideCloseIcon:W.A,wrapperClasses:"px-5 py-4",crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:[(0,V.jsx)("h3",{className:"opacity-80",children:u(0===c?"add_user":"add_operator")}),(0,V.jsx)(B.A,{data:s,errors:g,onChange:e=>{const{name:t,value:a}=e.target;w((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:0===v?0===c?h:p:x}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:u("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{if(0===v){const e=(0,Y.bG)(0===c?h:p,s);if(console.log("_errors",e),w(e),e.size)return;let t=await r();return console.log("step error-----\x3e>>",t),void(!1!==t&&f((e=>e+1)))}if(1===v){const e=(0,Y.bG)(x,s);if(w(e),e.size)return;return await o(),void f(0)}},loading:d,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:u("next")})})]})]})},Z=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,handleAdd2:o,loading:d,tab:c,edit:u,fetchUsers:m}=e;const{t:h,i18n:p}=(0,j.Bd)(),{updateProfile:x,userProfile:g}=F(),w=(0,f.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.USER_ITEM)||void 0===t?void 0:t.data})),[v,A]=(0,y.useState)(new Map),[S,b]=(0,y.useState)(0),[_,C]=(0,y.useState)({username:"",email:"",fullname:"",aadhar_number:"",phone_number:"",employee_id:"",employee_type:"",date_of_joining:"",aadhar_no:""});(0,y.useEffect)((()=>{void 0!==w&&(console.log("user data----------",c),C(1===c?{..._,username:w.username||w.user.username,email:w.email,fullname:w.fullname||w.user.fullname,aadhar_number:w.aadhar_number||"",phone_number:w.phone_number||"",date_of_joining:w.date_of_joining||""}:{..._,aadhar_number:w.aadhar_number||"",phone_number:w.phone_number||"",date_of_joining:w.date_of_joining||""}))}),["edit"===u]);const N=[{title:"Aadhar Number",placeholder:"Aadhar Number",type:Q.wN.INPUT,name:"aadhar_number",inputType:"number",validator:Q.wY.AADHAR},{title:"Phone Number",placeholder:"Phone Number",type:Q.wN.INPUT,name:"phone_number",inputType:"number",validator:Q.wY.PHONE},{title:"Date of Joining",placeholder:"date_of_joining",type:Q.wN.DATE,name:"date_of_joining"}],k=[{title:h("aadhaarNumber"),placeholder:"Aadhar Number",type:Q.wN.INPUT,name:"aadhar_number",inputType:"number",validator:Q.wY.REQUIRED&&Q.wY.AADHAR},{title:"Phone Number",placeholder:"Phone Number",type:Q.wN.INPUT,name:"phone_number",inputType:"number",validator:Q.wY.PHONE},{title:h("date_of_joining"),placeholder:"date_of_joining",type:Q.wN.DATE,name:"date_of_joining"}];return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsx)("h3",{className:"opacity-80",children:h(0===c?"edit_user":"edit_operator")}),(0,V.jsx)(B.A,{data:_,errors:v,onChange:e=>{const{name:t,value:a}=e.target;A((e=>(e.delete(t),e))),C((e=>({...e,[t]:a})))},schema:0===c?N:k}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:h("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{if(0!==S);else{const e=(0,Y.bG)(0===c?N:k,_);if(console.log("_errors",e),A(e),e.size)return;await async function(){let e={username:_.username,email:_.email,fullname:_.fullname},t={aadhar_number:_.aadhar_number,fullname:_.fullname,phone_number:_.phone_number,date_of_joining:_.date_of_joining},s=await g(0===c?w.id:w.user.id);await x(s.id,0===c?e:t),await a(),await m()}()}},loading:d,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:h("next")})})]})]})};var J=a(8939),K=a(24056),ee=a(51387),te=a(95540),ae=a(89611),se=a(43845);const ne=e=>{let{title:t="N/A",color:a}=e;return t?(0,V.jsx)(se.A,{label:t,variant:"filled",sx:{backgroundColor:a||"#C1FFB6",fontSize:"10px","& .MuiChip-label":{fontSize:"13px"}},size:"small"}):(0,V.jsx)("p",{className:"c-gray fs-12 ml-1",children:"N/A"})};var ie=a(43374),le=a(83875),re=a(44973),oe=a(5766),de=a.n(oe);const ce=a.p+"static/media/SampleSheet.2da2e90959e1d87dfed0.csv",ue=a.p+"static/media/userCsv.418d2ad887b470847e45.csv",me=a.p+"static/media/operatorCsv.85d82e3f977b5241cc03.csv",he=a.p+"static/media/mcq.5b1c6a93631799f90371.csv";var pe=a(44978);const xe=(0,R.A)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),ge=e=>{let{file:t,setFile:a,loading:s,open:n,onClose:r,onSubmit:o,setCsvData:d,tab:c}=e;const[u,m]=(0,y.useState)(!1);return(0,V.jsxs)(q.A,{open:n,onClose:r,width:"min(500px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",children:[(0,pe.t)("uploadCsv")," "]}),(0,V.jsx)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",my:3,children:(0,V.jsx)(H.A,{bordered:!0,color:"orange",height:"30px",onClick:()=>{window.open(0===c?ue:1===c?me:"question"===c?he:ce,"_blank")},children:(0,pe.t)("downloadSampleCSV")})}),(0,V.jsxs)(h.A,{className:"h-400 w-full rounded-10 flex flex-col items-center justify-center",sx:{border:`2px dotted ${Q.lm.GRAY}`},children:[(0,V.jsx)(ie.A,{fontSize:"large",color:"disabled"}),(0,V.jsx)("h3",{className:"opacity-80",children:(0,pe.t)("dropYourFileHereToUpload")}),!!t&&(0,V.jsxs)("p",{className:(u?"c-red":"c-primary")+" flex items-center",children:[(0,V.jsx)(le.A,{fontSize:"small"})," ",null===t||void 0===t?void 0:t.name]}),(0,V.jsxs)(H.A,{onClick:e=>document.getElementById("file").click(),children:[(0,V.jsx)(re.A,{})," ",(0,pe.t)("uploadCsvFile")]}),(0,V.jsx)(xe,{type:"file",id:"file",onChange:async e=>{var t,s;const n=e.target.files[0];console.log("file-----",n),n&&(null!==n&&void 0!==n&&null!==(t=n.type)&&void 0!==t&&null!==(s=t.toLowerCase())&&void 0!==s&&s.includes("csv")?(m(!1),de().parse(n,{header:!1,complete:function(e){console.log("csv res-----------",null===e||void 0===e?void 0:e.data[1]),d(null===e||void 0===e?void 0:e.data)}}),a(n)):m("The selected file is not a csv file!"))}})]}),!!u&&(0,V.jsx)("p",{className:"fw-500 c-red text-center",children:u}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",my:2,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:r,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",disabled:u||!t,onClick:o,loading:s,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})};var we=a(630),ye=a(77739),ve=a(86178),fe=a.n(ve),je=a(67201);const Ae=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,users:d,skill:c,edit:u}=e;const[m,h]=(0,y.useState)(new Map),p=[{title:(0,pe.t)("supervisor"),placeholder:"Select Supervisor",type:Q.wN.SELECT,name:"supervisor",validator:Q.wY.REQUIRED,keyValues:d},{title:(0,pe.t)("skill"),placeholder:(0,pe.t)("selectSkill"),type:Q.wN.SELECT,name:"skill",validator:Q.wY.REQUIRED,keyValues:c}];return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",children:[u?"Edit":"Add"," Supervisor"]}),(0,V.jsx)(B.A,{data:s,errors:m,onChange:e=>{const{name:t,value:a}=e.target;h((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:p}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{const e=(0,Y.bG)(p,s);h(e),e.size||await r()},loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("submit")})})]})]})},Se=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:l,loading:r,users:o,testList:d}=e;const[c,u]=(0,y.useState)(new Map),[m,h]=(0,y.useState)(0),[p,x]=(0,y.useState)([]),g=[{title:(0,pe.t)("skill"),placeholder:"Select Skill",type:Q.wN.SELECT,name:"skill",validator:Q.wY.REQUIRED,keyValues:o}];return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsx)("h3",{className:"opacity-80",children:"Add Skill"}),(0,V.jsx)(B.A,{data:s,errors:c,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:g}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{onClick:async()=>{const e=(0,Y.bG)(g,s);u(e),e.size||await l()},loading:r,children:(0,pe.t)("submit")})]})]})},be=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`training/skills/?page=${e}&page_size=10`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},alllist:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`training/skills/?page=${e}&page_size=100`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post("training/skills/",e,t,(e=>(0,L.So)(e,null,"Skill created successfully!")));return null===s||void 0===s?void 0:s.data},updateProfile:async(e,a)=>{const s=new M.Ay,n=await s.put(`${U.H.USER}-${U.H.PROFILE}/${e}/`,a,t,(e=>(0,L.So)(e,null,"User Updated successfully!")));return null===n||void 0===n?void 0:n.data},update:async(e,a)=>{const s=new M.Ay,n=await s.put(`${U.H.USER}/${e}/`,a,t,(e=>(0,L.So)(e,null,"User Updated successfully!")));return null===n||void 0===n?void 0:n.data},addSupervisor:async(e,a)=>{const s=new M.Ay,n=await s.put(`training/skill/${e}/`,a,t,(e=>(0,L.So)(e,null,"Supervisor Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{if(!e)return;const a=new M.Ay,s=await a.delete(`training/skills/${e}/`,t,(e=>(0,L.So)(e,null,"Skill deleted successfully!")));return null===s||void 0===s?void 0:s.data},opratorList:async function(){var e;const a=new M.Ay,s=await a.get(`${U.H.OPERATORS}/`,{},t,L.So);return(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.results.length)>0?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data.results,s.data.count]):[[],0]},createOperator:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post(`${U.H.OPERATORS}/`,e,t,(e=>(0,L.So)(e,null,"User created successfully!")));return null===s||void 0===s?void 0:s.data},updateOperator:async(e,a)=>{const s=new M.Ay,n=await s.put(`${U.H.OPERATOR}/${e}/`,a,t,(e=>(0,L.So)(e,null,"Operator Updated successfully!")));return null===n||void 0===n?void 0:n.data},removeOperator:async e=>{if(!e)return;const a=new M.Ay,s=await a.delete(`${U.H.OPERATOR}/${e}/`,t,(e=>(0,L.So)(e,null,"Operator deleted successfully!")));return null===s||void 0===s?void 0:s.data},updateSkill:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.put(`training/skill/${a}/`,e,t,(e=>(0,L.So)(e,null,"Skill created successfully!")));return null===n||void 0===n?void 0:n.data}}};var _e=a(7186),Ce=a(85502);const Ne=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){const e=new M.Ay,a=await e.get(`${U.H.ASSET}/${U.H.GROUPS}/`,{},t,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post(`${U.H.ASSET}/${U.H.GROUPS}/`,e,t,(e=>(0,L.So)(e,null,"Group created successfully!")));return null===s||void 0===s?void 0:s.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.GROUP}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Group Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.ASSET}/${U.H.GROUP}/${e}/`,t,(e=>(0,L.So)(e,null,"Group deleted successfully!")));return null===s||void 0===s?void 0:s.data},allAssets:async function(){const e=new M.Ay,a=await e.get(`${U.H.ASSET}/${U.H.ALLASSETS}/`,{},t);return null!==a&&void 0!==a&&a.data?[null===a||void 0===a?void 0:a.data]:[[],0]},groupAsset:async e=>{const a=new M.Ay,s=await a.get(`${U.H.ASSET}/${U.H.GROUP}/${e}/`,{},t);return null===s||void 0===s?void 0:s.data},updateAssets:async(e,a)=>{const s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.GROUP}/${a}/`,e,t);return null===n||void 0===n?void 0:n.data}}},ke=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){const e=new M.Ay,a=await e.get(`${U.H.OPERATOR}-${U.H.GROUPS}/`,{},t,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post(`${U.H.OPERATOR}-${U.H.GROUPS}/`,e,t,(e=>(0,L.So)(e,null,"Group created successfully!")));return null===s||void 0===s?void 0:s.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.OPERATOR}-${U.H.GROUP}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Group Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.OPERATOR}-${U.H.GROUP}/${e}/`,t,(e=>(0,L.So)(e,null,"Group deleted successfully!")));return null===s||void 0===s?void 0:s.data},allOperator:async function(){const e=new M.Ay,a=await e.get(`${U.H.OPERATORS}/`,{},t);var s;return null!==a&&void 0!==a&&a.data?[null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.results]:[[],0]},groupOp:async e=>{const a=new M.Ay,s=await a.get(`${U.H.OPERATOR}-${U.H.GROUP}/${e}/`,{},t);return null===s||void 0===s?void 0:s.data},updateAssets:async(e,a)=>{const s=new M.Ay,n=await s.put(`${U.H.OPERATOR}-${U.H.GROUP}/${a}/`,e,t);return null===n||void 0===n?void 0:n.data}}},Ee=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){const e=new M.Ay,a=await e.get(`${U.H.USER}-${U.H.GROUPS}/`,{},t,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post(`${U.H.USER}-${U.H.GROUPS}/`,e,t,(e=>(0,L.So)(e,null,"Group created successfully!")));return null===s||void 0===s?void 0:s.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.USER}-${U.H.GROUP}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Group Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.USER}-${U.H.GROUP}/${e}/`,t,(e=>(0,L.So)(e,null,"Group deleted successfully!")));return null===s||void 0===s?void 0:s.data},allUser:async function(){const e=new M.Ay,a=await e.get(`${U.H.USERS}/?page=1&page_size=200`,{},t);return null!==a&&void 0!==a&&a.data?[null===a||void 0===a?void 0:a.data]:[[],0]},updateAssets:async(e,a)=>{const s=new M.Ay,n=await s.put(`${U.H.USER}-${U.H.GROUP}/${a}/`,e,t);return null===n||void 0===n?void 0:n.data},groupUser:async e=>{const a=new M.Ay,s=await a.get(`${U.H.USER}-${U.H.GROUP}/${e}/`,{},t);return null===s||void 0===s?void 0:s.data}}};var Ie=a(68089);const Te=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,modalOpen:o,loading:d,edit:c,tab:u}=e;const{t:m,i18n:h}=(0,j.Bd)(),{getMenu:p,postMenu:x}=(0,Ie.A)(),g=(0,f.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.USER_ITEM)||void 0===t?void 0:t.data})),[w,v]=(0,y.useState)([]),[A,S]=(0,y.useState)([]);(0,y.useEffect)((()=>{null!==g&&void 0!==g&&g.id&&"manage"===o&&b()}),["manage"===o]);const b=async()=>{var e,t,a,s;const n=await p(null===g||void 0===g?void 0:g.id);S((null===(e=n[0])||void 0===e||null===(t=e.all_menu)||void 0===t?void 0:t.menu_items)||[]),v((null===(a=n[0])||void 0===a||null===(s=a.user_menu)||void 0===s?void 0:s.menu_items)||[]),console.log("menu item-----\x3e>>",g)};return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",style:{textTransform:"capitalize"},children:[null===g||void 0===g?void 0:g.username," ",m("menuManagement")]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:1,gap:1,height:400},children:[(0,V.jsxs)(i.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:Q.lm.LG_GRAY_2,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,V.jsx)(l.A,{sx:{px:1},children:m("permissionsOfUser")}),w.map(((e,t)=>(0,V.jsxs)(i.A,{sx:{flexDirection:"row",backgroundColor:Q.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,V.jsxs)(l.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e]},e.name),(0,V.jsx)(Ce.A,{fontSize:"small",sx:{color:Q.lm.DARK_RED,m:.2,cursor:"pointer"},onClick:()=>{return t=e,void v((e=>e.filter((e=>e!==t))));var t}})]},t)))]}),(0,V.jsxs)(i.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:Q.lm.LG_GRAY_2,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,V.jsx)(l.A,{sx:{px:1},children:m("allMenu")}),A.map(((e,t)=>(0,V.jsxs)(i.A,{sx:{flexDirection:"row",backgroundColor:Q.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,V.jsxs)(l.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e]},e.name),(0,V.jsx)(je.A,{fontSize:"small",sx:{color:Q.lm.DARK_GREEN,m:.2,cursor:"pointer"},onClick:()=>(async e=>{w.includes(e)?O.oR.warn("already in list"):v((t=>[...t,e]))})(e)})]},t)))]})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:1,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:m("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>(async()=>{let e={menu_items:w},t=await x(null===g||void 0===g?void 0:g.id,e);console.log("res----menu items",t),await a()})(),loading:d,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:m("submit")})})]})]})},De=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,modalOpen:o,loading:d,edit:c,tab:u}=e;const{t:m,i18n:h}=(0,j.Bd)(),{getMenu:p,postMenu:x,getMachines:g,postMachine:w}=(0,Ie.A)(),v=(0,f.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.USER_ITEM)||void 0===t?void 0:t.data})),[A,S]=(0,y.useState)([]),[b,_]=(0,y.useState)([]);(0,y.useEffect)((()=>{null!==v&&void 0!==v&&v.id&&"machine"===o&&C()}),["machine"===o]);const C=async()=>{var e,t,a;const s=await g(null===v||void 0===v?void 0:v.id);_((null===(e=s[0])||void 0===e?void 0:e.all_assets.assets)||[]),S((null===(t=s[0])||void 0===t?void 0:t.user_assets.assets)||[]),console.log("getMachines item-----\x3e>>",null===(a=s[0])||void 0===a?void 0:a.all_assets.assets)};return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",style:{textTransform:"capitalize"},children:[null===v||void 0===v?void 0:v.username," Machine Permissions"]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:1,gap:1,height:400},children:[(0,V.jsxs)(i.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:Q.lm.LG_GRAY_2,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,V.jsx)(l.A,{sx:{px:1},children:m("permissionsOfUser")}),A.map(((e,t)=>(0,V.jsxs)(i.A,{sx:{flexDirection:"row",backgroundColor:Q.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,V.jsxs)(l.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e.name]},e.name),(0,V.jsx)(Ce.A,{fontSize:"small",sx:{color:Q.lm.DARK_RED,m:.2,cursor:"pointer"},onClick:()=>{return t=e,void S((e=>e.filter((e=>e!==t))));var t}})]},t)))]}),(0,V.jsxs)(i.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:Q.lm.LG_GRAY_2,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,V.jsx)(l.A,{sx:{px:1},children:m("All Machines")}),b.map(((e,t)=>(0,V.jsxs)(i.A,{sx:{flexDirection:"row",backgroundColor:Q.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,V.jsxs)(l.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e.name]},e.name),(0,V.jsx)(je.A,{fontSize:"small",sx:{color:Q.lm.DARK_GREEN,m:.2,cursor:"pointer"},onClick:()=>(async e=>{console.log("machine val",e),A.some((t=>t.id===e.id))?O.oR.warn("Machine already in the list"):S((t=>[...t,e]))})(e)})]},t)))]})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:1,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:m("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>(async()=>{let e={assets:A.map((e=>e.id))};await w(null===v||void 0===v?void 0:v.id,e),console.log("res----menu items",e),await a()})(),loading:d,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:m("submit")})})]})]})};var Re=a(5374);const Pe=a.p+"static/media/file.c8f3c8e566028eaf83ef.gif",Oe=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,modalOpen:o,loading:d,edit:c,tab:u}=e;const{t:m,i18n:h}=(0,j.Bd)(),{getMenu:p,postMenu:x,getMachines:g,postMachine:w}=(0,Ie.A)(),[v,A]=((0,f.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.USER_ITEM)||void 0===t?void 0:t.data})),(0,y.useState)([])),[S,b]=(0,y.useState)([]);return(0,V.jsxs)(q.A,{open:t,onClose:a,none:"none",width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsx)("h3",{className:"opacity-80",style:{textTransform:"capitalize"},children:" File is uploading."}),(0,V.jsxs)(i.A,{sx:{justifyContent:"center",alignItems:"center"},children:[(0,V.jsx)(l.A,{color:"error",fontWeight:"bold",children:"Please do not close or refresh the page. This window will close automatically once the upload is complete."}),(0,V.jsx)("img",{src:Pe,alt:"uploading",style:{width:300,height:300,objectFit:"contain"}})]})]})},$e=()=>{const{t:e,i18n:t}=(0,j.Bd)(),a=(0,f.wA)(),s=localStorage.getItem("userId"),[n,r]=(0,y.useState)(0),[d,c]=(0,y.useState)([]),[u,m]=(0,y.useState)([]),[h,p]=(0,y.useState)([]),[x,g]=(0,y.useState)([]),[w,v]=(0,y.useState)(),[A,S]=(0,y.useState)(0),[b,_]=(0,y.useState)(0),[C,N]=(0,y.useState)(!1),[k,E]=(0,y.useState)([]),[I,T]=(0,y.useState)(0),[D,R]=(0,y.useState)(null),[P,L]=(0,y.useState)({}),[M,U]=(0,y.useState)([]),[z,q]=(0,y.useState)(""),[B,Y]=(0,y.useState)([]),[W,se]=(0,y.useState)(""),[ie,le]=(0,y.useState)(""),[re,oe]=(0,y.useState)(!1),de=/^[A-Za-z\s]*$/,[ce,ue]=(0,y.useState)(10),{list:me,listUsers:he,superUsers:pe,create:xe,updateProfile:ve,update:Ce,userProfile:Ne,remove:ke,listByUserName:Ee,listByAadhar:Ie,updateOpSkill:Pe,createByCsv:$e,updateProfileCSV:Me,usersAll:Ue}=F(),{alllist:ze}=be(),[Fe,He]=(0,y.useState)("");(0,y.useEffect)((()=>{c([]),Ge()}),[I,n]),(0,y.useEffect)((()=>{Be(),qe(),async function(){let e=await Ue();console.log("alll users",e)}()}),[]);const qe=async()=>{const[e]=await ze(),t=e.results.map((e=>({value:e.skill_name,key:e.id})));U((e=>[...e,...t]))};const Ge=async()=>{v("fetch");try{const[e]=await he(I+1,n);if(S(e.count),0===n){c(e.results||[]);const t=e.results.filter((e=>!e.is_operator&&e.status)).map((e=>{let{username:t,id:a}=e;return{value:t,key:a}}));Y(t)}else if(1===n){const t=await Promise.all(e.results.map((e=>Ne(e.id))));p(t)}}catch(Le){console.error("Error fetching users:",Le)}finally{v(!1)}},Be=async()=>{v("fetch");try{const[e]=await pe(I+1,n),t=e.results.filter((e=>!e.is_operator&&e.status)).map((e=>{let{username:t,id:a}=e;return{value:t,key:a}}));Y(t)}catch(Le){console.error("Error fetching users:",Le)}finally{v(!1)}},Qe=async()=>{const e={...P};localStorage.setItem("op_ad_no",P.aadhar_no),e.is_operator=0!==n,e.status=!1,1===n&&(e.username=`op_${P.aadhar_no}`),v("fetch");const t=await xe(e);if(t){return q(t.id),L({}),!0}if(void 0===t){return!1}v(!1)},Ye=async()=>{const e={...P};1===n&&(e.aadhar_number=localStorage.getItem("op_ad_no")),e.is_operator=0!==n,e.status=!1,v("fetch");let t=await Ne(z);await ve(t.id,e),N(!1),await Ge(),v(!1)},We=async(e,t,a)=>{v("fetch");const s={is_admin:!0!==t},n={status:!0!==t};await Ce(e,"status"===a?n:s),await Ge()},Ve=[{id:1,title:e("email"),render:e=>e.email},{id:2,title:e("user_name"),render:e=>e.username},{id:3,title:e("full_name"),render:e=>e.fullname},{id:5,title:e("role"),render:t=>(0,V.jsx)(ne,{title:t.is_admin?e("admin"):e("na")})},{id:6,title:e("action"),render:t=>(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)(i.A,{flexDirection:"row",sx:{gap:1},children:[(0,V.jsx)(H.A,{width:"fit-content",color:!0===t.status?"light_green":"RADIAL_RED",onClick:()=>We(null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.status,"status"),children:!0===t.status?e("active"):e("inactive")}),1===n&&(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{a((0,_e.t)(t)),N("edit")},children:(0,V.jsx)(te.A,{color:"error",fontSize:"small"})}),0===n&&(null===t||void 0===t?void 0:t.id)!==s.replace(/-/g,"")?(0,V.jsx)(ye.A,{title:"Delete User",children:(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{v("fetch"),await ke(e),await Ge(),v(!1)})(null===t||void 0===t?void 0:t.id),children:(0,V.jsx)(ee.A,{color:"error",fontSize:"small"})})}):null,0===n&&!1===(null===t||void 0===t?void 0:t.is_admin)?(0,V.jsx)(ye.A,{title:"Make Admin",children:(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>We(null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.is_admin,"delete"),children:(0,V.jsx)(we.A,{color:t.is_admin?"error":"success",fontSize:"small"})})}):null,0===n&&(null===t||void 0===t?void 0:t.id)!==s.replace(/-/g,"")?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(ye.A,{title:"Manage Permission",children:(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{a((0,_e.t)(t)),N("manage")},children:(0,V.jsx)(ae.A,{color:"success",fontSize:"small"})})}),(0,V.jsx)(ye.A,{title:"Machine Permission",children:(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{a((0,_e.t)(t)),N("machine")},children:(0,V.jsx)(Re.A,{color:"success",fontSize:"small"})})})]}):null]})})}],Xe=[{id:4,title:e("aadhar"),render:e=>e.aadhar_number},{id:1,title:e("date_of_joining"),render:e=>fe()(e.date_of_joining).format("ll")},{id:11,title:e("supervisor"),render:t=>{var a;return(0,V.jsxs)(i.A,{sx:{flexDirection:"row",alignItems:"center"},children:[t.passed_induction&&(0,V.jsx)(l.A,{children:null===(a=t.supervisor)||void 0===a?void 0:a.username}),0!==n&&(t.passed_induction?(0,V.jsx)(ye.A,{title:t.supervisor?"Edit Supervisor":"Add Supervisor",children:(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{t.supervisor?oe(!0):oe(!1),q(t.id),le(t.user.id),N("addSupervisor")},children:t.supervisor?(0,V.jsx)(te.A,{fontSize:"small",color:"primary"}):(0,V.jsx)(je.A,{})})}):(0,V.jsx)(l.A,{children:e("inductionNotPassed")}))]})}},{id:6,title:e("action"),render:t=>{var s;return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)(i.A,{flexDirection:"row",sx:{gap:1,alignItems:"center"},children:[0===n?(0,V.jsx)(H.A,{width:"10%",color:!0===t.status?"light_green":"RADIAL_RED",onClick:()=>We(null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.status,"status"),children:!0===t.status?e("active"):e("inactive")}):(0,V.jsx)(H.A,{width:"10%",color:!0===(null===t||void 0===t||null===(s=t.user)||void 0===s?void 0:s.status)?"light_green":"RADIAL_RED",onClick:()=>{var e,a;return We(null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.id,null===t||void 0===t||null===(a=t.user)||void 0===a?void 0:a.status,"status")},children:!0===t.user.status?e("active"):e("inactive")}),1===n&&(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{a((0,_e.t)(t)),N("edit")},children:(0,V.jsx)(te.A,{color:"error",fontSize:"small"})}),0===n&&!1===(null===t||void 0===t?void 0:t.is_admin)?(0,V.jsx)(ye.A,{title:"Make Admin",children:(0,V.jsx)(o.A,{sx:{height:25,width:25,alignItems:"center"},onClick:()=>We(null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.is_admin,"delete"),children:(0,V.jsx)(we.A,{sx:{color:t.is_admin?Q.lm.RADIAL_RED:Q.lm.LIGHT_GREEN}})})}):null]})})}}],Ze=async()=>{v("fetch");const e={skill:P.skill,supervisor:P.supervisor};Pe(ie,e),N(!1),await Ge(),v(!1)},Je=e=>{const t=e.target.value;console.log("e.target.value",e.target.value.length),0===n?setTimeout((async()=>{0!==e.target.value.length?await(async e=>{const t=await Ee(e);c(t||[]),v(!1)})(t):await Ge()}),1e3):1===n&&setTimeout((async()=>{0!==e.target.value.length?await(async e=>{const t=await Ie(e);console.log("operatros------",t),p(t||[]),v(!1)})(t):await Ge()}),1e3),T(0),se(t)};return(0,V.jsxs)("div",{className:"mx-3 my-2 fw-500",children:[(0,V.jsx)(J.A,{value:n,onChange:(e,t)=>{r(t),T(0),se("")},className:"mb-2 fw-500",children:[e("users"),e("operators")].map(((e,t)=>(0,V.jsx)(K.A,{label:e,className:"fw-500",value:t})))}),(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(i.A,{mb:1,children:(0,V.jsx)(G.A,{height:"37px",value:W,placeholder:e(0===n?"search_by_username":"search_by_aadhar"),onChange:e=>Je(e)})}),(0,V.jsxs)(i.A,{justifyContent:"flex-end",direction:"row",sx:{mb:1,gap:1},children:[(0,V.jsx)(H.A,{onClick:()=>N("csvUser"),color:"gray",children:(0,V.jsxs)(l.A,{className:"fw-20-500-24",children:[e("upload")," ",e("CSV")]})}),(0,V.jsx)(H.A,{color:"gray",onClick:()=>N("add"),children:(0,V.jsxs)(l.A,{className:"fw-20-500-24",children:[e("create")," ",e(0===n?"users":"operators")]})})]})]}),(0,V.jsx)($.A,{columns:0===n?Ve:Xe,rows:0===n?d:h,rowsPerPage:10,loading:"fetch"===w,titleCellClasses:"c-gray fw-700",page:I,setPage:T,paginator:!0,serialize:!0,total:A,tableBodyColor:Q.lm.WHITE}),(0,V.jsx)(X,{open:"add"===C,onClose:()=>N(!1),data:P,setData:L,onSubmit:Qe,loading:"add"===w,tab:n,handleAdd2:Ye}),(0,V.jsx)(Z,{open:"edit"===C,onClose:()=>N(!1),data:P,setData:L,onSubmit:Qe,loading:"add"===w,tab:n,handleAdd2:Ye,edit:C,fetchUsers:Ge}),(0,V.jsx)(Ae,{data:P,setData:L,open:"addSupervisor"===C,onClose:()=>N(!1),onSubmit:async()=>{v("fetch");const e={add_supervisor:P.supervisor};ve(z,e),Ze(),N(!1),await Ge()},users:B,skill:M,edit:re}),(0,V.jsx)(Se,{data:P,setData:L,open:"addSkill"===C,onClose:()=>N(!1),onSubmit:Ze,users:M}),(0,V.jsx)(ge,{onClose:()=>N(!1),open:"csvUser"===C,onSubmit:async()=>{N(!1),N("uploading"),v("fetch");const e=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;for(const t of k.slice(1))if(0===n){if(t[0]&&de.test(t[0])&&e.test(t[2])){const e={username:t[0],fullname:t[1],email:t[2],status:!1};try{const a=await $e(e);if(null!==a&&void 0!==a&&a.id){const e={phone_number:t[3],aadhar_number:t[4],employee_id:t[5],employee_type:t[6],date_of_joining:t[7],status:!1},s=await Ne(a.id);null!==s&&void 0!==s&&s.id&&await Me(s.id,e)}}catch(Le){O.oR.error("Error processing CSV row:",t,Le),console.error("Error processing CSV row:",t,Le)}}}else if(1===n&&""!==t[2]&&""!==t[0]&&12===t[2].length){const e={username:"op_"+t[2],fullname:t[0],is_operator:!0,status:!1};try{const a=await $e(e);if(null!==a&&void 0!==a&&a.id){const e={aadhar_number:t[2],is_operator:!0,phone_number:t[1],employee_id:t[3],employee_type:t[4],date_of_joining:t[5],status:!1},s=await Ne(a.id);null!==s&&void 0!==s&&s.id&&await Me(s.id,e)}}catch(Le){O.oR.error("Error processing CSV row:",t,Le),console.error("Error processing CSV row:",t,Le)}}await Ge(),N(!1)},file:D,setFile:R,setCsvData:E,tab:n}),(0,V.jsx)(Oe,{onClose:()=>N(!1),open:"uploading"===C,modalOpen:C}),(0,V.jsx)(Te,{onClose:()=>N(!1),open:"manage"===C,modalOpen:C}),(0,V.jsx)(De,{onClose:()=>N(!1),open:"machine"===C,modalOpen:C})]})},Le=()=>{const[e,t]=(0,y.useState)(0),[a,s]=(0,y.useState)(""),[n,r]=(0,y.useState)(""),[o,d]=(0,y.useState)({company:"",location:"",division:"",line:""});return(0,V.jsx)("div",{className:"mx-3 my-2 fw-500",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,V.jsx)(i.A,{sx:{backgroundColor:Q.lm.BG_GRAY,p:3,borderRadius:2},children:(0,V.jsxs)(l.A,{className:"fw-20-500-36",children:[(0,pe.t)("permissionMsg")," "]})})})},Me=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d,tab:c}=e;const{allAssets:u,groupAsset:m,updateAssets:h}=Ne(),{allOperator:p,groupOp:x,updateAssets:g}=ke(),{allUser:w,groupUser:v,updateAssets:j}=Ee(),[A,S]=(0,y.useState)(new Map),[b,_]=(0,y.useState)([]),[C,N]=(0,y.useState)([]),[k,E]=(0,y.useState)([]),I=(0,f.d4)((e=>{var t,a;return null===e||void 0===e||null===(t=e.SelectedId)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.id})),T=(0,f.d4)((e=>{var t,a;return null===e||void 0===e||null===(t=e.SelectedId)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.name}));(0,y.useLayoutEffect)((()=>{R()}),[""!==I]);const D=async(e,t)=>{let a=t;e.map((e=>{a.map(((t,s)=>{if(t.id===e.id){a.indexOf(t);a.splice(s,1)}}))})),_(a)},R=async()=>{if("Machines"===c){var e;const[t]=await u(),a=await m(I);D(a.assets,t),(null===(e=a.assets)||void 0===e?void 0:e.length)>0&&N(a.assets)}else if("Operators"===c){var t;const[e]=await p(),a=await x(I);D(a.operators,e),(null===(t=a.operators)||void 0===t?void 0:t.length)>0&&N(a.operators)}else if("Users"===c){var a;const[e]=await w(),t=await v(I);D(t.users,e.results),(null===(a=t.users)||void 0===a?void 0:a.length)>0&&N(t.users)}},P=async(e,t)=>{const a={remove:[e]},s={add:[e]};"Machines"===c?await h("add"===t?s:a,I):"Operators"===c?await g("add"===t?s:a,I):"Users"===c&&await j("add"===t?s:a,I),R()};return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",style:{textTransform:"capitalize"},children:["(",T,") ",c," Management"]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:1,gap:1,height:400},children:[(0,V.jsxs)(i.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:Q.lm.TEXT_GRAY,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,V.jsxs)(l.A,{sx:{px:1},children:[c," in Group"]}),C.map(((e,t)=>(0,V.jsxs)(i.A,{sx:{flexDirection:"row",backgroundColor:Q.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,V.jsxs)(l.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e.name||e.fullname||e.username]},e.name),(0,V.jsx)(Ce.A,{fontSize:"small",sx:{color:Q.lm.DARK_RED,m:.2,cursor:"pointer"},onClick:()=>P(e.id,"remove")})]},t)))]}),(0,V.jsxs)(i.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:Q.lm.TEXT_GRAY,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,V.jsxs)(l.A,{sx:{px:1},children:["All ",c]}),b.map(((e,t)=>(0,V.jsxs)(i.A,{sx:{flexDirection:"row",backgroundColor:Q.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,V.jsxs)(l.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e.name||e.fullname||e.username]},e.name),(0,V.jsx)(je.A,{fontSize:"small",sx:{color:Q.lm.DARK_GREEN,m:.2,cursor:"pointer"},onClick:()=>P(e.id,"add")})]},t)))]})]})]})};var Ue=a(73985);const ze=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;const c=[{title:(0,pe.t)("groupName"),placeholder:(0,pe.t)("enterGroupName"),type:Q.wN.INPUT,name:"name",validator:Q.wY.REQUIRED}],[u,m]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsx)("h3",{className:"opacity-80",children:!0===d?(0,pe.t)("editNewGroup"):(0,pe.t)("addUsersGroup")}),(0,V.jsx)(B.A,{data:s,errors:u,onChange:e=>{const{name:t,value:a}=e.target;m((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:c}),(0,V.jsx)(Ue.A,{setItemss:s.metadata,setJson:e=>n((t=>({...t,metadata:e}))),title:(0,pe.t)("details")}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:r,loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})},Fe=e=>{var t;let{json:a={},icon:s}=e;return null!==(t=Object.values(a||{}))&&void 0!==t&&t.length?(0,V.jsx)(p.A,{dense:!0,disablePadding:!0,children:Object.entries(a).map((e=>{var t;let[a,n]=e;return(0,V.jsxs)(x.Ay,{dense:!0,disablePadding:!0,disableGutters:!0,alignItems:"center",className:"h-45",children:[(0,V.jsx)(o.A,{className:"h-25 w-25 mr-1 fs-10 c-gray",children:s}),(0,V.jsx)(m.A,{className:"capitalize",primary:null===a||void 0===a||null===(t=a.split("_"))||void 0===t?void 0:t.join(" "),secondary:n})]})}))}):(0,V.jsx)("p",{className:"c-gray fs-12 ml-1",children:"N/A"})};var He=a(97404);const qe=()=>{const e=(0,f.wA)(),[t,a]=((0,P.zy)(),(0,P.Zp)(),(0,y.useState)("Users")),[s,n]=(0,y.useState)([]),[r,d]=(0,y.useState)(),[c,u]=(0,y.useState)(0),[m,h]=(0,y.useState)(!1),[p,x]=(0,y.useState)(!1),[g,w]=(0,y.useState)(0),[v,j]=(0,y.useState)({name:"",metadata:{}}),{list:A,create:S,update:b,remove:_}=Ne(),{list:C,create:N,update:k,remove:E}=ke(),{list:I,create:T,update:D,remove:R}=Ee();(0,y.useEffect)((()=>{O()}),[g,t]);const O=async()=>{d("fetch");const[e,a]="Machines"===t?await A(g+1):await I(g+1);n(e),u(a),d(!1)},L=async()=>{const e={...v};d("fetch"),!0===m?"Machines"===t?await b(e):"Operators"===t?await k(e):await D(e):"Machines"===t?await S(e):"Operators"===t?await N(e):await T(e),j({name:"",metadata:{}}),x(!1),await O(),d(!1),h(!1)},M=[{id:1,title:(0,pe.t)("groupName"),render:t=>(0,V.jsx)(l.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>{e((0,He.z)({id:t.id,name:t.name})),x("addremove")},children:t.name})},{id:3,title:(0,pe.t)("details"),render:e=>Object.entries(e.metadata).map((e=>{let[t,a]=e;return t&&(0,V.jsxs)(l.A,{className:"fw-12-400",children:[(0,V.jsxs)("strong",{children:[t,":"]})," ",a]},t)}))},{id:5,title:(0,pe.t)("action"),render:e=>(0,V.jsxs)(i.A,{flexDirection:"row",children:[(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{h(!0),x("add"),j(e)},children:(0,V.jsx)(te.A,{color:"primary",fontSize:"small"})}),(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{d("fetch"),"Machines"===t?await _(e):"Operators"===t?await E(e):await R(e),await O(),d(!1)})(null===e||void 0===e?void 0:e.id),children:(0,V.jsx)(ee.A,{color:"error",fontSize:"small"})})]})}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(i.A,{sx:{flexDirection:"row",alignItems:"center",mb:1},children:(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("usersGroups")})}),(0,V.jsx)(H.A,{color:"gray",onClick:()=>x("add"),children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("addUsersGroup")})})]}),(0,V.jsx)($.A,{columns:M,rows:s,rowsPerPage:10,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:g,setPage:w,paginator:!0,tableBodyColor:Q.lm.WHITE,serialize:!0,total:c}),(0,V.jsx)(ze,{open:"add"===p,onClose:()=>{x(!1),h(!1)},data:v,edit:m,setData:j,onSubmit:L}),"addremove"===p&&(0,V.jsx)(Me,{open:"addremove"===p,onClose:()=>{x(!1)},data:v,setData:j,onSubmit:L,tab:t})]})};var Ge=a(68903),Be=a(37965),Qe=a(59761);const Ye=()=>{(0,P.Zp)();const[e,t]=(0,y.useState)([]),[a,s]=(0,y.useState)(),[n,r]=(0,y.useState)(0),[d,c]=(0,y.useState)(!1),[u,m]=(0,y.useState)(!1),[h,p]=(0,y.useState)(0),[x,g]=(0,y.useState)({name:"",metadata:{}});return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)("h1",{className:"mt-4",children:"Organization Profile"})}),(0,V.jsxs)(i.A,{sx:{backgroundColor:"#edf7ff"},children:[(0,V.jsx)(i.A,{sx:{backgroundColor:"#c5e3f7",height:"35vh"},children:(0,V.jsx)("img",{width:"100%",height:"100%",alt:"image industry",style:{objectFit:"cover"},src:"https://www.advsyscon.com/blog/wp-content/uploads/intelligent-process-automation-examples.jpg"})}),(0,V.jsx)(i.A,{sx:{backgroundColor:"yellow",height:"30vh",borderRadius:"50%",width:"18%",alignSelf:"center",mt:-15,overflow:"hidden"},children:(0,V.jsx)("img",{width:"100%",height:"100%",alt:"image industry",src:"https://wellgroomedgentleman.com/wp-content/uploads/2023/10/Tony_Stark_Beard_with_Quiff_Hairstyle.width-800.jpg"})}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"center",my:2},children:[(0,V.jsx)(o.A,{sx:{p:1,color:"black"},children:(0,V.jsx)(Be.A,{})}),(0,V.jsx)(o.A,{sx:{p:1,color:"black"},children:(0,V.jsx)(Qe.A,{})}),(0,V.jsx)(o.A,{sx:{p:1,color:"black"},children:(0,V.jsx)(T.A,{})}),(0,V.jsx)(o.A,{sx:{p:1,color:"black"},children:(0,V.jsx)(te.A,{})})]})]}),(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{gap:1,mt:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,V.jsxs)(i.A,{sx:{backgroundColor:"#edf7ff",p:1},children:[(0,V.jsx)(l.A,{variant:"h6",sx:{textTransform:"uppercase"},children:"Organizational Details"}),(0,V.jsx)(v.A,{}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:2,mt:1},children:[(0,V.jsx)(l.A,{children:"Organizational Name :"}),(0,V.jsx)(l.A,{children:"Dhoot Transmission"})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:2},children:[(0,V.jsx)(l.A,{children:"Joining Code :"}),(0,V.jsx)(l.A,{children:"SNL1234"})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:2},children:[(0,V.jsx)(l.A,{children:"Organization Type :"}),(0,V.jsx)(l.A,{children:"Dhoot Transmission"})]})]}),(0,V.jsxs)(i.A,{sx:{backgroundColor:"#edf7ff",p:1},children:[(0,V.jsx)(l.A,{variant:"h6",sx:{textTransform:"uppercase"},children:"Address Details"}),(0,V.jsx)(v.A,{}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:2,mt:1},children:[(0,V.jsx)(l.A,{children:"Address :"}),(0,V.jsx)(l.A,{children:"Hoshyarpur, Haryana 202098 "})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:2},children:[(0,V.jsx)(l.A,{children:"City :"}),(0,V.jsx)(l.A,{children:"Hoshyarpur"})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:2},children:[(0,V.jsx)(l.A,{children:"State :"}),(0,V.jsx)(l.A,{children:"Haryana"})]})]}),(0,V.jsxs)(i.A,{sx:{backgroundColor:"#edf7ff",p:1},children:[(0,V.jsx)(l.A,{variant:"h6",sx:{textTransform:"uppercase"},children:"General Details"}),(0,V.jsx)(v.A,{}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:2,mt:1},children:[(0,V.jsx)(l.A,{children:"GSTIN :"}),(0,V.jsx)(l.A,{children:"GSTIN202098 "})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:2},children:[(0,V.jsx)(l.A,{children:"Module Access :"}),(0,V.jsx)(i.A,{sx:{width:"70%"},children:(0,V.jsxs)(Ge.Ay,{sx:{gap:1},children:[(0,V.jsx)(se.A,{sx:{mb:.5,ml:.2},label:"Module 1"}),(0,V.jsx)(se.A,{sx:{mb:.5,ml:.2},label:"Module 2"}),(0,V.jsx)(se.A,{sx:{mb:.5,ml:.2},label:"Module 3"}),(0,V.jsx)(se.A,{sx:{mb:.5,ml:.2},label:"Module 4"}),(0,V.jsx)(se.A,{sx:{mb:.5,ml:.2},label:"Module 5"}),(0,V.jsx)(se.A,{sx:{mb:.5,ml:.2},label:"Module 6"})]})})]})]}),(0,V.jsxs)(i.A,{sx:{backgroundColor:"#edf7ff",p:1},children:[(0,V.jsx)(l.A,{variant:"h6",sx:{textTransform:"uppercase"},children:"Additional Details"}),(0,V.jsx)(v.A,{}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:2,mt:1},children:[(0,V.jsx)(l.A,{children:"Created On :"}),(0,V.jsxs)(l.A,{children:[fe()().format("llll")," "]})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:2},children:[(0,V.jsx)(l.A,{children:"Last Modified :"}),(0,V.jsx)(l.A,{children:fe()().format("llll")})]})]})]})]})},We=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{question_list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const i=new M.Ay,l=await i.get(`training/question-bank/?page=${e}&page_size=${a}&type=${s}&skill=${n}`,{},t,L.So);return null!==l&&void 0!==l&&l.data?(console.log("res  ",l.data),[null===l||void 0===l?void 0:l.data]):[[],0]},skill_question_list:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new M.Ay,s=await a.get(`training/skill-questions/${e}/`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},skill_list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`training/skills/?page=${e}&page_size=100`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},induction_question:async function(){const e=new M.Ay,a=await e.get("training/induction-questions/",{},t,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},hr_question:async function(){const e=new M.Ay,a=await e.get("training/miscellaneous-questions/",{},t,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},result:async e=>{const a=new M.Ay,s=await a.get(`training/update-test-results/${e}/`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},get_Test:async e=>{const a=new M.Ay,s=await a.get(`training/test-instance/${e}/`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},test_list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`training/test-masters/?page=${e}&page_size=10`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},test_list2:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`training/test-masters/?page=${e}&page_size=100`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},createTest:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post("training/test-masters/",e,t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data},assignExam:async e=>{const a=new M.Ay,s=await a.post(`training/${e.test}/test-instance/${e.operator.key}/`,{},t,(e=>(0,L.So)(e,null,"Test Successfully Assign !")));return null===s||void 0===s?void 0:s.data},addQuestion:async(e,a)=>{const s=new M.Ay,n=await s.put(`training/test-master/${e}/`,a,t,(e=>(0,L.So)(e,null,"Test Updated Successfully!")));return null===n||void 0===n?void 0:n.data},updateTest:async(e,a)=>{const s=new M.Ay,n=await s.put(`training/test-instance/${e}/`,a,t,(e=>(0,L.So)(e,null)));return null===n||void 0===n?void 0:n.data},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post("training/question-bank/",e,t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data},updateProfile:async(e,a)=>{const s=new M.Ay,n=await s.put(`${U.H.USER}-${U.H.PROFILE}/${e}/`,a,t,(e=>(0,L.So)(e,null,"User Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{if(!e)return;const a=new M.Ay,s=await a.delete(`${U.H.USER}/${e}/`,t,(e=>(0,L.So)(e,null,"User deleted successfully!")));return null===s||void 0===s?void 0:s.data},linkPlanTestMaster:async(e,a)=>{const s=new M.Ay,n=await s.put(`training/training/${e}/`,a,t,(e=>(0,L.So)(e,null)));return null===n||void 0===n?void 0:n.data}}};var Ve=a(69413),Xe=a(74605),Ze=a(51962);const Je=e=>{let{open:t,onClose:a,data:s,setData:n,onStart:r,loading:o,edit:d,setModalOpen:c,testData:u}=e;return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)(h.A,{sx:{display:"flex",gap:2},children:[(0,V.jsxs)(i.A,{sx:{width:"55%"},children:[(0,V.jsx)(i.A,{sx:{backgroundColor:Q.lm.LG_BG_BLUE,borderRadius:2,p:2},children:(0,V.jsx)(l.A,{className:"fw-600-16",children:(null===u||void 0===u?void 0:u.test.test_name)||"sass"})}),(0,V.jsxs)(i.A,{className:"fw-500-14",sx:{backgroundColor:Q.lm.LIGHT_GRAY,mt:2,borderRadius:2,p:2},children:[(0,V.jsx)(l.A,{className:"fw-500-14",children:(0,V.jsx)("strong",{children:"You are going to start the Test, Please read carefully below Instructions :- "})}),(0,V.jsxs)(i.A,{children:[(0,V.jsxs)(l.A,{className:"fw-500-14",children:["1.This test is designed to evaluate your understanding and skills - ",(0,V.jsx)("strong",{children:(null===u||void 0===u?void 0:u.test.skill)||(null===u||void 0===u?void 0:u.test.test_type)})]}),(0,V.jsxs)(l.A,{className:"fw-500-14",children:["2.Duration: The total time for the test is ",(0,V.jsxs)("strong",{children:[(null===u||void 0===u?void 0:u.test.alloted_minutes)||"-"," minutes."]})]}),(0,V.jsxs)(l.A,{className:"fw-500-14",children:["3.The test will auto-submit once the allocated time ends. ",(0,V.jsxs)("strong",{children:[(null===u||void 0===u?void 0:u.test.alloted_minutes)||"-"," minutes"]})]}),(0,V.jsx)(l.A,{className:"fw-500-14",children:"4.The test consists of multiple-choice questions."}),(0,V.jsxs)(l.A,{className:"fw-500-14",children:["5.There are ",(0,V.jsxs)("strong",{children:[(null===u||void 0===u?void 0:u.test.maximum_questions)||"-"," Questions."]})]}),(0,V.jsx)(l.A,{className:"fw-500-14",children:"6.There is no negative marking, so attempt all questions without hesitation."}),(0,V.jsx)(l.A,{className:"fw-500-14",children:"7.Each question has only one correct answer. Select the best option from the given choices."}),(0,V.jsx)(l.A,{className:"fw-500-14",children:"8.You can navigate between questions and modify your answers before submitting."}),(0,V.jsx)(l.A,{className:"fw-500-14",children:"9.The test must be completed in one sitting."}),(0,V.jsx)(l.A,{className:"fw-500-14",children:"10.After completing the test, click the Submit button to finalize your responses."})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",mt:2},children:[(0,V.jsx)(H.A,{color:"gray",children:"Back"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>{c("start"),r()},children:"Start"})]})]})]}),(0,V.jsx)(i.A,{sx:{width:"43%"},children:(0,V.jsxs)(i.A,{sx:{backgroundColor:Q.lm.LIGHT_GRAY,borderRadius:2,p:2},children:[(0,V.jsx)(l.A,{className:"fw-600-16",children:"Sample Question :"}),(0,V.jsx)(l.A,{sx:{mt:1},className:"fw-600-16",children:"Tick The Correct Options"}),(0,V.jsx)(l.A,{sx:{mt:1},className:"fw-500-14",children:"Question 1"}),(0,V.jsx)(l.A,{sx:{mt:1,mb:1},className:"fw-500-14",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}),[{option:"Answer 1",check:!0},{option:"Answer 2",check:!1},{option:"Answer 3",check:!1},{option:"Answer 4",check:!1}].map(((e,t,a)=>(0,V.jsx)(Ve.A,{sx:{mb:1.4},children:(0,V.jsx)(Xe.A,{disabled:!0,control:(0,V.jsx)(Ze.A,{className:"fw-500-14",defaultChecked:e.check}),label:e.option})},a)))]})})]})})};var Ke=a(21338);const et=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;return(0,V.jsx)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:(0,V.jsxs)(i.A,{sx:{justifyContent:"center",alignItems:"center",mt:4},children:[(0,V.jsx)(Ke.A,{sx:{width:55,height:55},color:"primary"}),(0,V.jsx)(i.A,{sx:{justifyContent:"center",alignItems:"center",mt:2,mb:2},children:(0,V.jsx)(l.A,{sx:{fontSize:20,fontWeight:"bold"},color:"primary",children:"Done !"})})]})})};var tt=a(21825);const at=e=>{let{activeQuestion:t,totalQuestions:a,setModalOpen:s,testData:n,finishTest:r}=e;(0,P.Zp)();const[o,d]=(0,y.useState)(null===n||void 0===n?void 0:n.remaining_time_in_seconds);return(0,y.useEffect)((()=>{if(o>0){const e=setTimeout((()=>{d((e=>e-1)),localStorage.setItem("time",o)}),1e3);return()=>clearTimeout(e)}o<1&&(r(),localStorage.setItem("draweWidth",190))}),[o]),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:.5,alignItems:"baseline"},children:[(0,V.jsx)(l.A,{sx:{fontWeight:500,fontSize:40},children:(0,Y.gv)(t)}),(0,V.jsxs)(l.A,{sx:{fontWeight:500,fontSize:20},children:["/",(0,Y.gv)(a)]})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1,alignItems:"center",mr:2},children:[(0,V.jsx)(tt.A,{fontSize:"large"}),(0,V.jsx)(l.A,{sx:{fontWeight:500,fontSize:18},children:(0,Y.fU)(o)})]})]})};var st=a(26240);const nt=e=>{let{highlightAnswer:t,children:a,...s}=e;const n=(0,st.A)();return(0,V.jsx)(h.A,{...s,sx:{width:"100%",fontSize:{xs:"18px",sm:"calc(18px + 2vw)",md:"calc(18px + 4vw)",lg:"16px"},color:n.palette.text.secondary,fontWeight:t?400:300,border:`1px solid ${t?n.palette.primary.main:n.palette.divider}`,backgroundColor:t?n.palette.background.selected:n.palette.background.paper,borderRadius:"16px",marginTop:"8px",cursor:"pointer",transition:t?"border 0.2s ease-in":"none","& input":{visibility:"hidden",margin:0}},children:a})},it=e=>{let{onChange:t,index:a,choice:s,type:n,correct:r}=e;const o=String.fromCharCode(65+a),[d,c]=(0,y.useState)("");return(0,V.jsxs)(i.A,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[(0,V.jsxs)(l.A,{sx:{fontWeight:!0===r?"bold":""},children:[o,"."]}),(0,V.jsx)(nt,{highlightAnswer:!0===r?"21":"",children:(0,V.jsx)(i.A,{children:(0,V.jsx)(l.A,{sx:{p:1,display:"flex",fontWeight:!0===r?"bold":""},onClick:()=>t(s),children:s})})},a)]})},lt=e=>{let{question:t,code:a,image:s,type:n,choices:r=[],selectedAnswer:o,handleAnswerSelection:d,ans:c,questionNo:u}=e;return(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{className:"fw-500-14",sx:{mb:1},children:null===t||void 0===t?void 0:t.question_text}),(0,V.jsx)(i.A,{children:r.map(((e,a)=>{var s;return(0,V.jsx)(it,{choice:e,index:a,onChange:e=>d(a+1,t.id),type:n,selectedAnswer:o,correct:(null===(s=c[u])||void 0===s?void 0:s.ans)-1===a},a)}))})]})},rt=()=>{var e;const t=new URLSearchParams(window.location.search).get("key1"),a=(0,P.zy)(),[s,n]=((0,P.Zp)(),a.state,(0,y.useState)([])),[r,o]=(0,y.useState)(),[d,c]=(0,y.useState)(0),[u,m]=(0,y.useState)(!1),[h,p]=(0,y.useState)("testDetail"),[x,g]=(0,y.useState)(0),[w,v]=(0,y.useState)({name:"",metadata:{}}),{get_Test:f,updateTest:j,result:A}=We(),[S,b]=(0,y.useState)([]),[_,C]=(0,y.useState)(0),[N,k]=(0,y.useState)([]),[E,I]=(0,y.useState)(null),[T,D]=(0,y.useState)([]),[R,$]=(0,y.useState)(),[L,M]=(0,y.useState)([]);(0,y.useEffect)((()=>{U()}),[]);const U=async()=>{o("fetch");const[e,a]=await f(t);$(e);const s=e.questions_list.map((e=>({question:e.id,ans:""})));k((e=>[...e,...s]));const n=N.map((e=>({[e.question]:0})));M((e=>[...e,...n])),c(a),o(!1)};function z(e){"pre"===e&&_>=1&&C((e=>e-1)),"next"===e&&_+1<R.questions_list.length&&C((e=>e+1))}function F(){window.opener=null,window.open("","_self"),window.close()}return(0,V.jsxs)("div",{className:"mx-3 my-2",children:["start"===h&&(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",p:1},children:[(0,V.jsxs)(i.A,{sx:{width:"78%"},children:[(0,V.jsx)(at,{finishTest:async function(){localStorage.setItem("draweWidth",190);try{let e={completed:!0,remaining_time_in_seconds:0};await j(t,e);const a=await A(t);console.log("Upload result",a),p("timeUps"),setTimeout((()=>{F()}),3e3)}catch(Le){console.error("Error in the timer flow:",Le),O.oR.error(Le)}},activeQuestion:_+1,totalQuestions:R.questions_list.length,setModalOpen:p,testData:R}),(0,V.jsx)(lt,{question:R.questions_list[_],choices:null===(e=R.questions_list[_])||void 0===e?void 0:e.question_options,type:"MAQs",handleAnswerSelection:(e,a)=>{!async function(e,a){let s=localStorage.getItem("time"),n={answers:{[a]:e},remaining_time_in_seconds:s};await j(t,n)}(e,a),k((t=>{const s=t.findIndex((e=>e.question===a));if(-1!==s){const n=[...t];return n[s]={question:a,ans:e},n}return[...t,{question:a,ans:e}]}))},ans:N,questionNo:_}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",mt:3},children:[(0,V.jsx)(H.A,{color:"light_green",onClick:()=>z("pre"),children:"Previous"}),_===R.questions_list.length-1?(0,V.jsx)(H.A,{color:"light_green",onClick:()=>async function(){localStorage.setItem("draweWidth",190),localStorage.setItem("time",0),await j(t,{completed:!0}),await A(t),p("timeUps"),setTimeout((()=>{F()}),3e3)}(),children:(0,V.jsx)(l.A,{children:(0,pe.t)("submit")})}):(0,V.jsx)(H.A,{color:"light_green",onClick:()=>z("next"),children:(0,V.jsx)(l.A,{children:(0,pe.t)("next")})})]})]}),(0,V.jsxs)(i.A,{sx:{width:"18%",boxShadow:3,p:1,py:2,borderRadius:2,justifyContent:"space-between"},children:[(0,V.jsx)(Ge.Ay,{display:"grid",gap:1,gridTemplateColumns:{sm:"repeat(5, 1fr)",xs:"repeat(5, 1fr)"},children:N.map(((e,t)=>(0,V.jsx)(i.A,{sx:{backgroundColor:e.ans?"#86D56A":"#3E3E3E",justifyContent:"center",alignItems:"center",borderRadius:1,width:22,height:22,cursor:"pointer"},onClick:()=>C(t),children:(0,V.jsx)(l.A,{style:{fontSize:"12px",fontWeight:"bold"},sx:{color:e.ans?"black":"white",textAlign:"center"},children:t+1})},t)))}),(0,V.jsxs)(i.A,{sx:{},children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1},children:[(0,V.jsx)(i.A,{sx:{backgroundColor:"#86D56A",justifyContent:"center",alignItems:"center",borderRadius:1,width:22,height:22}}),(0,V.jsx)(l.A,{sx:{mb:1,fontWeight:"bold"},children:"Answered"})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1},children:[(0,V.jsx)(i.A,{sx:{backgroundColor:"#3E3E3E",justifyContent:"center",alignItems:"center",borderRadius:1,width:22,height:22}}),(0,V.jsx)(l.A,{sx:{fontWeight:"bold"},children:"Not Answered"})]})]})]})]}),"testDetail"===h&&(0,V.jsx)(Je,{testData:R,setModalOpen:p,onStart:async()=>{await j(t,{started:!0})}}),(0,V.jsx)(et,{open:"timeUps"===h,onClose:()=>p(!1)}),(0,V.jsx)(ge,{onClose:()=>p(!1),open:"csvUser"===h,onSubmit:function(){const e=[];T.slice(1).forEach((t=>{const a=t[0],s=t[t.length-1],n=new Set;t.slice(1).forEach((e=>{""!==e&&n.add(e)}));const i={question:a,choices:Array.from(n),answer:s};e.push(i),console.log("Processed object",i)})),console.log("All results",e)},file:E,setFile:I,setCsvData:D})]})};var ot=a(728);const dt=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:d,tab:c,skills:u}=e;const[m,h]=(0,y.useState)(new Map),[p,x]=(0,y.useState)(0),[g,w]=(0,y.useState)([]),[v,f]=(0,y.useState)([]),[j,A]=(0,y.useState)([]),{question_list:S,skill_question_list:b,induction_question:_,hr_question:C,create:N,update:k,remove:E}=We(),[I,T]=(0,y.useState)({skill:""}),[D,R]=(0,y.useState)([]),[P,O]=(0,y.useState)({}),[L,M]=(0,y.useState)([]),[U,z]=(0,y.useState)([]),[F,G]=(0,y.useState)("");(0,y.useEffect)((()=>{""===I.skill&&""===I.skill||Y()}),[I.skill]),(0,y.useEffect)((()=>{X(),Z()}),[]);const Y=async()=>{const[e,t]=await b(1,I.skill?I.skill:s.skill);!function(e){w([]);const t=e.filter((e=>!0===e.compulsory)),a=e.filter((e=>!1===e.compulsory));console.log("compulsoryList",t.length,"List",a.length),w((e=>[...e,...a])),f((e=>[...e,...t]))}(e)},X=async()=>{const[e,t]=await _();z(e)},Z=async()=>{const[e,t]=await C();M(e)};const J=[{title:(0,pe.t)("questionType"),placeholder:(0,pe.t)("questionType"),type:Q.wN.SELECT,name:"tranning",validator:Q.wY.REQUIRED,keyValues:[{value:"Induction",key:"Induction"},{value:"Skill",key:"Skill"},{value:"HR",key:"HR"}]},"Skill"===I.tranning&&{title:(0,pe.t)("skill"),placeholder:(0,pe.t)("selectSkill"),type:Q.wN.SELECT,name:"skill",validator:Q.wY.REQUIRED,keyValues:u}],K=[{id:122,title:"",render:e=>(0,V.jsx)(Ve.A,{children:(0,V.jsx)(Xe.A,{control:(0,V.jsx)(Ze.A,{defaultChecked:e.checked,onChange:t=>((e,t)=>{const a=P[F].findIndex((e=>e.id===t));console.log("index of sel",a),O((t=>({...t,[F]:t[F].map(((t,s)=>s===a?{...t,checked:e}:t))}))),A((a=>e?[...a,t]:a.filter((e=>e!==t))))})(t.target.checked,e.id)})})},e.id)},{id:1,title:(0,pe.t)("question"),render:e=>e.question_text},{id:2,title:(0,pe.t)("compulsory"),render:e=>!0===e.compulsory?"Yes":"No"},{id:3,title:(0,pe.t)("questionLevel"),render:e=>e.skill_level||"-"}];return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(800px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsx)("h3",{className:"opacity-80",children:(0,pe.t)("addQuestions")}),(0,V.jsx)(i.A,{sx:{gap:1,alignItems:"flex-start"},children:(0,V.jsx)(B.A,{data:I,errors:m,onChange:async e=>{const{name:t,value:a}=e.target;if("skill"===t&&"Skill"!==t&&"Skill"!==a){let e=u.filter((e=>a===e.key))[0].value;G(e);const[t,s]=await b(1,a),n=t.map((e=>({...e,checked:e.compulsory})));R((t=>t.includes(e)?t:[...t,e])),O((t=>t.hasOwnProperty(e)?t:{...t,[e]:n}))}if("skill"!==t&&"Skill"!==t&&"Skill"!==a){const e=("Induction"===a?U:L).map((e=>({...e,checked:e.compulsory})));console.log("value question",a),G(a),O((t=>t.hasOwnProperty(a)?t:{...t,[a]:e})),R((e=>e.includes(a)?e:[...e,a]))}T((e=>({...I,[t]:a}))),console.log("name or value------\x3e",P)},schema:J})}),(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:2,mt:2,border:1,borderColor:Q.lm.LIGHT_GRAY,borderTopLeftRadius:5,borderTopRightRadius:5,width:"fit-content"},children:D.map(((e,t)=>(0,V.jsxs)(i.A,{sx:{p:.5,flexDirection:"row",gap:1,borderRight:1,borderColor:Q.lm.LIGHT_GRAY},children:[(0,V.jsx)(l.A,{onClick:()=>{G(e)},sx:{fontSize:14,color:F===e?"black":Q.lm.GRAY},children:e}),(0,V.jsx)(o.A,{sx:{height:14,width:14,cursor:"pointer"},onClick:()=>(e=>{R((t=>t.filter((t=>t!==e))));const{[e]:t,...a}=P;O(a)})(e),children:(0,V.jsx)(ot.A,{color:F===e?"black":Q.lm.LG_GRAY,fontSize:"small"})})]})))}),(0,V.jsx)(i.A,{sx:{},children:(0,V.jsx)($.A,{columns:K,rows:D.length>0?P[F]:[],rowsPerPage:10,loading:"fetch"===d,titleCellClasses:"c-gray fw-700"})}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:()=>{0===p?(h(new Map),n({}),x(0),a()):x((e=>e-1))},children:(0,pe.t)("back")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{let e=D.map((e=>P[e].filter((e=>!0===e.checked)))).flat();await r(e)},loading:d,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:1===p?(0,pe.t)("create"):(0,pe.t)("next")})})]})]})},ct=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,tab:d,setSelectedQuestions:c,skills:u,users:m,testList:h}=e;const[p,x]=(0,y.useState)(new Map),[g,w]=(0,y.useState)(0),[v,f]=(0,y.useState)([]),j=[{title:(0,pe.t)("admins"),placeholder:(0,pe.t)("selectAdmin"),type:Q.wN.SELECT,name:"admins",validator:Q.wY.REQUIRED,keyValues:m,multi:!0,height:"auto"}];return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-5",children:[(0,V.jsx)("h3",{className:"opacity-80",children:(0,pe.t)("assignAdmins")}),(0,V.jsx)(B.A,{data:s,errors:p,onChange:e=>{const{name:t,value:a}=e.target;x((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:j}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{if(0!==g);else{const e=(0,Y.bG)(j,s);if(x(e),e.size)return;await r()}},loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("next")})})]})]})},ut=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,tab:d,setSelectedQuestions:c,skills:u,users:m,testList:h}=e;const[p,x]=(0,y.useState)(new Map),[g,w]=(0,y.useState)(0),[v,f]=(0,y.useState)([]),j=[{title:(0,pe.t)("testType"),placeholder:(0,pe.t)("selectTestType"),type:Q.wN.SELECT,name:"tranning_type",validator:Q.wY.REQUIRED,keyValues:[{value:"Induction Training",key:"Induction Training"},{value:"Skill Test",key:"Skill Test"},{value:"Tranning Test",key:"Tranning Test"}]},"Skill Test"===s.tranning_type&&{title:(0,pe.t)("skill"),placeholder:"Select Skill",type:Q.wN.SELECT,name:"skill",validator:Q.wY.REQUIRED,keyValues:u},"Skill Test"===s.tranning_type&&{title:(0,pe.t)("testLevel"),placeholder:(0,pe.t)("selectTestLevel"),type:Q.wN.SELECT,name:"level",validator:Q.wY.REQUIRED,keyValues:[{value:"Level 1",key:1},{value:"Level 2",key:2},{value:"Level 3",key:3}]},{title:(0,pe.t)("testName"),placeholder:(0,pe.t)("enterTestName"),type:Q.wN.INPUT,name:"testname",validator:Q.wY.NAME},{title:(0,pe.t)("maxQuestion"),placeholder:(0,pe.t)("enterNumberOfQuestion"),type:Q.wN.INPUT,inputType:"number",name:"totalQuestion",validator:Q.wY.REQUIRED},"Skill Test"!==s.tranning_type&&{title:(0,pe.t)("examPassingCriteria"),placeholder:(0,pe.t)("enterPassingCriteria"),type:Q.wN.INPUT,name:"passing_criteria",inputType:"number",validator:Q.wY.REQUIRED},{title:(0,pe.t)("timeInMin"),placeholder:(0,pe.t)("enterTimeInMin"),type:Q.wN.INPUT,name:"time",inputType:"number",validator:Q.wY.REQUIRED}];return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsx)("h3",{className:"opacity-80",children:(0,pe.t)("createTest")}),(0,V.jsx)(B.A,{data:s,errors:p,onChange:e=>{const{name:t,value:a}=e.target;x((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:j}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{if(0!==g);else{const e=(0,Y.bG)(j,s);if(x(e),e.size)return;await r()}},loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("next")})})]})]})},mt=()=>{const e=(0,P.zy)(),t=((0,P.Zp)(),e.state),[a,s]=(0,y.useState)([]),[n,r]=(0,y.useState)(),[d,c]=(0,y.useState)(0),[u,m]=(0,y.useState)(!1),[h,p]=(0,y.useState)("testDetail"),[x,g]=(0,y.useState)(0),[w,v]=(0,y.useState)({name:"",tranning_type:"",metadata:{},skill:""}),{question_list:f,skill_list:j,test_list:A,assignExam:S,createTest:b,update:_,linkPlanTestMaster:C,addQuestion:N}=We(),{list:k,activeUsers:E}=F(),[I,T]=(0,y.useState)(new Map),[D,R]=(0,y.useState)([]),[O,L]=(0,y.useState)([]),[M,U]=(0,y.useState)([]),[z,q]=(0,y.useState)(""),G=[{id:1,title:(0,pe.t)("testName"),render:e=>(0,V.jsx)(l.A,{children:e.test_name})},{id:2,title:(0,pe.t)("testType"),render:e=>(0,V.jsx)(l.A,{children:e.test_type})},{id:3,title:(0,pe.t)("skill"),render:e=>(0,V.jsx)(l.A,{children:e.skill})},{id:4,title:(0,pe.t)("skillLevel"),render:e=>(0,V.jsx)(l.A,{children:e.skill_level})},{id:5,title:(0,pe.t)("maximumQuestions"),render:e=>(0,V.jsx)(l.A,{children:e.maximum_questions})},{id:6,title:(0,pe.t)("questionsInTest"),render:e=>(0,V.jsx)(l.A,{children:e.questions_master.length})},{id:7,title:(0,pe.t)("allotedMinutes"),render:e=>(0,V.jsx)(l.A,{children:e.alloted_minutes})},{id:8,title:(0,pe.t)("admins"),render:e=>(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1},children:[(0,V.jsx)(i.A,{sx:{flexDirection:"column"},children:e.admin.map(((e,t)=>(0,V.jsx)(l.A,{sx:{textTransform:"capitalize"},children:e.username},t)))}),(0,V.jsx)(ye.A,{title:"add admins",children:(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{q(e.id),p("addAssign"),v({...w,admins:e.admin.map((e=>e.id))})},children:(0,V.jsx)(je.A,{color:"primary",fontSize:"small"})})})]})})}];(0,y.useEffect)((()=>{console.log("planData----",t),p(!!t&&"createTest"),W(),Y()}),[]),(0,y.useEffect)((()=>{B()}),[x]);const B=async()=>{const[e]=await A(x+1);console.log("test master-------",e.count),c(e.count),U(e.results)},Y=async()=>{const e=await E(x+1);console.log("active users--------",e),s(e)},W=async()=>{r("fetch");const[e]=await j(x+1),t=e.results.map((e=>({value:e.skill_name,key:e.id})));L((e=>[...e,...t])),r(!1)};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(i.A,{sx:{flexDirection:"row",alignItems:"center",mb:1},children:(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("testMaster")})}),(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:1},children:(0,V.jsx)(H.A,{color:"gray",onClick:()=>p("createTest"),children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("createTest")})})})]}),(0,V.jsx)($.A,{columns:G,rows:M,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:x,setPage:g,paginator:!0,serialize:!0,total:d,tableBodyColor:Q.lm.WHITE}),(0,V.jsx)(ut,{open:"createTest"===h,onClose:()=>{p(!1)},onSubmit:async()=>{const e={test_name:w.testname,test_type:w.tranning_type,skill:w.skill,skill_level:parseInt(w.level),maximum_questions:parseInt(w.totalQuestion),alloted_minutes:parseInt(w.time)},t={test_name:w.testname,test_type:w.tranning_type,maximum_questions:parseInt(w.totalQuestion),passing_criteria:w.passing_criteria,alloted_minutes:parseInt(w.time)},a=await b("Skill Test"!==w.tranning_type?t:e);a.id&&(q(a.id),p("addQues"))},skills:O,data:w,setData:v}),(0,V.jsx)(dt,{open:"addQues"===h,onClose:()=>{p(!1)},onSubmit:async e=>{const a=e.map((e=>e.id)),s={questions:a};await N(z,s),t&&await C(t.id,{test_master:z,training_admin:t.training_admin,trainees:t.trainees}),v({}),p(!1),await B()},selectQuestions:D,setSelectedQuestions:R,skills:O,data:w,setData:v}),(0,V.jsx)(ct,{open:"addAssign"===h,onClose:()=>{p(!1)},onSubmit:async()=>{const e={admin:w.admins};await N(z,e),p(!1),v({}),await B()},users:a,testList:M,data:w,setData:v})]})};var ht=a(96012);const pt=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,tab:d,edit:c,selectSkill:u,user:m}=e;const[h,p]=(0,y.useState)(new Map),[x,g]=(0,y.useState)(0),[w,v]=(0,y.useState)(1),[f,j]=(0,y.useState)(1),A=/^[A-Za-z\s]*$/,S=e=>{const{name:t,value:a}=e.target;n((e=>({...e,[t]:a})))},b=async()=>{if(""!==s.skill_name)return await r(),v(1),void j(1)};return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsx)("h3",{className:"opacity-80",children:!0===c?(0,pe.t)("editSkill"):(0,pe.t)("addingSkill")}),(0,V.jsxs)("div",{style:{display:"flex",gap:5},className:"fw-16 mb-1",children:[f>1&&(0,V.jsxs)(l.A,{sx:{cursor:"pointer"},onClick:()=>v(1),children:[(0,pe.t)("level")," 1 >"]}),f>1&&(0,V.jsxs)(l.A,{sx:{cursor:"pointer"},onClick:()=>v(2),children:[(0,pe.t)("level")," 2 >"]}),f>2&&(0,V.jsxs)(l.A,{sx:{cursor:"pointer"},onClick:()=>v(3),children:[(0,pe.t)("level")," 3"]})]}),(0,V.jsxs)("div",{style:{display:"grid",gap:10},children:[1===w&&(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:(0,pe.t)("enterSkillName")}),(0,V.jsx)(G.A,{name:"skill_name",value:s.skill_name,onChange:S,disabled:!0===c,width:"500px"}),(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:(0,pe.t)("addSupervisor")}),(0,V.jsx)(ht.A,{name:"supervisor_one",width:"100%",onChange:S,value:s.supervisor_one,keyValues:m,multi:!0,height:"auto"})]}),1===w&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(l.A,{sx:{textAlign:"center"},onClick:()=>console.log("supervisor",s),children:[(0,pe.t)("level")," 1"]}),(0,V.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:(0,pe.t)("addDays")}),(0,V.jsx)(G.A,{type:"number",name:"days_1",value:s.days_1,width:"500px",onChange:S})]}),(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:(0,pe.t)("examPassingCriteria")}),(0,V.jsx)(G.A,{type:"number",name:"exam_1",value:s.exam_1,onChange:S,width:"500px"})]}),(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:(0,pe.t)("floorWorkCriteria")}),(0,V.jsx)(G.A,{type:"number",name:"floor_1",value:s.floor_1,onChange:S,width:"500px"})]}),(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:(0,pe.t)("numberOfEntry")}),(0,V.jsx)(G.A,{type:"number",name:"entry_1",value:s.entry_1,onChange:S,width:"500px"})]})]})]}),2===w&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(l.A,{sx:{textAlign:"center"},children:[(0,pe.t)("level")," 2"]}),(0,V.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:(0,pe.t)("addDays")}),(0,V.jsx)(G.A,{type:"number",name:"days_2",value:s.days_2,width:"500px",onChange:S})]}),(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:(0,pe.t)("examPassingCriteria")}),(0,V.jsx)(G.A,{type:"number",name:"exam_2",value:s.exam_2,onChange:S,width:"500px"})]}),(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:(0,pe.t)("floorWorkCriteria")}),(0,V.jsx)(G.A,{type:"number",name:"floor_2",value:s.floor_2,onChange:S,width:"500px"})]}),(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:(0,pe.t)("numberOfEntry")}),(0,V.jsx)(G.A,{type:"number",name:"entry_2",value:s.entry_2,onChange:S,width:"500px"})]})]})]}),3===w&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(l.A,{sx:{textAlign:"center"},children:[(0,pe.t)("level")," 3"]}),(0,V.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:(0,pe.t)("addDays")}),(0,V.jsx)(G.A,{type:"number",name:"days_3",value:s.days_3,width:"500px",onChange:S})]}),(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:(0,pe.t)("examPassingCriteria")}),(0,V.jsx)(G.A,{type:"number",name:"exam_3",value:s.exam_3,onChange:S,width:"500px"})]}),(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:(0,pe.t)("floorWorkCriteria")}),(0,V.jsx)(G.A,{type:"number",name:"floor_3",value:s.floor_3,onChange:S,width:"500px"})]}),(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:(0,pe.t)("numberOfEntry")}),(0,V.jsx)(G.A,{type:"number",name:"entry_3",value:s.entry_3,onChange:S,width:"500px"})]})]})]})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,px:8,children:[(0,V.jsx)(H.A,{bordered:!0,color:"light_green",disabled:3===w,onClick:()=>{console.log("data skill-----\x3e>",A.test(s.skill_name)),!0===A.test(s.skill_name)&&""!==s.skill_name&&void 0!==s.skill_name?(w<=3&&v((e=>e+1)),f<=3&&j((e=>e+1))):O.oR.warn("Enter Vaild Skill Name",s.skill_name)},children:(0,V.jsx)(l.A,{color:Q.lm.TEXT_GRAY,children:!0===c?(0,pe.t)("next"):(0,pe.t)("addLevel")})}),!0===c?(0,V.jsx)(H.A,{color:"light_green",onClick:b,loading:o,children:(0,V.jsx)(l.A,{color:Q.lm.BLACK,children:(0,pe.t)("submit")})}):(0,V.jsx)(H.A,{color:"light_green",disabled:3!=w,onClick:b,loading:o,children:(0,V.jsx)(l.A,{color:Q.lm.BLACK,children:(0,pe.t)("submit")})})]})]})},xt=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,tab:d}=e;return(0,V.jsxs)(q.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,V.jsx)("h3",{className:"opacity-80",children:"ADD REPORT"}),(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{pt:1,gap:1},gridTemplateColumns:{sm:"repeat(4, 1fr)",xs:"repeat(4, 1fr)"},children:[(0,V.jsx)(l.A,{sx:{fontWeight:"bold"},children:"S no"}),(0,V.jsx)(l.A,{sx:{fontWeight:"bold"},children:"Item Name"}),(0,V.jsx)(l.A,{sx:{fontWeight:"bold"},children:"Plan"}),(0,V.jsx)(l.A,{sx:{fontWeight:"bold"},children:"Actual"}),[{itemName:"item 1",plan:1e3},{itemName:"item 2",plan:800},{itemName:"item 3",plan:1e3}].map(((e,t)=>(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(l.A,{children:t+1}),(0,V.jsx)(l.A,{sx:{textTransform:"capitalize"},children:e.itemName}),(0,V.jsx)(l.A,{children:e.plan}),(0,V.jsx)("input",{type:"text"})]})))]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,V.jsx)(H.A,{onClick:r,loading:o,children:"Create"})]})]})},gt=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:l,loading:r,user:o}=e;const[d,c]=(0,y.useState)(new Map),u=[{title:(0,pe.t)("supervisor"),placeholder:"Select Supervisor",type:Q.wN.SELECT,name:"supervisor",multi:!0,height:"auto",keyValues:o}];return(0,V.jsxs)(q.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,V.jsx)("h3",{className:"opacity-80",children:(0,pe.t)("addSupervisor")}),(0,V.jsx)(B.A,{data:s,errors:d,onChange:e=>{const{name:t,value:a}=e.target;c((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:u}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{onClick:l,loading:r,children:(0,pe.t)("create")})]})]})},wt=()=>{const[e,t]=(0,y.useState)("Users"),[a,s]=(0,y.useState)([]),[n,r]=(0,y.useState)([]),[d,c]=(0,y.useState)(),[u,m]=(0,y.useState)(0),[h,p]=(0,y.useState)(!1),[x,g]=(0,y.useState)([]),[w,v]=(0,y.useState)(0),[f,j]=(0,y.useState)(null),[A,S]=(0,y.useState)({days_1:"",days_2:"",days_3:"",supervisor_one:"",supervisor_two:"",supervisor_three:"",exam_1:"",exam_2:"",exam_3:"",floor_1:"",floor_2:"",floor_3:"",entry_1:"",entry_2:"",entry_3:""}),{list:b,create:_,updateSkill:C,update:N,addSupervisor:k,remove:E,opratorList:I,createOperator:T,removeOperator:D,updateOperator:R}=be(),[P,O]=(0,y.useState)(!1),[L,M]=(0,y.useState)(""),{activeUsers:U}=F(),[z,q]=(0,y.useState)();(0,y.useEffect)((()=>{B()}),[w,e]),(0,y.useEffect)((()=>{G()}),[]);const G=async()=>{c("fetch");const e=await U(w+1);s(e)},B=async()=>{c("fetch");const[e,t]=await b(w+1);console.log("_list--------------",e),r(e.results),m(e.count),c(!1)},Y=async()=>{const e={skill_name:A.skill_name,test_performance_criteria:[A.exam_1,A.exam_2,A.exam_3],duration_between_two_tests:[A.days_1,A.days_2,A.days_3],floor_performance_criteria:[parseInt(A.floor_1),parseInt(A.floor_2),parseInt(A.floor_3)],no_of_performance_entries:[parseInt(A.entry_1),parseInt(A.entry_2),parseInt(A.entry_3)]};if(c("fetch"),!1===P){let t=await _(e);W(t.id),console.log("add skill respose----",t)}else{await C(e,L);W(L)}};async function W(e){const t={add:{...A}.supervisor_one};await k(e,t),p(!1),S({}),await B(),c(!1)}const X=[{id:1,title:(0,pe.t)("skillName"),render:e=>e.skill_name},{id:112,title:(0,pe.t)("noOfEntries"),render:e=>(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:.3},children:e.no_of_performance_entries.map(((t,a)=>(0,V.jsxs)(l.A,{children:[t,a<e.no_of_performance_entries.length-1&&","]})))})},{id:113,title:(0,pe.t)("admins"),render:e=>(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:.3},children:e.supervisor_list.map(((t,a)=>(0,V.jsxs)(l.A,{sx:{fontSize:14},children:[t.username,a<e.supervisor_list.length-1&&","]})))})},{id:6,title:(0,pe.t)("action"),render:e=>(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(i.A,{flexDirection:"row",sx:{gap:1},children:(0,V.jsx)(ye.A,{title:"edit skill",children:(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{O(!0),p("add"),q(e),S({...A,skill_name:e.skill_name,supervisor_one:e.supervisor_list.map((e=>e.id)),days_1:e.duration_between_two_tests[0],days_2:e.duration_between_two_tests[1],days_3:e.duration_between_two_tests[2],exam_1:e.test_performance_criteria[0],exam_2:e.test_performance_criteria[1],exam_3:e.test_performance_criteria[2],floor_1:e.floor_performance_criteria[0],floor_2:e.floor_performance_criteria[1],floor_3:e.floor_performance_criteria[2],entry_1:e.no_of_performance_entries[0],entry_2:e.no_of_performance_entries[1],entry_3:e.no_of_performance_entries[2]}),M(e.id)},children:(0,V.jsx)(te.A,{color:"primary",fontSize:"small"})})})})})}];return(0,V.jsxs)("div",{className:"mx-3 my-2 fw-500",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("skill")}),(0,V.jsx)(i.A,{justifyContent:"flex-end",direction:"row",sx:{mb:1},children:(0,V.jsx)(H.A,{color:"gray",onClick:()=>{p("add"),S({})},children:(0,V.jsxs)(l.A,{className:"fw-20-500-24",children:["+ ",(0,pe.t)("createSkill")]})})})]}),(0,V.jsx)($.A,{columns:X,rows:n,rowsPerPage:10,loading:"fetch"===d,titleCellClasses:"fw-700",page:w,setPage:v,paginator:!0,serialize:!0,total:u,tableBodyColor:Q.lm.WHITE}),(0,V.jsx)(pt,{selectSkill:z,open:"add"===h,onClose:()=>{p(!1),O(!1)},data:A,setData:S,onSubmit:Y,loading:"add"===d,edit:P,user:a}),(0,V.jsx)(gt,{open:"addSuper"===h,onClose:()=>{p(!1),O(!1)},data:A,setData:S,onSubmit:W,loading:"add"===d,user:a}),(0,V.jsx)(xt,{open:"Report"===h,onClose:()=>p(!1),onSubmit:Y}),(0,V.jsx)(ge,{onClose:()=>p(!1),open:"csvUser"===h,onSubmit:async()=>{x.map((async t=>{if("Users"===e){if(""===t.email)return;await _(t)}else{if(""===t.employee_id)return;await T(t)}})),p(!1),await B(w=1)},file:f,setFile:j,setCsvData:g,tab:e})]})},yt=()=>{const e=(0,P.zy)(),[t,a]=((0,P.Zp)(),e.state,(0,y.useState)(0)),[s,n]=(0,y.useState)([]),[r,o]=(0,y.useState)([{value:"All",key:"All"},{value:"Induction",key:"Induction"},{value:"Training",key:"Training"}]),[d,c]=(0,y.useState)(),[u,m]=(0,y.useState)(0),[h,p]=(0,y.useState)(!1),[x,g]=(0,y.useState)("testDetail"),[w,v]=(0,y.useState)(0),[f,j]=(0,y.useState)({name:"",metadata:{}}),{question_list:A,skill_list:S,create:b,update:_,remove:C}=We(),[N,k]=(0,y.useState)(null),[E,I]=(0,y.useState)([]),[T,D]=(0,y.useState)(new Map),[R,L]=(0,y.useState)([]),[M,U]=(0,y.useState)([]),[z,F]=(0,y.useState)(10),[q,G]=(0,y.useState)(""),[Y,W]=(0,y.useState)("");(0,y.useEffect)((()=>{Z()}),[]),(0,y.useEffect)((()=>{X(w||1,z,q,Y)}),[t,w]);const X=async(e,t,a,s)=>{c("fetch");const[n,i]=await A(e,t,a,s);m(n.count),console.log("_count----------------\x3e>",n),U(n.results),L(n.results),c(!1)},Z=async()=>{c("fetch");const[e]=await S(w+1),t=e.results.map((e=>({value:e.skill_name,key:e.id})));n((e=>[...e,...t]));const a=e.results.map((e=>({value:e.skill_name,key:e.skill_name})));o((e=>[...e,...a])),c(!1)},ee=[{title:(0,pe.t)("testType"),placeholder:(0,pe.t)("selectTest"),type:Q.wN.SELECT,name:"tranning_type",validator:Q.wY.REQUIRED,keyValues:[{value:"Induction Training",key:"Induction Training"},{value:"Skill Test",key:"Skill Test"},{value:"Tranning Test",key:"Tranning Test"}]},"Skill Test"===f.tranning_type&&{title:(0,pe.t)("skill"),placeholder:(0,pe.t)("selectSkill"),type:Q.wN.SELECT,name:"skill",validator:Q.wY.REQUIRED,keyValues:s},"Skill Test"===f.tranning_type&&{title:(0,pe.t)("tranningLevel"),placeholder:(0,pe.t)("selectTestLevel"),type:Q.wN.SELECT,name:"level",validator:Q.wY.REQUIRED,keyValues:[{value:"Level 1",key:1},{value:"Level 2",key:2},{value:"Level 3",key:3}]}],te=[{placeholder:(0,pe.t)("filterBySkill"),type:Q.wN.SELECT,name:"questionFilter",validator:Q.wY.REQUIRED,keyValues:r}],ae=[{id:1,title:(0,pe.t)("question"),render:e=>e.question_text},{id:2,title:(0,pe.t)("skill"),render:e=>e.skill},{id:3,title:(0,pe.t)("skillLevel"),render:e=>e.skill_level?(0,pe.t)("level")+" "+e.skill_level:"-"},{id:33,title:(0,pe.t)("inductionQuestion"),render:e=>!0===e.induction_question?(0,pe.t)("yes"):(0,pe.t)("no")},{id:4,title:(0,pe.t)("compulsory"),render:e=>!0===e.compulsory?(0,pe.t)("yes"):(0,pe.t)("no")}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)(i.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("questionBank")})})}),(0,V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,V.jsx)(J.A,{value:t,onChange:(e,t)=>{a(t),v(0)},className:"mb-2 fw-500",children:[(0,pe.t)("list"),(0,pe.t)("upload")].map(((e,t)=>(0,V.jsx)(K.A,{label:e,className:"fw-500",value:t},t)))}),0===t&&(0,V.jsx)(B.A,{data:f,errors:T,onChange:async e=>{const{name:t,value:a}=e.target;console.log("handle filter----",t,a),D((e=>(e.delete(t),e))),j((e=>({...e,[t]:a}))),"Induction"===a?(v(0),G("induction"),W(""),await X(1,z,"induction")):"Training"===a?(v(0),G("training"),W(""),await X(1,z,"training")):"Training"!==a&&"Induction"!==a&&"All"!==a&&""!==a?(v(0),G("skill"),W(a),await X(1,z,"skill",a)):"All"===a&&(v(0),G(""),W(""),console.log("Alllll------------",q),c("fetch"),await X(1,10))},schema:te})]}),1===t&&(0,V.jsx)(i.A,{sx:{alignItems:"flex-start",pl:3},children:(0,V.jsxs)(i.A,{children:[(0,V.jsx)(B.A,{data:f,errors:T,onChange:e=>{const{name:t,value:a}=e.target;"tranning_type"===t&&j({...f,skill:"",level:""}),D((e=>(e.delete(t),e))),j((e=>({...e,[t]:a})))},schema:ee}),(0,V.jsx)(H.A,{color:"gray",onClick:()=>g("csvUser"),children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("uploadCsvFile")})})]})}),0===t&&(0,V.jsx)(V.Fragment,{children:(0,V.jsx)($.A,{columns:ae,rows:R,rowsPerPage:z,loading:"fetch"===d,titleCellClasses:"c-gray fw-700",page:w,setPage:v,paginator:!0,serialize:!0,total:u,tableBodyColor:Q.lm.WHITE})}),(0,V.jsx)(ge,{tab:"question",onClose:()=>g(!1),open:"csvUser"===x,onSubmit:async function(){c("fetch"),E.slice(1).forEach((async e=>{const t=e[0],a=e[1],s=e[e.length-1],n=new Set;e.slice(2).forEach((e=>{""!==e&&n.add(e)}));const i=Array.from(n);i.pop();const l={compulsory:"TRUE"===t,question_text:a,question_options:i,correct_answer:parseInt(s),induction_question:"Induction Training"===f.tranning_type},r={compulsory:"TRUE"===t,question_text:a,question_options:i,correct_answer:parseInt(s),skill:f.skill,skill_level:f.level,induction_question:!1};await b("Skill Test"===f.tranning_type?r:l)})),g(!1),c(!1),O.oR.success("Question are uploaded in question bank."),await X(1,10),a(0),j({})},file:N,setFile:k,setCsvData:I})]})};a(43606),a(66885);var vt=a(93141),ft=a(22019);function jt(e){let{title:t,chartColors:a,...s}=e;const n={chart:{width:150,type:"pie",animations:{enabled:!1}},dataLabels:{enabled:!1},legend:{show:!1},tooltip:{enabled:!1},colors:a,responsive:[{breakpoint:480,options:{chart:{},legend:{position:"bottom"}}}]};return(0,V.jsx)(i.A,{sx:{},dir:"ltr",children:(0,V.jsx)(ft.A,{type:"pie",series:[25,25,25,25],options:n})})}var At=a(207),St=a(19090);const bt=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{skillMatrixList:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;const n=new M.Ay,i=await n.get(`training/all-skill-matrix/?skill_id=${0==a?"":a}&aadhar=${s}&page=${e}&page_size=5`,{},t,L.So);return null!==i&&void 0!==i&&i.data?(console.log("res  ",i.data),null===i||void 0===i?void 0:i.data):[[],0]},list:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new M.Ay,s=await a.get(`training/${e}/skill-matrix/`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),null===s||void 0===s?void 0:s.data):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.post(`${U.H.ASSET}/${a}/${U.H.PLANTS}/`,e,t,(e=>(0,L.So)(e,null,"Plant created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.PLANT}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Plant Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.ASSET}/${U.H.PLANT}/${e}/`,t,(e=>(0,L.So)(e,null,"Plant deleted successfully!")));return null===s||void 0===s?void 0:s.data},postPerformance:async e=>{const a=new M.Ay,s=await a.post(`performance-record/${e.operator}/`,{skill:e.skill,skill_level:e.skill_level},t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data},getPerformanceSkill:async e=>{const a=new M.Ay,s=await a.get(`training/update-skill/${e.operator}/`,{},t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data},performanceRecord:async e=>{const a=new M.Ay,s=await a.post(`training/${e.operator}/performance-record/`,{skill:e.skill,skill_level:e.skill_level},t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data},putPerformanceRecord:async(e,a)=>{const s=new M.Ay,n=await s.put(`training/performance-record/${e}/`,a,t,(e=>(0,L.So)(e,null,"Performance uploaded.")));return null===n||void 0===n?void 0:n.data},performanceList:async e=>{const a=e.replace(/-/g,""),s=new M.Ay,n=await s.get(`training/date-wise-performance-record/${a}/`,{},t,L.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),null===n||void 0===n?void 0:n.data):[[],0]},getPerformanceId:async e=>{const a=new M.Ay,s=await a.get(`training/${e.operator}/performance-record/`,{},t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data}}};var _t=a(71806),Ct=a(73460),Nt=a(39652),kt=a(79650),Et=a(84882),It=a(28076),Tt=a(32204),Dt=a(1673);a(55459);let Rt=[Q.lm.L4,Q.lm.L4,Q.lm.L4,Q.lm.L1],Pt=[Q.lm.L2,Q.lm.L4,Q.lm.L4,Q.lm.L1],Ot=[Q.lm.L2,Q.lm.L3,Q.lm.L4,Q.lm.L1],$t=[Q.lm.L2,Q.lm.L3,Q.lm.L5,Q.lm.L1],Lt=[Q.lm.L4,Q.lm.L4,Q.lm.L4,Q.lm.L4];const Mt=e=>{let{row:t,skill:s}=e;const[n,r]=(0,y.useState)([]),o=(0,y.useRef)(null);return(0,y.useEffect)((()=>(console.log("printIndexRef",t),o.current=new Worker(new URL(a.p+a.u(845),a.b)),o.current.postMessage({row:t,skills:s,colors:[Rt,Pt,Ot,$t,Lt]}),o.current.onmessage=e=>{r(e.data.processedSkills)},()=>{o.current&&o.current.terminate()})),[t,s]),(0,V.jsxs)("div",{className:"mx-4",children:[(0,V.jsxs)(i.A,{sx:{justifyContent:"center",alignItems:"center"},children:[(0,V.jsx)("img",{src:Dt,style:{width:"230px",height:"75px",objectFit:"contain"}}),(0,V.jsx)(i.A,{sx:{borderBottom:"2px solid #000",my:2},children:(0,V.jsx)(l.A,{className:"fw-36",sx:{},children:"Operator Skill Matrix"})})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,V.jsxs)(i.A,{children:[(0,V.jsxs)(l.A,{children:["Operator Name : ",t.fullname]}),(0,V.jsxs)(l.A,{children:["Aadhaar Number : ",t.aadhar]})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:2,alignItems:"center",justifyContent:"center"},children:[(0,V.jsxs)(i.A,{sx:{width:50},children:[(0,V.jsx)(jt,{chartColors:Rt}),(0,V.jsx)(l.A,{sx:{fontSize:12},textAlign:"center",children:"Induction"})]}),(0,V.jsxs)(i.A,{sx:{width:50},children:[(0,V.jsx)(jt,{chartColors:Pt}),(0,V.jsx)(l.A,{sx:{fontSize:12},textAlign:"center",children:"Level 1"})]}),(0,V.jsxs)(i.A,{sx:{width:50},children:[(0,V.jsx)(jt,{chartColors:Ot}),(0,V.jsx)(l.A,{sx:{fontSize:12},textAlign:"center",children:"Level 2"})]}),(0,V.jsxs)(i.A,{sx:{width:50},children:[(0,V.jsx)(jt,{chartColors:$t}),(0,V.jsx)(l.A,{sx:{fontSize:12},textAlign:"center",children:"Level 3"})]})]})]}),(0,V.jsx)(i.A,{children:(0,V.jsx)(Ge.Ay,{display:"grid",gap:1,gridTemplateColumns:{sm:"repeat(4, 1fr)",xs:"repeat(4, 1fr)"},children:n.map(((e,t)=>(0,V.jsxs)(i.A,{sx:{border:2,alignContent:"center",alignItems:"center",borderColor:Q.lm.TEXT_GRAY,justifyContent:"space-between"},children:[(0,V.jsx)(l.A,{px:.4,children:e.skillName}),(0,V.jsx)(i.A,{sx:{width:70},children:(0,V.jsx)(jt,{chartColors:e.chartColors})})]},t)))})}),(0,V.jsx)(l.A,{sx:{mt:2},children:"\xa9 Dhoot Transmission Pvt. Ltd. All Rights Reserved. | Powered by: Smart Udyog"})]})};var Ut=a(8057),zt=a(25974);let Ft=[Q.lm.L4,Q.lm.L4,Q.lm.L4,Q.lm.L1],Ht=[Q.lm.L2,Q.lm.L4,Q.lm.L4,Q.lm.L1],qt=[Q.lm.L2,Q.lm.L3,Q.lm.L4,Q.lm.L1],Gt=[Q.lm.L2,Q.lm.L3,Q.lm.L5,Q.lm.L1],Bt=[Q.lm.L4,Q.lm.L4,Q.lm.L4,Q.lm.L4];const Qt=()=>{const e=(0,y.useRef)(null),t=(0,P.zy)(),[s,n]=((0,P.Zp)(),t.state,(0,y.useState)("testDetail")),[r,d]=(0,y.useState)(!1),[c,u]=(0,y.useState)(1),[m,h]=(0,y.useState)({name:"",tranning_type:"",metadata:{},skill:"",aadhar:"",skill_id:""}),[p,x]=(0,y.useState)(0),{skillMatrixList:g}=bt(),{list:w}=F(),{skill_list:v}=We(),[f,j]=(0,y.useState)(new Map),[A,S]=(0,y.useState)([]),[b,_]=(0,y.useState)([]),[C,N]=(0,y.useState)([]),[k,E]=(0,y.useState)({}),[I,T]=(0,y.useState)(!1),[D,R]=(0,y.useState)([]),O=[{placeholder:(0,pe.t)("filterBySkill"),type:Q.wN.SELECT,name:"skill_id",keyValues:[{value:"All",key:0},...D]},{placeholder:(0,pe.t)("search_by_aadhar"),type:Q.wN.INPUT,name:"aadhar"}];(0,y.useLayoutEffect)((()=>{L()}),[]),(0,y.useEffect)((()=>{d(!0),$()}),[c,m.skill_id,m.aadhar]),(0,y.useEffect)((()=>(e.current||(e.current=new Worker(new URL(a.p+a.u(90),a.b))),e.current.onmessage=e=>{_(e.data),d(!1)},()=>{e.current.terminate(),e.current=null})),[]);const $=async()=>{try{const t=await g(m.aadhar?1:c,m.skill_id,m.aadhar);e.current.postMessage({matrixData:t.items}),x(t.count)}catch(Le){console.error("Error fetching skill matrix:",Le)}},L=async()=>{const[e]=await v(),t=e.results.map((e=>({value:e.skill_name,key:e.id})));R((e=>[...e,...t])),S(e.results)},M=(0,y.useMemo)((()=>A.map((e=>(0,V.jsx)(Nt.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black",pl:5,textAlign:"left"},children:e.skill_name},e.id)))),[A]),U=(0,y.useRef)(null),z=(0,vt.useReactToPrint)({content:()=>U.current,onPrintError:()=>console.log("error------"),removeAfterPrint:!0}),H=(0,y.useRef)(null);(0,vt.useReactToPrint)({content:()=>H.current,onPrintError:()=>console.log("error------"),removeAfterPrint:!0});function q(e){E(e),T(!0),setTimeout((()=>{z()}),1e3)}const G=y.memo((e=>{let{row:t,arr:s,index:n,childFun:l}=e;const[r,d]=(0,y.useState)([]),c=(0,y.useRef)(null);return(0,y.useEffect)((()=>(c.current=new Worker(new URL(a.p+a.u(826),a.b)),()=>c.current.terminate())),[]),(0,y.useEffect)((()=>{c.current&&(c.current.postMessage({arr:s,row:t,colors:[Ft,Ht,qt,Gt,Bt]}),c.current.onmessage=e=>{d(e.data)})}),[s,t]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(i.A,{sx:{p:.3}}),(0,V.jsxs)(It.A,{sx:{},children:[(0,V.jsx)(Nt.A,{className:"c-gray fw-500 text-nowrap h3",sx:{color:"black"},children:n+1}),(0,V.jsx)(Nt.A,{className:"c-gray fw-500 text-nowrap h3",sx:{color:"black"},children:t.fullname}),(0,V.jsx)(Nt.A,{className:"c-gray fw-500 text-nowrap h3",sx:{color:"black"},children:t.aadhar}),r.length>0?r.map(((e,t)=>(0,V.jsx)(Nt.A,{children:(0,V.jsx)(i.A,{sx:{width:70,pl:5},children:(0,V.jsx)(jt,{chartColors:e})})},s[t].id))):(0,V.jsx)(Nt.A,{colSpan:s.length,children:(0,V.jsx)(zt.A,{big:!0,blue:!0})}),(0,V.jsx)(Nt.A,{children:(0,V.jsx)(ye.A,{title:(0,pe.t)("printSkillMatrix"),children:(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>l(t),children:(0,V.jsx)(Tt.A,{color:"primary",fontSize:"small"})})})})]},t._id)]})}));return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsxs)(i.A,{sx:{flexDirection:"row",alignItems:"center",width:"100%",justifyContent:"space-between"},children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("skillMatrix")}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",mt:-1},children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,V.jsx)(i.A,{sx:{width:50},children:(0,V.jsx)(jt,{chartColors:Ft})}),(0,V.jsx)(l.A,{className:"fw-14",textAlign:"center",children:(0,pe.t)("induction")})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,V.jsx)(i.A,{sx:{width:50},children:(0,V.jsx)(jt,{chartColors:Ht})}),(0,V.jsxs)(l.A,{className:"fw-14",textAlign:"center",children:[(0,pe.t)("level")," 1"]})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,V.jsx)(i.A,{sx:{width:50},children:(0,V.jsx)(jt,{chartColors:qt})}),(0,V.jsxs)(l.A,{className:"fw-14",textAlign:"center",children:[(0,pe.t)("level")," 2"]})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,V.jsx)(i.A,{sx:{width:50},children:(0,V.jsx)(jt,{chartColors:Gt})}),(0,V.jsxs)(l.A,{className:"fw-14",textAlign:"center",children:[(0,pe.t)("level")," 3"]})]})]})]})}),(0,V.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:(0,V.jsx)(i.A,{sx:{py:1,flexDirection:"row",gap:1},children:(0,V.jsx)(B.A,{data:m,errors:f,onChange:e=>{const{name:t,value:a}=e.target;("aadhar"!==t||/^\d*$/.test(a))&&(j((e=>(e.delete(t),e))),h((e=>({...e,[t]:a}))))},schema:O})})}),(0,V.jsx)(kt.A,{ref:H,children:(0,V.jsxs)(_t.A,{children:[(0,V.jsx)(Et.A,{sx:{backgroundColor:Q.lm.BG_GRAY},children:(0,V.jsxs)(It.A,{children:[(0,V.jsx)(Nt.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:(0,pe.t)("sno")}),(0,V.jsx)(Nt.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:(0,pe.t)("operator")}),(0,V.jsx)(Nt.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:(0,pe.t)("aadhaarNumber")}),M,(0,V.jsx)(Nt.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:(0,pe.t)("action")})]})}),(0,V.jsx)(Ct.A,{children:r?(0,V.jsx)(It.A,{children:(0,V.jsx)(Nt.A,{colSpan:12,className:"opacity-60 w-full",children:(0,V.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,V.jsx)(zt.A,{big:!0,blue:!0})})})}):b.length>0?b.map(((e,t)=>(0,V.jsx)(G,{row:e,arr:A,index:t,childFun:q}))):(0,V.jsx)(It.A,{children:(0,V.jsxs)(Nt.A,{colSpan:12,className:"text-center h-300 flex items-center opacity-60 w-full",children:[(0,V.jsx)("img",{src:Ut,alt:"leaf",height:100,className:"w-full object-contain"}),(0,V.jsx)("p",{className:"text-center",children:"No Records found!"})]})})}),(0,V.jsx)(At.A,{children:(0,V.jsx)(It.A,{children:(0,V.jsx)(St.A,{rowsPerPageOptions:[],count:p,rowsPerPage:5,page:c-1,onPageChange:(e,t)=>{u(t+1)}})})})]})}),!0===I&&(0,V.jsx)("div",{style:{visibility:"hidden"},children:(0,V.jsx)("div",{ref:U,style:{marginTop:"69.12px",marginBottom:"66.24px"},children:(0,V.jsx)(Mt,{skill:A,row:k})})})]})};a(27330);const Yt=()=>{(0,P.zy)(),(0,f.d4)((e=>e));const[e,t]=(0,y.useState)([]),[a,s]=(0,y.useState)(),[n,r]=(0,y.useState)(0),[o,d]=(0,y.useState)({}),{test_list2:c,assignExam:u}=We(),{list:m,listByAadhar2:h,listByAadharFortestPortal:p}=F(),[x,g]=(0,y.useState)(null),[w,v]=(0,y.useState)(new Map),[j,A]=(0,y.useState)([]),[S,b]=(0,y.useState)([]);async function _(e){return await p(e||"")}const C=[{title:(0,pe.t)("operator"),placeholder:(0,pe.t)("selectOperator"),type:Q.wN.MASTER,name:"operator",validator:Q.wY.REQUIRED,fetch:[_],noSearch:!0},{title:(0,pe.t)("test"),placeholder:(0,pe.t)("selectTest"),type:Q.wN.SELECT,name:"test",validator:Q.wY.REQUIRED,keyValues:S}];(0,y.useEffect)((()=>{localStorage.setItem("draweWidth",190),N(),k()}),[]);const N=async()=>{const[e,t]=await c();console.log("testport----",e);const a=e.results.map((e=>({value:`${e.test_name}_${e.skill?e.skill:e.test_type}_${e.skill_level?e.skill_level:""}`,key:e.id})));b(a)},k=async()=>{const[e,a]=await m(n+1),s=e.results.filter((e=>e.is_operator)).map((e=>({value:e.username,key:e.id})));t((e=>[...e,...s]))};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)(i.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("testPortal")})})}),(0,V.jsx)(i.A,{sx:{alignItems:"flex-start",pl:3},children:(0,V.jsxs)(i.A,{children:[(0,V.jsx)(B.A,{data:o,errors:w,onChange:async e=>{const{name:t,value:a}=e.target;v((e=>(e.delete(t),e))),"operator"===t&&await _(a),d((e=>({...e,[t]:a})))},schema:C}),(0,V.jsx)(H.A,{color:"gray",Button:!0,onClick:async()=>{const e=(0,Y.bG)(C,o);if(v(e),e.size)return;let t=await u(o);console.log("response----",t),t&&await async function(e){localStorage.setItem("draweWidth",0);const t={key1:e.id},a=new URLSearchParams(t).toString(),s=`/test?${a}`;window.open(s,"_blank","rel=noopener noreferrer")}(t)},children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("start")})})]})})]})},Wt=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){const e=new M.Ay,a=await e.get(`${U.H.TRAINING}/${U.H.TRAININGS}/`,{},t,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post(`${U.H.TRAINING}/${U.H.TRAININGS}/`,e,t,(e=>(0,L.So)(e,null,"Created successfully!")));return null===s||void 0===s?void 0:s.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.LINE}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Line Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.ASSET}/${U.H.LINE}/${e}/`,t,(e=>(0,L.So)(e,null,"Line deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},Vt=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d,users:c}=e;const{list:u,groupUser:m}=Ee(),[h,p]=(0,y.useState)([]);(0,y.useEffect)((()=>{v()}),[]);const x=[{title:(0,pe.t)("trainingName"),placeholder:(0,pe.t)("enterTrainingName"),type:Q.wN.INPUT,name:"training_name",validator:Q.wY.REQUIRED,width:"350px"},{title:(0,pe.t)("trainingStartDate"),placeholder:"Select Start Date",type:Q.wN.DATE,name:"start_date",validator:Q.wY.REQUIRED,width:"350px"},{title:(0,pe.t)("trainingType"),placeholder:(0,pe.t)("enterTrainingType"),type:Q.wN.INPUT,name:"training_type",validator:Q.wY.REQUIRED,width:"350px"},{title:(0,pe.t)("trainingEndDate"),placeholder:"Select End Date",type:Q.wN.DATE,name:"end_date",width:"350px"},{title:(0,pe.t)("trainingDescription"),placeholder:(0,pe.t)("enterTrainingDescription"),type:Q.wN.INPUT,name:"training_description",width:"350px"},{title:(0,pe.t)("trainingStartTime"),type:Q.wN.TIME,name:"start_time",validator:Q.wY.REQUIRED,width:"350px"},{title:(0,pe.t)("trainer"),placeholder:(0,pe.t)("enterTrainerName"),type:Q.wN.INPUT,name:"trainer",width:"350px"},{title:(0,pe.t)("trainingEndTime"),type:Q.wN.TIME,name:"end_time",width:"350px"},{title:(0,pe.t)("trainingAdmin"),type:Q.wN.SELECT,name:"training_admin",validator:Q.wY.REQUIRED,keyValues:c,multi:!0,height:"auto",width:"350px"},{title:(0,pe.t)("testRequiredAtEndOfTraining"),type:Q.wN.RADIO,name:"test_required",validator:Q.wY.REQUIRED,keyValues:[{value:"yes",label:(0,pe.t)("yes")},{value:"no",label:(0,pe.t)("no")}],width:"350px"},{title:(0,pe.t)("group"),placeholder:"Select group",type:Q.wN.SELECT,name:"group",keyValues:h,multi:!0,height:"auto",width:"350px"},{title:(0,pe.t)("feedbackAtEndOfTraining"),type:Q.wN.RADIO,name:"feedback_required",validator:Q.wY.REQUIRED,keyValues:[{value:"yes",label:(0,pe.t)("yes")},{value:"no",label:(0,pe.t)("no")}],width:"350px"},{title:(0,pe.t)("trainees"),placeholder:"Select Trainees",type:Q.wN.SELECT,name:"trainees",keyValues:c,multi:!0,height:"auto",width:"350px"},"yes"===s.feedback_required&&{title:(0,pe.t)("feedbackLink"),placeholder:(0,pe.t)("enterFeedbackLink"),type:Q.wN.INPUT,name:"feedback_link",validator:Q.wY.REQUIRED,width:"350px"}],[g,w]=(0,y.useState)(new Map),v=async()=>{const[e]=await u();console.log("fetchGroups------\x3e>>>",e);const t=e.map((e=>({value:e.name,key:e.id})));p((e=>[...e,...t]))};return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(Ge.Ay,{display:"grid",sx:{alignContent:"flex-start"},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:(0,V.jsx)(B.A,{data:s,errors:g,onChange:e=>{console.log(e.target);const{name:t,value:a}=e.target;w((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:x})}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:2},children:[(0,V.jsx)(H.A,{color:"gray",onClick:a,loading:o,children:(0,V.jsx)(l.A,{sx:{px:2,color:Q.lm.BLACK},children:(0,pe.t)("back")})}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{const e=(0,Y.bG)(x,s);w(e),e.size||await r()},loading:o,children:(0,V.jsx)(l.A,{sx:{px:2,color:Q.lm.BLACK},children:(0,pe.t)("create")})})]})]})},Xt=()=>{const e=(0,P.zy)(),t=(0,P.Zp)(),a=e.state,[s,n]=(0,y.useState)([]),[r,o]=(0,y.useState)([]),[d,c]=(0,y.useState)(),[u,m]=(0,y.useState)(0),[h,p]=(0,y.useState)(!1),[x,g]=(0,y.useState)(!1),[w,v]=(0,y.useState)(0),[f,j]=(0,y.useState)({feedback_required:"no",test_required:"no"}),{list:A,create:S,update:b,remove:_}=Wt(),{groupUser:C,allUser:N}=Ee(),{list:k}=F();(0,y.useEffect)((()=>{I(),E()}),[w]);const E=async()=>{const[e]=await A();o(e)},I=async()=>{const[e,t]=await N(w+1),a=e.results.map((e=>({value:e.username,key:e.id})));n((e=>[...e,...a]))},T=[{id:1,title:(0,pe.t)("trainingName"),render:e=>(0,V.jsx)(l.A,{children:e.training_name})},{id:2,title:(0,pe.t)("trainingType"),render:e=>e.training_type},{id:22,title:(0,pe.t)("trainer"),render:e=>e.trainer||"-"},{id:23,title:(0,pe.t)("startDate"),render:e=>fe()(e.start_date).format("ll")},{id:24,title:(0,pe.t)("endDate"),render:e=>e.end_date?fe()(e.end_date).format("ll"):"-"}];return(0,V.jsxs)("div",{className:"mx-4",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(i.A,{sx:{flexDirection:"row",alignItems:"center",mb:1},children:(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("planTraining")})}),"add"!==x&&(0,V.jsx)(H.A,{color:"gray",onClick:()=>g("add"),children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("addTraining")})})]}),"add"!==x?(0,V.jsx)($.A,{columns:T,rows:r,rowsPerPage:10,loading:"fetch"===d,titleCellClasses:"c-gray fw-700",page:w,setPage:v,paginator:!0,serialize:!0,total:u,trainings:!0,tableBodyColor:Q.lm.WHITE}):(0,V.jsx)(Vt,{users:s,open:"add"===x,onClose:()=>{g(!1),p(!1)},data:f,edit:h,setData:j,onSubmit:async()=>{var e,s=[];if((null===(e=f.group)||void 0===e?void 0:e.length)>0){s=(await Promise.all(f.group.map((e=>C(e))))).map((e=>e.users.map((e=>e.id)))).flat()}const n=Array.isArray(f.trainees)?f.trainees:[],i={training_name:f.training_name,training_type:f.training_type,training_description:f.training_description,trainer:f.trainer,training_admin:f.training_admin,trainees:[...n,...s],start_date:f.start_date,end_date:f.end_date,start_time:f.start_time,end_time:f.end_time,feedback_link:f.feedback_link,test_required:"yes"===f.test_required,feedback_required:"yes"===f.feedback_required};c("fetch");let l=await S(i,a);console.log("planning createRes----",l),j({}),g(!1),"yes"===f.test_required?t("/test-upload",{state:{id:l.id,training_admin:i.training_admin,trainees:i.trainees}}):await E(),c(!1),p(!1)}})]})},Zt=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,onSubmit2:o,loading:d,setSelectedQuestions:c,skills:u,users:m,testList:h}=e;const[p,x]=(0,y.useState)(new Map),[g,w]=(0,y.useState)(0),[v,f]=(0,y.useState)(!1),{getPerformanceSkill:j,getPerformanceId:A}=bt(),{listByAadharFortestPortal:S}=F();async function b(e){return await S(e||"")}const _=async()=>{if(0!==g){if(1===g){const e=(0,Y.bG)(C,s);if(x(e),e.size)return;return await o(),f(!1),void w(0)}}else{const e=(0,Y.bG)(C,s);if(x(e),e.size)return;w((e=>e+1))}},C=[0===g&&{title:(0,pe.t)("operator"),placeholder:(0,pe.t)("selectOperator"),type:Q.wN.MASTER,name:"operator",validator:Q.wY.REQUIRED,fetch:[b],noSearch:!0},0===g&&{title:(0,pe.t)("skill"),placeholder:(0,pe.t)("selectSkill"),type:Q.wN.INPUT,name:"skill",disabled:!0},0===g&&{title:(0,pe.t)("skillLevel"),placeholder:(0,pe.t)("selectSkillLevel"),type:Q.wN.INPUT,name:"skill_level",disabled:!0},1===g&&{title:(0,pe.t)("date"),type:Q.wN.DATE,name:"plan_date",validator:Q.wY.REQUIRED},1===g&&{title:(0,pe.t)("plan"),placeholder:"",type:Q.wN.INPUT,name:"plan",inputType:"number",validator:Q.wY.REQUIRED},1===g&&{title:(0,pe.t)("actual"),placeholder:"",type:Q.wN.INPUT,inputType:"number",name:"actual",validator:Q.wY.REQUIRED},1===g&&{title:(0,pe.t)("rejected"),placeholder:(0,pe.t)("rejectedCount"),type:Q.wN.INPUT,inputType:"number",name:"rejected",validator:Q.wY.REQUIRED}];return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsx)("h3",{className:"opacity-80",children:(0,pe.t)("addPerformance")}),(0,V.jsx)(B.A,{data:s,errors:p,onChange:async e=>{const{name:t,value:i}=e.target;var l;x((e=>(e.delete(t),e))),n((e=>({...e,[t]:i}))),"operator"===t&&(console.log("operator id ",i),await b(i.value),l=i.key,/^[a-f0-9]{32}$/i.test(l)&&(console.log("operator id value ",i.value),(async e=>{let t=e,i={operator:e};if(void 0!==e){await j(i);let e=(await A(i)).at(-1);console.log("resPer-----lastItem---------",e),null!==e&&void 0!==e&&e.id?(f(e.completed),!0===e.completed&&(O.oR.warn("Performances are already filled. Assign Supervisor for next level."),await a(),n({...s,skill_level:"",skill:"",operator:"",skill_id:""})),n({...s,skill_level:e.skill_level,skill:e.skill.skill_name,operator:t,skill_id:e.id}),setTimeout((async()=>{await _()}),1e3)):(n({...s,skill_level:"",skill:"",operator:"",skill_id:""}),O.oR.warn("record not found"))}else n({...s,skill_level:"",skill:"",operator:"",skill_id:""})})(i.key)))},schema:C}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),0===g&&(0,V.jsx)(H.A,{color:"light_green",onClick:_,loading:d,disabled:v,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("next")})}),1===g&&(0,V.jsx)(H.A,{color:"light_green",onClick:_,loading:d,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("submit")})})]})]})};var Jt=a(21750);const Kt=()=>{const e=(0,P.zy)(),[t,a]=((0,P.Zp)(),e.state,(0,y.useState)([])),[s,n]=(0,y.useState)(),[r,o]=(0,y.useState)(0),[d,c]=(0,y.useState)(!1),[u,m]=(0,y.useState)("testDetail"),[h,p]=(0,y.useState)(0),[x,g]=(0,y.useState)({operator:"",plan_date:(new Date).toISOString().split("T")[0]}),{putPerformanceRecord:w,performanceList:v,createTest:f,update:j,remove:A,performanceRecord:S,getPerformanceRecord:b,postPerformance:_}=bt(),{activeOperators:C,listByAadharFortestPortal:N}=F(),{list:k}=be(),[E,I]=(0,y.useState)(new Map),[T,D]=(0,y.useState)([]),[R,O]=(0,y.useState)([]),[L,M]=(0,y.useState)([]),[U,z]=(0,y.useState)([]),[q,G]=(0,y.useState)(""),[B,Y]=(0,y.useState)((new Date).toISOString().split("T")[0]),W=[{id:1,title:(0,pe.t)("operatorAadhar"),render:e=>e.aadhar_number},{id:13,title:(0,pe.t)("skill"),render:e=>e.skill},{id:12,title:(0,pe.t)("skillLevel"),render:e=>e.skill_level},{id:2,title:(0,pe.t)("plan"),render:e=>e.plan},{id:3,title:(0,pe.t)("actual"),render:e=>e.actual}];(0,y.useEffect)((()=>{J(),Z()}),[]),(0,y.useEffect)((()=>{X()}),[B]);const X=async()=>{const e=await v(B);console.log("res performance list",e.list),M(e.list)},Z=async()=>{const e=await C();console.log("operator-----\x3e>>",e),a(e)},J=async()=>{const[e]=await k(h+1),t=e.results.map((e=>({value:e.skill_name,key:e.id})));D((e=>[...e,...t]))};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(i.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("performance")})}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1,mb:1},children:[(0,V.jsx)(i.A,{children:(0,V.jsx)(Jt.A,{InputWidth:"150px",value:B,onChange:e=>{console.log("date------",e.target.value),Y(e.target.value)}})}),(0,V.jsx)(H.A,{width:"fit-content",color:"gray",onClick:()=>m("addReport"),children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("addPerformance")})})]})]}),(0,V.jsx)($.A,{columns:W,rows:L,rowsPerPage:10,loading:"fetch"===s,titleCellClasses:"c-gray fw-700",serialize:!0,paginator:!0,total:r,tableBodyColor:Q.lm.WHITE}),(0,V.jsx)(Zt,{open:"addReport"===u,onClose:()=>{m(!1)},users:t,skills:T,testList:R,data:x,setData:g,onSubmit2:async()=>{var e=x.plan_date.replace(/-/g,"");const t={new_entry:{[e]:{plan:x.plan,actual:x.actual,rejected:x.rejected}}};await w(x.skill_id,t),m(!1),g({...x,rejected:"",actual:"",plan:"",plan_date:"",skill_level:"",skill:"",operator:"",plan_date:(new Date).toISOString().split("T")[0]}),X()}})]})};var ea=a(72819),ta=a(47260);const aa=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,y.useState)(new Map);return(0,V.jsx)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:(0,V.jsxs)(i.A,{sx:{justifyContent:"center",alignItems:"center",mt:4},children:[(0,V.jsx)(Ke.A,{sx:{color:Q.lm.LIGHT_GREEN,width:100,height:100}}),(0,V.jsxs)(l.A,{textAlign:"center",className:"fw-24",sx:{py:4},children:["You have successfully changed password.",(0,V.jsx)("br",{}),"You will be automatically logged off ",(0,V.jsx)("br",{}),"Please Login again with new password"]})]})})};var sa=a(94573);const na=()=>{const e=(0,f.d4)((e=>{var t;return null===(t=e[z.X.AUTH].user)||void 0===t?void 0:t.data})),t=(0,P.Zp)(),[a,s]=(0,y.useState)([]),[n,r]=(0,y.useState)(),[o,d]=(0,y.useState)(0),[c,u]=(0,y.useState)(0),[m,h]=(0,y.useState)(!1),[p,x]=(0,y.useState)(!0),[g,w]=(0,y.useState)(""),[v,j]=(0,y.useState)(""),[A,S]=(0,y.useState)(""),[b,_]=(0,y.useState)(""),[C,N]=(0,y.useState)({name:"",metadata:{}}),[k,E]=(0,y.useState)(""),{resetPassword:I}=(0,sa.A)(),{logout:T}=(0,Ie.A)(),D=/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*\W)(?!.* ).{8,16}$/;return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)(l.A,{className:"fw-20-500-36",children:"Profile"})}),(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{gap:1,mt:1,width:"70%"},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:"Name"}),(0,V.jsx)(G.A,{disabled:!0,gray:!0,value:null===e||void 0===e?void 0:e.name})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1,alignItems:"center",mt:1},children:[(0,V.jsx)(l.A,{className:"fw-24",children:" Change Password"}),(0,V.jsx)(l.A,{color:Q.lm.TEXT_GRAY,className:"fw-14",children:"( Password to be min 8 character long with one special character %,&, @ ,$ )"})]}),(0,V.jsxs)(Ge.Ay,{display:"grid",sx:{gap:1,mt:1,width:"70%"},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:"Current Password"}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row"},children:[(0,V.jsx)(G.A,{type:p?"password":"text",value:k,onChange:e=>E(e.target.value)}),!0===p?(0,V.jsx)(ea.A,{fontSize:"small",sx:{ml:-4,zIndex:0,alignSelf:"center",cursor:"pointer"},onClick:()=>x(!1)}):(0,V.jsx)(ta.A,{fontSize:"small",sx:{ml:-4,zIndex:0,alignSelf:"center",cursor:"pointer"},onClick:()=>x(!0)})]}),(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:"New Password"}),(0,V.jsxs)(i.A,{children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row"},children:[(0,V.jsx)(G.A,{type:p?"password":"text",value:g,onChange:e=>{const t=e.target.value;w(t),D.test(t)?j(""):j("Password must contain at least 8 characters, including one letter, one number, and one special character.")}}),!0===p?(0,V.jsx)(ea.A,{fontSize:"small",sx:{ml:-4,zIndex:0,alignSelf:"center",cursor:"pointer"},onClick:()=>x(!1)}):(0,V.jsx)(ta.A,{fontSize:"small",sx:{ml:-4,zIndex:0,alignSelf:"center",cursor:"pointer"},onClick:()=>x(!0)})]}),v&&(0,V.jsx)("div",{style:{color:"red"},children:v})]}),(0,V.jsx)(l.A,{sx:{fontSize:16,fontWeight:"400",color:Q.lm.TEXT_GRAY},children:"Re-enter New Password"}),(0,V.jsxs)(i.A,{children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row"},children:[(0,V.jsx)(G.A,{type:p?"password":"text",value:A,onChange:e=>{const t=e.target.value;S(t),_(g!==t?"Passwords do not match.":"")}}),!0===p?(0,V.jsx)(ea.A,{fontSize:"small",sx:{ml:-4,zIndex:0,alignSelf:"center",cursor:"pointer"},onClick:()=>x(!1)}):(0,V.jsx)(ta.A,{fontSize:"small",sx:{ml:-4,zIndex:0,alignSelf:"center",cursor:"pointer"},onClick:()=>x(!0)})]}),b&&(0,V.jsx)("div",{style:{color:"red"},children:b})]})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:6,mb:1,px:10,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,children:"Cancel"}),(0,V.jsx)(H.A,{color:"gray",onClick:()=>{(async()=>{let e={old_password:k,new_password:g,confirm_password:A},a=await I(e);null!==a&&void 0!==a&&a.success&&(h("confirm"),setTimeout((async()=>{await T(),t("/")}),2e3))})()},children:(0,V.jsx)(l.A,{color:Q.lm.TEXT_GRAY,children:"Confirm"})})]}),(0,V.jsx)(aa,{open:"confirm"===m,onClose:()=>{h(!1)}})]})},ia=()=>{const{t:e,i18n:t}=(0,j.Bd)(),{updateProfile:a,userProfile:s,update:n}=((0,P.Zp)(),F()),[r,o]=(0,y.useState)(new Map),[d,c]=(0,y.useState)(!1),[u,m]=(0,y.useState)({language:""}),h=[{placeholder:e("select_language"),type:Q.wN.SELECT,name:"language",validator:Q.wY.REQUIRED,keyValues:[{value:"English",key:"EN"},{value:"\u0939\u093f\u0928\u094d\u0926\u0940",key:"HI"},{value:"\u092e\u0930\u093e\u0920\u0940",key:"MR"}]}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)(l.A,{className:"fw-20-500-36",children:e("changeLanguage")})}),(0,V.jsxs)(i.A,{sx:{justifyContent:"center",alignItems:"center",width:"90%"},children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",width:"90%"},children:[(0,V.jsx)(i.A,{sx:{width:"50%"},children:(0,V.jsx)(l.A,{sx:{fontWeight:500,fontSize:18},children:e("existing")})}),(0,V.jsx)(i.A,{sx:{width:"50%",justifyContent:"center",alignItems:"center"},children:(0,V.jsx)(l.A,{sx:{fontWeight:500,fontSize:18},children:e("select_language")})})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",mt:1,width:"90%"},children:[(0,V.jsx)(l.A,{sx:{fontWeight:500,fontSize:16},children:e("sel_lang")}),(0,V.jsx)(i.A,{sx:{},children:(0,V.jsx)(B.A,{data:u,errors:r,onChange:e=>{const{name:t,value:a}=e.target;o((e=>(e.delete(t),e))),m((e=>({...e,[t]:a})))},schema:h})})]}),(0,V.jsx)(i.A,{direction:"row",width:"90%",justifyContent:"flex-end",mt:6,mb:1,children:(0,V.jsx)(H.A,{color:"gray",onClick:()=>(async()=>{let e=localStorage.getItem("userId");localStorage.getItem("draweWidth",190),console.log("language-----\x3e>>",u.language),t.changeLanguage(u.language);const a={preferred_language:u.language};await n(e,a),window.location.reload()})(),children:(0,V.jsx)(l.A,{color:Q.lm.TEXT_GRAY,children:e("confirm")})})})]})]})},la=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.get(`training/all-users-test-history/?page=${e}&page_size=10&aadhar=${a}`,{},t,L.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post(`${U.H.TRAINING}/${U.H.TRAININGS}/`,e,t,(e=>(0,L.So)(e,null,"Created successfully!")));return null===s||void 0===s?void 0:s.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.LINE}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Line Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.ASSET}/${U.H.LINE}/${e}/`,t,(e=>(0,L.So)(e,null,"Line deleted successfully!")));return null===s||void 0===s?void 0:s.data},getResult:async e=>{const a=new M.Ay,s=await a.get(`training/users-test-history/${e}/`,{},t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data}}},ra=()=>{const e=(0,P.Zp)(),[t,a]=(0,y.useState)("Users"),[s,n]=(0,y.useState)([]),[r,o]=(0,y.useState)([]),[d,c]=(0,y.useState)([]),[u,m]=(0,y.useState)([]),[h,p]=(0,y.useState)(),[x,g]=(0,y.useState)(0),[w,v]=(0,y.useState)(!1),[f,j]=(0,y.useState)([]),[A,S]=(0,y.useState)(0),[b,_]=(0,y.useState)(null),[C,N]=(0,y.useState)({}),[k,E]=(0,y.useState)(""),{list:I,listByUserName:T,listByAadhar:D}=la();(0,y.useEffect)((()=>{n([]),R()}),[A,t]);const R=async()=>{p("fetch");try{const e=await I(A+1,"");console.log("list result user",e[0].data),n(e[0].data),g(e[0].count)}catch(Le){console.error("Error fetching users:",Le)}finally{p(!1)}},O=[{id:1,title:(0,pe.t)("aadhar"),render:t=>(0,V.jsx)(l.A,{sx:{color:"blue",cursor:"pointer"},onClick:()=>e("/result-page",{state:t.user_id}),children:t.aadhar})},{id:2,title:(0,pe.t)("user_name"),render:e=>e.username},{id:3,title:(0,pe.t)("date_of_joining"),render:e=>fe()(e.date_of_joining).format("ll")},{id:5,title:(0,pe.t)("testCount"),render:e=>(0,V.jsx)(ne,{title:e.tests})}],L=e=>{const t=e.target.value;console.log("e.target.value",e.target.value.length),(async(e,t)=>{p("fetch");try{const a=await I(e,t);console.log("list result user",a[0].data),n(a[0].data),g(a[0].count)}catch(Le){console.error("Error fetching users:",Le)}finally{p(!1)}})(1,t),E(t)};return(0,V.jsxs)("div",{className:"mx-3 my-2 fw-500",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("usersTestCompletionList")}),(0,V.jsx)(i.A,{mb:1,children:(0,V.jsx)(G.A,{height:"37px",value:k,placeholder:"Search by Aadhar Number",onChange:e=>L(e)})})]}),(0,V.jsx)($.A,{columns:O,rows:s,rowsPerPage:10,loading:"fetch"===h,titleCellClasses:"c-gray fw-700",page:A,setPage:S,paginator:!0,serialize:!0,total:x,tableBodyColor:Q.lm.WHITE})]})};var oa=a(69120);const da=()=>{const e=(0,P.Zp)(),t=(0,P.zy)(),a=null===t||void 0===t?void 0:t.state,{getResult:s}=la(),[n,r]=(0,y.useState)("Users"),[d,c]=(0,y.useState)([]),[u,m]=(0,y.useState)(),[h,p]=(0,y.useState)(0),[x,g]=(0,y.useState)(0),[w,v]=(0,y.useState)({}),[f,j]=(0,y.useState)(""),{list:A}=F(),{list:S}=be();(0,y.useEffect)((()=>{!async function(){const e=await s(a);console.log("_list------getResult-------\x3e>>",e),c(e)}()}),[x]);const b=[{id:1,title:(0,pe.t)("testName"),render:e=>{var t;return(null===e||void 0===e||null===(t=e.test)||void 0===t?void 0:t.test_name)||"-"}},{id:3,title:(0,pe.t)("testType"),render:e=>{var t;return(null===e||void 0===e||null===(t=e.test)||void 0===t?void 0:t.test_type)||"-"}},{id:4,title:(0,pe.t)("skill"),render:e=>{var t;return(null===e||void 0===e||null===(t=e.test)||void 0===t?void 0:t.skill)||"-"}},{id:5,title:(0,pe.t)("skillLevel"),render:e=>{var t;return(null===e||void 0===e||null===(t=e.test)||void 0===t?void 0:t.skill_level)||"-"}},{id:6,title:(0,pe.t)("testResult"),render:e=>!0===(null===e||void 0===e?void 0:e.result)?(0,V.jsx)(l.A,{color:Q.lm.LIGHT_GREEN,children:"Pass"}):(0,V.jsx)(l.A,{color:Q.lm.RADIAL_RED,children:"Fail"})}];return(0,V.jsxs)("div",{className:"mx-3 my-2 fw-500",children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1,alignContent:"center",alignItems:"center"},children:[(0,V.jsx)(o.A,{onClick:()=>e(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsx)(l.A,{className:"fw-20-500-36",onClick:()=>console.log("users",d),children:(0,pe.t)("testResult")})]}),(0,V.jsx)("div",{className:"flex items-center justify-between"}),(0,V.jsx)($.A,{columns:b,rows:d,rowsPerPage:10,loading:"fetch"===u,titleCellClasses:"c-gray fw-700",page:x,setPage:g,paginator:!0,serialize:!0,total:h,tableBodyColor:Q.lm.WHITE})]})};var ca=a(10611);function ua(e){let{value:t,type:a}=e;return(0,V.jsxs)(h.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",px:2,gap:1},children:[(0,V.jsx)(i.A,{sx:{width:120},children:(0,V.jsx)(l.A,{className:"LinearProgress-title",children:"Availability"===a?(0,pe.t)("availability"):"Performance"===a?(0,pe.t)("performance"):(0,pe.t)("quality")})}),(0,V.jsx)(i.A,{sx:{width:180},children:(0,V.jsx)(ca.A,{variant:"determinate",value:t>100?100:t,sx:{backgroundColor:"#8C8C8C","& .MuiLinearProgress-bar":{backgroundColor:"Availability"===a?"#FF0000":"Performance"===a?"#FAA036":"Quality"===a?"#27AE60":"#000000"},height:"12px"}})}),(0,V.jsx)(i.A,{sx:{width:40},children:(0,V.jsx)(l.A,{className:"LinearProgress-title",sx:{fontWeight:"bold"},children:`${Math.round(t)}%`})})]})}function ma(e){let{progress:t,type:a}=e;return(0,V.jsx)(h.A,{sx:{width:"100%"},children:(0,V.jsx)(ua,{value:t,type:a})})}a.p;const ha=a.p+"static/media/polygon.33a8f3d09b2c8d86cfa58d933f2cea0b.svg",pa=e=>{let{data:t,expanded:a,onToggle:s,clickMore:n}=e;return(0,V.jsxs)("div",{className:`card-container ${a?"expanded":""} ${"online"===t.status?"running":"Downtime"} ${"downtime"===t.status?"maintenance":"Downtime"} ${"offline"===t.status?"disconnected":"Downtime"}`,style:{zIndex:a?10:1,position:a?"absolute":"relative",width:"430px"},children:[(0,V.jsxs)("div",{className:"heading",style:{marginTop:25},children:[(0,V.jsx)("h1",{children:t.asset_name}),(0,V.jsxs)("p",{children:[(0,pe.t)("status")," |",(0,V.jsx)("span",{className:"status-text",children:t.status})]})]}),(0,V.jsxs)("div",{className:"pie",pointer:!0,children:[(0,V.jsx)(ft.A,{type:"donut",width:"100%",height:"100%",series:[t.oee,100-t.oee],options:{chart:{id:"donut-chart"},colors:[""+(t.completed>50?"#27AE60":"#FF0000"),"#ffffff"],labels:["Used","Remaining"],plotOptions:{pie:{startAngle:-90,endAngle:90,donut:{size:"65%"},expandOnClick:!1}},stroke:{colors:["#D9D9D9"]},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{enabled:!1}}}),(0,V.jsx)("div",{className:"chart-percentage",children:(0,V.jsx)("p",{className:"chart-percentage-text",children:`${t.oee}%`})})]}),(0,V.jsxs)(i.A,{sx:{py:1,backgroundColor:Q.lm.RADIAL_LG_GRAY,mt:-7,mb:1,width:"430px"},children:[(0,V.jsx)(ma,{type:"Availability",progress:t.availability}),(0,V.jsx)(ma,{type:"Performance",progress:t.utilization}),(0,V.jsx)(ma,{type:"Quality",progress:t.quality})]}),a&&(0,V.jsxs)("div",{className:"additional-info",style:{width:"100%"},children:[(0,V.jsxs)("div",{className:"product-metrics-section",children:[(0,V.jsx)("h3",{className:"LinearProgress-title-h",children:(0,pe.t)("productMetrics")}),(0,V.jsxs)("div",{className:"metrics",children:[(0,V.jsxs)("div",{className:"metric-row",children:[(0,V.jsx)("span",{className:"card-metric-label",children:(0,pe.t)("total")}),(0,V.jsx)("span",{className:"card-metric-value",children:t.total})]}),(0,V.jsxs)("div",{className:"metric-row",children:[(0,V.jsx)("span",{className:"card-metric-label",children:(0,pe.t)("good")}),(0,V.jsx)("span",{className:"card-metric-value",children:t.total_good})]}),(0,V.jsxs)("div",{className:"metric-row",children:[(0,V.jsx)("span",{className:"card-metric-label",children:(0,pe.t)("ng")}),(0,V.jsx)("span",{className:"card-metric-value",children:t.total_ng})]}),(0,V.jsxs)("div",{className:"metric-row",children:[(0,V.jsx)("span",{className:"card-metric-label",children:(0,pe.t)("pass")}),(0,V.jsx)("span",{className:"card-metric-value",children:t.total_pass})]}),(0,V.jsxs)("div",{className:"metric-row",children:[(0,V.jsx)("span",{className:"card-metric-label",children:(0,pe.t)("fail")}),(0,V.jsx)("span",{className:"card-metric-value",children:t.total_fail})]})]})]}),(0,V.jsxs)("div",{className:"cycle-info-section",children:[(0,V.jsx)("h3",{className:"LinearProgress-title-h",children:(0,pe.t)("cyclePerSec")}),(0,V.jsxs)("div",{className:"metrics",children:[(0,V.jsxs)("div",{className:"metric-row",children:[(0,V.jsx)("span",{className:"card-metric-label",children:(0,pe.t)("best")}),(0,V.jsx)("span",{className:"card-metric-value",children:t.best_cycle_time})]}),(0,V.jsxs)("div",{className:"metric-row",children:[(0,V.jsx)("span",{className:"card-metric-label",children:(0,pe.t)("worst")}),(0,V.jsx)("span",{className:"card-metric-value",children:t.worst_cycle_time})]}),(0,V.jsxs)("div",{className:"metric-row",children:[(0,V.jsx)("span",{className:"card-metric-label",children:(0,pe.t)("average")}),(0,V.jsx)("span",{className:"card-metric-value",children:t.avg_cycle_time})]})]}),n&&(0,V.jsx)("div",{className:"more-button",children:(0,V.jsx)("button",{onClick:()=>n(),children:(0,pe.t)("more")})})]})]}),(0,V.jsx)("div",{style:{display:"flex",width:"100%",justifyContent:"space-around"},children:(0,V.jsx)("div",{className:"drop-icon "+(a?"rotated":""),onClick:s,children:(0,V.jsx)("img",{src:ha})})})]})},xa=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{summary:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0,o=arguments.length>7?arguments[7]:void 0,d=arguments.length>8?arguments[8]:void 0;const c=new M.Ay,u=await c.get(`monitoring/get-daily-summary/?state=${d}&company_id=${s}&plant_id=${n}&division_id=${i}&line_id=${l}&date=${r}&shift_id=${o}&page=${e}&page_size=${a}`,{},t,L.So);return null!==u&&void 0!==u&&u.data?(console.log("res  ",u.data),[null===u||void 0===u?void 0:u.data]):[[],0]},assetSummary:async(e,a,s,n,i,l,r)=>{const o=new M.Ay,d=await o.get(`monitoring/daily-summary/${a}/?date=${r?"":s}&barcode=${r}&shift=${n}&state=${i}&quality=${l}&page=${e}&page_size=10`,{},t,L.So);return null!==d&&void 0!==d&&d.data?(console.log("res  ",d.data),[null===d||void 0===d?void 0:d.data]):[[],0]},timelineSummary:async(e,a,s,n,i)=>{const l=new M.Ay,r=await l.get(`monitoring/asset-change-history/${e}/?date=${a}&shift=${s}&state=${n}&quality=${i}`,{},t,L.So);return null!==r&&void 0!==r&&r.data?(console.log("res  ",r.data),[null===r||void 0===r?void 0:r.data]):[[],0]},companies:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`monitoring/all-companies/?page=${e}&page_size=10`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},plants:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.get(`monitoring/company/${a}/plants/?page=${e}&page_size=10`,{},t,L.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},divisions:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.get(`monitoring/plant/${a}/divisions/?page=${e}&page_size=10`,{},t,L.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},lines:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.get(`monitoring/division/${a}/lines/?page=${e}&page_size=10`,{},t,L.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post("orders/issue-extra-material/",e,t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data},update:async(e,a)=>{const s=new M.Ay,n=await s.put(`orders/update-material-failure/${e}/`,a,t,(e=>(0,L.So)(e,null)));return null===n||void 0===n?void 0:n.data},getFilters:async e=>{const a=new M.Ay,s=await a.get(`monitoring/get-filters/?asset_id=${e}`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]}}};var ga=a(34535),wa=a(4598);const ya=()=>{const{t:e,i18n:t}=(0,j.Bd)(),a=(0,P.Zp)(),{summary:s,companies:n,plants:r,divisions:o,lines:d}=xa(),[c,u]=(0,y.useState)(null),[m,h]=(0,y.useState)(!1),[p,x]=(0,y.useState)(0),[g,w]=(0,y.useState)(0),[v,f]=(0,y.useState)("fetch"),[A,S]=(0,y.useState)([{email:"email@gmail.com",username:"user",fullname:"fullName",employee_id:"employee_id"}]),[b,_]=(0,y.useState)(new Map),[C,N]=(0,y.useState)({company_id:"",plant_id:"",division_id:"",line_id:"",date:(new Date).toISOString().split("T")[0],shift_id:""}),[k,E]=(0,y.useState)([{value:"All",key:""}]),[I,T]=(0,y.useState)([{value:"All",key:""}]),[D,R]=(0,y.useState)([{value:"All",key:""}]),[O,L]=(0,y.useState)([{value:"All",key:""}]),[M,U]=(0,y.useState)([]),z=[{placeholder:e("company"),type:Q.wN.SELECT,name:"company_id",width:"150px",keyValues:k},{placeholder:e("plant"),type:Q.wN.SELECT,name:"plant_id",width:"150px",keyValues:I},{placeholder:e("division"),type:Q.wN.SELECT,name:"division_id",validator:Q.wY.REQUIRED,width:"150px",keyValues:D},{placeholder:e("line"),type:Q.wN.SELECT,name:"line_id",validator:Q.wY.REQUIRED,width:"150px",keyValues:O},{placeholder:e("status"),type:Q.wN.SELECT,name:"state",width:"150px",keyValues:[{key:"",value:"All"},{key:1,value:"Online"},{key:2,value:"Offline"},{key:3,value:"Downtime"}]},{placeholder:e("date"),type:Q.wN.DATE,name:"date",width:"150px"}];async function F(){var e,t,a,n,i,l,r,o;let[d]=await s(p+1,!1===m?100:10,C.company_id||"",C.plant_id||"",C.division_id||"",C.line_id||"",C.date,C.shift_id||"",C.state||"");console.log("machine res-------",d);const c=(e,t)=>{const a=new Set(e.map((e=>e.key)));return t.filter((e=>!a.has(e.key)))};(null===d||void 0===d||null===(e=d.companies)||void 0===e?void 0:e.length)>0&&E((e=>[...e,...c(e,null===d||void 0===d?void 0:d.companies.map((e=>({value:e.name,key:e.id}))))])),(null===d||void 0===d||null===(t=d.plants)||void 0===t?void 0:t.length)>0&&T((e=>[...e,...c(e,null===d||void 0===d?void 0:d.plants.map((e=>({value:e.name,key:e.id}))))])),(null===d||void 0===d||null===(a=d.divisions)||void 0===a?void 0:a.length)>0&&R((e=>[...e,...c(e,null===d||void 0===d?void 0:d.divisions.map((e=>({value:e.name,key:e.id}))))])),(null===d||void 0===d||null===(n=d.lines)||void 0===n?void 0:n.length)>0&&L((e=>[...e,...c(e,null===d||void 0===d?void 0:d.lines.map((e=>({value:e.name,key:e.id}))))])),(null===d||void 0===d||null===(i=d.summaries)||void 0===i||null===(l=i.results)||void 0===l?void 0:l.length)>=0?(U(d.summaries.results),w(d.summaries.count)):0===(null===d||void 0===d||null===(r=d.summaries)||void 0===r||null===(o=r.results)||void 0===o?void 0:o.length)&&f(!1),N((e=>{var t;return{...e,company:null===(t=k[0])||void 0===t?void 0:t.key}}))}(0,y.useEffect)((()=>{F();const e=setInterval((()=>{F()}),1e4);return()=>clearInterval(e)}),[p,C.company_id,m,C.plant_id,C.division_id,C.line_id,C.date,C.shift_id,C.state]);const H=[{id:1,title:e("machineId"),render:e=>e.asset_name},{id:2,title:e("status"),render:e=>(0,V.jsx)(l.A,{sx:{textTransform:"capitalize"},color:"offline"===e.status?"#FF0000":"online"===e.status?"#27AE60":"#FAA036",children:e.status})},{id:3,title:"OEE",render:e=>e.oee+"%"},{id:4,title:e("availability"),render:e=>e.availability+"%"},{id:5,title:e("performance"),render:e=>e.utilization+"%"},{id:6,title:e("qty"),render:e=>e.quality},{id:7,title:e("action"),render:e=>(0,V.jsx)(l.A,{sx:{color:Q.lm.LIGHT_BLUE,cursor:"pointer"},onClick:()=>q(e),children:"Details"})}];function q(e){!0===e.is_singular_station?a("/child-machine",{state:{data:e,date:e.date}}):a("/machines",{state:{data:e,tab:m}})}const G=(0,ga.Ay)(wa.A)((e=>{let{theme:t}=e;return{width:28,height:16,padding:0,display:"flex","&:active":{"& .MuiSwitch-thumb":{width:15},"& .MuiSwitch-switchBase.Mui-checked":{transform:"translateX(9px)"}},"& .MuiSwitch-switchBase":{padding:2,"&.Mui-checked":{transform:"translateX(12px)",color:"#fff","& + .MuiSwitch-track":{opacity:1,backgroundColor:"#FAA036",border:2,...t.applyStyles("dark",{backgroundColor:"#FAA036"})}}},"& .MuiSwitch-thumb":{width:12,height:12,borderRadius:6,transition:t.transitions.create(["width"],{duration:200})},"& .MuiSwitch-track":{borderRadius:8,opacity:1,backgroundColor:"rgba(0,0,0,.25)",boxSizing:"border-box",...t.applyStyles("dark",{backgroundColor:"rgba(255,255,255,.35)"})}}}));return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:e("machineMonitoring")}),(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:1},children:(0,V.jsxs)(i.A,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[(0,V.jsx)(l.A,{className:"fw-16-400-36",children:e("kanbanView")}),(0,V.jsx)(G,{defaultChecked:m,inputProps:{"aria-label":"ant design"},onChange:e=>{x(0),h(e.target.checked),f(!1)}}),(0,V.jsx)(l.A,{className:"fw-16-400-36",children:e("listView")})]})})]}),(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:1,mb:1},children:(0,V.jsx)(B.A,{data:C,errors:b,onChange:e=>{const{name:t,value:a}=e.target;console.log("name value",t,a),_((e=>(e.delete(t),e))),N((e=>({...e,[t]:0==a?"":a})))},schema:z})}),!1===m?(0,V.jsx)(Ge.Ay,{container:!0,spacing:1.5,sx:{mb:50},children:M.length>0?M.map(((e,t)=>(0,V.jsx)(Ge.Ay,{item:!0,size:4,children:(0,V.jsx)("div",{style:{position:"relative",height:"auto",width:"430px"},children:(0,V.jsx)(pa,{data:e,expanded:c===t,onToggle:()=>(e=>{u(c===e?null:e)})(t),clickMore:()=>q(e)})},t)}))):(0,V.jsx)(i.A,{sx:{justifyContent:"center",alignItems:"center",mt:2,width:"100%"},children:!1===v&&(0,V.jsxs)(l.A,{children:[e("machineNotFound")," !"]})})}):(0,V.jsx)($.A,{columns:H,rows:M,rowsPerPage:10,loading:"fetch"===v,titleCellClasses:"c-gray fw-700",page:p,setPage:x,paginator:!0,serialize:!0,total:g,tableBodyColor:Q.lm.WHITE})]})};var va=a(3744),fa=a(461);a(33063);fa.t1.register(...fa.$L);const ja=e=>{let{timeLineData:t,lineTime:a}=e;const s=(0,y.useRef)(null),n={labels:[""],datasets:t};return(0,y.useLayoutEffect)((()=>{const e=s.current.getContext("2d"),t={type:"bar",data:n,options:{animation:!1,responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:e=>e.dataset.label}}},indexAxis:"y",scales:{x:{beginAtZero:!0,type:"time",time:{unit:"minute"},min:null===a||void 0===a?void 0:a.start_time,max:null===a||void 0===a?void 0:a.end_time,ticks:{stepSize:30,autoSkip:!1}},y:{beginAtZero:!1,stacked:!0}}}},i=new fa.t1(e,t);return()=>{i.destroy()}}),[t,a]),(0,V.jsx)("div",{style:{position:"relative",height:"100px",width:"100%",marginBottom:"15px"},children:(0,V.jsx)("canvas",{ref:s})})};var Aa=a(22738);a(14951);const Sa=e=>{var t,a,s,n;let{open:r,onClose:o,data:d,setData:c,onSubmit:u,loading:m,edit:h,assetsList:p,rsn:x,machineInfo:g}=e;const w=[{placeholder:(0,pe.t)("selectDowntimeReason"),type:Q.wN.SELECT,name:"reason",validator:Q.wY.REQUIRED,keyValues:x}],[v,f]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:r,onClose:o,width:"min(600px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsx)("h3",{className:"opacity-80",children:(0,pe.t)("downtimeReason")}),(0,V.jsxs)(l.A,{children:["Machine Name : ",(0,V.jsx)("strong",{children:null===g||void 0===g?void 0:g.asset_name})]}),(0,V.jsx)(l.A,{color:"primary",children:(null===(t=d.rowData)||void 0===t?void 0:t.barcode)||(0,pe.t)("packetNameNotFound")}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,V.jsxs)(l.A,{children:[(0,pe.t)("startTime"),": ",null===(a=d.rowData)||void 0===a?void 0:a.start_time]}),(0,V.jsxs)(l.A,{children:[(0,pe.t)("endTime"),": ",null===(s=d.rowData)||void 0===s?void 0:s.end_time]})]}),(0,V.jsxs)(l.A,{children:[(0,pe.t)("duration"),": ",null===(n=d.rowData)||void 0===n?void 0:n.duration]}),(0,V.jsx)(i.A,{sx:{py:2},children:(0,V.jsx)(B.A,{data:d,errors:v,onChange:e=>{const{name:t,value:a}=e.target;f((e=>(e.delete(t),e))),c((e=>({...e,[t]:a})))},schema:w})}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:o,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{const e=(0,Y.bG)(w,d);f(e),e.size||await u()},loading:m,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("submit")})})]})]})},ba=()=>{var e;const{t:t,i18n:a}=(0,j.Bd)(),s=(0,P.zy)(),n=(0,P.Zp)(),r=null===s||void 0===s?void 0:s.state;console.log("state-----------------------data",r);const{assetSummary:d,timelineSummary:c,getFilters:u}=xa(),{list:m,post_reason:h,reason_list:p}=(0,va.A)(),[x,g]=(0,y.useState)(null),[w,v]=(0,y.useState)("Kanban"),[f,A]=(0,y.useState)(0),[S,b]=(0,y.useState)(0),[_,C]=(0,y.useState)(),[N,k]=(0,y.useState)([]),[E,I]=(0,y.useState)([]),[T,D]=(0,y.useState)(new Map),[R,O]=(0,y.useState)({id:"",date:r.date,shift:"",state:"",quality:"",barcode:""}),[L,M]=(0,y.useState)([]),[U,z]=(0,y.useState)({shifts:[],states:[],quality:[]}),[F,H]=(0,y.useState)(!1),[q,G]=(0,y.useState)([]),[Y,W]=(0,y.useState)({});(0,y.useEffect)((()=>{!async function(){let[e]=await u(r.data.asset_id);z(e),C(!1)}()}),[]),(0,y.useEffect)((()=>{K(),J();const e=setInterval((()=>{K(),J()}),15e3);return()=>clearInterval(e)}),[f,R.date||"",R.shift||"",R.state||"",R.quality||"",R.barcode]);const X=[{id:1,title:t("shift"),render:e=>{var t;return null===(t=e.shift)||void 0===t?void 0:t.shift_name}},{id:2,title:t("state"),render:e=>e.event_type},{id:3,title:t("barcode"),render:e=>(0,V.jsx)(l.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>n("/packet-detail-page",{state:e}),children:e.barcode})},{id:4,title:t("startTime"),render:e=>e.start_time},{id:5,title:t("endTime"),render:e=>e.end_time},{id:7,title:t("duration"),render:e=>e.duration},{id:8,title:t("serialNo"),render:e=>e.employee_id},{id:8,title:t("quantity"),render:e=>e.parts_quantity},{id:8,title:t("quality"),render:e=>e.parts_quality},{id:8,title:t("operator"),render:e=>e.employee_id||"-"},{id:8,title:t("downtimeReason"),render:e=>"Downtime"===e.event_type&&(0,V.jsx)(i.A,{sx:{flexDirection:"row",alignItems:"center"},children:e.downtime_reason?(0,V.jsx)(l.A,{children:e.downtime_reason}):(0,V.jsx)(Aa.A,{sx:{cursor:"pointer"},onClick:()=>Z(e),color:"error"})})}],Z=async e=>{var t;G([]),O({...R,p_id:e.id,rowData:e}),H("submitReason");const[a]=await p(e.id);if(console.log("reason_list linst",a),(null===a||void 0===a||null===(t=a.reasons)||void 0===t?void 0:t.length)>0){const e=a.reasons.map((e=>({value:e.reason_name,key:e.id})));G((t=>[...t,...e]))}};async function J(){let[e]=await d(f+1,r.data.asset_id,R.date,R.shift||"",R.state||"",R.quality||"",R.barcode||"");k(e.results),M(e.count),C(!1)}async function K(){let[e]=await c(r.data.asset_id,R.date,R.shift||"",R.state||"",R.quality||"");I(e.data_set),W({end_time:e.end_time,start_time:e.start_time}),C(!1)}const ee=[{placeholder:t("date"),type:Q.wN.DATE,name:"date",validator:Q.wY.REQUIRED,width:"150px"},{placeholder:t("shift"),type:Q.wN.SELECT,name:"shift",validator:Q.wY.REQUIRED,width:"150px",keyValues:[{key:"",value:"All"},...U.shifts]},{placeholder:t("state"),type:Q.wN.SELECT,name:"state",validator:Q.wY.REQUIRED,width:"150px",keyValues:[{key:"",value:"All"},{key:"1",value:"Production"},{key:"2",value:"Downtime"}]},{placeholder:t("quality"),type:Q.wN.SELECT,name:"quality",validator:Q.wY.REQUIRED,width:"150px",keyValues:[{key:"",value:"All"},...U.quality]},{placeholder:t("searchBarcode"),type:Q.wN.INPUT,name:"barcode",width:"150px"}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)(i.A,{sx:{justifyContent:"space-between",flexDirection:"row"},children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1},children:[(0,V.jsx)(o.A,{onClick:()=>n(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.asset_name)||"name not found"})]}),(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:2},children:(0,V.jsx)(B.A,{data:R,errors:T,onChange:e=>{A(0);const{name:t,value:a}=e.target;D((e=>(e.delete(t),e))),O((e=>({...e,[t]:a})))},schema:ee})})]}),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(ja,{timeLineData:E,lineTime:Y}),(0,V.jsx)($.A,{columns:X,rows:N,rowsPerPage:10,loading:"fetch"===_,titleCellClasses:"c-gray fw-700",page:f,setPage:A,paginator:!0,serialize:!0,total:L,tableBodyColor:Q.lm.WHITE}),(0,V.jsx)(Sa,{machineInfo:null===r||void 0===r?void 0:r.data,open:"submitReason"===F,onClose:()=>{H(!1)},data:R,setData:O,onSubmit:async()=>{let e=R.p_id;const t={reason_id:R.reason};C("fetch");let a=await h(e,t);O({id:"",date:(new Date).toISOString().split("T")[0],shift:"",state:"",quality:"",barcode:""}),A(0),H(!1),await J(),console.log("creat res----",a)},rsn:q})]})]})};a(45412);const _a=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`orders/pending-orders/?page=${e}&page_size=10`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},pendinglist:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const s=new M.Ay,n=await s.get(`orders/pending-order/${e}/?page=${a}&page_size=10`,{},t,L.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post("orders/issue-extra-material/",e,t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data},update:async(e,a)=>{const s=new M.Ay,n=await s.put(`orders/update-material-failure/${e}/`,a,t,(e=>(0,L.So)(e,null)));return null===n||void 0===n?void 0:n.data},getShortMat:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post("orders/filter-pending-items/",e,t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data}}},Ca=e=>{let{open:t,onClose:a,openModal:s,data:n,setData:r,onSubmit:o,QR:d,loading:c,tab:u,setSelectedQuestions:m,skills:h,users:p,testList:x}=e;const g=(0,f.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.Failure_item)||void 0===t?void 0:t.data})),w=(0,y.useRef)(null),[v,j]=(0,y.useState)(),{list:A,create:S,update:b,getShortMat:_}=((0,f.wA)(),_a());console.warn("click item",g);const[C,N]=(0,y.useState)(new Map),[k,E]=(0,y.useState)(0);(0,y.useEffect)((()=>{console.warn("openModal----",s),w.current&&w.current.focus()}),["addAssign"===s]);const I=[{id:1,title:(0,pe.t)("orderNo"),render:e=>{var t;return(0,V.jsx)(l.A,{children:null===(t=e.work_order)||void 0===t?void 0:t.order_id})}},{id:3,title:(0,pe.t)("materialName"),render:e=>{var t;return(0,V.jsx)(l.A,{children:null===(t=e.material)||void 0===t?void 0:t.material_code})}},{id:44,title:(0,pe.t)("shortQty"),render:e=>(0,V.jsx)(l.A,{children:(0,Y.HY)(null===e||void 0===e?void 0:e.pending_quantity,2)})},{id:8,title:(0,pe.t)("action"),render:e=>(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:1},children:(0,V.jsx)(ye.A,{title:"scan item",children:(0,V.jsx)(H.A,{color:"light_green",sx:{height:25,width:25},onClick:()=>{var t;console.log("clicked data-----",e),T(null===e||void 0===e||null===(t=e.work_order)||void 0===t?void 0:t.id)},children:"Issue"})})})})}],T=async e=>{console.log("data in create mat------",g);const t={workorder_id:e,material_qr:d};let s=await S(t);console.log("res - create mat------",s),await a()};(0,pe.t)("materialQr"),(0,pe.t)("scanQr"),Q.wN.INPUT,(0,pe.t)("materialCode"),(0,pe.t)("enterMaterialCode"),Q.wN.INPUT,(0,pe.t)("grnNo"),(0,pe.t)("enterGrnNumber"),Q.wN.INPUT,(0,pe.t)("quantity"),(0,pe.t)("enterMaterialQuantity"),Q.wN.INPUT,Q.wN.INPUT;return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(900px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-5",children:[(0,V.jsx)("h3",{className:"opacity-80",style:{width:"fit-content"},children:"Issuing item "}),(0,V.jsx)($.A,{columns:I,rows:p,loading:"fetch"===c,titleCellClasses:"c-gray fw-700",serialize:!0,tableBodyColor:Q.lm.WHITE})]})},Na=()=>{const e=(0,P.zy)(),t=((0,P.Zp)(),(0,f.wA)(),e.state),a=(0,f.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.Failure_item)||void 0===t?void 0:t.data})),[s,n]=(0,y.useState)([]),[r,o]=(0,y.useState)(),[d,c]=(0,y.useState)(0),[u,m]=(0,y.useState)(!1),[h,p]=(0,y.useState)("testDetail"),[x,g]=(0,y.useState)(0),[w,v]=(0,y.useState)({}),j=(0,y.useRef)(null),{list:A,pendinglist:S,create:b,update:_}=_a(),[C,N]=(0,y.useState)(new Map),[k,E]=(0,y.useState)([]),[I,T]=(0,y.useState)([]),[D,R]=(0,y.useState)([]),[O,L]=(0,y.useState)(""),M=[{id:1,title:(0,pe.t)("orderNo"),render:e=>{var t;return(0,V.jsx)(l.A,{children:null===(t=e.work_order)||void 0===t?void 0:t.order_id})}},{id:2,title:(0,pe.t)("FGCode"),render:e=>{var t;return(0,V.jsx)(l.A,{children:null===(t=e.work_order)||void 0===t?void 0:t.name})}},{id:3,title:(0,pe.t)("materialName"),render:e=>{var t;return(0,V.jsx)(l.A,{children:null===(t=e.material)||void 0===t?void 0:t.material_code})}},{id:4,title:(0,pe.t)("resolutionDate"),render:e=>{var t;return(0,V.jsx)(l.A,{children:fe()(null===e||void 0===e||null===(t=e.work_order)||void 0===t?void 0:t.date_created).format("ll")})}},{id:44,title:(0,pe.t)("shortQty"),render:e=>(0,V.jsx)(l.A,{children:(0,Y.HY)(null===e||void 0===e?void 0:e.pending_quantity,2)})},{id:5,title:(0,pe.t)("status"),render:e=>(0,V.jsx)(l.A,{children:!0===(null===e||void 0===e?void 0:e.status)?"True":"False"})}];(0,y.useEffect)((()=>{U()}),[x]),(0,y.useEffect)((()=>{j.current&&j.current.focus()}),[]);const U=async()=>{const[e]=await S(t.id,x+1);console.log("test master-------",e.count),c(e.count),R(e.results),j.current&&j.current.focus()},z=async e=>{console.log("data in create mat------",a);const s={workorder_id:null===t||void 0===t?void 0:t.id,material_qr:e};let n=await b(s);console.log("res - create mat------",n),U()};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)(i.A,{sx:{flexDirection:"row",alignItems:"center",mb:1},children:(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("storePendingItems")})})}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,V.jsx)("h1",{className:"fw-24 mt-1",children:"Please scan the material and confirm"}),(0,V.jsx)("input",{ref:j,style:{height:"1.5rem",width:"26rem"},type:"text",onKeyPress:e=>{let t=e.target.value;"Enter"===e.key&&(e.target.value="",z(t))}})]}),(0,V.jsx)($.A,{columns:M,rows:D,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:x,setPage:g,paginator:!0,serialize:!0,total:d,tableBodyColor:Q.lm.WHITE}),(0,V.jsx)(Ca,{open:"addAssign"===h,onClose:()=>{p(!1)},onSubmit:z,users:s,testList:D,data:w,setData:v,openModal:h})]})};var ka=a(99466);const Ea=()=>{const e=(0,P.zy)(),t=(0,P.Zp)(),a=((0,f.wA)(),e.state,(0,f.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.Failure_item)||void 0===t?void 0:t.data}))),[s,n]=(0,y.useState)([]),[r,d]=(0,y.useState)(),[c,u]=(0,y.useState)(0),[m,h]=(0,y.useState)(!1),[p,x]=(0,y.useState)("testDetail"),[g,w]=(0,y.useState)(0),[v,j]=(0,y.useState)({}),A=(0,y.useRef)(null),{list:S,create:b,update:_,getShortMat:C}=_a(),[N,k]=(0,y.useState)(new Map),[E,I]=(0,y.useState)([]),[T,D]=(0,y.useState)([]),[R,O]=(0,y.useState)([]),[L,M]=(0,y.useState)(""),[U,z]=(0,y.useState)([]),[F,H]=(0,y.useState)(""),q=[{id:11,title:(0,pe.t)("date"),render:e=>(0,V.jsx)(l.A,{children:fe()(null===e||void 0===e?void 0:e.date_created).format("ll")})},{id:1,title:(0,pe.t)("orderNo"),render:e=>(0,V.jsx)(l.A,{children:null===e||void 0===e?void 0:e.order_id})},{id:2,title:(0,pe.t)("FGCode"),render:e=>(0,V.jsx)(l.A,{children:null===e||void 0===e?void 0:e.fg_code})},{id:3,title:(0,pe.t)("orderType"),render:e=>(0,V.jsx)(l.A,{children:null===e||void 0===e?void 0:e.order_type})},{id:5,title:(0,pe.t)("status"),render:e=>(0,V.jsx)(l.A,{children:null===e||void 0===e?void 0:e.status})},{id:8,title:(0,pe.t)("action"),render:e=>(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:1},children:(0,V.jsx)(ye.A,{title:"scan item",children:(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{t("/store-pending-items",{state:e})},children:(0,V.jsx)(ka.A,{color:"primary",fontSize:"small"})})})})})}];(0,y.useEffect)((()=>{G()}),[g]),(0,y.useEffect)((()=>{A.current&&A.current.focus()}),[]);const G=async()=>{const[e]=await S(g+1);console.log("test master-------",e.count),u(e.count),O(e.results)},B=async e=>{console.log("data in create mat------",a);const t={material_qr:e};let s=await C(t);s.results&&s.results.length>0&&(console.log("res - create getShortMat mat------",s.results.length),z(s.results),H(e),x("addAssign"))};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)(i.A,{sx:{flexDirection:"row",alignItems:"center",mb:1},children:(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("storePendingOrders")})})}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,V.jsx)("h1",{className:"fw-24 mt-1",children:"Please scan the material and confirm"}),(0,V.jsx)("input",{ref:A,style:{height:"1.5rem",width:"26rem"},type:"text",onKeyPress:e=>{let t=e.target.value;"Enter"===e.key&&(e.target.value="",B(t))}})]}),(0,V.jsx)($.A,{columns:q,rows:R,rowsPerPage:10,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:g,setPage:w,paginator:!0,serialize:!0,total:c,tableBodyColor:Q.lm.WHITE}),(0,V.jsx)(Ca,{open:"addAssign"===p,onClose:()=>{x(!1)},onSubmit:B,users:U,testList:R,data:v,QR:F,setData:j,openModal:p})]})};var Ia=a(35475),Ta=a(48625),Da=a(77502);const Ra=e=>{let{rows:t=[],columns:a=[],minWidth:s=650,tableClasses:n="",titleCellClasses:l="",rowClassesMethod:r=()=>{},rowClasses:o="",rowCellClasses:d="",rowsPerPage:c=10,paginator:u=!1,loading:m,dense:h,hideBorder:p=!1,onRowClick:x=Function.prototype,onTableHeadCellClick:g=Function.prototype,handleFgCodeFilterInput:w=Function.prototype,handleOrderIdFilterInput:v=Function.prototype,handleOrderTypeFilterInput:f=Function.prototype,handleOrderStatusFilterInput:j=Function.prototype,serialize:A=!1,page:S=0,setPage:b=Function.prototype,total:_,mode:C}=e;const[N,k]=(0,y.useState)(null),[E,I]=(0,y.useState)(null),[T,D]=(0,y.useState)(null),[R,P]=(0,y.useState)(null);return(0,V.jsx)(kt.A,{children:(0,V.jsxs)(_t.A,{sx:{minWidth:s},className:`${n}`,size:h&&"small",children:[(0,V.jsx)(Et.A,{sx:{backgroundColor:Q.lm.BG_GRAY},children:(0,V.jsxs)(It.A,{children:[A&&(0,V.jsx)(Nt.A,{className:`${l} text-nowrap h3`,sx:{color:"black"},children:(0,pe.t)("sno")}),a.map(((e,t)=>(0,V.jsxs)(Nt.A,{style:{width:e.width&&e.width,color:"black"},className:`${l} text-nowrap`,children:[(0,V.jsx)("div",{onClick:()=>g(e.id),children:e.title}),"order_id"===e.id&&(0,V.jsx)("input",{type:"text",placeholder:"filter by order_id",value:N,onChange:e=>{console.log(`Updated value: ${e.target.value}`),k(e.target.value),v(e.target.value)},style:{borderRadius:"0.35vw",border:"1px solid grey",padding:"0.25vw",width:"90%",fontSize:"0.8rem"}}),"fg_code"===e.id&&(0,V.jsx)("input",{type:"text",placeholder:`filter by ${e.id}`,value:E,onChange:e=>{console.log(`Updated value: ${e.target.value}`),I(e.target.value),w(e.target.value)},style:{borderRadius:"0.35vw",border:"1px solid grey",padding:"0.25vw",width:"90%"}}),"order_type"===e.id&&(0,V.jsxs)("select",{value:T,onChange:e=>{console.log(`Updated value: ${e.target.value}`),D(e.target.value),f(e.target.value)},style:{borderRadius:"0.35vw",border:"1px solid grey",padding:"0.25vw",width:"10vw"},children:[(0,V.jsx)("option",{value:"",children:"Select Order Type"}),(0,V.jsx)("option",{value:"ACC",children:"ACC"}),(0,V.jsx)("option",{value:"LPC",children:"LPC"}),(0,V.jsx)("option",{value:"ASSEMBLY",children:"ASSEMBLY"})]}),"status"===e.id&&(0,V.jsx)("select",{value:R,onChange:e=>{console.log(`Updated value: ${e.target.value}`),P(e.target.value),j(e.target.value)},style:{borderRadius:"0.35vw",border:"1px solid grey",padding:"0.25vw",width:"8vw"},children:"planning"===C?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("option",{value:"",children:"Select Status"}),(0,V.jsx)("option",{value:"PLAN",children:"PLAN"}),(0,V.jsx)("option",{value:"PLANNED",children:"PLANNED"}),(0,V.jsx)("option",{value:"RUNNING",children:"RUNNING"}),(0,V.jsx)("option",{value:"COMPLETED",children:"COMPLETED"})]}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("option",{value:"",children:"Select Status"}),(0,V.jsx)("option",{value:"PLAN",children:"PLAN"}),(0,V.jsx)("option",{value:"ISSUING",children:"ISSUING"}),(0,V.jsx)("option",{value:"RUNNING",children:"RUNNING"}),(0,V.jsx)("option",{value:"SHORTAGE",children:"SHORTAGE"})]})})]},t)))]})}),(0,V.jsx)(i.A,{sx:{p:.3}}),(0,V.jsx)(Ct.A,{children:m?(0,V.jsx)(It.A,{children:(0,V.jsx)(Nt.A,{colSpan:12,className:"flex h-300 text-center",children:(0,V.jsx)(zt.A,{big:!0,blue:!0})})}):t&&t.length?t.map(((e,t)=>(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(It.A,{sx:{backgroundColor:Q.lm.LG_GRAY,[`& .${Da.A.root}`]:{borderBottom:p?"none":"true",mt:10},...r(t,e)},className:`${o}`,onClick:()=>x(e.id),children:[A&&(0,V.jsx)(Nt.A,{sx:{color:"black"},className:`${d} fw-500 `,align:"left",children:t+1}),a.map(((t,a)=>(0,V.jsx)(Nt.A,{sx:{width:t.width&&t.width,color:"black"},className:`${d} fw-500`,align:"left",children:t.render(e)},a)))]},t),(0,V.jsx)(i.A,{sx:{p:.3}})]}))):(0,V.jsx)(It.A,{children:(0,V.jsxs)(Nt.A,{colSpan:12,className:"text-center h-300 flex items-center opacity-60 w-full",children:[(0,V.jsx)("img",{src:Ut,alt:"leaf",height:100,className:"w-full object-contain"}),(0,V.jsx)("p",{className:"text-center",children:"No Records found!"})]})})}),u&&(0,V.jsx)(At.A,{children:(0,V.jsx)(It.A,{children:(0,V.jsx)(St.A,{rowsPerPageOptions:[],count:_||t.length,rowsPerPage:c,onPageChange:(e,t)=>b(t),page:S})})})]})})},Pa="capsule_capsule__6cbGS";function Oa(e){let{capsuleText:t}=e;var a;switch(t){case"PLAN":default:a="#fa7474";break;case"ISSUING":a="#ffd6b0";break;case"PLANNED":a="#dded7f";break;case"RUNNING":a="#e9efc5";break;case"COMPLETED":a="#E9EFC5";break;case"SHORTAGE":a=Q.lm.PASTEL_RED}return(0,V.jsx)("div",{className:Pa,style:{backgroundColor:a},children:t})}const $a="button_button__ex9ic";var La=a(11906);const Ma=e=>{let{children:t,onClick:a,top:s,color:n,classes:i,height:l,width:r,bordered:o,gray:d,disabled:c,loading:u,hide:m,background:h,white:p,customStyle:x={}}=e;const g={blue:Q.lm.DARK_BLUE,orange:Q.lm.ORANGE,green:Q.lm.GREEN,red:Q.lm.RED,gray:Q.lm.BG_GRAY,yellow:Q.lm.YELLOW,white:Q.lm.WHITE,light_green:Q.lm.LIGHT_GREEN}[n]||"#498cce";return m?null:(0,V.jsx)(La.A,{"data-testid":"button",style:{marginTop:s,backgroundColor:o?h||"transparent":g,height:!!l&&l,width:!!r&&r,border:!!o&&`1.5px solid ${d?"lightgray":g}`,color:p?"#0A2B77":d?"lightgray":o?g:"#ffffff",opacity:c&&.8,pointerEvents:c&&"none",...x},className:`${$a} ${i}`,onClick:a,disabled:c,children:u?(0,V.jsx)(zt.A,{red:"red"===n&&!!o,orange:"orange"===n&&!!o,green:"green"===n&&!!o,blue:!!o}):t})};const Ua=a.p+"static/media/action-icon.7ea474ec817bbcbc0bcf492a497a0fdd.svg",za=e=>{let{open:t,onClose:a,data:s={},setData:n,onSubmit:i,handleAdd2:l,loading:r,tab:o}=e;const d=Object.entries(s).filter((e=>{let[t,a]=e;return"id"!==t&&null!=a}));return console.log("order details data",s),(0,V.jsx)(q.A,{open:t,onClose:a,wrapperClasses:"px-5 py-4",width:"81vw",hideCloseIcon:W.A,crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:(0,V.jsxs)("div",{className:"orderDetailsContainer",children:[(0,V.jsx)("div",{className:"leftPart",children:(0,V.jsx)("ul",{className:"orderDetailKeyList",children:d.map((e=>{let[t]=e;return(0,V.jsx)("li",{children:(a=t,a.charAt(0).toUpperCase()+a.slice(1))},t);var a}))})}),(0,V.jsx)("div",{className:"rightPart",children:(0,V.jsx)("ul",{className:"orderDetailValueList",children:d.map((e=>{let[t,a]=e;return(0,V.jsx)("li",{children:a},t)}))})})]})})};var Fa=a(63709);const Ha=()=>{const[e,t]=(0,y.useState)(!1),[a,s]=(0,y.useState)(null),{token:n}=(0,f.d4)((e=>e[z.X.AUTH])),i={Authorization:`Bearer ${n}`,"Content-Type":M.yw.APPLICATION_JSON},l=new M.Ay,r=(0,y.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0,m=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0,p=arguments.length>9?arguments[9]:void 0,x=arguments.length>10?arguments[10]:void 0,g=arguments.length>11?arguments[11]:void 0,w=`${U.H.ORDERS}/all/?page=${e}`;n||r||o||d||c||u?w+="&sort_by=":!1!==n&&!1!==r&&!1!==o&&!1!==d&&!1!==c&&!1!==u||(w+="&sort_by="),m.forEach((e=>{switch(e){case"fg_code":switch(n){case!1:console.log("Code is false"),w+=w.endsWith("&sort_by=")?"-fg_code":",-fg_code";break;case!0:console.log("Code is true"),w+=w.endsWith("&sort_by=")?"fg_code":",fg_code";break;default:console.log("Code is an unexpected value")}break;case"order_type":switch(r){case!1:console.log("Order type is false"),w+=w.endsWith("&sort_by=")?"-order_type":",-order_type";break;case!0:console.log("Order type is true"),w+=w.endsWith("&sort_by=")?"order_type":",order_type";break;default:console.log("Order type is an unexpected value")}break;case"status":switch(o){case!1:console.log("Status is false"),w+=w.endsWith("&sort_by=")?"-status":",-status";break;case!0:console.log("Status is true"),w+=w.endsWith("&sort_by=")?"status":",status";break;default:console.log("Status is an unexpected value")}break;case"order_id":switch(d){case!1:console.log("Order ID is false"),w+=w.endsWith("&sort_by=")?"-order_id":",-order_id";break;case!0:console.log("Order ID is true"),w+=w.endsWith("&sort_by=")?"order_id":",order_id";break;default:console.log("Order ID is an unexpected value")}break;case"name":switch(c){case!1:console.log("Name is false"),w+=w.endsWith("&sort_by=")?"-name":",-name";break;case!0:console.log("Name is true"),w+=w.endsWith("&sort_by=")?"name":",name";break;default:console.log("Name is an unexpected value")}break;case"quantity":switch(u){case!1:console.log("Quantity is false"),w+=w.endsWith("&sort_by=")?"-quantity":",-quantity";break;case!0:console.log("Quantity is true"),w+=w.endsWith("&sort_by=")?"quantity":",quantity";break;default:console.log("Quantity is an unexpected value")}break;default:console.log("Unknown column ID:",e)}})),h&&(w+="&order_id=",w+=h),p&&(w+="&fg_code=",w+=p),x&&(w+="&type=",w+=x),g&&(w+="&status=",w+=g),t(!0),s(null);try{return(await l.get(w,{},i)).data}catch(a){s(a.message||"Error in fetchOrders:")}finally{t(!1)}}),[l,i]),o=(0,y.useCallback)((async()=>{const e=`${U.H.ORDERS}/order-matrix-view/`;t(!0),s(null);try{return(await l.get(e,{},i)).data}catch(a){s(a.message||"Error in fetchOrders:")}finally{t(!1)}}),[l,i]),d=(0,y.useCallback)((async e=>{const s=`${U.H.ORDERS}/order-details/${e}/`;try{t(!0);return(await l.get(s,{},i)).data}catch(a){console.error(a.message||"Error in fetching orders by id")}finally{t(!1)}}),[l,i]),c=(0,y.useCallback)((async e=>{const s=`${U.H.ORDERS}/material-on-hold/${e}/`;try{t(!0);return(await l.get(s,{},i)).data}catch(a){console.error(a.message||"Error in getting order on hold quantity")}finally{t(!1)}}),[l,i]),u=(0,y.useCallback)((async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=`${U.H.ORDERS}/bom-submit/${e}/`;try{t(!0);return(await l.post(n,s,i)).data}catch(a){console.error(a.message||"Error in submitting BOM")}finally{t(!1)}}),[l,i]),m=(0,y.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=`${U.H.ORDERS}/material-failure-reasons/`,r={reason_name:e,resolution_date_required:s};try{t(!0);return(await l.post(n,r,i)).data}catch(a){console.error(a.message||"Error in getting Failure Reasons")}finally{t(!1)}}),[l,i]),h=(0,y.useCallback)((async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=`${U.H.ORDERS}/generate-voucher/${e}/`;try{t(!0);return(await l.get(n,s,i)).data}catch(a){console.error(a.message||"Error")}finally{t(!1)}}),[l,i]);return{loading:e,error:a,fetchOrders:r,fetchOrdersMatrixView:o,fetchOrdersById:d,getOrderHoldQuantity:c,submitBOM:u,postFailureReason:m,VoucherDownload:h}},qa=()=>{const[e,t]=(0,y.useState)(!1),[a,s]=(0,y.useState)(null),{token:n}=(0,f.d4)((e=>e[z.X.AUTH])),i={Authorization:`Bearer ${n}`,"Content-Type":M.yw.APPLICATION_JSON},l=new M.Ay,r=(0,y.useCallback)((async e=>{const s=`${U.H.ORDERS}/materials-required/${e}/`;try{t(!0);return(await l.get(s,{},i)).data}catch(a){console.error(a.message||"Error in fetching orders by id")}finally{t(!1)}}),[l,i]),o=(0,y.useCallback)((async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=`${U.H.ORDERS}/material-on-hold/${e}/`;try{t(!0);return(await l.post(n,s,i)).data}catch(a){console.error(a.message||"Error in setting order on hold quantity")}finally{t(!1)}}),[l,i]),d=(0,y.useCallback)((async(e,s)=>{const n=`${U.H.ORDERS}/update-state/${e}/`,r={state:s};try{t(!0);return(await l.put(n,r,i)).data}catch(a){console.error(a.message||"Error in submitting BOM")}finally{t(!1)}}),[l,i]),c=(0,y.useCallback)((async(e,s,n,r,o,d)=>{const c=`${U.H.ORDERS}/label-generator/`,u={material_code:e,grn_number:s,grn_date:n,unit:r,qty1:o,qty2:d};try{t(!0);return(await l.post(c,u,i)).data}catch(a){console.error(a.message||"Error in submitting BOM")}finally{t(!1)}}),[l,i]),u=(0,y.useCallback)((async()=>{const e=`${U.H.ORDERS}/material-failure-reasons/`;try{t(!0);return(await l.get(e,{},i)).data}catch(a){console.error(a.message||"Error in getting Failure Reasons")}finally{t(!1)}}),[l,i]),m=(0,y.useCallback)((async function(e,s,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Fake comment";const d=`${U.H.ORDERS}/material-failure-entry/${e}/`,c={material_code:s,failure_reason_id:n,comments:o,resolution_date:r};try{t(!0);return(await l.post(d,c,i)).data}catch(a){console.error(a.message||"Error in submitting Failure Reason")}finally{t(!1)}}),[l,i]),h=(0,y.useCallback)((async(e,s)=>{const n=`${U.H.AUTH}/supervisor-authentication/`,r={username:e,password:s};try{t(!0);return(await l.post(n,r,i)).data}catch(a){console.error(a.message||"Error in supervisor login")}finally{t(!1)}}),[l,i]),p=(0,y.useCallback)((async(e,s,n,r,o,d)=>{const c=`${U.H.ORDERS}/stock-transfer/`,u={material_code1:e,material_code2:s,quantity:n,grn_number:r,unit:o,grn_date:d};try{t(!0);return(await l.post(c,u,i)).data}catch(a){console.error(a.message||"Error in Stock Transfer")}finally{t(!1)}}),[l,i]),x=(0,y.useCallback)((async e=>{const s=`${U.H.ORDERS}/kitting-qr/${e}/`;try{t(!0);return(await l.get(s,{},i)).data}catch(a){console.error(a.message||"Error in getting Kitting Label")}finally{t(!1)}}),[l,i]),g=(0,y.useCallback)((async e=>{const s={labelData:e};try{t(!0);return(await l.post_local("print-labels/",s,i)).data}catch(a){console.error(a.message||"Error in Printing Labels")}finally{t(!1)}}),[l,i]);return{loading:e,error:a,fetchMaterialsRequired:r,setOrderHoldQuantity:o,updateOrderState:d,generateLabels:c,getFailureReasons:u,submitFailureReason:m,supervisorLogin:h,stockTransfer:p,getKittingLabel:x,printLabels:g}},Ga=e=>{let{setLocalUI:t,data:a={},noStepFn:s=()=>{},nextStepFn:n=()=>{}}=e;const{fetchOrdersById:i,error:l,loading:r}=Ha();console.log("FulfilledOrderActionModal data",a);const[o,d]=(0,y.useState)(null);return(0,y.useEffect)((()=>{a&&a.orderId&&i(a.orderId).then((e=>{console.log("setSelectedOrderDetails data",e),d(e)}))}),[a]),(0,V.jsxs)("div",{className:"action_modal__container",children:[(0,V.jsx)("div",{children:(0,V.jsx)(Ke.A,{sx:{fontSize:"6rem",color:"#86D56A"}})}),(0,V.jsxs)("p",{children:["Material Planning for Order ",(0,V.jsx)("strong",{children:null===o||void 0===o?void 0:o.name})," is successfully done."]}),(0,V.jsxs)("p",{children:["Order ",(0,V.jsx)("strong",{children:null===o||void 0===o?void 0:o.order_id})," is in Processing Stage now."]}),(0,V.jsxs)("p",{children:["Do you want to move it to ",(0,V.jsx)("em",{children:"Running Stage"}),"?"]}),(0,V.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,V.jsx)(Ma,{onClick:s,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:(0,pe.t)("no")}),(0,V.jsx)(Ma,{onClick:n,color:"green",width:"8rem",height:"2.5rem",children:(0,pe.t)("yes")})]})]})},Ba=e=>{let{setLocalUI:t,data:a={},noStepFn:s=()=>{},nextStepFn:n=()=>{},isPartialFulfilledOrderActionModalEditBtnEnabled:i=!1}=e;const{fetchOrdersById:l,error:r,loading:o}=Ha();console.log("PartialFulfilledOrderActionModal data",a);const[d,c]=(0,y.useState)(null);return(0,y.useEffect)((()=>{a&&a.orderId&&l(a.orderId).then((e=>{console.log("setSelectedOrderDetails data",e),c(e)}))}),[a]),(0,V.jsxs)("div",{className:"action_modal__container",children:[(0,V.jsx)("div",{children:(0,V.jsx)(Ke.A,{sx:{fontSize:"6rem",color:"#86D56A"}})}),(0,V.jsxs)("p",{children:["Do you want to Edit",i&&(0,V.jsx)("span",{children:" or Run"})]}),(0,V.jsxs)("span",{children:["Order ",null===d||void 0===d?void 0:d.order_id," ",(0,V.jsx)("strong",{children:null===d||void 0===d?void 0:d.name})," "]}),(0,V.jsx)("br",{}),(0,V.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,V.jsx)(Ma,{onClick:s,white:!!i,color:i?"":"green",width:"8rem",height:"2.5rem",bordered:!!i,customStyle:i?{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"}:{},children:"Edit"}),i&&(0,V.jsx)(Ma,{onClick:n,color:"green",width:"8rem",height:"2.5rem",children:"Run"})]})]})},Qa=[{color:"var(--primary-color)",title:"Plan",value:38},{color:"var(--secondary-color)",title:"Issuing",value:14},{color:"var(--tertiary-color)",title:"Running",value:2},{color:"var(--pastel-red)",title:"Shortage",value:2}];const Ya=e=>{let{color:t,title:a,value:s}=e;return(0,V.jsxs)("div",{className:"overview-metrics-box",style:{backgroundColor:t},children:[(0,V.jsx)("p",{children:a}),(0,V.jsx)("p",{children:s})]})},Wa=function(){const e=(0,P.Zp)(),[t]=(0,Ia.ok)(),[a,s]=(0,y.useState)(!0),[n,l]=(0,y.useState)({pageLoading:!0,isFulfilledOrderActionModalOpen:!1,isPartialFulfilledOrderActionModalOpen:!1,selectedOrderId:null,selectedOrderOrderId:null,selectedOrderName:null,selectedOrderStatus:null,userActionStatus:null,selectedOrderType:null,selectedHoldingOrderMaterialsQty:null,isPartialFulfilledOrderActionModalEditBtnEnabled:null}),[r,d]=(0,y.useState)([]),[c,u]=(0,y.useState)([]),{fetchOrders:m,fetchOrdersMatrixView:h,fetchOrdersById:p,getOrderHoldQuantity:x,submitBOM:g,VoucherDownload:w,error:v,loading:f}=Ha(),{updateOrderState:j}=qa(),[A,S]=(0,y.useState)(0),[b,_]=(0,y.useState)(!1),[C,N]=(0,y.useState)({}),[k,E]=(0,y.useState)(1),[I,T]=(0,y.useState)(null),[D,R]=(0,y.useState)(null),[O,$]=(0,y.useState)(5),[L,M]=(0,y.useState)(null),[U,z]=(0,y.useState)(null),[F,H]=(0,y.useState)(!1),[G,B]=(0,y.useState)({specification:{},location:{}}),[X,Z]=(0,y.useState)(Qa),[J,K]=(0,y.useState)(null),[ee,te]=(0,y.useState)(null),[ae,se]=(0,y.useState)(null),[ne,ie]=(0,y.useState)(null),[le,re]=(0,y.useState)(!0),[oe,de]=(0,y.useState)(null),[ce,ue]=(0,y.useState)(null),[me,he]=(0,y.useState)(["order_id"]),[xe,ge]=(0,y.useState)(null),[we,ye]=(0,y.useState)(null),[ve,je]=(0,y.useState)(null),[Ae,Se]=(0,y.useState)(null);(0,y.useEffect)((()=>{m(k,ee,ae,ne,le,oe,ce,me,xe,we,ve,Ae).then((e=>{u(e.results),T(e.count);const t=Math.ceil(e.count/O);R(t),De(k),e.previous?M(!0):M(!1),e.next?z(!0):z(!1)}))}),[k,ee,ae,ne,le,oe,ce,xe,we,ve,Ae]);const be=t=>{switch(t.status){case Q.ht.PLAN:e(`/material-planner-plan?orderId=${t.id}&orderStatus=${t.status}&orderType=${t.order_type}&orderOrderId=${t.order_id}`);break;case Q.ht.ISSUING:console.log("orderData.order_type",t.order_type),l((e=>({...e,isPartialFulfilledOrderActionModalOpen:!0,selectedOrderOrderId:t.order_id,selectedOrderStatus:t.status,selectedOrderId:t.id,selectedOrderType:t.order_type,isPartialFulfilledOrderActionModalEditBtnEnabled:"ASSEMBLY"!==t.order_type})));break;case Q.ht.RUNNING:l((e=>({...e,selectedOrderOrderId:t.order_id,selectedOrderStatus:t.status,selectedOrderId:t.id,selectedOrderType:t.order_type,isPartialFulfilledOrderActionModalEditBtnEnabled:!1}))),Ie(t.id,t.status,t.order_type,t.order_id);break;case Q.ht.SHORTAGE:l((e=>({...e,selectedOrderOrderId:t.order_id,selectedOrderStatus:t.status,selectedOrderId:t.id,selectedOrderType:t.order_type,isPartialFulfilledOrderActionModalEditBtnEnabled:!1}))),Ie(t.id,"SHORTAGE",t.order_type,t.order_id)}},_e=e=>{const t=e.order_id,a=e.quantity,s=e.fg_code,n=e.date,i=document.createElement("table"),l=document.createElement("tr");["S.No","Material Code","Description","Location","BOM Qty","Req Qty","Total Issues","GRN Issued Qty"].forEach((e=>{const t=document.createElement("th");t.textContent=e,l.appendChild(t)})),i.appendChild(l),Array.isArray(e.material_data)?e.material_data.forEach(((e,t)=>{console.log("print data",e);const a=document.createElement("tr"),s=document.createElement("td");s.textContent=t+1,a.appendChild(s);const n=document.createElement("td");n.textContent=e.material,a.appendChild(n);const l=document.createElement("td");l.textContent=e.description,l.style.textAlign="start",a.appendChild(l);const r=document.createElement("td");r.textContent=e.location,a.appendChild(r);const o=document.createElement("td");o.textContent=(0,Y.HY)(e.bom_quantity),a.appendChild(o);const d=document.createElement("td");d.textContent=(0,Y.HY)(e.requirement_quantity),a.appendChild(d);const c=document.createElement("td");c.textContent=(0,Y.HY)(e.total_issued),a.appendChild(c);const u=document.createElement("td");u.innerHTML=Object.entries(e.issued_labels).map((e=>{let[t,a]=e;return`${t} (${(0,Y.HY)(a)})`})).join("<br>"),a.appendChild(u),i.appendChild(a)})):console.error("issued_labels is undefined or not an array");const r=window.open("","_blank");r.document.write("<html><head><title>Print Table</title><style>table { width: 100%; border-collapse: collapse; }th, td { border: 1px solid #dddddd; text-align: center; padding: 8px; }th { background-color: #f2f2f2; }tr:nth-child(even) { background-color: #f9f9f9; }tr:nth-child(odd) { background-color: #ffffff; }</style></head><body>"),r.document.write(`\n      <div style="display: flex; flex-direction: row;justify-content: space-between;">\n        <p><strong>Order ID:</strong> ${t}</p>\n        <p><strong>Qty:</strong> ${a}</p>\n        <p><strong>FG Code:</strong> ${s}</p>\n        <p><strong>Date:</strong> ${n}</p>\n      </div>\n    `),r.document.write(i.outerHTML),r.document.write("</body></html>"),r.document.close(),r.print()},Ce=t.get("orderId"),Ne=t.get("status"),ke=t.get("orderStatus"),Ee=()=>{h().then((e=>{const t=X.map((t=>({...t,value:e[t.title.toLowerCase()]})));Z(t),K((new Date).toLocaleString())}))};(0,y.useEffect)((()=>{Ee();const e=t.get("orderId"),a=t.get("status"),s=t.get("orderStatus");e&&a&&s?(l((t=>{let n={...t};return a.toLowerCase()===Q.eN.SCANNED&&(console.log("paramStatus.toLowerCase() === USER_ACTIONS.SCANNED"),n.isFulfilledOrderActionModalOpen=!0,n.selectedOrderId=e,n.selectedOrderStatus=s,n.userActionStatus=a),n.pageLoading=!1,n})),p(e).then((e=>{if(console.log("fetchOrdersById",n.selectedOrderId,"data",e),e){const t=e.name||"",a=e.order_id||"";l((e=>({...e,selectedOrderOrderId:a,selectedOrderName:t})))}}))):l((e=>({...e,pageLoading:!1})))}),[Ce,Ne,ke]);const Ie=(t,a,s,n)=>{e(`/material-planner-plan/scanning?orderId=${t}&orderStatus=${a}&orderType=${s}&orderOrderId=${n}`)},[Te,De]=(0,y.useState)(k);return n.pageLoading?(0,V.jsx)("div",{className:"mx-3 my-2",style:{display:"grid",placeItems:"center"},children:(0,V.jsx)(zt.A,{green:!0})}):(0,V.jsxs)("div",{className:"mx-3 my-2 material-planner-layout",children:[(0,V.jsxs)("div",{className:"material-planner-layout-header",children:[(0,V.jsx)("div",{className:"overview-heading",children:(0,pe.t)("overview")}),(0,V.jsxs)("div",{className:"overview-metrics-container",children:[X.map((e=>(0,V.jsx)(Ya,{color:e.color,title:e.title,value:e.value}))),(0,V.jsxs)("div",{className:"overview-last-refresh",children:[(0,V.jsxs)("div",{className:"leftPart",children:[(0,V.jsx)("div",{children:(0,pe.t)("lastRefresh")}),(0,V.jsx)("span",{children:J})]}),(0,V.jsx)("div",{className:"rightPart",children:(0,V.jsx)(o.A,{onClick:Ee,children:(0,V.jsx)(Ta.A,{})})})]})]})]}),(0,V.jsxs)("div",{className:"material-planner-layout-body",children:[(0,V.jsx)(Ra,{edit:F,columns:[{id:5,title:"Date",render:e=>fe()(e.date_created).format("ll")},{id:"order_id",title:"Order ID "+(!0===le?"\u2191":!1===le?"\u2193":"\u2191\u2193"),render:e=>(0,V.jsx)("span",{onClick:()=>(async e=>{_(!0);try{const t=await p(e);N(t)}catch(Le){console.error("Error in fetchOrderDetails:",Le)}})(e.id),style:{cursor:"pointer",color:"blue"},children:e.order_id})},{id:"name",title:"Name "+(!0===oe?"\u2191":!1===oe?"\u2193":"\u2191\u2193"),render:e=>e.name},{id:"quantity",title:"Qty",title:"Qty "+(!0===ce?"\u2191":!1===ce?"\u2193":"\u2191\u2193"),render:e=>(0,Y.HY)(e.quantity)},{id:"fg_code",title:"Code "+(!0===ee?"\u2191":!1===ee?"\u2193":"\u2191\u2193"),render:e=>e.fg_code},{id:"order_type",title:"Order type "+(!0===ae?"\u2191":!1===ae?"\u2193":"\u2191\u2193"),render:e=>e.order_type},{id:"status",title:"Status "+(!0===ne?"\u2191":!1===ne?"\u2193":"\u2191\u2193"),render:e=>(0,V.jsx)(Oa,{capsuleText:e.status})},{id:9,title:"Action",render:e=>(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:"1vw"},children:[(0,V.jsx)("img",{src:Ua,style:{width:"2.78vw",height:"2.78vw",cursor:"pointer"},alt:"Action Icon",onClick:()=>be(e)}),(0,V.jsx)(o.A,{onClick:()=>{return t=e.id,void w(t).then((e=>{_e(e),console.log("Voucher Downloaded redds",e)}));var t},children:(0,V.jsx)(Fa.A,{})})]})}],onTableHeadCellClick:e=>{(e=>{switch(e){case"fg_code":te((t=>{switch(t){case null:return console.log("a is null"),he((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),he((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("code case");break;case"order_type":se((t=>{switch(t){case null:return console.log("a is null"),he((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),he((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("order type case");break;case"status":ie((t=>{switch(t){case null:return console.log("a is null"),he((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),he((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("status case");break;case"order_id":re((t=>{switch(t){case null:return console.log("a is null"),he((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),he((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("order id case");break;case"name":de((t=>{switch(t){case null:return console.log("a is null"),he((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),he((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("order id case");break;case"quantity":ue((t=>{switch(t){case null:return console.log("a is null"),he((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),he((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("order id case");break;default:console.log(e,"clicked")}})(e)},rows:c,rowsPerPage:O,loading:f,titleCellClasses:"c-gray fw-700",page:k-1,serialize:!0,total:I,handleOrderIdFilterInput:e=>{(e=>{console.log("handleOrderIdFilterInput",e),ge(e)})(e)},handleFgCodeFilterInput:e=>{(e=>{console.log("handleFgCodeFilterInput",e),ye(e)})(e)},handleOrderTypeFilterInput:e=>{(e=>{console.log("handleOrderTypeFilterInput",e),je(e)})(e)},handleOrderStatusFilterInput:e=>{(e=>{console.log("handleOrderStatusFilterInput",e),Se(e)})(e)}}),(0,V.jsxs)("div",{className:"pagination-controls",children:[(0,V.jsx)(Ma,{onClick:()=>{E(k-1),console.log("prev page")},white:!0,width:"auto",height:"auto",bordered:!0,disabled:!L,customStyle:{border:"1px solid #3E3E3E",backgroundColor:L?"#FFFFFF":"#CCCCCC",color:L?"#000000":"#999999",cursor:L?"pointer":"not-allowed"},children:(0,pe.t)("prev")}),(0,V.jsxs)("div",{className:"page-details",children:[(0,V.jsx)("div",{children:(0,pe.t)("page")})," ",(0,V.jsx)("input",{type:"number",value:Te,onChange:e=>{const t=e.target.value;/^\d*$/.test(t)&&De(t)},onBlur:()=>{const e=Math.ceil(Te);!isNaN(e)&&e>0&&e<=D?E(e):De(k)},className:"page-number-input"}),(0,V.jsx)("div",{children:"of "}),(0,V.jsx)("div",{children:(0,V.jsx)("strong",{children:D})})]}),(0,V.jsx)(Ma,{onClick:()=>{E(k+1),console.log("next page")},color:"green",width:"auto",height:"auto",disabled:!U,customStyle:{backgroundColor:U?"#27ae60":"#CCCCCC",color:U?"#FFFFFF":"#999999",cursor:U?"pointer":"not-allowed"},children:(0,pe.t)("next")})]})]}),b&&(0,V.jsx)(za,{open:b,onClose:()=>_(!1),data:C}),n.isFulfilledOrderActionModalOpen&&(0,V.jsx)(q.A,{open:n.isFulfilledOrderActionModalOpen,onClose:()=>l({isFulfilledOrderActionModalOpen:!1}),width:"80vw",top:"10vh",hideCloseIcon:W.A,wrapperClasses:"px-5 py-4",crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:(0,V.jsx)(Ga,{data:{orderId:n.selectedOrderId,status:n.selectedOrderStatus},noStepFn:()=>{const t=[...r],a=r.findIndex((e=>e.order_id===n.selectedOrderId));-1!==a&&n.userActionStatus===Q.eN.SCANNED&&(t[a].status=Q.ht.ISSUING),d(t),l({...n,isFulfilledOrderActionModalOpen:!1}),e("/material-planner/")},nextStepFn:()=>{const a=t.get("orderId");x(n.selectedOrderId).then((t=>{l((e=>({...e,selectedHoldingOrderMaterialsQty:t}))),console.log("getOrderHoldQuantity data",t),console.log("selectedHoldingOrderMaterialsQty",n.selectedHoldingOrderMaterialsQty),g(n.selectedOrderId,{material_issue:t}).then((t=>{console.log("submit BOM data",t),j(a,Q.ht.RUNNING).then((e=>{Ee()}));const s=c.map((e=>({...e}))),i=c.findIndex((e=>e.id===a));-1!==i&&(s[i].status=Q.ht.RUNNING),u(s),l({...n,isFulfilledOrderActionModalOpen:!1}),e("/material-planner/")}))}))}})}),n.isPartialFulfilledOrderActionModalOpen&&(0,V.jsx)(q.A,{open:n.isPartialFulfilledOrderActionModalOpen,onClose:()=>l({isPartialFulfilledOrderActionModalOpen:!1}),width:"50vw",top:"20vh",hideCloseIcon:W.A,wrapperClasses:"px-5 py-4",crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:(0,V.jsx)(Ba,{data:{orderId:n.selectedOrderId,status:n.selectedOrderStatus},noStepFn:()=>{l({...n,isPartialFulfilledOrderActionModalOpen:!1}),e("/material-planner/"),e(`/material-planner-plan/scanning?orderId=${n.selectedOrderId}&orderStatus=${n.selectedOrderStatus}&orderType=${n.selectedOrderType}&orderOrderId=${n.selectedOrderOrderId}`)},nextStepFn:()=>{const e=n.selectedOrderId;x(n.selectedOrderId).then((t=>{l((e=>({...e,selectedHoldingOrderMaterialsQty:t}))),console.log("getOrderHoldQuantity data",t),console.log("selectedHoldingOrderMaterialsQty",n.selectedHoldingOrderMaterialsQty),g(n.selectedOrderId,{material_issue:t}).then((t=>{console.log("submit BOM data",t),j(e,Q.ht.RUNNING).then((e=>{Ee()}));const a=c.map((e=>({...e}))),s=c.findIndex((t=>t.id===e));-1!==s&&(a[s].status=Q.ht.RUNNING),u(a),l({...n,isPartialFulfilledOrderActionModalOpen:!1}),Ee()}))}))},isPartialFulfilledOrderActionModalEditBtnEnabled:n.isPartialFulfilledOrderActionModalEditBtnEnabled})})]})},Va=e=>{let{open:t,onClose:a,failureReasonText:s="",isResolutionDateRequired:n=null,nextStepFn:i=()=>{},setData:l,onSubmit:r,handleAdd2:o,loading:d,tab:c}=e;return console.log("FailureReasonSuccessModal isResolutionDateRequired",n),(0,V.jsx)(q.A,{open:t,onClose:a,wrapperClasses:"px-5 py-4",width:"min(700px,90vw)",hideCloseIcon:W.A,crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:(0,V.jsxs)("div",{className:"failure-submit-success-message",children:[(0,V.jsx)("p",{children:(0,V.jsxs)("strong",{children:[(0,pe.t)("success"),"!"]})}),(0,V.jsxs)("p",{children:["Failure Reason ",(0,V.jsx)("strong",{children:s})," with Resolution Date required"," ",(0,V.jsx)("strong",{children:n?"true":"false"})," is submitted successfully."]}),(0,V.jsx)(H.A,{onClick:i,color:"green",customStyle:{borderRadius:"0.5vw",border:"1px solid grey",padding:"0.7vw",marginBottom:"1rem",marginTop:"1rem",fontSize:"1rem"},children:(0,pe.t)("ok")})]})})},Xa=e=>{let{open:t,onClose:a,failureReasonText:s="",setFailureReasonText:n=()=>{},isResolutionDateRequired:i=null,setIsResolutionDateRequired:l=()=>{},handleSubmit:r=()=>{}}=e;return(0,V.jsx)(q.A,{open:t,onClose:a,wrapperClasses:"px-5 py-4",width:"min(700px,90vw)",hideCloseIcon:W.A,crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:(0,V.jsxs)("div",{className:"failure-submit-success-message",children:[(0,V.jsx)("p",{children:(0,V.jsx)("strong",{children:(0,pe.t)("addFailureReason")})}),(0,V.jsxs)("form",{action:"",method:"post",className:"failure-reason-form",children:[(0,V.jsx)("div",{className:"failureReason-input-text-container",children:(0,V.jsxs)("label",{htmlFor:"failureReason",children:[(0,V.jsx)("div",{className:"label-text",children:(0,pe.t)("reasonName")}),(0,V.jsx)("input",{type:"text",name:"failureReason",placeholder:"Write failure reason here",value:s,onChange:e=>{console.log(`Updated value: ${e.target.value}`),n(e.target.value)},style:{borderRadius:"0.5vw",border:"1px solid grey",padding:"0.75vw",marginBottom:"1rem",fontSize:"1rem"}})]})}),(0,V.jsxs)("div",{className:"checkbox-items-container",children:[(0,V.jsxs)("div",{className:"resolution-date-label",children:[(0,pe.t)("resolutionDateRequired"),"?"]}),(0,V.jsx)("div",{children:(0,V.jsxs)("label",{className:"checkbox-item-container",children:[(0,pe.t)("yes"),(0,V.jsx)("input",{type:"checkbox",name:"isResolutionDateRequiredYes",checked:!0===i,onChange:e=>{console.log(`Yes checkbox updated: ${e.target.checked}`),l(!!e.target.checked||!1===i&&null)}})]})}),(0,V.jsx)("div",{children:(0,V.jsxs)("label",{className:"checkbox-item-container",children:[(0,pe.t)("no"),(0,V.jsx)("input",{type:"checkbox",name:"isResolutionDateRequiredNo",checked:!1===i,onChange:e=>{console.log(`No checkbox updated: ${e.target.checked}`),l(!e.target.checked&&(!0!==i||null))}})]})})]}),(0,V.jsx)("div",{className:"submit-btn-container",children:(0,V.jsx)(H.A,{onClick:r,color:"green",customStyle:{borderRadius:"0.5vw",border:"1px solid grey",padding:"0.7vw",marginBottom:"1rem",fontSize:"1rem"},disabled:!s||null===i,children:(0,pe.t)("submit")})})]})]})})};const Za=function(){const{postFailureReason:e,error:t,loading:a}=Ha(),{getFailureReasons:s}=qa(),[n,i]=(0,y.useState)(null),[r,o]=(0,y.useState)(null),[d,c]=(0,y.useState)(!1),[u,m]=(0,y.useState)(null),[h,p]=(0,y.useState)(null),[x,g]=(0,y.useState)(!1);return(0,y.useEffect)((()=>{s().then((e=>{i(e),o(Object.values(e))}))}),[x]),(0,V.jsxs)("div",{className:"mx-3 my-2 mp-instruction-layout",children:[(0,V.jsx)("div",{className:"mp-instruction-header",children:(0,V.jsxs)("p",{className:"issues-header",children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("failureReasons")}),(0,V.jsx)("div",{className:"add-issue-btn",children:!d&&(0,V.jsx)(Ma,{onClick:()=>{c(!0)},color:"gray",customStyle:{borderRadius:"0.25rem",border:"1px solid #D9D9D9",padding:"0.7vw",fontSize:"1rem",color:"black"},children:(0,pe.t)("addFailureReasons")})})]})}),(0,V.jsx)("div",{className:"material-planner-layout-body",children:(0,V.jsx)($.A,{columns:[{id:"reason_name",title:(0,pe.t)("reasonName"),render:e=>(0,V.jsx)("span",{children:e.name})},{id:"resolution_date_required",title:(0,pe.t)("resolutionDateRequired"),render:e=>(0,V.jsx)("span",{children:e.resolution_date_required?(0,pe.t)("yes"):(0,pe.t)("no")})}],rows:r,titleCellClasses:"c-gray fw-700",serialize:!0})}),d&&(0,V.jsx)(Xa,{open:d,onClose:()=>{c(!1)},failureReasonText:u,setFailureReasonText:m,isResolutionDateRequired:h,setIsResolutionDateRequired:p,handleSubmit:()=>{e(u,h).then((e=>{console.log("postFailureReason data",e),e&&"OK"===e.message&&(g(!0),c(!1))})).catch((e=>{console.error("postFailureReason error",e)}))}}),x&&(0,V.jsx)(Va,{open:x,onClose:()=>{g(!1),m("")},failureReasonText:u,isResolutionDateRequired:h,nextStepFn:()=>{g(!1)}})]})};var Ja=a(91707);const Ka=e=>{let{label:t,path:a,isLast:s}=e;return s?(0,V.jsx)("span",{className:"breadcrumb-item current",children:t}):(0,V.jsx)(Ia.N_,{to:a,className:"breadcrumb-item",children:t})},es=()=>{const e=(0,P.zy)(),[t,a]=(0,y.useState)([]),[s]=(0,Ia.ok)();return(0,y.useEffect)((()=>{if(e){const t=e.pathname.split("/"),n=[];t.forEach(((e,t)=>{switch(e){case"material-planner-plan":n.push({label:"Home",path:"/material-planner"}),n.push({label:"Order ID",path:""});break;case"plan":n.push({label:"Plan",path:"/material-planner/plan"})}})),n.push({label:s.get("orderOrderId"),path:""}),a(n)}}),[e]),(0,V.jsx)("nav",{"aria-label":"Breadcrumb",children:(0,V.jsx)("ol",{className:"breadcrumb-container",children:t.map(((e,a)=>(0,V.jsxs)("li",{children:[(0,V.jsx)(Ka,{label:e.label,path:e.path,isLast:a===t.length-1}),a<t.length-1&&(0,V.jsx)("span",{className:"breadcrumb-separator",children:(0,V.jsx)(Ja.A,{})})]},e.path)))})})};const ts=function(){const e=(0,P.Zp)(),[t]=(0,Ia.ok)(),[a,s]=(0,y.useState)([]),{fetchBOM:n,error:i,loading:l}=(()=>{const[e,t]=(0,y.useState)(!1),[a,s]=(0,y.useState)(null),{token:n}=(0,f.d4)((e=>e[z.X.AUTH])),i={Authorization:`Bearer ${n}`,"Content-Type":M.yw.APPLICATION_JSON},l=new M.Ay,r=(0,y.useCallback)((async e=>{const s=`${U.H.ORDERS}/order-bom/${e}/`;try{return t(!0),(await l.get(s,{},i)).data}catch(a){console.error(a.message||"Error in fetching BOM by id")}finally{t(!1)}}),[l,i]);return{loading:e,error:a,fetchBOM:r}})(),[r,o]=(0,y.useState)(),[d,c]=(0,y.useState)(0),[u,m]=(0,y.useState)(0),[h,p]=(0,y.useState)(!1),[x,g]=(0,y.useState)({}),w=[{id:1,title:(0,pe.t)("materialCode"),render:e=>e.material_code},{id:2,title:(0,pe.t)("materialName"),render:e=>e.material_name},{id:3,title:(0,pe.t)("qty"),render:e=>e.quantity}];return(0,y.useEffect)((()=>{t.get("orderId")&&n(t.get("orderId")).then((e=>s(e.items)))}),[]),(0,V.jsxs)("div",{className:"mx-3 my-2 mp-instruction-layout",children:[(0,V.jsxs)("div",{className:"mp-instruction-header",children:[(0,V.jsx)(es,{}),(0,V.jsx)("p",{className:"instruction-text",children:"Please follow the instruction to complete the Material Planning for this Order ID"})]}),(0,V.jsx)("div",{className:"instruction-layout-body",children:(0,V.jsx)(Ra,{edit:h,columns:w,rows:a,rowsPerPage:5,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:u,setPage:m,paginator:!0,serialize:!0,total:d})}),(0,V.jsxs)("div",{className:"material-planner-layout-footer",children:[(0,V.jsx)(Ma,{onClick:()=>e("/material-planner"),white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:(0,pe.t)("back")}),(0,V.jsx)(Ma,{onClick:async()=>{console.log("submit");e(`/material-planner-plan/scanning?orderId=${t.get("orderId")}&orderStatus=${t.get("orderStatus")}&orderType=${t.get("orderType")}&orderOrderId=${t.get("orderOrderId")}`)},color:"green",width:"8rem",height:"2.5rem",children:(0,pe.t)("plan")})]})]})},as=e=>{let{kitting:t=!1,payload:a}=e;const[s,n]=(0,y.useState)(!1),[i,l]=(0,y.useState)(null);(0,y.useEffect)((()=>{r(),console.log("payload",a)}),[]);const r=async()=>{try{const e=(await navigator.usb.getDevices()).filter((e=>4611===e.vendorId));if(e.length>0){const t=e[0];console.log("Auto-connecting to device:",t),await t.open(),null===t.configuration&&await t.selectConfiguration(1),await t.claimInterface(0),l(t),n(!0),console.log("Auto-connected to printer:",t)}else O.oR.error("No previously printer devices found."),console.log("No previously connected devices found.")}catch(Le){console.error("Error during auto-connect:",Le),O.oR.error("Error during auto-connect:",Le)}},o=async e=>{if(i)try{const t=(new TextEncoder).encode(e);await i.transferOut(1,t),console.log("Command sent:",e)}catch(Le){O.oR.error("Error sending command to printer:",Le),console.error("Error sending command to printer:",Le)}else console.log("No printer connected.")};return(0,V.jsx)("div",{children:s?(0,V.jsxs)("div",{children:[(0,V.jsxs)("p",{children:["Printer connected: ",(null===i||void 0===i?void 0:i.productName)||"TSC Printer"]}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>{if(!0===t){const e=`\n            SPEED 2\n            DENSITY 12\n            SIZE 3:2\n            GAP 0,0\n            DIRECTION 1\n            CLS\n            FONT 0,0,1,0,0,""\n            TEXT 110,30,"4",0,1,1,"Dhoot Transmission"\n            TEXT 70,100,"2",0,1,1,"FG CODE : ${a[0].Fg_Code}"\n            TEXT 70,150,"2",0,1,1,"ORDER No : ${a[0].Order_no}"\n            TEXT 70,200,"2",0,1,1,"QUANTITY: ${a[0].Quantity}"\n            QRCODE 420,200,M,4,A,0,M2,"${a[0].QR_DATA}"\n            PRINT 1,1\n            `;o(e),console.log("kitting Payload".kitting)}else a.map((e=>{const t=`\n                SPEED 2\n                DENSITY 12\n                SIZE 3:2\n                GAP 0,0\n                DIRECTION 1\n                CLS\n                FONT 0,0,1,0,0,""\n                TEXT 110,30,"4",0,1,1,"Dhoot Transmission"\n                TEXT 70,100,"2",0,1,1,"Part No : ${e.material_code}"\n                TEXT 70,150,"2",0,1,1,"GRN No : ${e.grn_number}"\n                TEXT 70,200,"2",0,1,1,"GRN Date : ${fe()(e.grn_date).format("ll")}"\n                TEXT 70,250,"2",0,1,1,"QUANTITY : ${e.quantity}"\n                QRCODE 420,200,M,4,A,0,M2,"${e.QR_DATA}"\n                PRINT 1,1\n                `;o(t),console.log("packetBreaking Payload".packetBreaking)}))},children:"Print Label"})]}):(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{try{const e=await navigator.usb.requestDevice({filters:[{vendorId:4611}]});await e.open(),null===e.configuration&&await e.selectConfiguration(1),console.log("Available interfaces:",e.configuration.interfaces),await e.claimInterface(0),console.log("claimInterface"),l(e),n(!0),O.oR.success("Printer connected"),console.log("Printer connected manually:",e)}catch(Le){console.error("Failed to connect to printer manually:",Le),O.oR.error("Failed to connect to printer manually:",Le)}},children:"Connect to Printer"})})},ss=e=>{let{qty1:t=0,qty2:a=0,label1:s="",label2:n="",noStepFn:i=()=>{},nextStepFn:l=()=>{}}=e;(0,y.useRef)();const[r,o]=(0,y.useState)(null);return(0,y.useEffect)((()=>{const[e,t,a,i,l]=s.split("#"),[r,d,c,u,m]=n.split("#"),h=[{head:"Dhoot Transmission",material_code:e,quantity:t,unit:a,grn_number:i,grn_date:l,QR_DATA:s},{head:"Dhoot Transmission",material_code:r,quantity:d,unit:c,grn_number:u,grn_date:m,QR_DATA:n}];console.log("transformedKittingLabelDataArray",h),o(h)}),[]),(0,V.jsxs)("div",{className:"action_modal__container",children:[(0,V.jsx)("div",{children:(0,V.jsx)("img",{src:"/error_outline.svg",alt:"icon"})}),(0,V.jsx)("span",{children:"Please break the packet into 2 parts: "}),(0,V.jsxs)("span",{children:["First one with ",(0,V.jsx)("strong",{children:t})," units, and second one with"," ",(0,V.jsx)("strong",{children:a})," units."," "]}),(0,V.jsxs)("span",{children:["Then, please paste label: ",(0,V.jsx)("strong",{children:s})," on the first packet,"]}),(0,V.jsxs)("span",{children:["and label: ",(0,V.jsx)("strong",{children:n})," on the second packet."," "]}),(0,V.jsx)(as,{kitting:!1,payload:r}),(0,V.jsx)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:(0,V.jsx)(Ma,{onClick:l,color:"green",width:"16rem",height:"2.5rem",children:"I have pasted new labels"})})]})},ns=e=>{let{orderId:t=null,getKittingLabel:a=()=>{},noStepFn:s=()=>{},nextStepFn:n=()=>{}}=e;(0,y.useRef)();const[i,l]=(0,y.useState)(null);return(0,y.useEffect)((()=>{a(t).then((e=>{console.log("getKittingLabel data",e);const t=[{head:"Dhoot Transmission",Fg_Code:e.fg_code,Order_no:e.order_no.toString(),Quantity:e.quantity.toString(),QR_DATA:e.label}];console.log("transformedKittingLabelDataArray",t),l(t)}))}),[]),(0,V.jsxs)("div",{className:"action_modal__container",children:[(0,V.jsx)("div",{children:(0,V.jsx)("img",{src:"/error_outline.svg",alt:"icon"})}),(0,V.jsxs)("div",{style:{marginBottom:"5vw"},children:[(0,V.jsx)("strong",{children:"Do you want to print kitting Label for this order?"})," "]}),(0,V.jsx)(as,{kitting:!0,payload:i}),(0,V.jsx)("div",{style:{gap:"2.5rem",display:"flex",flexDirection:"row"},children:(0,V.jsx)(Ma,{onClick:s,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:(0,pe.t)("no")})})]})},is=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n}=e;const[i,l]=(0,y.useState)(null),{getFailureReasons:r}=qa(),[o,d]=(0,y.useState)(null);return(0,y.useEffect)((()=>{r().then((e=>{console.log("getFailureReasons data",e),l(e)}))}),[]),(0,V.jsx)("div",{className:"action_modal__container",children:(0,V.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem",display:"flex",flexDirection:"column"},children:[(0,V.jsxs)("form",{style:{gap:"1rem",display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%"},children:[(0,V.jsx)("p",{style:{margin:"0",alignSelf:"center",fontWeight:"600"},children:"Partially Fulfilled Order Detected"}),(0,V.jsx)("p",{style:{margin:"0",alignSelf:"center",fontSize:"0.85rem"},children:"Please select the method to replenish and proceed as per guidelines"})," ",i&&Object.entries(i).map((e=>{let[t,a]=e;return(0,V.jsxs)("div",{children:[" ",(0,V.jsxs)("label",{children:[" ",(0,V.jsx)("input",{type:"checkbox",value:t,checked:o===t,onChange:()=>(e=>{d(e)})(t)})," ",a.name," "]})," "]},t)}))," "]}),(0,V.jsxs)("div",{style:{gap:"2.5rem",display:"flex",flexDirection:"row"},children:[(0,V.jsx)(Ma,{onClick:s,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:(0,pe.t)("cancel")}),(0,V.jsx)(Ma,{onClick:()=>n(o,i[o].resolution_date_required,i[o].name),color:"green",width:"8rem",height:"2.5rem",disabled:null===o,children:(0,pe.t)("submit")})]})]})})},ls=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n}=e;return(0,V.jsx)("div",{className:"action_modal__container",children:(0,V.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"1rem",display:"flex",flexDirection:"column"},children:[(0,V.jsx)("p",{children:"Failure Reason has been submitted successfully!"}),(0,V.jsx)("p",{children:"An email has also been sent to the supervisor regarding this."}),(0,V.jsx)(Ma,{onClick:n,color:"green",width:"8rem",height:"2.5rem",children:(0,pe.t)("ok")})]})})},rs=e=>{let{noStepFn:t,nextStepFn:a}=e;const[s,n]=(0,y.useState)({username:"",password:""}),i=e=>{const{name:t,value:a}=e.target;n({...s,[t]:a})},l=e=>{e.preventDefault(),a(s.username,s.password)};return(0,V.jsx)("div",{className:"action_modal__container",children:(0,V.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem",display:"flex",flexDirection:"column"},children:[(0,V.jsxs)("div",{children:[(0,V.jsx)("p",{children:"Supervisor Login is required to proceed further."}),(0,V.jsx)("p",{style:{display:"flex",justifyContent:"center"},children:(0,V.jsx)("strong",{children:"Please Login."})})]}),(0,V.jsxs)("form",{onSubmit:l,style:{gap:"2.5rem",display:"flex",flexDirection:"column"},children:[(0,V.jsxs)("div",{children:[(0,V.jsxs)("label",{htmlFor:"username",style:{marginRight:"0.5rem"},children:[(0,pe.t)("username"),":"]}),(0,V.jsx)("input",{type:"text",id:"username",name:"username",value:s.username,onChange:i,required:!0})]}),(0,V.jsxs)("div",{children:[(0,V.jsxs)("label",{htmlFor:"password",style:{marginRight:"0.5rem"},children:[(0,pe.t)("password"),":"]}),(0,V.jsx)("input",{type:"password",id:"password",name:"password",value:s.password,onChange:i,required:!0})]}),(0,V.jsxs)("div",{style:{gap:"2.5rem",display:"flex"},children:[(0,V.jsx)(H.A,{onClick:t,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{onClick:l,color:"green",width:"8rem",height:"2.5rem",disabled:!s.username||!s.password,children:(0,pe.t)("submit")})]})]})]})})},os=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n}=e;return(0,V.jsx)("div",{className:"action_modal__container",children:(0,V.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:".5rem",display:"flex",flexDirection:"column"},children:[(0,V.jsx)("p",{children:"Thank you for your input."}),(0,V.jsxs)("p",{style:{textAlign:"center"},children:["Please close this modal and click ",(0,V.jsx)("strong",{children:"Submit"})," button at the bottom of page to issue the materials for this order."]}),(0,V.jsx)(H.A,{onClick:n,color:"green",width:"8rem",height:"2.5rem",children:"Close"})]})})},ds=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n,message:i}=e;return(0,V.jsx)("div",{className:"action_modal__container",children:(0,V.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:".5rem",display:"flex",flexDirection:"column"},children:[(0,V.jsx)("p",{style:{textAlign:"center"},children:i}),(0,V.jsx)(Ma,{onClick:n,color:"blue",width:"8rem",height:"2.5rem",children:(0,pe.t)("ok")})]})})},cs=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n}=e;const[i,l]=(0,y.useState)(null),r=(0,y.useRef)(null);(0,y.useEffect)((()=>{r.current.focus()}),[]);return(0,V.jsxs)("div",{className:"action_modal__container",children:[(0,V.jsx)("p",{style:{fontWeight:"600",fontSize:"1.2rem"},children:"Stock Transfer"}),(0,V.jsx)("p",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Please scan the barcode of the substitute material to proceed."}),(0,V.jsx)("div",{children:(0,V.jsx)("input",{ref:r,type:"text",onKeyPress:e=>{"Enter"===e.key&&(console.log("Scanned Barcode:",e.target.value),l(e.target.value),a(e.target.value),e.target.value="")},style:{width:"100%",padding:"10px",fontSize:"16px"},placeholder:"Scan or type available barcode here"})}),i&&(0,V.jsxs)("p",{children:["Scanned: ",i]}),(0,V.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,V.jsx)(Ma,{onClick:s,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:(0,pe.t)("cancel")}),(0,V.jsx)(Ma,{onClick:n,color:"green",width:"8rem",height:"2.5rem",disabled:null===i,children:(0,pe.t)("submit")})]})]})},us=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n,materialCodes:i}=e;console.log("materialCodes",i);const[l,r]=(0,y.useState)("");return(0,V.jsxs)("div",{className:"action_modal__container",children:[(0,V.jsx)("p",{style:{fontWeight:"600",fontSize:"1.2rem"},children:"Stock Transfer"}),(0,V.jsx)("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Please select the material to substitute (stock transfer)."}),(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignContent:"start",width:"100%",gap:"1vw"},children:[i.map(((e,t)=>(0,V.jsxs)("div",{style:{display:"flex",gap:"1vw",alignItems:"baseline"},children:[(0,V.jsx)("input",{type:"radio",id:`material-${t}`,name:"materialCode",value:e,checked:l===e,onChange:()=>(e=>{r(e)})(e)}),(0,V.jsx)("label",{htmlFor:`material-${t}`,children:e})]},t))),(0,V.jsx)("div",{})]}),(0,V.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,V.jsx)(Ma,{onClick:s,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:(0,pe.t)("cancel")}),(0,V.jsx)(Ma,{onClick:()=>{n(l)},color:"green",width:"8rem",height:"2.5rem",children:(0,pe.t)("submit")})]})]})},ms=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n,materialCodes:i}=e;console.log("materialCodes",i);const[l,r]=(0,y.useState)(null);return(0,V.jsxs)("div",{className:"action_modal__container",children:[(0,V.jsx)("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Please select the reference material"}),(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignContent:"start",width:"100%",gap:"1vw"},children:[i&&i.map(((e,t)=>(0,V.jsxs)("div",{style:{display:"flex",gap:"1vw",alignItems:"baseline"},children:[(0,V.jsx)("input",{type:"radio",id:`material-${t}`,name:"materialCode",value:e,checked:l===e,onChange:()=>(e=>{r(e)})(e)}),(0,V.jsx)("label",{htmlFor:`material-${t}`,children:e})]},t))),(0,V.jsx)("div",{})]}),(0,V.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,V.jsx)(Ma,{onClick:s,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:(0,pe.t)("cancel")}),(0,V.jsx)(Ma,{onClick:()=>{n(l)},color:"green",width:"8rem",height:"2.5rem",disabled:null===l,children:(0,pe.t)("submit")})]})]})},hs=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n}=e;const[i,l]=(0,y.useState)(null),r=(new Date).toISOString().split("T")[0];return(0,V.jsxs)("div",{className:"action_modal__container",children:[(0,V.jsx)("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Please input the resolution date"}),(0,V.jsx)("input",{type:"date",value:i,onChange:e=>{l(e.target.value)},min:r,style:{margin:"1rem 0",padding:"0.5rem",fontSize:"1rem"}}),(0,V.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,V.jsx)(Ma,{onClick:s,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:(0,pe.t)("cancel")}),(0,V.jsx)(Ma,{onClick:()=>{n(i)},color:"green",width:"8rem",height:"2.5rem",disabled:null===i,children:(0,pe.t)("submit")})]})]})},ps=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n,newLabel:i}=e;(0,y.useRef)();const[l,r]=(0,y.useState)(null);return(0,y.useEffect)((()=>{const[e,t,a,s,n]=i.split("#"),l=[{head:"Dhoot Transmission",material_code:e,quantity:t,unit:a,grn_number:s,grn_date:n,QR_DATA:i}];console.log("transformedKittingLabelDataArray",l),r(l)}),[]),(0,V.jsx)("div",{className:"action_modal__container",children:(0,V.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"1rem",display:"flex",flexDirection:"column"},children:[(0,V.jsx)("p",{children:"Stock Transfer Success!"}),(0,V.jsx)("p",{children:"Please paste the following new label on the scanned packet."}),(0,V.jsx)("p",{children:(0,V.jsx)("strong",{children:i})}),(0,V.jsx)(as,{kitting:!1,payload:l}),(0,V.jsx)(Ma,{onClick:n,color:"blue",width:"8rem",height:"2.5rem",children:"OK"})]})})};const xs=function(e){let{orderId:t}=e;const a=(0,P.Zp)(),[s,n]=(0,Ia.ok)(),[i,l]=(0,y.useState)({submitLoading:!1,submitDisabled:!0}),[r,o]=(0,y.useState)(!0),[d,c]=(0,y.useState)(!0),[u,m]=(0,y.useState)(!1),[h,p]=(0,y.useState)([]),{fetchMaterialsRequired:x,setOrderHoldQuantity:g,updateOrderState:w,generateLabels:v,submitFailureReason:j,supervisorLogin:A,stockTransfer:S,getKittingLabel:b,printLabels:_,error:C,loading:N}=qa(),{verifyMaterial:k,error:E,loading:I}=(()=>{const[e,t]=(0,y.useState)(!1),[a,s]=(0,y.useState)(null),{token:n}=(0,f.d4)((e=>e[z.X.AUTH])),i={Authorization:`Bearer ${n}`,"Content-Type":M.yw.APPLICATION_JSON},l=new M.Ay,r=(0,y.useCallback)((async(e,s,n,r)=>{const o=`${U.H.ORDERS}/material-verifier/${e}/`,d={material_code:s,grn_number:n,quantity:r};try{return t(!0),(await l.post(o,d,i)).data}catch(a){console.error(a.message||"Error in verifying material")}finally{t(!1)}}),[l,i]);return{loading:e,error:a,verifyMaterial:r}})(),[T,D]=(0,y.useState)({}),[R,O]=(0,y.useState)(),[$,L]=(0,y.useState)(0),[F,H]=(0,y.useState)(!1),[G,B]=(0,y.useState)(!1),[X,Z]=(0,y.useState)(""),[J,K]=(0,y.useState)(""),[ee,te]=(0,y.useState)({material_on_hold:{}}),{getOrderHoldQuantity:ae,submitBOM:se}=Ha(),[ne,ie]=(0,y.useState)(!1),[le,re]=(0,y.useState)(null),[oe,de]=(0,y.useState)(null),[ce,ue]=(0,y.useState)(!1),[me,he]=(0,y.useState)(!1),[pe,xe]=(0,y.useState)(!1),[ge,we]=(0,y.useState)(!1),[ye,ve]=(0,y.useState)(""),[fe,je]=(0,y.useState)(!1),[Ae,Se]=(0,y.useState)(!1),[be,_e]=(0,y.useState)(null),[Ce,Ne]=(0,y.useState)(!1),[ke,Ee]=(0,y.useState)(!1),[Ie,Te]=(0,y.useState)(!1),[De,Re]=(0,y.useState)(!1),[Pe,Oe]=(0,y.useState)(!1),[$e,Me]=(0,y.useState)(null),[Ue,ze]=(0,y.useState)(null),[Fe,He]=(0,y.useState)(null),[qe,Ge]=(0,y.useState)(null),[Be,Qe]=(0,y.useState)(null),[Ye,We]=(0,y.useState)(!1),[Ve,Xe]=(0,y.useState)(!1),Ze=(0,y.useRef)(null),Je=[{id:1,title:"Material",render:e=>e.material_name},{id:2,title:"Location",render:e=>e.location},{id:3,title:"Required Qty",render:e=>(0,Y.HY)(e.required)},{id:4,title:"Collected Qty",render:e=>(0,V.jsx)("div",{children:(0,V.jsxs)("span",{style:{color:e.required>e.collected?Q.lm.RADIAL_RED:""},children:[(0,Y.HY)(e.collected)," ",""]})})}],Ke=async()=>{const e=s.get("orderId"),t=s.get("orderType");try{if("ASSEMBLY"===t&&!fe&&0!==$e.length)return void ie(!0);w(e,"RUNNING").then((s=>{se(e,{material_issue:ee.material_on_hold}).then((e=>{"ASSEMBLY"!==t?a("/material-planner/"):B(!0)}))}))}catch(Le){ve(Le.message),we(!0)}},et=e=>{const t=e.filter((e=>e.required>e.collected));return t.length>0?t.map((e=>e.material_code)):[]},tt=e=>{Z(e)},at=(e,t,a)=>{te((i=>{const l=JSON.parse(JSON.stringify(ee));l.material_on_hold[e]?l.material_on_hold[e]=[...l.material_on_hold[e],{grn_number:t,quantity:a}]:l.material_on_hold[e]=[{grn_number:t,quantity:a}];const r=s.get("orderId");return g(r,l).then((e=>{w(r,"ISSUING").then((e=>{s.set("orderStatus","ISSUING"),n(s)}))})),l}))};return(0,y.useEffect)((()=>{console.log("searchParams.get",s.get("orderStatus")),Xe("SHORTAGE"===s.get("orderStatus")),s.get("orderId")&&x(s.get("orderId")).then((e=>{if("RUNNING"!==s.get("orderStatus")&&Ze.current.focus(),"PLAN"===s.get("orderStatus")){const t=e.items.map((e=>({...e,collected:0})));p(t);const a=et(t);Me(a)}if("ISSUING"===s.get("orderStatus")||"SHORTAGE"===s.get("orderStatus")||"RUNNING"===s.get("orderStatus")){const t=e.items;ae(s.get("orderId")).then((e=>{te({material_on_hold:e});const a=((e,t)=>t.map((t=>{const a=t.material_code;let s=0;return e[a]&&(s=e[a].reduce(((e,t)=>e+t.quantity),0)),{...t,collected:s}})))(e,t);p(a);const s=et(a);Me(s)}))}"RUNNING"!==s.get("orderStatus")&&"SHORTAGE"!==s.get("orderStatus")||(o(!1),c(!1),m(!0))}))}),[]),(0,y.useEffect)((()=>{const e=et(h);Me(e)}),[h]),(0,y.useEffect)((()=>{X&&(e=>{const[t,a,n,i,l]=e.split("#"),r=parseFloat(a),o=s.get("orderType"),d=h.find((e=>e.material_code===t));if(void 0===d)return;const c=d.required-d.collected,u=d.break_packet;if("ASSEMBLY"==o){if(0===c)return ve("Item already collected in full required quantity. Please scan a different item or submit the order."),void we(!0);if(c&&r>c&&u){const e=r-c;return void v(t,i,l,n,c,e).then((t=>{t&&(D({qty1:c,qty2:e,label1:t.label1,label2:t.label2}),H(!0))}))}}k(s.get("orderId"),t,i,r).then((e=>{if(e&&"OK"===e.message){if("ASSEMBLY"==o&&(r<=c||!u)&&(p((e=>e.map((e=>e.material_code===t?{...e,collected:e.collected+r}:e)))),at(t,i,r)),"ACC"===o||"LPC"===o){const e=h.map((e=>e.material_code===t?{...e,collected:e.collected+r}:e));p(e),at(t,i,r)}}else ve("Incorrect bar code. Please try again with different bar code."),we(!0)})).catch((e=>{ve(e),we(!0)})),Z(null)})(X)}),[X]),(0,V.jsxs)("div",{className:"mx-3 my-2 mp-instruction-layout",children:[(0,V.jsx)("div",{className:"mp-instruction-header",children:d&&(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center",position:"fixed",top:"60px",left:"200px",marginLeft:"1rem",width:"60vw",height:"3rem",backgroundColor:"white",padding:"10px",zIndex:1e3},children:[(0,V.jsx)("p",{className:"instruction-text",style:{marginRight:"10px"},children:"Please Scan the Barcode or enter Qty"}),(0,V.jsx)("input",{ref:Ze,type:"text",onKeyPress:e=>{"Enter"===e.key&&(tt(e.target.value),e.target.value="")},style:{width:"100%",padding:"10px",fontSize:"16px"},placeholder:"Click here and Scan or Type barcode here"})]})}),(0,V.jsxs)("div",{className:"instruction-layout-body",children:[(0,V.jsx)(es,{}),(0,V.jsx)(Ra,{columns:Je,rows:h,rowsPerPage:5,loading:"fetch"===R,titleCellClasses:"c-gray fw-700",page:$,setPage:L,paginator:!0,serialize:!0,total:0})]}),(0,V.jsxs)("div",{className:"material-planner-layout-footer",children:[!0===!Ve?(0,V.jsx)(Ma,{onClick:async()=>{if(!Ye){We(!0);try{await Ke()}finally{setTimeout((()=>We(!1)),1e4)}}},disabled:!r||Ye||"SHORTAGE"===s.get("orderStatus"),color:"green",width:"8rem",height:"2.5rem",loading:i.submitLoading,customStyle:{backgroundColor:"#86D56A"},children:"Submit"}):null,u&&(0,V.jsx)(Ma,{onClick:()=>{const e=new URLSearchParams(window.location.search),t=e.get("orderOrderId"),a=e.get("orderType"),s=e.get("fgCode"),n=document.createElement("table"),i=document.createElement("tr");["Material Code","Material Description","Collected Quantity"].forEach((e=>{const t=document.createElement("th");t.textContent=e,i.appendChild(t)})),n.appendChild(i),h.forEach((e=>{console.log("print data",e);const t=document.createElement("tr"),a=document.createElement("td");a.textContent=e.material_code,t.appendChild(a);const s=document.createElement("td");s.textContent=e.material_description,s.style.textAlign="start",t.appendChild(s);const i=document.createElement("td");i.textContent=e.collected,t.appendChild(i),n.appendChild(t)}));const l=window.open("","_blank");l.document.write("<html><head><title>Print Table</title><style>table { width: 100%; border-collapse: collapse; }th, td { border: 1px solid #dddddd; text-align: center; padding: 8px; }th { background-color: #f2f2f2; }tr:nth-child(even) { background-color: #f9f9f9; }tr:nth-child(odd) { background-color: #ffffff; }</style></head><body>"),l.document.write(`\n      <div style="display: flex; flex-direction: row;justify-content: space-between;">\n        <p><strong>Order ID:</strong> ${t}</p>\n        <p><strong>Order Type:</strong> ${a}</p>\n        <p><strong>FG Code:</strong> ${s}</p>\n      </div>\n    `),l.document.write(n.outerHTML),l.document.write("</body></html>"),l.document.close(),l.print()},color:"green",width:"10rem",height:"2.5rem",loading:i.submitLoading,children:"Print Hold Quantity"})]}),F&&(0,V.jsx)(q.A,{open:F,onClose:()=>H(!1),width:"75vw",top:"5vh",hideCloseIcon:W.A,children:(0,V.jsx)(ss,{qty1:T.qty1,qty2:T.qty2,label1:T.label1,label2:T.label2,noStepFn:()=>{H(!1)},nextStepFn:()=>{H(!1)}})}),G&&(0,V.jsx)(q.A,{open:G,onClose:()=>B(!1),width:"75vw",top:"5vh",hideCloseIcon:W.A,children:(0,V.jsx)(ns,{orderId:s.get("orderId"),getKittingLabel:b,noStepFn:()=>{B(!1),a("/material-planner/")},nextStepFn:()=>{const e=s.get("orderId");b(e).then((e=>{const t=[{head:"Dhoot Transmission",Fg_Code:e.fg_code,Order_no:e.order_no.toString(),Quantity:e.quantity.toString(),QR_DATA:e.label}];_(t).then((e=>{B(!1),a("/material-planner/")}))}))}})}),ne&&(0,V.jsxs)(q.A,{open:ne,onClose:()=>ie(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,V.jsx)(is,{noStepFn:()=>{ie(!1)},nextStepFn:(e,t,a)=>{if(re(t),a&&Ge(a),e&&"Stock Transfer"===a)return ie(!1),He(e),K(null),void Ee(!0);e&&(He(e),ie(!1),Te(!0))}})," "]}),ke&&(0,V.jsxs)(q.A,{open:ke,onClose:()=>Ee(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,V.jsx)(us,{noStepFn:()=>{Ee(!1)},nextStepFn:e=>{if(ze(e),Qe(e),Ee(!1),Ae){if(Ae){const e=s.get("orderId");j(e,Be,Fe,be,oe).then((e=>{e&&Ne(!0)})).catch((e=>{he(!1),ie(!0)}))}}else he(!0)},materialCodes:$e})," "]}),Ie&&(0,V.jsxs)(q.A,{open:Ie,onClose:()=>Te(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,V.jsx)(ms,{noStepFn:()=>{Te(!1)},nextStepFn:e=>{if(Qe(e),le)le&&(Te(!1),Re(!0));else if(Te(!1),Ae){if(Ae){const t=s.get("orderId");j(t,e,Fe,be).then((t=>{if(t)if("Stock Transfer"!==qe){const t=$e.filter((t=>t!==e));Me(t),0===t.length?xe(!0):ie(!0)}else"Stock Transfer"===qe&&Ne(!0)})).catch((e=>{he(!1),ie(!0)}))}}else he(!0)},materialCodes:$e})," "]}),De&&(0,V.jsxs)(q.A,{open:De,onClose:()=>Re(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,V.jsx)(hs,{noStepFn:()=>{Re(!1)},nextStepFn:e=>{if(de(e),Re(!1),Ae){if(Ae){const t=s.get("orderId");j(t,Be,Fe,be,e).then((e=>{if(e)if("Stock Transfer"!==qe){const e=$e.filter((e=>e!==Be));Me(e),0===e.length?xe(!0):ie(!0)}else"Stock Transfer"===qe&&Ne(!0)})).catch((e=>{he(!1),ie(!0)}))}}else he(!0)}})," "]}),ce&&(0,V.jsxs)(q.A,{open:ce,onClose:()=>ue(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,V.jsx)(ls,{nextStepFn:()=>{ue(!1),he(!0)}})," "]}),me&&(0,V.jsxs)(q.A,{open:me,onClose:()=>he(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,V.jsx)(rs,{noStepFn:()=>{he(!1)},nextStepFn:(e,t)=>{A(e,t).then((t=>{if(t&&"Authentication successful"===t.message){he(!1),Se(!0),_e(e);const t=s.get("orderId");j(t,Be,Fe,e,oe).then((e=>{if(e)if(he(!1),"Stock Transfer"!==qe){const e=$e.filter((e=>e!==Be));Me(e),0===e.length?xe(!0):ie(!0)}else"Stock Transfer"===qe&&Ne(!0)})).catch((e=>{he(!1),ie(!0)}))}}))}})," "]}),ge&&(0,V.jsxs)(q.A,{open:ge,onClose:()=>we(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,V.jsx)(ds,{nextStepFn:()=>{we(!1)},message:ye})," "]}),pe&&(0,V.jsxs)(q.A,{open:pe,onClose:()=>xe(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,V.jsx)(os,{nextStepFn:()=>{xe(!1)}})," "]}),Ce&&(0,V.jsxs)(q.A,{open:Ce,onClose:()=>Ne(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,V.jsx)(cs,{onScan:e=>{e&&K(e)},noStepFn:()=>{Ne(!1)},nextStepFn:()=>{if(J){const[e,t,a,s,n]=J.split("#"),i=parseFloat(t);S(Ue,e,i,s,a,n).then((e=>{e&&(K(e.label),Ne(!1),Oe(!0))}))}}})," "]}),Pe&&(0,V.jsxs)(q.A,{open:Pe,onClose:()=>Oe(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,V.jsx)(ps,{nextStepFn:()=>{Oe(!1)},newLabel:J})," "]})]})},gs=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),[t,a]=(0,y.useState)(!1),[s,n]=(0,y.useState)(null),i={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON},l=new M.Ay,r=(0,y.useCallback)((async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,d=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,u=arguments.length>8?arguments[8]:void 0,m=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0,x=`machining/all-orders/?page=${arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}&page_size=10`;e||t||r||o||d||c?x+="&sort_by=":!1!==e&&!1!==t&&!1!==r&&!1!==o&&!1!==d&&!1!==c||(x+="&sort_by="),(arguments.length>7?arguments[7]:void 0).forEach((a=>{switch(a){case"fg_code":switch(e){case!1:console.log("Code is false"),x+=x.endsWith("&sort_by=")?"-fg_code":",-fg_code";break;case!0:console.log("Code is true"),x+=x.endsWith("&sort_by=")?"fg_code":",fg_code";break;default:console.log("Code is an unexpected value")}break;case"order_type":switch(t){case!1:console.log("Order type is false"),x+=x.endsWith("&sort_by=")?"-order_type":",-order_type";break;case!0:console.log("Order type is true"),x+=x.endsWith("&sort_by=")?"order_type":",order_type";break;default:console.log("Order type is an unexpected value")}break;case"status":switch(r){case!1:console.log("Status is false"),x+=x.endsWith("&sort_by=")?"-status":",-status";break;case!0:console.log("Status is true"),x+=x.endsWith("&sort_by=")?"status":",status";break;default:console.log("Status is an unexpected value")}break;case"order_id":switch(o){case!1:console.log("Order ID is false"),x+=x.endsWith("&sort_by=")?"-order_id":",-order_id";break;case!0:console.log("Order ID is true"),x+=x.endsWith("&sort_by=")?"order_id":",order_id";break;default:console.log("Order ID is an unexpected value")}break;case"name":switch(d){case!1:console.log("Name is false"),x+=x.endsWith("&sort_by=")?"-name":",-name";break;case!0:console.log("Name is true"),x+=x.endsWith("&sort_by=")?"name":",name";break;default:console.log("Name is an unexpected value")}break;case"quantity":switch(c){case!1:console.log("Quantity is false"),x+=x.endsWith("&sort_by=")?"-quantity":",-quantity";break;case!0:console.log("Quantity is true"),x+=x.endsWith("&sort_by=")?"quantity":",quantity";break;default:console.log("Quantity is an unexpected value")}break;default:console.log("Unknown column ID:",a)}})),u&&(x+="&order_id=",x+=u),m&&(x+="&fg_code=",x+=m),h&&(x+="&type=",x+=h),p&&(x+="&running_status=",x+=p),a(!0),n(null);try{return(await l.get(x,{},i)).data}catch(s){n(s.message||"Error in fetchOrders:")}finally{a(!1)}}),[l,i]);return{fetchOrders:r,matrixCount:async function(){const e=new M.Ay,t=await e.get("machining/order-matrix/",{},i,L.So);return null!==t&&void 0!==t&&t.data?(console.log("res  ",t.data),[null===t||void 0===t?void 0:t.data]):[[],0]},orderList:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=new M.Ay,a=await t.get(`machining/all-orders/?page=${e}&page_size=10`,{},i,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},orderTasks:async function(){let e=arguments.length>1?arguments[1]:void 0;const t=new M.Ay,a=await t.get(`machining/order-tasks/${e}/`,{},i,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},orderAssetList:async function(){let e=arguments.length>1?arguments[1]:void 0;const t=new M.Ay,a=await t.get(`machining/asset-list/${e}/`,{},i,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},machineAssign:async(e,t,a)=>{const s=new M.Ay,n=await s.patch(`machining/machine-assignment/${e}/`,t,i,(e=>(0,L.So)(e,null)));return null===n||void 0===n?void 0:n.data},machineAssignMultiple:async(e,t,a)=>{const s=new M.Ay,n=await s.patch(`machining/machine-assignment/${e}/`,t,i,(e=>(0,L.So)(e,null,null,null,!0)));return null===n||void 0===n?void 0:n.data},orderAssetLPCList:async function(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;const a=new M.Ay,s=await a.get(`machining/asset-list/${e}/?stage_type=${t}`,{},i,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new M.Ay,a=await t.post("orders/issue-extra-material/",e,i,(e=>(0,L.So)(e,null)));return null===a||void 0===a?void 0:a.data},update:async(e,t)=>{const a=new M.Ay,s=await a.put(`orders/update-material-failure/${e}/`,t,i,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data}}};a(26004);const ws=[{id:1,orderID:"100",name:"100_SZXB0601",qty:25,code:"SZXB0601",description:"ACC",orderType:"ACC",status:"Issuing"},{id:2,orderID:"101",name:"200_SZXB0601",qty:25,code:"SZXB0601",description:"Desc",orderType:"LPC",status:"PLAN"},{id:3,orderID:"102",name:"SZXB0601",qty:25,code:"SZXB0601",description:"",orderType:"ASSEMBLY",status:"RUNNING"},{id:4,orderID:"140",name:"HERO887677889",qty:50,code:"HERO887677889",description:"",orderType:"ASSEMBLY",status:"PLAN"},{id:5,orderID:"140",name:"HERO887677889",qty:50,code:"HERO887677889",description:"",orderType:"ASSEMBLY",status:"PLAN"},{id:6,orderID:"140",name:"HERO887677889",qty:50,code:"HERO887677889",description:"",orderType:"ASSEMBLY",status:"PLAN"}],ys=()=>{const e=(0,P.Zp)(),{fetchOrdersMatrixView:t,fetchOrdersById:a,getOrderHoldQuantity:s,submitBOM:n,error:i,loading:l}=(()=>{const[e,t]=(0,y.useState)(!1),[a,s]=(0,y.useState)(null),{token:n}=(0,f.d4)((e=>e[z.X.AUTH])),i={Authorization:`Bearer ${n}`,"Content-Type":M.yw.APPLICATION_JSON},l=new M.Ay,r=(0,y.useCallback)((async function(){let e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,d=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,u=arguments.length>8?arguments[8]:void 0,m=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0,x=`machining/all-orders/?page=${arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}`;e||n||r||o||d||c?x+="&sort_by=":!1!==e&&!1!==n&&!1!==r&&!1!==o&&!1!==d&&!1!==c||(x+="&sort_by="),(arguments.length>7?arguments[7]:void 0).forEach((t=>{switch(t){case"fg_code":switch(e){case!1:console.log("Code is false"),x+=x.endsWith("&sort_by=")?"-fg_code":",-fg_code";break;case!0:console.log("Code is true"),x+=x.endsWith("&sort_by=")?"fg_code":",fg_code";break;default:console.log("Code is an unexpected value")}break;case"order_type":switch(n){case!1:console.log("Order type is false"),x+=x.endsWith("&sort_by=")?"-order_type":",-order_type";break;case!0:console.log("Order type is true"),x+=x.endsWith("&sort_by=")?"order_type":",order_type";break;default:console.log("Order type is an unexpected value")}break;case"status":switch(r){case!1:console.log("Status is false"),x+=x.endsWith("&sort_by=")?"-status":",-status";break;case!0:console.log("Status is true"),x+=x.endsWith("&sort_by=")?"status":",status";break;default:console.log("Status is an unexpected value")}break;case"order_id":switch(o){case!1:console.log("Order ID is false"),x+=x.endsWith("&sort_by=")?"-order_id":",-order_id";break;case!0:console.log("Order ID is true"),x+=x.endsWith("&sort_by=")?"order_id":",order_id";break;default:console.log("Order ID is an unexpected value")}break;case"name":switch(d){case!1:console.log("Name is false"),x+=x.endsWith("&sort_by=")?"-name":",-name";break;case!0:console.log("Name is true"),x+=x.endsWith("&sort_by=")?"name":",name";break;default:console.log("Name is an unexpected value")}break;case"quantity":switch(c){case!1:console.log("Quantity is false"),x+=x.endsWith("&sort_by=")?"-quantity":",-quantity";break;case!0:console.log("Quantity is true"),x+=x.endsWith("&sort_by=")?"quantity":",quantity";break;default:console.log("Quantity is an unexpected value")}break;default:console.log("Unknown column ID:",t)}})),u&&(x+="&order_id=",x+=u),m&&(x+="&fg_code=",x+=m),h&&(x+="&type=",x+=h),p&&(x+="&status=",x+=p),t(!0),s(null);try{return(await l.get(x,{},i)).data}catch(a){s(a.message||"Error in fetchOrders:")}finally{t(!1)}}),[l,i]),o=(0,y.useCallback)((async()=>{const e=`${U.H.ORDERS}/order-matrix-view/`;t(!0),s(null);try{return(await l.get(e,{},i)).data}catch(a){s(a.message||"Error in fetchOrders:")}finally{t(!1)}}),[l,i]),d=(0,y.useCallback)((async e=>{const s=`${U.H.ORDERS}/order-details/${e}/`;try{return t(!0),(await l.get(s,{},i)).data}catch(a){console.error(a.message||"Error in fetching orders by id")}finally{t(!1)}}),[l,i]),c=(0,y.useCallback)((async e=>{const s=`${U.H.ORDERS}/material-on-hold/${e}/`;try{return t(!0),(await l.get(s,{},i)).data}catch(a){console.error(a.message||"Error in getting order on hold quantity")}finally{t(!1)}}),[l,i]),u=(0,y.useCallback)((async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=`${U.H.ORDERS}/bom-submit/${e}/`;try{return t(!0),(await l.post(n,s,i)).data}catch(a){console.error(a.message||"Error in submitting BOM")}finally{t(!1)}}),[l,i]),m=(0,y.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=`${U.H.ORDERS}/material-failure-reasons/`,r={reason_name:e,resolution_date_required:s};try{return t(!0),(await l.post(n,r,i)).data}catch(a){console.error(a.message||"Error in getting Failure Reasons")}finally{t(!1)}}),[l,i]);return{loading:e,error:a,fetchOrders:r,fetchOrdersMatrixView:o,fetchOrdersById:d,getOrderHoldQuantity:c,submitBOM:u,postFailureReason:m}})(),{matrixCount:r,orderList:d,fetchOrders:c}=gs(),[u,m]=(0,y.useState)(1),[h,p]=(0,y.useState)("1"),[x,g]=(0,y.useState)(""),[w,v]=(0,y.useState)(""),[j,A]=(0,y.useState)(""),[S,b]=(0,y.useState)(!1),[_,C]=(0,y.useState)({}),[N,k]=(0,y.useState)(1),[E,I]=(0,y.useState)(null),[T,D]=(0,y.useState)(null),[R,O]=(0,y.useState)(10),[$,L]=(0,y.useState)(null),[F,H]=(0,y.useState)(null),[q,G]=(0,y.useState)(null),[B,W]=(0,y.useState)(null),[X,Z]=(0,y.useState)(null),[J,K]=(0,y.useState)(null),[ee,te]=(0,y.useState)(!0),[ae,se]=(0,y.useState)(null),[ne,ie]=(0,y.useState)(null),[le,re]=(0,y.useState)(["order_id"]),[oe,de]=(0,y.useState)(null),[ce,ue]=(0,y.useState)(null),[me,he]=(0,y.useState)(null),[xe,ge]=(0,y.useState)(null),[we,ye]=(0,y.useState)([]),[ve,fe]=(0,y.useState)(N),[je,Ae]=(0,y.useState)({});(0,y.useState)((()=>{!async function(){let e=await r();console.log("fetchMatrix ---",e),Ae(e[0])}()}),[]);const Se=ws.filter((e=>(""===x||e.code.toLowerCase().includes(x.toLowerCase()))&&(""===w||e.orderType.toLowerCase().includes(w.toLowerCase()))&&(""===j||e.status.toLowerCase().includes(j.toLowerCase())))),be=(Math.ceil(Se.length/10),10*(u-1));Se.slice(be,be+10);y.useEffect((()=>{m(1),p("1")}),[x,w,j]),(0,y.useEffect)((()=>{c(N,B,X,J,ee,ae,ne,le,oe,ce,me,xe).then((e=>{ye(e.results),I(e.count);const t=Math.ceil(e.count/R);D(t),fe(N),e.previous?L(!0):L(!1),e.next?H(!0):H(!1)}))}),[N,B,X,J,ee,ae,ne,oe,ce,me,xe]);return(0,V.jsxs)("div",{children:[(0,V.jsx)("div",{style:{marginBottom:10},className:"planning-overview-heading",children:(0,pe.t)("planning")}),(0,V.jsxs)("div",{className:"planning-overview-metrics-container",children:[(0,V.jsxs)("div",{className:"planning-metrics-box1",children:[(0,V.jsx)("p",{children:(0,pe.t)("plan")}),(0,V.jsx)("p",{children:(0,V.jsx)("strong",{children:je.plan})})]}),(0,V.jsxs)("div",{className:"planning-metrics-box4",children:[(0,V.jsx)("p",{children:(0,pe.t)("planned")}),(0,V.jsx)("p",{children:(0,V.jsx)("strong",{children:je.planned})})]}),(0,V.jsxs)("div",{className:"planning-metrics-box2",children:[(0,V.jsx)("p",{children:(0,pe.t)("running")}),(0,V.jsx)("p",{children:(0,V.jsx)("strong",{children:je.running})})]}),(0,V.jsxs)("div",{className:"planning-metrics-box3",children:[(0,V.jsx)("p",{children:(0,pe.t)("completed")}),(0,V.jsx)("p",{children:(0,V.jsx)("strong",{children:je.completed})})]})]}),(0,V.jsx)("div",{style:{padding:10},children:(0,V.jsx)(Ra,{mode:"planning",columns:(e=>[{id:1,title:(0,pe.t)("date"),render:e=>e.date_created},{id:"order_id",title:`${(0,pe.t)("orderId")} ${!0===ee?"\u2191":!1===ee?"\u2193":"\u2191\u2193"}`,render:e=>(0,V.jsx)("span",{style:{cursor:"pointer"},children:e.order_id})},{id:"name",title:`${(0,pe.t)("name")} ${!0===ae?"\u2191":!1===ae?"\u2193":"\u2191\u2193"}`,render:e=>e.name},{id:"quantity",title:`${(0,pe.t)("qty")} ${!0===ne?"\u2191":!1===ne?"\u2193":"\u2191\u2193"}`,render:e=>(0,Y.HY)(e.quantity)},{id:"fg_code",title:`${(0,pe.t)("code")} ${!0===B?"\u2191":!1===B?"\u2193":"\u2191\u2193"}`,render:e=>e.fg_code},{id:"order_type",title:`${(0,pe.t)("orderType")} ${!0===X?"\u2191":!1===X?"\u2193":"\u2191\u2193"}`,render:e=>e.order_type},{id:"status",title:`${(0,pe.t)("status")} ${!0===J?"\u2191":!1===J?"\u2193":"\u2191\u2193"}`,render:e=>(0,V.jsx)(Oa,{capsuleText:e.running_status})},{id:9,title:(0,pe.t)("action"),render:t=>"COMPLETED"!==t.running_status?(0,V.jsx)("img",{src:Ua,style:{width:"2.78vw",height:"2.78vw",cursor:"pointer"},alt:"Action Icon",onClick:()=>{"ACC"===t.order_type?e("/planning-material-plan",{state:t}):"LPC"===t.order_type?e("/planning-lpc-material",{state:t}):"ASSEMBLY"===t.order_type&&e("/planning-assembly-material",{state:t})}}):(0,V.jsx)(o.A,{onClick:()=>{"ACC"===t.order_type?e("/planning-material-plan",{state:t}):"LPC"===t.order_type?e("/planning-lpc-material",{state:t}):"ASSEMBLY"===t.order_type&&e("/planning-assembly-material",{state:t})},children:(0,V.jsx)(Ke.A,{fontSize:"large",sx:{color:Q.lm.LIGHT_GREEN}})})}])(e),onTableHeadCellClick:e=>{(e=>{switch(e){case"fg_code":W((t=>{switch(t){case null:return console.log("a is null"),re((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),re((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("code case");break;case"order_type":Z((t=>{switch(t){case null:return console.log("a is null"),re((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),re((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("order type case");break;case"status":K((t=>{switch(t){case null:return console.log("a is null"),re((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),re((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("status case");break;case"order_id":te((t=>{switch(t){case null:return console.log("a is null"),re((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),re((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("order id case");break;case"name":se((t=>{switch(t){case null:return console.log("a is null"),re((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),re((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("order id case");break;case"quantity":ie((t=>{switch(t){case null:return console.log("a is null"),re((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),re((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("order id case");break;default:console.log(e,"clicked")}})(e)},rows:we,rowsPerPage:R,loading:l,titleCellClasses:"c-gray fw-700",page:N-1,serialize:!0,total:E,handleOrderIdFilterInput:e=>{(e=>{console.log("handleOrderIdFilterInput",e),de(e)})(e)},handleFgCodeFilterInput:e=>{(e=>{console.log("handleFgCodeFilterInput",e),ue(e)})(e)},handleOrderTypeFilterInput:e=>{(e=>{console.log("handleOrderTypeFilterInput",e),he(e)})(e)},handleOrderStatusFilterInput:e=>{(e=>{console.log("handleOrderStatusFilterInput",e),ge(e)})(e)}})}),(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingLeft:30,paddingRight:30,marginBottom:20},className:"pagination-controls",children:[(0,V.jsx)(Ma,{onClick:()=>{k(N-1),console.log("prev page")},white:!0,width:"auto",height:"auto",bordered:!0,disabled:!$,customStyle:{border:"1px solid #3E3E3E",backgroundColor:$?"#FFFFFF":"#CCCCCC",color:$?"#000000":"#999999",cursor:$?"pointer":"not-allowed"},children:(0,pe.t)("prev")}),(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:10,alignItems:"center"},className:"page-details",children:[(0,V.jsx)("div",{children:(0,pe.t)("page")})," ",(0,V.jsx)("input",{type:"number",style:{width:18,padding:10,alignContent:"center"},value:ve,onChange:e=>{const t=e.target.value;/^\d*$/.test(t)&&fe(t)},onBlur:()=>{const e=Math.ceil(ve);!isNaN(e)&&e>0&&e<=T?k(e):fe(N)}}),(0,V.jsx)("div",{children:"of "}),(0,V.jsx)("div",{children:(0,V.jsx)("strong",{children:T})})]}),(0,V.jsx)(Ma,{onClick:()=>{k(N+1),console.log("next page")},color:"green",width:"auto",height:"auto",disabled:!F,customStyle:{backgroundColor:F?"#27ae60":"#CCCCCC",color:F?"#FFFFFF":"#999999",cursor:F?"pointer":"not-allowed"},children:(0,pe.t)("next")})]})]})},vs=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d,assetsList:c}=e;const{orderAssetList:u}=gs(),m=[{title:"Machines",placeholder:"Select Machine",type:Q.wN.SELECT,name:"machine",validator:Q.wY.REQUIRED,keyValues:c}],[h,p]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsx)("h3",{className:"opacity-80",children:"Assign To Machine"}),(0,V.jsx)(B.A,{data:s,errors:h,onChange:e=>{const{name:t,value:a}=e.target;p((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:m}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{const e=(0,Y.bG)(m,s);p(e),e.size||(console.log("handleSubmit----------",s.reason),await r())},loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("submit")})})]})]})};const fs=function(e){let{open:t,onClose:a,circuitName:s,assets:n,map_id:l}=e;(0,P.Zp)();const r=(0,P.zy)(),o=null===r||void 0===r?void 0:r.state,[d,c]=(0,y.useState)([]),{orderTasks:u,orderAssetList:m,machineAssign:h}=gs(),[p,x]=(0,y.useState)(),[g,w]=(0,y.useState)(0),[v,f]=(0,y.useState)(0),[j,A]=(0,y.useState)(!1),[S,b]=(0,y.useState)({}),[_,C]=(0,y.useState)(new Map);(0,y.useEffect)((()=>{!async function(){let[e]=await u(v,null===o||void 0===o?void 0:o.id);console.log("circuit data----",v,o),c(e.circuits),e.circuits.map((e=>{b((t=>({...t,[e.map_id]:{...t[e.map_id],machine:e.assigned_asset}})))}))}()}),[]);const N=[{title:(0,pe.t)("SelectMachine"),placeholder:(0,pe.t)("SelectMachine"),type:Q.wN.SELECT,name:"machine",validator:Q.wY.REQUIRED,keyValues:n}],k=(e,t,a)=>{console.log("--\x3e","map id",e,"name---",t,"value----",a),C((a=>(a.delete(`${e}-${t}`),new Map(a)))),b((s=>({...s,[e]:{...s[e],[t]:a}}))),console.log("machine assignment res--------",S),""!==a&&void 0!==a&&async function(e,t){let a={order_type:o.order_type,asset_id:[t]};await h(e,a)}(e,a)};return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsx)("h3",{className:"opacity-80",children:(0,pe.t)("AssignToMachine")}),(0,V.jsxs)("p",{className:"instruction-text",children:[o.name," / ",o.order_id," / ",o.order_type," / ",o.running_status," / ",s]}),(0,V.jsx)(i.A,{sx:{mb:4},children:(0,V.jsx)(B.A,{data:S[l]||{},errors:_,onChange:e=>k(l,e.target.name,e.target.value),schema:N})})]})};a(53536);const js=function(){const e=(0,P.Zp)(),t=(0,P.zy)(),a=null===t||void 0===t?void 0:t.state,[s,n]=(0,y.useState)([]),{orderTasks:l,orderAssetList:r,machineAssignMultiple:d}=gs(),[c,u]=(0,y.useState)(),[m,h]=(0,y.useState)(0),[p,x]=(0,y.useState)(0),[g,w]=(0,y.useState)(!1),[v,f]=(0,y.useState)({}),[j,A]=(0,y.useState)(),[S,b]=(0,y.useState)(new Map),[_,C]=(0,y.useState)(""),[N,k]=(0,y.useState)(""),[E,I]=(0,y.useState)([]),[T,D]=(0,y.useState)({});async function R(){u("fetch");let[e]=await l(p,null===a||void 0===a?void 0:a.id);console.log("circuit data----",p,a),n(e.circuits),e.circuits.map((e=>{f((t=>({...t,[e.map_id]:{...t[e.map_id],machine:e.assigned_asset}})))})),u(!1)}(0,y.useEffect)((()=>{R(),async function(){let[e]=await r(1,null===a||void 0===a?void 0:a.id);console.log("asset list-------",e);const t=e.map((e=>({value:e.name,key:e.id})));t.sort(((e,t)=>parseInt(e.value.split(" ")[1],10)-parseInt(t.value.split(" ")[1],10))),A(t)}()}),[]),Q.wN.SELECT,Q.wY.REQUIRED;const L=[{id:0,title:(0,pe.t)("Select"),render:e=>(0,V.jsx)("input",{type:"checkbox",onChange:t=>{return a=e.map_id,s=t.target.checked,void I((e=>s?[...e,a]:e.filter((e=>e!==a))));var a,s}})},{id:1,title:(0,pe.t)("CircuitCode"),render:e=>{var t;return(null===(t=e.circuit_information)||void 0===t?void 0:t.circuit_code)||"-"}},{id:3,title:(0,pe.t)("wire"),render:e=>{var t,a;return(null===(t=e.circuit_information)||void 0===t||null===(a=t.circuit_metadata)||void 0===a?void 0:a.Wire)||"-"}},{id:5,title:(0,pe.t)("TerminalA"),render:e=>{var t,a;return(null===(t=e.circuit_information)||void 0===t||null===(a=t.circuit_metadata)||void 0===a?void 0:a.TerminalA)||"-"}},{id:6,title:(0,pe.t)("TerminalB"),render:e=>{var t,a;return(null===(t=e.circuit_information)||void 0===t||null===(a=t.circuit_metadata)||void 0===a?void 0:a.TerminalB)||"-"}},{id:7,title:(0,pe.t)("PartFittingA"),render:e=>{var t,a;return(null===(t=e.circuit_information)||void 0===t||null===(a=t.circuit_metadata)||void 0===a?void 0:a.PartFittingA)||"-"}},{id:8,title:(0,pe.t)("PartFittingB"),render:e=>{var t,a;return(null===(t=e.circuit_information)||void 0===t||null===(a=t.circuit_metadata)||void 0===a?void 0:a.PartFittingB)||"-"}},{id:4,title:(0,pe.t)("Select_Machine_Edit"),render:e=>null!==e.assigned_asset?(0,V.jsx)(o.A,{onClick:()=>{var t,a;C(e.map_id),k((null===(t=e.circuit_information)||void 0===t?void 0:t.circuit_code)||(null===(a=e.circuit_information)||void 0===a?void 0:a.name)),w("ACCAssign")},children:(0,V.jsx)(Ke.A,{color:"success",style:{width:"2.78vw",height:"2.78vw",cursor:"pointer"}})}):(0,V.jsx)(o.A,{onClick:()=>{var t,a;C(e.map_id),k((null===(t=e.circuit_information)||void 0===t?void 0:t.circuit_code)||(null===(a=e.circuit_information)||void 0===a?void 0:a.name)),w("ACCAssign")},children:(0,V.jsx)("img",{src:Ua,style:{width:"2.78vw",height:"2.78vw",cursor:"pointer"},alt:"Action Icon"})})}],M=[{placeholder:(0,pe.t)("SelectMachine"),type:Q.wN.SELECT,name:"machine",validator:Q.wY.REQUIRED,keyValues:j}];async function U(e,t){try{return await d(e,t)}catch(Le){throw console.error(`Error assigning machine to row ${e}:`,Le),Le}}return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:2,alignItems:"center"},children:[(0,V.jsx)(o.A,{onClick:()=>e(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsxs)("p",{className:"instruction-text",children:[a.name," / ",a.order_id," / ",a.order_type," / ",a.running_status]})]}),E.length>0&&(0,V.jsx)(B.A,{data:T,errors:S,onChange:e=>async function(e){if(!e)return;const t={order_type:a.order_type,asset_id:[e]};try{await Promise.all(E.map((e=>U(e,t)))),console.log("Machine assignment complete."),O.oR.success("Machine assignment complete."),I([]),R()}catch(Le){console.error("Error assigning machine:",Le),O.oR.error("Error assigning machine.",Le)}}(e.target.value),schema:M})]}),(0,V.jsx)($.A,{columns:L,rows:s,rowsPerPage:10,loading:"fetch"===c,titleCellClasses:"c-gray fw-700",page:p,setPage:x,serialize:!0,total:10,tableBodyColor:Q.lm.WHITE}),(0,V.jsx)(vs,{open:"add"===g,onClose:()=>{w(!1)},data:v,setData:f,assetsList:j}),(0,V.jsx)(fs,{open:"ACCAssign"===g,onClose:()=>{w(!1)},data:v,setData:f,circuitName:N,map_id:_,assets:j})]})};a.p;const As=e=>{let{open:t,onClose:a,onSubmit:s,loading:n,edit:l,assetsList:r,tableData:o,name:d}=e;const{orderAssetList:c,machineAssign:u}=gs(),[m,h]=(0,y.useState)({});(0,y.useEffect)((()=>{console.log("data-tableData-",o),o.map((e=>{h((t=>({...t,[e.stage_id]:{...t[e.stage_id],machine:e.assigned_asset}})))}))}),[o]);Q.wN.SELECT,Q.wY.REQUIRED;const[p,x]=(0,y.useState)(new Map),g=[{id:3,title:(0,pe.t)("StageName"),render:e=>e.stage_name},{id:4,title:(0,pe.t)("SelectMachine"),render:e=>(0,V.jsx)(i.A,{flexDirection:"row",children:(0,V.jsx)(B.A,{data:m[e.stage_id]||{},errors:p,onChange:t=>w(e.map_id,e.stage_id,t.target.name,t.target.value),schema:[{placeholder:(0,pe.t)("SelectMachine"),type:Q.wN.SELECT,name:"machine",validator:Q.wY.REQUIRED,keyValues:e.asset_list}]})},e.id)}],w=(e,t,a,s)=>{console.log("--\x3e","map id:",e,"stage--id:",t,"name:",a,"value:",s),x((e=>{const s=new Map(e);return s.delete(`${t}-${a}`),s})),h((e=>{const n={...e,[t]:{...e[t],[a]:s}};return console.log("Updated machine assignment res:",n),n})),""!==s&&void 0!==s&&async function(e,t,a){let s={order_type:"LPC",asset_id:[a],stage_id:t};await u(t,s,t)}(0,t,s)};return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(800px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",children:[d," > ",(0,pe.t)("CircuitStages")]}),(0,V.jsx)(i.A,{mb:2,children:(0,V.jsx)($.A,{columns:g,rows:o,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",serialize:!0,tableBodyColor:Q.lm.WHITE})})]})};const Ss=function(){const e=(0,P.Zp)(),t=(0,P.zy)(),a=null===t||void 0===t?void 0:t.state,[s,n]=(0,y.useState)([]),{orderTasks:i,orderAssetList:r,machineAssign:d,orderAssetLPCList:c}=gs(),[u,m]=(0,y.useState)(),[h,p]=(0,y.useState)(0),[x,g]=(0,y.useState)(0),[w,v]=(0,y.useState)(!1),[f,j]=(0,y.useState)({}),[A,S]=(0,y.useState)(),[b,_]=(0,y.useState)(new Map),[C,N]=(0,y.useState)([]),[k,E]=(0,y.useState)("");(0,y.useEffect)((()=>{!async function(){let[e]=await i(x,null===a||void 0===a?void 0:a.id);console.log("circuit data----",x,a),n(e.circuits),e.circuits.map((e=>{j((t=>({...t,[e.map_id]:{...t[e.map_id],machine:e.assigned_asset}})))}))}()}),[]),Q.wN.SELECT,Q.wY.REQUIRED;const I=[{id:2,title:(0,pe.t)("CircuitName"),render:e=>(0,V.jsx)(l.A,{sx:{textTransform:"capitalize"},children:(null===e||void 0===e?void 0:e.name)||"-"})},{id:3,title:(0,pe.t)("qty"),render:e=>e.quantity},{id:4,title:(0,pe.t)("action"),render:e=>(0,V.jsx)("img",{src:Ua,style:{width:"2.78vw",height:"2.78vw",cursor:"pointer"},alt:"Action Icon",onClick:()=>T(e)})}],T=async e=>{E(e.name);let t=e.map_id,s=await Promise.all(e.stages.map((async e=>{let s=await async function(e){let[t]=await c(1,null===a||void 0===a?void 0:a.id,e);return console.log("asset list-------",t),t.map((e=>({value:e.name,key:e.id})))}(e.stage_name);return{...e,asset_list:s,map_id:t}})));N(s),console.log("new rowData------",s),v("AssignStages")};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:2,alignItems:"center"},children:[(0,V.jsx)(o.A,{onClick:()=>e(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsxs)("p",{className:"instruction-text",children:[a.name," / ",a.order_id," / ",a.order_type," / ",a.running_status]})]}),(0,V.jsx)($.A,{columns:I,rows:s,rowsPerPage:10,loading:"fetch"===u,titleCellClasses:"c-gray fw-700",page:x,setPage:g,serialize:!0,total:10,tableBodyColor:Q.lm.WHITE}),(0,V.jsx)(As,{tableData:C,open:"AssignStages"===w,onClose:()=>{v(!1)},data:f,name:k,setData:j}),(0,V.jsx)(vs,{open:"add"===w,onClose:()=>{v(!1)},data:f,setData:j,assetsList:A})]})},bs=()=>{const e=(0,P.zy)(),t=(0,P.Zp)(),a=null===e||void 0===e?void 0:e.state,[s,n]=((0,f.d4)((e=>e)),(0,y.useState)([])),[r,d]=(0,y.useState)(),[c,u]=(0,y.useState)(0),[m,h]=(0,y.useState)({}),[p,x]=(0,y.useState)([]),{orderTasks:g,orderAssetList:w,machineAssign:v}=gs(),[j,A]=(0,y.useState)(null),[S,b]=(0,y.useState)(new Map),[_,C]=(0,y.useState)("");(0,y.useEffect)((()=>{!async function(){var e,t;let[s]=await g(1,null===a||void 0===a?void 0:a.id);console.log("ress--mapid--",null===s||void 0===s||null===(e=s.circuits)||void 0===e?void 0:e.map_id),C(null===s||void 0===s||null===(t=s.circuits)||void 0===t?void 0:t.map_id.replace(/-/g,"")),h((e=>{var t,a;return{...e,station:null===s||void 0===s||null===(t=s.circuits)||void 0===t?void 0:t.no_of_stages,machines:null===s||void 0===s||null===(a=s.circuits)||void 0===a?void 0:a.assigned_assets.map((e=>e.id))}}))}(),async function(){let[e]=await w(1,null===a||void 0===a?void 0:a.id);console.log("asset list-------",e);const t=e.map((e=>({value:e.name,key:e.id})));t.sort(((e,t)=>parseInt(e.value.split(" ")[1],10)-parseInt(t.value.split(" ")[1],10))),x(t)}(),console.log("locationData-----assembly",a)}),[]);const N=[{title:(0,pe.t)("selectLine"),placeholder:(0,pe.t)("selectLine"),type:Q.wN.SELECT,name:"machines",validator:Q.wY.REQUIRED,multi:!0,keyValues:p}],k=async()=>{const e=(0,Y.bG)(N,m);b(e),e.size||await async function(){console.log("locationData----\x3e>>",a);let e={order_type:"ASSEMBLY",asset_id:m.machines,no_of_stations:m.station},s=await v(_,e);s&&t(-1);console.log("machineAssign---- res",s)}()};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:2,alignItems:"center"},children:[(0,V.jsx)(o.A,{onClick:()=>t(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsxs)("p",{className:"instruction-text",children:[a.name," / ",a.order_id," / ",a.order_type," / ",a.running_status]})]}),(0,V.jsx)(i.A,{sx:{alignItems:"flex-start",pl:3},children:(0,V.jsxs)(i.A,{children:[(0,V.jsx)(B.A,{data:m,errors:S,onChange:async e=>{const{name:t,value:a}=e.target;b((e=>(e.delete(t),e))),h((e=>({...e,[t]:a})))},schema:N}),(0,V.jsx)(H.A,{color:"gray",Button:!0,onClick:()=>"COMPLETED"===a.running_status?O.oR.error("Work order already completed"):k(),children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("Plan")})})]})})]})};var _s=a(87759),Cs=a(27065);const Ns=e=>{let{open:t,onClose:a}=e;const s=(0,P.Zp)(),{taskList:n}=(0,Cs.A)(),[r,o]=(0,y.useState)(new Map),[d,c]=(0,y.useState)(!0),[u,m]=(0,y.useState)("");const h=async e=>{const t=e.target.value;m(t),/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)?(console.log("Success: Valid hash"),await async function(e){var t,a;let[i]=await n(e);console.log("e.target.machineCodevalue",i),(null===i||void 0===i||null===(t=i.items)||void 0===t?void 0:t.length)>0?(localStorage.setItem("machineId",e),s("/manpower",{state:{machineId:e,machineType:null===i||void 0===i?void 0:i.task}})):0===(null===i||void 0===i||null===(a=i.items)||void 0===a?void 0:a.length)?(m(""),O.oR.warn("Please Plan Task for this Machine")):m("")}(t)):console.log("Error: Invalid format")};return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(i.A,{sx:{alignItems:"center",mt:4},children:[(0,V.jsx)(l.A,{className:"fw-24",children:(0,pe.t)("Please_Scan_the_machine")}),(0,V.jsx)("img",{className:"mt-2",src:_s.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,V.jsxs)(l.A,{className:"fw-24",children:["  ",(0,pe.t)("or"),"        "]}),(0,V.jsx)(l.A,{className:"fw-24",children:(0,pe.t)("Enter_Machine_Code")}),(0,V.jsx)(i.A,{children:(0,V.jsx)(G.A,{focus:!0,value:u,onChange:e=>h(e)})})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mx:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:()=>m(""),children:(0,pe.t)("ClearAll")}),(0,V.jsx)(H.A,{color:"light_green",disabled:!0,children:(0,V.jsx)(l.A,{color:"black",children:(0,pe.t)("confirm")})})]})]})},ks=[{id:1,name:"LED 1",code:"QTYPW112",qty:1,vendor:"Sameera Enterprises"},{id:2,name:"Wire 6",code:"QTI99012",qty:1,vendor:"Mayfair Enterprises"},{id:3,name:"Wire12",code:"QTI9911",qty:1,vendor:"Axar Industries"},{id:4,name:"Wire11",code:"QTI99726",qty:1,vendor:"Axar Industries"},{id:5,name:"Wire9",code:"QTI90011",qty:1,vendor:"Axar Industries"},{id:6,name:"Wire3",code:"QTI91423",qty:1,vendor:"Axar Industries"}];function Es(){return(0,V.jsx)(kt.A,{sx:{},children:(0,V.jsxs)(_t.A,{sx:{borderSpacing:"0 15px",borderCollapse:"separate"},"aria-label":"parts table",children:[(0,V.jsx)(Et.A,{children:(0,V.jsxs)(It.A,{sx:{backgroundColor:"#E9EFC5"},children:[(0,V.jsx)(Nt.A,{sx:{fontSize:"22px",fontWeight:"500"},children:"S. No."}),(0,V.jsx)(Nt.A,{sx:{fontSize:"22px",fontWeight:"500"},children:"QR Code"}),(0,V.jsx)(Nt.A,{sx:{fontSize:"22px",fontWeight:"500"},children:"Client"}),(0,V.jsx)(Nt.A,{sx:{fontSize:"22px",fontWeight:"500"},children:"Date"}),(0,V.jsx)(Nt.A,{sx:{fontSize:"22px",fontWeight:"500"},children:"Tag"}),(0,V.jsx)(Nt.A,{sx:{fontSize:"22px",fontWeight:"500"},children:"Comments"})]})}),(0,V.jsx)(Ct.A,{children:ks.map((e=>(0,V.jsxs)(It.A,{sx:{backgroundColor:"#EEEEEE"},children:[(0,V.jsx)(Nt.A,{sx:{fontSize:"22px",fontWeight:"500"},children:e.id}),(0,V.jsx)(Nt.A,{sx:{fontSize:"22px",fontWeight:"500"},children:e.name}),(0,V.jsx)(Nt.A,{sx:{fontSize:"22px",fontWeight:"500"},children:e.code}),(0,V.jsx)(Nt.A,{sx:{fontSize:"22px",fontWeight:"500"},children:e.qty}),(0,V.jsx)(Nt.A,{sx:{fontSize:"22px",fontWeight:"500"},children:e.vendor}),(0,V.jsx)(Nt.A,{sx:{fontSize:"22px",fontWeight:"500"},children:(0,V.jsx)(Ia.N_,{to:"/",onClick:t=>{t.preventDefault(),console.log(`Reporting issue for part ${e.id}`)},sx:{color:"#rgba(21, 53, 219, 1)",textDecoration:"none"},children:"View"})})]},e.id)))})]})})}const Is=()=>(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"issue-search-bar",children:[(0,V.jsx)("h1",{children:"Rework open issues"}),(0,V.jsx)("input",{type:"text",placeholder:"Search"})]}),(0,V.jsx)("div",{className:"issue-table",children:(0,V.jsx)(Es,{})})]});var Ts=a(63336),Ds=a(1888),Rs=a(15353),Ps=a(14256),Os=a(78492),$s=a(53193);const Ls=(0,ga.Ay)(Nt.A)((e=>{let{theme:t}=e;return{[`&.${Da.A.head}`]:{backgroundColor:"#D9D9D9",color:"#3E3E3E",fontSize:"clamp(16px, 1.5vw, 20px)",fontWeight:"bold",padding:"20px 16px",borderBottom:"1px"},[`&.${Da.A.body}`]:{fontSize:"clamp(14px, 1.2vw, 20px)",padding:"16px",borderBottom:"1px solid #D9D9D9"}}})),Ms=(0,ga.Ay)(It.A)((e=>{let{theme:t}=e;return{"&:last-child td, &:last-child th":{borderBottom:"1px"},"& td, & th":{border:"none",height:"60px"}}})),Us={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,maxWidth:"90%",bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",maxHeight:"90vh",overflowY:"auto"},zs=()=>{const[e,t]=(0,y.useState)(!1),[a,s]=(0,y.useState)(""),[n,i]=(0,y.useState)("Yes"),[l,r]=(0,y.useState)([]),o=()=>t(!1);return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"add-issue",children:[(0,V.jsx)("h1",{children:"Issues"}),(0,V.jsx)(La.A,{onClick:()=>t(!0),sx:{backgroundColor:"rgb(217, 217, 217)",color:"#3E3E3E",fontSize:"20px",fontWeight:"500",border:"none",padding:"10px 20px","&:hover":{backgroundColor:"rgb(200, 200, 200)"}},children:"+ Add Issue"})]}),(0,V.jsx)(kt.A,{component:Ts.A,sx:{width:"auto",marginTop:"10px",overflowX:"auto",borderRadius:0,borderBottom:"1px solid #D9D9D9",boxShadow:"none"},children:(0,V.jsxs)(_t.A,{"aria-label":"customized table",sx:{border:"none","& .MuiTableCell-root":{border:"none"}},children:[(0,V.jsx)(Et.A,{children:(0,V.jsxs)(It.A,{children:[(0,V.jsx)(Ls,{sx:{width:"10%"},children:"S No"}),(0,V.jsx)(Ls,{sx:{width:"45%"},children:"Reason Name"}),(0,V.jsx)(Ls,{sx:{width:"45%"},children:"Resolution Date Required"})]})}),(0,V.jsx)(Ct.A,{children:l.map(((e,t)=>(0,V.jsxs)(Ms,{children:[(0,V.jsx)(Ls,{children:t+1}),(0,V.jsx)(Ls,{children:e.reasonName}),(0,V.jsx)(Ls,{children:e.resolutionDate})]},e.reasonName)))})]})}),(0,V.jsx)(Ds.A,{open:e,onClose:o,"aria-labelledby":"add-issue-modal",children:(0,V.jsxs)(h.A,{sx:Us,children:[(0,V.jsxs)("div",{style:{border:"none",display:"flex",justifyContent:"space-between",width:"100%",marginBottom:"20px"},children:[(0,V.jsx)("h2",{style:{fontSize:"24px",margin:0},children:"Add Issue"}),(0,V.jsx)(La.A,{onClick:o,sx:{minWidth:"auto",marginTop:"-15px",padding:0,"&:hover":{backgroundColor:"transparent"}},children:(0,V.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"45",height:"45",fill:"none",children:(0,V.jsx)("path",{fill:"#F84343",d:"M24 4C12.94 4 4 12.94 4 24s8.94 20 20 20 20-8.94 20-20S35.06 4 24 4m0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16m7.18-26L24 21.18 16.82 14 14 16.82 21.18 24 14 31.18 16.82 34 24 26.82 31.18 34 34 31.18 26.82 24 34 16.82z"})})})]}),(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px",width:"100%",marginBottom:"16px"},children:[(0,V.jsx)("h3",{style:{fontSize:"20px",fontWeight:500,margin:0,fontFamily:"metropolis",minWidth:"120px",borderBottom:"none"},children:"Reason Name"}),(0,V.jsx)(Rs.A,{fullWidth:!0,placeholder:"Enter reason name",value:a,onChange:e=>s(e.target.value)})]}),(0,V.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px",width:"100%",marginBottom:"16px"},children:[(0,V.jsx)("h3",{style:{fontSize:"20px",fontWeight:500,margin:0,minWidth:"120px",borderBottom:"none"},children:"Required"}),(0,V.jsx)($s.A,{component:"fieldset",children:(0,V.jsxs)(Os.A,{row:!0,value:n,onChange:e=>i(e.target.value),children:[(0,V.jsx)(Xe.A,{value:"Yes",control:(0,V.jsx)(Ps.A,{}),label:"Yes"}),(0,V.jsx)(Xe.A,{value:"No",control:(0,V.jsx)(Ps.A,{}),label:"No"})]})})]}),(0,V.jsx)(La.A,{variant:"contained",fullWidth:!0,onClick:()=>{if(!a)return void t(!1);const e={reasonName:a,resolutionDate:n};r([...l,e]),s(""),i("Yes"),t(!1)},sx:{mt:2,backgroundColor:"rgb(134, 213, 106)",color:"rgb(5, 4, 4)",fontSize:"20px",fontWeight:"500",border:"none",height:"40px",width:"85px",opacity:""===a?.8:1,"&:hover":{backgroundColor:"rgb(134, 213, 106)"}},children:"Submit"})]})})]})},Fs=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,V.jsx)(l.A,{className:"fw-36",sx:{mt:4},children:" Job ID - JB18769827629102"}),(0,V.jsx)(l.A,{className:"fw-24",children:"Detail"}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{className:"fw-24",children:"1. Detail 1"}),(0,V.jsx)(l.A,{className:"fw-24",children:"2. Detail 2"})]})]})},Hs=e=>{let{open:t,onClose:a}=e;(0,P.Zp)();const[s,n]=(0,y.useState)(new Map),[r,o]=(0,y.useState)(!0);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsx)(l.A,{className:"fw-24",sx:{mt:4},children:"As we are going to start the process, Please check the machine and confirm"}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{className:"fw-24",children:"1. Instruction 1"}),(0,V.jsx)(l.A,{className:"fw-24",children:"2. Instruction 2"}),(0,V.jsx)(l.A,{className:"fw-24",children:"3. Instruction 3"})]}),(0,V.jsx)(l.A,{className:"fw-24",sx:{mt:4},children:"Quantity is distributed in 5 batches, 5 barcodes will be printed, Please apply on each batch"}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>o(!0),children:(0,V.jsx)(l.A,{color:"black",children:"Start"})})]})]})},qs=()=>{const e=(0,P.zy)(),t=(0,P.Zp)(),a=e.state,{taskList:s}=(0,Cs.A)(),[n,r]=(0,y.useState)([]),[d,c]=(0,y.useState)(),[u,m]=(0,y.useState)(0),[h,p]=(0,y.useState)(!0),[x,g]=(0,y.useState)(!1),[w,v]=(0,y.useState)(0),[f,j]=(0,y.useState)({name:"",metadata:{}}),[A,S]=(0,y.useState)(""),[b,_]=(0,y.useState)({});(0,y.useEffect)((()=>{C()}),[]);const C=async()=>{c("fetch");let[e]=await s(a);r(null===e||void 0===e?void 0:e.items),S(null===e||void 0===e?void 0:e.task),_({...b,waiting:null===e||void 0===e?void 0:e.waiting,running:null===e||void 0===e?void 0:e.running,paused:null===e||void 0===e?void 0:e.paused,completed:null===e||void 0===e?void 0:e.completed}),c(!1)},N=async()=>{p(!1)},k=[{id:1,title:(0,pe.t)("workOrderId"),render:e=>(0,V.jsx)(l.A,{sx:{cursor:"pointer",fontWeight:"bold"},children:e.work_order_order_id})},{id:2,title:"ASSEMBLY"===A?(0,pe.t)("FGCode"):(0,pe.t)("CircuitName"),render:e=>e.circuit_name||e.fg_code},{id:6,title:(0,pe.t)("status"),render:e=>"WAITING"===(null===e||void 0===e?void 0:e.running_status)?(0,V.jsx)(ne,{color:Q.lm.LG_GREEN,title:(0,pe.t)("waiting")}):"RUNNING"===(null===e||void 0===e?void 0:e.running_status)?(0,V.jsx)(ne,{color:Q.lm.LG_PINK,title:(0,pe.t)("running")}):"PAUSED"===(null===e||void 0===e?void 0:e.running_status)?(0,V.jsx)(ne,{color:Q.lm.LG_PURPLE,title:(0,pe.t)("paused")}):"COMPLETED"===(null===e||void 0===e?void 0:e.running_status)?(0,V.jsx)(ne,{color:Q.lm.LIGHT_GREEN,title:(0,pe.t)("completed")}):void 0},{id:66,title:(0,pe.t)("qty"),render:e=>null===e||void 0===e?void 0:e.quantity},{id:5,title:(0,pe.t)("action"),render:e=>"COMPLETED"===e.running_status?(0,V.jsx)(Ke.A,{fontSize:"large",sx:{color:Q.lm.LIGHT_GREEN}}):(0,V.jsx)(H.A,{color:"light_green",onClick:()=>async function(e){"ACC"===A?t("/job-material-scan",{state:e}):"LPC"===A?t("/lpc-scan",{state:e}):"ASSEMBLY"===A&&t("/job-assembly-scan",{state:e})}(e),children:(0,V.jsx)(l.A,{color:"black",children:(0,pe.t)("start")})})}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:2,alignItems:"center"},children:[(0,V.jsx)(o.A,{onClick:()=>t(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsxs)("h1",{className:"mt-4",children:[A," ",(0,pe.t)("JobList")]})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:2},children:[(0,V.jsxs)(i.A,{sx:{backgroundColor:Q.lm.LG_GREEN,width:200,height:80,borderRadius:2,flexDirection:"row",justifyContent:"space-between"},children:[(0,V.jsxs)(l.A,{sx:{p:2,fontSize:20,fontWeight:500},children:[" ",(0,pe.t)("Scheduled"),(0,V.jsx)("br",{})," ",(0,pe.t)("job")]}),(0,V.jsx)(l.A,{sx:{p:2,fontSize:36,fontWeight:700},children:null===b||void 0===b?void 0:b.waiting})]}),(0,V.jsxs)(i.A,{sx:{backgroundColor:Q.lm.LG_PINK,width:200,height:80,borderRadius:2,flexDirection:"row",justifyContent:"space-between"},children:[(0,V.jsxs)(l.A,{sx:{p:2,fontSize:20,fontWeight:500},children:[(0,pe.t)("Running"),(0,V.jsx)("br",{}),(0,pe.t)("job")]}),(0,V.jsx)(l.A,{sx:{p:2,fontSize:36,fontWeight:700},children:null===b||void 0===b?void 0:b.running})]}),(0,V.jsxs)(i.A,{sx:{backgroundColor:"#C4D7FC",width:200,height:80,borderRadius:2,flexDirection:"row",justifyContent:"space-between"},children:[(0,V.jsxs)(l.A,{sx:{p:2,fontSize:20,fontWeight:500},children:[(0,pe.t)("Paused"),(0,V.jsx)("br",{}),(0,pe.t)("job")]}),(0,V.jsx)(l.A,{sx:{p:2,fontSize:36,fontWeight:700},children:null===b||void 0===b?void 0:b.paused})]}),(0,V.jsxs)(i.A,{sx:{backgroundColor:Q.lm.LG_PURPLE,width:200,height:80,borderRadius:2,flexDirection:"row",justifyContent:"space-between"},children:[(0,V.jsxs)(l.A,{sx:{p:2,fontSize:20,fontWeight:500},children:[(0,pe.t)("Completed")," ",(0,V.jsx)("br",{}),(0,pe.t)("job")]}),(0,V.jsx)(l.A,{sx:{p:2,fontSize:36,fontWeight:700},children:null===b||void 0===b?void 0:b.completed})]})]})]}),(0,V.jsx)($.A,{columns:k,rows:n,rowsPerPage:10,loading:"fetch"===d,titleCellClasses:"c-gray fw-700",page:w,setPage:v,paginator:!0,serialize:!0,total:u}),(0,V.jsx)(Fs,{open:"detail"===x,onClose:()=>{g(!1),p(!1)},data:f,edit:h,setData:j,onSubmit:N}),(0,V.jsx)(Hs,{open:"start"===x,onClose:()=>{g(!1),p(!1)},data:f,edit:h,setData:j,onSubmit:N})]})};a.p;var Gs=a(64546),Bs=a(33200),Qs=a(93245);const Ys=e=>{var t,a,s,n,r,o,d,c;let{open:u,onClose:m,data:h}=e;const p=(0,P.zy)().state,x=(0,P.Zp)(),[g,w]=(0,y.useState)(new Map),[v,f]=(0,y.useState)({}),[j,A]=(0,y.useState)(localStorage.getItem("machineId")||""),[S,b]=(0,y.useState)(!1),[_,C]=(0,y.useState)(""),[N,k]=(0,y.useState)(localStorage.getItem("printqty")||""),{OrderMaterialList:E,create:I,updateOrderStatus:T,getMachineStatus:D,nextLabel:R}=(0,Cs.A)();console.warn("oldprintqty",N),(0,y.useEffect)((()=>{O();const e=setInterval((()=>{O()}),5e3);return()=>clearInterval(e)}),[]);const O=async()=>{const[e]=await D(j);var t,a;e&&(console.log("getMachineStatus response ----",null===e||void 0===e||null===(t=e.event_packet)||void 0===t?void 0:t.downtime_reason),"downtime"===e.asset_state&&null===(null===e||void 0===e||null===(a=e.event_packet)||void 0===a?void 0:a.downtime_reason)?b("downtime"):b(!1),f(e),await localStorage.setItem("printqty",e.completed),N!=e.completed&&0!==e.completed&&e.completed%100===0&&$(),e.total===e.completed&&x("/job",{replace:!0}))},$=async()=>{setTimeout((()=>{M()}),1e3)},L=(0,y.useRef)(),M=()=>{const e=L.current.innerHTML,t=document.body.innerHTML;document.body.innerHTML="\n        <style>\n          @media print {\n            @page { margin: 0; size: auto; }\n            body { margin: 0; padding: 0; }\n            header, footer { display: none; }\n          }\n        </style>\n      "+e,window.print(),document.body.innerHTML=t,window.location.reload()};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:" items-center",children:(0,V.jsx)("h1",{className:"mt-1",children:"Machine Status"})}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",gap:2,mb:2},children:[(0,V.jsxs)(i.A,{elevation:3,sx:{padding:"20px",borderRadius:"8px",width:"100%",boxShadow:3},children:[(0,V.jsxs)(l.A,{className:"fw-24",sx:{},children:["Operator Name : ",(0,V.jsx)("strong",{children:null===v||void 0===v||null===(t=v.event_packet)||void 0===t||null===(a=t.shift)||void 0===a?void 0:a.operator_name})]}),(0,V.jsxs)(l.A,{className:"fw-24",sx:{},children:["Shift Name : ",(0,V.jsx)("strong",{children:null===v||void 0===v||null===(s=v.event_packet)||void 0===s||null===(n=s.shift)||void 0===n?void 0:n.shift_name})]}),(0,V.jsxs)(l.A,{className:"fw-24",sx:{},children:["Start Time : ",(0,V.jsx)("strong",{children:null===v||void 0===v||null===(r=v.event_packet)||void 0===r||null===(o=r.shift)||void 0===o?void 0:o.start_time})]}),(0,V.jsxs)(l.A,{className:"fw-24",sx:{},children:["End Time : ",(0,V.jsx)("strong",{children:null===v||void 0===v||null===(d=v.event_packet)||void 0===d||null===(c=d.shift)||void 0===c?void 0:c.end_time})]})]}),(0,V.jsxs)(i.A,{elevation:3,sx:{padding:"20px",borderRadius:"8px",width:"100%",boxShadow:3},children:[(0,V.jsxs)(l.A,{className:"fw-24",sx:{},children:["Circuit Name : ",(0,V.jsx)("strong",{children:null===v||void 0===v?void 0:v.circuit_name})]}),(0,V.jsxs)(l.A,{className:"fw-24",sx:{textTransform:"capitalize"},children:["Machine Status : ",(0,V.jsx)("strong",{style:{color:(e=>{switch(e){case"offline":return"#FF0000";case"online":return"#27AE60";default:return"#FAA036"}})(null===v||void 0===v?void 0:v.asset_state)},children:null===v||void 0===v?void 0:v.asset_state})]}),(0,V.jsxs)(l.A,{className:"fw-24",sx:{},children:["Total : ",(0,V.jsx)("strong",{children:null===v||void 0===v?void 0:v.total})]}),(0,V.jsxs)(l.A,{className:"fw-24",sx:{},children:["Completed : ",(0,V.jsx)("strong",{children:null===v||void 0===v?void 0:v.completed})]})]}),(0,V.jsx)(i.A,{elevation:3,sx:{padding:"20px",borderRadius:"8px",width:"100%",boxShadow:3},children:(0,V.jsx)(Bs.A,{total:null===v||void 0===v?void 0:v.total,completed:null===v||void 0===v?void 0:v.completed})})]}),(null===v||void 0===v?void 0:v.circuit_metadata)&&(0,V.jsx)("div",{children:(0,V.jsxs)("table",{style:{width:"100%"},children:[(0,V.jsx)("tr",{children:Object.entries(null===v||void 0===v?void 0:v.circuit_metadata).map((e=>{let[t,a]=e;return(0,V.jsx)("th",{style:{padding:"8px",border:"1px solid black",fontWeight:"bold",background:"#f0f0f0",width:"10%",textTransform:"capitalize"},children:t.charAt(0).toUpperCase()+t.slice(1)})}))}),(0,V.jsx)("tr",{children:Object.entries(null===v||void 0===v?void 0:v.circuit_metadata).map((e=>{let[t,a]=e;return(0,V.jsx)("th",{style:{padding:"8px",border:"1px solid black",fontWeight:"normal",width:"10%"},children:a})}))})]})}),(0,V.jsx)(Gs.A,{open:"downtime"===S,onClose:()=>{b(!1)},packetData:v}),(0,V.jsx)("div",{style:{display:"none"},children:(0,V.jsx)("div",{ref:L,children:(0,V.jsxs)(i.A,{sx:{width:"288px",height:"192px"},children:[(0,V.jsx)(l.A,{className:"fw-36",sx:{mt:2},textAlign:"center",children:"Dhoot Transmission"}),(0,V.jsx)(i.A,{sx:{justifyContent:"space-between",gap:1,flexDirection:"row"},children:(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1},children:[(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{children:"Order no :"}),(0,V.jsx)(l.A,{children:"Circuit Name :"}),(0,V.jsx)(l.A,{children:"Quantity :"})]}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{children:null===p||void 0===p?void 0:p.work_order_order_id}),(0,V.jsx)(l.A,{children:null===p||void 0===p?void 0:p.circuit_name}),(0,V.jsx)(l.A,{children:"100"})]})]})}),(0,V.jsx)(i.A,{sx:{marginLeft:"70%"},children:(0,V.jsx)(Qs.Ay,{size:60,value:`ACC#${null===p||void 0===p?void 0:p.circuit_name}#${null===p||void 0===p?void 0:p.work_order_order_id}#100`,viewBox:"0 0 256 256"})})]})})})]})},Ws=()=>{const e=(0,P.zy)(),t=(0,P.Zp)(),a=e.state,{workOrderTask:s}=(0,Cs.A)(),[n,i]=(0,y.useState)([{jobid:"JOB_123",client:"unx@32",operations:5,qty:200,scan:!0},{jobid:"JOB_1234",client:"unx_32",operations:5,qty:200,scan:!1}]),[r,o]=(0,y.useState)(),[d,c]=(0,y.useState)(0),[u,m]=(0,y.useState)(!1),[h,p]=(0,y.useState)(!1),[x,g]=(0,y.useState)(0),[w,v]=(0,y.useState)({name:"",metadata:{}});(0,y.useEffect)((()=>{f()}),[x]);const f=async()=>{o("fetch");const[e,t]=await s(a.work_order_id,x+1);console.log("workOrderTask--aaaa---",a),i(e.circuits),o(!1)},j=async()=>{m(!1)},A=[{id:1,title:"Circuit Name",render:e=>{var t;return null===e||void 0===e||null===(t=e.circuit_information)||void 0===t?void 0:t.name}},{id:2,title:"Circuit Code",render:e=>{var t;return(null===e||void 0===e||null===(t=e.circuit_information)||void 0===t?void 0:t.circuit_code)||"-"}},{id:66,title:"Oty",render:e=>null===e||void 0===e?void 0:e.quantity},{id:5,title:"Actions",render:e=>(0,V.jsx)(H.A,{color:"light_green",onClick:()=>t("/job-material-scan",{state:e}),children:(0,V.jsx)(l.A,{color:"black",children:"Scan"})})}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:" items-center mb-2",children:(0,V.jsxs)("h1",{className:"mt-4",children:["Work Order > ",a.work_order_order_id]})}),(0,V.jsx)($.A,{columns:A,rows:n,rowsPerPage:5,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:x,setPage:g,paginator:!0,serialize:!0,total:d}),(0,V.jsx)(Ys,{open:"detail"===h,onClose:()=>{p(!1),m(!1)},data:w,edit:u,setData:v,onSubmit:j}),(0,V.jsx)(Gs.A,{open:"start"===h,onClose:()=>{p(!1),m(!1)},data:w,edit:u,setData:v,onSubmit:j})]})},Vs=e=>{let{open:t,onClose:a,data:s}=e;const[n,r]=(0,y.useState)(new Map);return(0,y.useEffect)((()=>{console.log("hit api")}),[s]),(0,V.jsx)(q.A,{open:t,onClose:a,width:"50vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:W.A,children:(0,V.jsxs)(i.A,{sx:{justifyContent:"center",alignItems:"center",mt:4},children:[(0,V.jsx)(Ke.A,{sx:{color:Q.lm.LIGHT_GREEN,width:100,height:100}}),(0,V.jsx)(l.A,{textAlign:"center",className:"fw-24",sx:{py:4},children:"All Material scanned. verifying"})]})})};var Xs=a(31900),Zs=a(19778);const Js=e=>{let{open:t,onClose:a,message:s,msgtype:n="success"}=e;const[r,o]=(0,y.useState)(new Map),[d,c]=(0,y.useState)(!1);return(0,V.jsx)(q.A,{open:t,onClose:a,width:"60vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:W.A,children:(0,V.jsxs)(i.A,{alignItems:"center",spacing:2,mb:4,gap:4,children:["success"===n?(0,V.jsx)(Zs.A,{sx:{color:Q.lm.GREEN,fontSize:100}}):(0,V.jsx)("img",{src:Xs.A,alt:"warning Icon",style:{width:"100px",height:"100px"}}),(0,V.jsx)(l.A,{className:"fw-36",textAlign:"center",children:s||""})]})})},Ks=()=>{const e=(0,P.zy)(),t=(0,P.Zp)(),a=e.state,{OrderMaterialList:s,create:n,updateOrderStatus:r,getMachineStatus:d}=(0,Cs.A)(),[c,u]=(0,y.useState)([]),[m,h]=(0,y.useState)(),[p,x]=(0,y.useState)(0),[g,w]=(0,y.useState)(!1),[v,f]=(0,y.useState)(!1),[j,A]=(0,y.useState)(0),[S,b]=(0,y.useState)({name:"",metadata:{}}),[_,C]=(0,y.useState)(),[N,k]=(0,y.useState)(localStorage.getItem("machineId")||""),[E,I]=(0,y.useState)(!1),[T,D]=(0,y.useState)(!0),[R,O]=(0,y.useState)("");(0,y.useEffect)((()=>{if(!c.length)return void D(!0);const e=c.every((e=>{var t;return(null===_||void 0===_||null===(t=_[e.material_name])||void 0===t?void 0:t.length)>0}));D(e)}),[_,c]),(0,y.useEffect)((()=>{console.log("workOrderTask--scan-locationData--",a),L()}),[]);const L=async()=>{h("fetch");const[e,n]=await s(a.id,j+1);console.log("workOrderTask----_list-ashishi",e),u(null===e||void 0===e?void 0:e.items),!0===e.materials_verified&&t("/machine-data",{state:a}),h(!1)},M=[{id:1,title:(0,pe.t)("materialCode"),render:e=>null===e||void 0===e?void 0:e.material_name},{id:3,title:(0,pe.t)("description"),render:e=>(null===e||void 0===e?void 0:e.material_description)||"-"},{id:6,title:(0,pe.t)("status"),render:e=>_&&_[e.material_name]&&_[e.material_name]?(0,V.jsx)(Ke.A,{fontSize:"large",sx:{color:Q.lm.LIGHT_GREEN}}):"-"}],U=e=>{z(e)},z=e=>{const[t,a,s,n,i]=e.split("#"),l=parseFloat(a);if(isNaN(l))return void console.log("Invalid quantity");if(!c.find((e=>e.material_name===t)))return O(`Material ${t} not found in data`),f("ResModal"),void setTimeout((()=>{f(!1)}),2e3);C((e=>{const a={...e};return a[t]||(a[t]=[]),a[t].push({quantity:l,grn_number:n}),a})),O(`Scanned ${t} with quantity ${l}`),f("ResModal"),setTimeout((()=>{f(!1)}),1500),F.current&&F.current.focus()};(0,y.useEffect)((()=>{console.log("Updated Payload in useEffect:",_)}),[_]);const F=(0,y.useRef)(null);return(0,y.useEffect)((()=>{F.current&&F.current.focus()}),[]),(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:" items-center mb-2",children:[(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:2,alignItems:"center"},children:[(0,V.jsx)(o.A,{onClick:()=>t(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsxs)("h1",{className:"mt-4",children:[a.circuit_name," > ",a.work_order_order_id]})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,V.jsx)("h1",{className:"fw-24 mt-1",children:(0,pe.t)("scanMaterialConfirm")}),(0,V.jsx)("input",{ref:F,style:{height:"1.5rem",width:"26rem"},type:"text",onKeyPress:e=>{"Enter"===e.key&&(U(e.target.value),e.target.value="")}})]})]}),(0,V.jsx)($.A,{columns:M,rows:c,loading:"fetch"===m,titleCellClasses:"c-gray fw-700",page:j,setPage:A,serialize:!0,total:p}),(0,V.jsx)(Vs,{open:"detail"===v,onClose:()=>{f(!1),w(!1)},edit:g}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>(async()=>{console.log("updateOrderStatus respose----",_),f("detail");let e=await n(a.id,_);if(e&&"OK"===e.message){let e={status:"RUNNING"};await r(a.id,e),I(!0),setTimeout((()=>{t("/machine-data",{state:a})}),2e3)}})(),disabled:!T,children:(0,V.jsx)(l.A,{color:Q.lm.TEXT_GRAY,children:(0,pe.t)("confirm")})})]}),(0,V.jsx)(Js,{open:"ResModal"===v,onClose:()=>f(!1),message:R})]})},en=()=>{const e=(0,P.zy)(),t=(0,P.Zp)(),a=e.state,{OrderMaterialList:s,createLPC:n,updateLPCOrderStatus:r,getMachineStatus:d,LpcMaterialList:c}=(0,Cs.A)(),[u,m]=(0,y.useState)([]),[h,p]=(0,y.useState)(),[x,g]=(0,y.useState)(0),[w,v]=(0,y.useState)(!1),[f,j]=(0,y.useState)(!1),[A,S]=(0,y.useState)(0),[b,_]=(0,y.useState)({name:"",metadata:{}}),[C,N]=(0,y.useState)(),[k,E]=(0,y.useState)(localStorage.getItem("machineId")||""),[I,T]=(0,y.useState)(!1),[D,R]=(0,y.useState)(!0),L=a.work_order_order_id,[M,U]=(0,y.useState)([]),[z,F]=(0,y.useState)(500);(0,y.useEffect)((()=>{if(!u.length)return void R(!0);const e=u.every((e=>{var t,a;const s=null===C||void 0===C||null===(t=C[e.name])||void 0===t?void 0:t.reduce(((e,t)=>e+(t.quantity||0)),0);return(null===C||void 0===C||null===(a=C[e.name])||void 0===a?void 0:a.length)>0&&s>=z}));R(e)}),[C,u]),(0,y.useEffect)((()=>{G()}),[A]),(0,y.useEffect)((()=>{}),[C]);const q=(0,y.useRef)(null);(0,y.useEffect)((()=>{q.current&&q.current.focus()}),[]);const G=async()=>{p("fetch");const[e,s]=await c(a.id,A+1),n=[...((null===e||void 0===e?void 0:e.materials)||[]).map((e=>({...e,type:"Material"}))),...((null===e||void 0===e?void 0:e.lpc)||[]).map((e=>({...e,type:"LPC Circuit"}))),...((null===e||void 0===e?void 0:e.acc)||[]).map((e=>({...e,type:"ACC Circuit"})))];console.log("workOrderTask----_list-materials_verified",e.materials_verified),!0===e.materials_verified&&t("/lpc-machine-data",{state:a.id}),m(n),p(!1)},B=[{id:1,title:(0,pe.t)("name"),render:e=>null===e||void 0===e?void 0:e.name},{id:2,title:(0,pe.t)("type"),render:e=>null===e||void 0===e?void 0:e.type},{id:3,title:(0,pe.t)("description"),render:e=>(null===e||void 0===e?void 0:e.description)||(null===e||void 0===e?void 0:e.circuit_description)||"-"},{id:33,title:(0,pe.t)("scannedQuantity"),render:e=>{if("Material"!==e.type){var t;const a=M.find((t=>e.name===t.circuit_code));return null!==(t=null===a||void 0===a?void 0:a.quantity)&&void 0!==t?t:"-"}var a;return(null===C||void 0===C||null===(a=C[e.name])||void 0===a?void 0:a.reduce(((e,t)=>e+(t.quantity||0)),0))||"-"}},{id:6,title:(0,pe.t)("status"),render:e=>{if("Material"===e.type){if(!C||!C[e.name])return"-";return C[e.name].reduce(((e,t)=>e+(t.quantity||0)),0)>z?(0,V.jsx)(Ke.A,{fontSize:"large",sx:{color:Q.lm.LIGHT_GREEN}}):"-"}{var t;const a=M.find((t=>e.name===t.circuit_code));return(null!==(t=null===a||void 0===a?void 0:a.quantity)&&void 0!==t?t:0)>z?(0,V.jsx)(Ke.A,{fontSize:"large",sx:{color:Q.lm.LIGHT_GREEN}}):"-"}}}],Y=e=>{const[t,a,s,n,i]=e.split("#");"ACC"!==t?W(e):X(e)},W=e=>{const[t,a,s,n,i]=e.split("#"),l=parseFloat(a);if(isNaN(l))return void console.log("Invalid quantity");u.find((e=>e.name===t))?(N((e=>{const a={...e};return a[t]||(a[t]=[]),a[t].push({quantity:l,grn_number:n}),console.log("Updated Payload Inside setPayload:",a),a})),q.current&&q.current.focus()):O.oR.warn("Material not found in data")},X=e=>{const[t,a,s,n]=e.split("#"),i=parseFloat(n);if(isNaN(i))return void console.log("Invalid quantity");if(s!==L)return console.log("work order id not match"),void O.oR.warn("work order id not match");u.find((e=>e.name===a))?(U((e=>{const t=e.findIndex((e=>e.circuit_code===a));if(-1!==t){const a=[...e];return a[t].quantity+=i,a}return[...e,{circuit_code:a,quantity:i}]})),q.current&&q.current.focus(),console.warn("scan item circuit circuitList------",M)):O.oR.warn("circuit not found in data")};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:" items-center mb-2",children:[(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:2,alignItems:"center"},children:[(0,V.jsx)(o.A,{onClick:()=>t(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsxs)("h1",{className:"mt-4",children:[a.circuit_name," > ",a.work_order_order_id]})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,V.jsx)("h1",{className:"fw-24 mt-1",children:(0,pe.t)("scanMaterialCircuit")}),(0,V.jsx)("input",{ref:q,style:{height:"1.5rem",width:"26rem"},type:"text",onKeyPress:e=>{"Enter"===e.key&&(Y(e.target.value),e.target.value="")}})]})]}),(0,V.jsx)($.A,{columns:B,rows:u,loading:"fetch"===h,titleCellClasses:"c-gray fw-700",page:A,setPage:S,serialize:!0,total:x}),(0,V.jsx)(Vs,{open:"detail"===f,onClose:()=>{j(!1),v(!1)},edit:w}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>(async()=>{j("detail");let e={materials:C,acc:M},s=await n(a.id,e);if(s&&"OK"===s.message){let e={status:"RUNNING"};await r(a.id,e),T(!0),setTimeout((()=>{t("/lpc-machine-data",{state:a.id})}),2e3)}})(),disabled:!D,children:(0,V.jsx)(l.A,{color:Q.lm.TEXT_GRAY,children:(0,pe.t)("confirm")})})]})]})},tn=()=>{const e=(0,P.zy)(),t=(0,P.Zp)(),a=e.state;console.log("locationData assebly",a);const{OrderMaterialList:s,createAssembly:n,currentAssemblyOrderStatus:r,updateAssemblyOrderStatus:d,getMachineStatus:c,AssemblyMaterialList:u,updateBOM:m}=(0,Cs.A)(),[h,p]=(0,y.useState)([]),[x,g]=(0,y.useState)(),[w,v]=(0,y.useState)(0),[f,j]=(0,y.useState)(!1),[A,S]=(0,y.useState)(!1),[b,_]=(0,y.useState)(0),[C,N]=(0,y.useState)({name:"",metadata:{}}),[k,E]=(0,y.useState)(),[I,T]=(0,y.useState)(localStorage.getItem("machineId")||""),[D,R]=(0,y.useState)(!1),[O,L]=(0,y.useState)(!0),[M,U]=(0,y.useState)(""),[z,F]=(0,y.useState)("");(0,y.useEffect)((()=>{if(!h.length)return void L(!0);const e=h.every((e=>e.issued.every((e=>!0===e.scanned))));L(e)}),[h]),(0,y.useEffect)((()=>{console.log("workOrderTask--scan---",a),q()}),[b]);const q=async()=>{g("fetch");const[e,s]=await u(a.id,b+1);p((()=>e.items.map(((e,t)=>{const a=[...e.scanned||[]].map((e=>({...e,quantity:Number(e.quantity)}))),s=e.issued.map((e=>{const t=a.findIndex((t=>t.grn_number===e.grn_number&&t.quantity>0));return-1!==t?(a[t].quantity-=e.quantity,a[t].quantity<=0&&a.splice(t,1),{...e,scanned:!0}):{...e,scanned:!1}})),n=(e=>{var t;const a=e.issued.map((e=>e.grn_number));return null===(t=e.scanned)||void 0===t?void 0:t.filter((e=>!a.includes(e.grn_number)&&!0===e.shop_floor))})(e)||[],i=n.reduce(((e,t)=>e+Number(t.quantity)),0);return e.shop_floor_qty&&e.shop_floor_qty>0&&s.push({quantity:e.shop_floor_qty,grn_number:"SHOP_FLOOR",scanned:i>=e.shop_floor_qty,scanQuantity:i}),{...e,issued:s}})))),g(!1),null!==e&&void 0!==e&&e.materials_verified&&t("/assembly-machine-data",{state:a.id})},G=async(e,t)=>{let s=await m(a.id,{qr_code:e,shop_floor:t});console.log("UpdateBOMItems respose----",s);const[n,i,l,r,o]=e.split("#");s&&(F("success"),U(n+" "+(0,pe.t)("scanned successfully")),S("ResModal"),setTimeout((()=>{S(!1)}),1500))};function B(e,t,a){F(a),U(e+" "+t),S("ResModal"),setTimeout((()=>{S(!1),F("")}),2e3)}const Y=[{id:1,title:"Name",render:e=>null===e||void 0===e?void 0:e.material_name},{id:3,title:"Description",render:e=>(null===e||void 0===e?void 0:e.material_description)||"-"},{id:2,title:"Issued",render:e=>{var t;return null===e||void 0===e||null===(t=e.issued)||void 0===t?void 0:t.map((e=>(0,V.jsxs)(l.A,{sx:{width:"80%",backgroundColor:e.scanned?Q.lm.LIGHT_GREEN:Q.lm.LGG_RED,mb:.3},children:["GRN NO : ",e.grn_number," , QTY : ",e.quantity,"  ",e.scanQuantity?`, Scan Qty :${e.scanQuantity}`:""]})))}}],W=e=>{X(e)},X=e=>{const[t,a,s,n,i]=e.split("#"),l=parseFloat(a);if(isNaN(l))return void console.log("Invalid quantity");const r=h.find((e=>e.material_name===t));if(!r)return void B(t,"Material not found in BOM","");const o=h.findIndex((e=>e.material_name===t));-1!==o&&setTimeout((()=>{const e=document.querySelector(".table-container");if(e){const t=e.querySelectorAll("tbody tr")[o];t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus({preventScroll:!0}))}}),100),E((a=>{const s={...a},i=r.issued;if(!i||0===i.length)return B(t,"Material not issued",""),a;const o=l,d=n;let c=!1;return p((a=>a.map((a=>{if(a.material_name!==t)return a;let s=!1,n=!1;const i=a.issued.map((a=>{if(n)return a;if(a.grn_number===d&&!a.scanned&&o>=a.quantity)return s||(G(e,!1),s=!0),n=!0,{...a,scanned:!0};if(!c&&a.grn_number!==d&&"SHOP_FLOOR"!==a.grn_number)return B(t,`GRN mismatch: Expected ${a.grn_number}, got ${d}`,""),c=!0,a;if("SHOP_FLOOR"===a.grn_number&&"SHOP_FLOOR"!==d){s||(G(e,!0),s=!0);const t=(a.scanQuantity||0)+o,n=t>=a.quantity;return{...a,scanQuantity:t,scanned:n}}return a}));return{...a,issued:i}})))),s[t]||(s[t]=[]),s[t].push({quantity:l,grn_number:n}),console.log("Updated Payload Inside setPayload:",s),s})),Z.current&&Z.current.focus()};(0,y.useEffect)((()=>{console.log("Updated Payload in useEffect:",k)}),[k]);const Z=(0,y.useRef)(null);return(0,y.useEffect)((()=>{Z.current&&Z.current.focus()}),[]),(0,V.jsxs)("div",{className:"mx-3 my-2",style:{display:"flex",flexDirection:"column",height:"100vh"},children:[(0,V.jsxs)("div",{style:{flex:"0 0 auto",position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:[(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:2,alignItems:"center"},children:[(0,V.jsx)(o.A,{onClick:()=>t(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsxs)("h1",{className:"mt-4",children:[a.fg_code," > ",a.work_order_order_id]})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[(0,V.jsx)("h1",{className:"fw-24 mt-1",children:"Please scan the materials and circuits"}),(0,V.jsx)("input",{ref:Z,style:{height:"1.5rem",width:"26rem"},type:"text",onKeyPress:e=>{"Enter"===e.key&&(W(e.target.value),e.target.value="")}})]})]}),(0,V.jsx)("div",{style:{flex:"1 1 auto",overflowY:"auto"},children:(0,V.jsx)($.A,{columns:Y,rows:h.map(((e,t)=>({...e,key:`row-${t}`}))),loading:"fetch"===x,titleCellClasses:"c-gray fw-700",page:b,setPage:_,total:w,serialize:!0,"aria-label":"Assembly Scan Table"})}),(0,V.jsx)(Vs,{open:"detail"===A,onClose:()=>{S(!1),j(!1)},edit:f}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,children:"Cancel"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>alert("Please scan all the materials and circuits before confirming."),disabled:!O,children:(0,V.jsx)(l.A,{color:Q.lm.TEXT_GRAY,children:"Confirm"})})]}),(0,V.jsx)(Js,{msgtype:z,open:"ResModal"===A,onClose:()=>S(!1),message:M})]})},an=e=>{let{open:t,onClose:a,data:s}=e;const n=(0,P.Zp)(),r=(0,P.zy)().state,[o,d]=(0,y.useState)(new Map),[c,u]=(0,y.useState)({}),[m,h]=(0,y.useState)(localStorage.getItem("machineId")||""),[p,x]=(0,y.useState)(!1),[g,w]=(0,y.useState)(""),{OrderMaterialList:v,create:f,updateOrderStatus:j,getMachineStatus:A,updateLPCOrderStatus:S,currentLPCOrderStatus:b}=(0,Cs.A)();(0,y.useEffect)((()=>{console.warn("locationData----",r),_();const e=setInterval((()=>{_()}),5e3);return()=>clearInterval(e)}),[]);const _=async()=>{let e=await b(r);e&&(console.log("getMachineStatus respose----",e.state),w(null===e||void 0===e?void 0:e.state))};async function C(e){let t={status:e};await S(r,t);await _(),"COMPLETED"===e&&setTimeout((()=>{n("/job",{state:m,replace:!0})}),1e3)}return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:" items-center",children:(0,V.jsxs)("h1",{className:"mt-1",children:["Order Status : ",g]})}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:3,mb:2,justifyContent:"center"},children:["RUNNING"===g?(0,V.jsx)(H.A,{color:"RADIAL_RED",onClick:()=>C("STOPPED"),children:(0,V.jsx)(l.A,{color:Q.lm.WHITE,children:"Pause"})}):(0,V.jsx)(H.A,{color:"yellow",onClick:()=>C("RUNNING"),children:(0,V.jsx)(l.A,{color:Q.lm.WHITE,children:"Resume"})}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>C("COMPLETED"),children:(0,V.jsx)(l.A,{color:Q.lm.WHITE,children:"Complete"})})]}),(0,V.jsx)(i.A,{children:(0,V.jsx)("iframe",{src:"/pdf/sample.pdf",width:"100%",height:"600px",style:{border:"none"}})}),(0,V.jsx)(Gs.A,{open:"downtime"===p,onClose:()=>{x(!1)},packetData:c})]})},sn=a.p+"static/media/image.7df633c24c17b3ea3125.png",nn=()=>{const e=(0,P.Zp)();return(0,V.jsx)("div",{children:(0,V.jsxs)("div",{className:"content-container",children:[(0,V.jsx)("p",{className:"detail-heading",children:"Please Scan the part QR Code to start"}),(0,V.jsx)("div",{className:"barcode",children:(0,V.jsx)("img",{src:sn,alt:"qrscanner",width:160})}),(0,V.jsxs)("div",{className:"sub-headings",children:[(0,V.jsx)("p",{children:"Or"}),(0,V.jsx)("p",{className:"detail-heading2",children:"Enter Code printed on QR Code"})]}),(0,V.jsx)("input",{type:"text",placeholder:"",className:"inputbar"}),(0,V.jsxs)("div",{className:"buttons",children:[(0,V.jsx)("button",{children:"Clear All"}),(0,V.jsx)("button",{onClick:()=>e("/product-details"),children:"Confirm"})]})]})})},ln=()=>(0,V.jsxs)("div",{className:"report-container",children:[(0,V.jsx)("div",{className:"report-details-t",children:(0,V.jsxs)("div",{className:"grid-container",children:[(0,V.jsx)("div",{className:"font-medium",children:"Part Name"}),(0,V.jsx)("div",{className:"font-semibold",children:"SSKSKK2"}),(0,V.jsx)("div",{className:"font-medium",children:"Customer"}),(0,V.jsx)("div",{className:"font-semibold",children:"Mars Motors"}),(0,V.jsx)("div",{className:"font-medium",children:"Date of Manufacture"}),(0,V.jsx)("div",{className:"font-semibold",children:"12 Aug 2024"}),(0,V.jsx)("div",{className:"font-medium",children:"Plant"}),(0,V.jsx)("div",{className:"font-semibold",children:"Plant no-32"})]})}),(0,V.jsxs)("div",{className:"report-actions",children:[(0,V.jsx)("button",{className:"action-button",children:"Print Report"}),(0,V.jsx)("button",{className:"action-button",children:"Share Report"})]})]}),rn=()=>{const[e,t]=(0,y.useState)(0),[a,s]=(0,y.useState)(10),[n,i]=(0,y.useState)(1),r=[{id:1,title:"Part Name",render:e=>e.name},{id:2,title:"Part Code",render:e=>e.code},{id:3,title:"Oty",render:e=>e.qty},{id:3,title:"Vendor",render:e=>e.vendor},{id:112,title:"Issue",render:e=>(0,V.jsx)(l.A,{color:"#1535DB",children:"Report Issue"})}],o=[{id:1,title:"Machine Name",render:e=>e.name},{id:2,title:"Machine Code",render:e=>e.code},{id:3,title:"Finish Time",render:e=>e.qty},{id:3,title:"Process",render:e=>"Crimping"},{id:112,title:"Issue",render:e=>(0,V.jsx)(l.A,{color:"#1535DB",children:"Report Issue"})}],d=[{id:1,title:"Operator Name",render:e=>e.name},{id:2,title:"Machine Code",render:e=>e.code},{id:3,title:"Finish Time",render:e=>"-"},{id:3,title:"Process",render:e=>"Wirecutting"},{id:112,title:"Issue",render:e=>(0,V.jsx)(l.A,{color:"#1535DB",children:"Report Issue"})}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:"Details"}),(0,V.jsx)(ln,{}),(0,V.jsx)("div",{className:"details-cards-container",children:[{label:"Number of Parts",value:"12",variant:"green"},{label:"Machining",value:"2",variant:"pink"},{label:"Operator",value:"2",variant:"blue"},{label:"Rework",value:"2",variant:"purple"}].map(((a,s)=>(0,V.jsx)(on,{label:a.label,value:a.value,variant:a.variant,isActive:e===s,onClick:()=>t(s)},a.label)))}),(0,V.jsx)("div",{className:"table mt-2",children:(0,V.jsx)($.A,{columns:0==e?r:1==e?o:2==e?d:o,rows:[{id:1,name:"LED 1",code:"QTYPW112",qty:1,vendor:"Sameera Enterprises"},{id:2,name:"Wire 6",code:"QTI99012",qty:1,vendor:"Mayfair Enterprises"},{id:3,name:"Wire12",code:"QTI9911",qty:1,vendor:"Axar Industries"},{id:4,name:"Wire11",code:"QTI99726",qty:1,vendor:"Axar Industries"},{id:5,name:"Wire9",code:"QTI90011",qty:1,vendor:"Axar Industries"},{id:6,name:"Wire3",code:"QTI91423",qty:1,vendor:"Axar Industries"}],rowsPerPage:10,titleCellClasses:"fw-700",page:n,setPage:i,paginator:!0,serialize:!0,total:a,headColor:0==e?Q.lm.LG_GREEN:1==e?Q.lm.LG_PINK:2==e?Q.lm.LG_BG_BLUE:Q.lm.LG_PURPLE,tableBodyColor:Q.lm.LG_GRAY})})]})};function on(e){let{label:t,value:a,variant:s,isActive:n,onClick:i}=e;return(0,V.jsx)("div",{className:`metric-card ${s} ${n?"active":""}`,onClick:i,children:(0,V.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[(0,V.jsx)("p",{className:"metric-label",children:t}),(0,V.jsx)("p",{className:"metric-value",children:a})]})})}const dn=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,tab:d,setSelectedQuestions:c,skills:u,users:m,testList:h}=e;const[p,x]=(0,y.useState)(new Map),[g,w]=(0,y.useState)(0),v=["Outward"===d&&{title:(0,pe.t)("workOrderId"),placeholder:(0,pe.t)("enterWorkOrderId"),type:Q.wN.INPUT,name:"work_order_id"},{title:(0,pe.t)("materialQr"),placeholder:(0,pe.t)("scanQr"),type:Q.wN.INPUT,name:"material_qr"},{title:(0,pe.t)("materialCode"),placeholder:(0,pe.t)("enterMaterialCode"),type:Q.wN.INPUT,name:"material_code"},{title:(0,pe.t)("grnNumber"),placeholder:(0,pe.t)("enterGrnNumber"),type:Q.wN.INPUT,name:"material_grn"},{title:(0,pe.t)("quantity"),placeholder:(0,pe.t)("enterMaterialQuantity"),type:Q.wN.INPUT,name:"material_quantity"},{title:(0,pe.t)("location"),placeholder:(0,pe.t)("selectLocation"),type:Q.wN.SELECT,name:"location",keyValues:[{value:"SH11",key:"SH11"},{value:"SH12",key:"SH12"},{value:"IC01",key:"IC01"}],width:"512px"}];return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-5",children:[(0,V.jsx)("h3",{className:"opacity-80",style:{width:"fit-content"},children:"Outward"===d?(0,pe.t)("addOutwardMaterial"):(0,pe.t)("addInMaterial")}),(0,V.jsx)(B.A,{data:s,errors:p,onChange:e=>{const{name:t,value:a}=e.target;x((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:v}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{if(0!==g);else{const e=(0,Y.bG)(v,s);if(x(e),e.size)return;await r()}},loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("next")})})]})]})},cn=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{listout:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`materials/material-out/?page=${e}&page_size=10`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},listreturn:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`materials/material-return/?page=${e}&page_size=10`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},createOutward:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post("materials/material-out/",e,t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data},createInward:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post("materials/material-return/",e,t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data},update:async(e,a)=>{const s=new M.Ay,n=await s.put(`orders/update-material-failure/${e}/`,a,t,(e=>(0,L.So)(e,null)));return null===n||void 0===n?void 0:n.data}}},un=()=>{const e=(0,P.zy)(),[t,a]=((0,P.Zp)(),(0,f.wA)(),e.state,(0,f.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.Failure_item)||void 0===t?void 0:t.data})),(0,y.useState)([])),[s,n]=(0,y.useState)(),[r,o]=(0,y.useState)(0),[d,c]=(0,y.useState)(!1),[u,m]=(0,y.useState)("testDetail"),[h,p]=(0,y.useState)(0),[x,g]=(0,y.useState)({}),{listout:w,listreturn:v,createOutward:j,createInward:A,update:S}=cn(),[b,_]=(0,y.useState)(new Map),[C,N]=(0,y.useState)([]),[k,E]=(0,y.useState)([]),[I,T]=(0,y.useState)([]),[D,R]=(0,y.useState)(""),[O,L]=(0,y.useState)("Outward"),M=[{id:1,title:(0,pe.t)("materialName"),render:e=>{var t;return(0,V.jsx)(l.A,{children:null===(t=e.material)||void 0===t?void 0:t.name})}},{id:2,title:(0,pe.t)("materialCode"),render:e=>{var t;return(0,V.jsx)(l.A,{children:null===(t=e.material)||void 0===t?void 0:t.material_code})}},{id:22,title:(0,pe.t)("workOrder"),render:e=>{var t;return(0,V.jsx)(l.A,{children:(null===(t=e.material)||void 0===t?void 0:t.work_order)||"-"})}},{id:3,title:(0,pe.t)("unit"),render:e=>{var t;return(0,V.jsx)(l.A,{children:null===(t=e.material)||void 0===t?void 0:t.unit})}},{id:4,title:(0,pe.t)("description"),render:e=>{var t;return(0,V.jsx)(l.A,{children:null===(t=e.material)||void 0===t?void 0:t.description})}},{id:5,title:(0,pe.t)("grnNumber"),render:e=>(0,V.jsx)(l.A,{children:null===e||void 0===e?void 0:e.grn_number})},{id:6,title:(0,pe.t)("movementDate"),render:e=>(0,V.jsx)(l.A,{children:fe()(null===e||void 0===e?void 0:e.movement_date).format("ll")})},{id:7,title:(0,pe.t)("quantity"),render:e=>(0,V.jsx)(l.A,{children:(0,Y.HY)(null===e||void 0===e?void 0:e.quantity)})},{id:8,title:"Outward"===O?(0,pe.t)("toLocation"):(0,pe.t)("fromLocation"),render:e=>(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(l.A,{children:"Outward"===O?e.to_location:e.from_location})})}];(0,y.useEffect)((()=>{U()}),[h,O]);const U=async()=>{const[e]="Outward"===O?await w(h+1):await v(h+1);console.log("test master-------",e),o(e.count),T(e.results)};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",width:"100%"},children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:"Store Material Movement"}),(0,V.jsx)(H.A,{color:"gray",onClick:()=>{m("add")},children:(0,V.jsxs)(l.A,{className:"fw-20-500-24",children:["Outward"===O?(0,pe.t)("addOutwardMaterial"):(0,pe.t)("addInMaterial")," "]})})]})}),(0,V.jsx)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:(0,V.jsx)(J.A,{value:O,onChange:(e,t)=>{L(t),p(0)},className:"mb-2 fw-500",children:["Outward","Inward"].map(((e,t)=>(0,V.jsx)(K.A,{label:e,className:"fw-500",value:e})))})}),(0,V.jsx)($.A,{columns:M,rows:I,rowsPerPage:10,loading:"fetch"===s,titleCellClasses:"c-gray fw-700",page:h,setPage:p,paginator:!0,serialize:!0,total:r,tableBodyColor:Q.lm.WHITE}),(0,V.jsx)(dn,{open:"add"===u,onClose:()=>{m(!1)},onSubmit:async()=>{const e=e=>Object.fromEntries(Object.entries(e).filter((e=>{let[t,a]=e;return void 0!==a&&null!==a&&""!==a})));if("Outward"===O){const t=e({workorder_id:x.work_order_id,material_qr:x.material_qr,material_code:x.material_code,material_grn:x.material_grn,material_quantity:x.material_quantity,to_location:x.location});console.log("payload----",t);let a=await j(t);console.log("res - create mat------",a),m(!1)}else{const t=e({material_qr:x.material_qr,material_code:x.material_code,material_grn:x.material_grn,material_quantity:x.material_quantity,from_location:x.location});let a=await A(t);console.log("res - create mat------",a),m(!1)}},users:t,testList:I,data:x,setData:g,tab:O})]})},mn=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){const e=new M.Ay,a=await e.get("orders/acc-circuit-list/",{},t,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.post(`${U.H.ASSET}/${a}/${U.H.DIVISIONS}/`,e,t,(e=>(0,L.So)(e,null,"Division created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.DIVISION}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Division Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.ASSET}/${U.H.DIVISION}/${e}/`,t,(e=>(0,L.So)(e,null,"Division deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},hn=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,V.jsx)(l.A,{className:"fw-36",sx:{mt:4},children:" Job ID - JB18769827629102"}),(0,V.jsx)(l.A,{className:"fw-24",children:"Detail"}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{className:"fw-24",children:"1. Detail 1"}),(0,V.jsx)(l.A,{className:"fw-24",children:"2. Detail 2"})]})]})},pn=e=>{let{open:t,onClose:a}=e;const s=(0,P.Zp)(),[n,r]=(0,y.useState)(new Map),[o,d]=(0,y.useState)(!1);return(0,V.jsx)(q.A,{open:t,onClose:a,width:"50vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:W.A,children:o?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(i.A,{sx:{alignItems:"center",mt:4},children:[(0,V.jsx)(l.A,{className:"fw-24",children:"Please Scan the machine barcode to proceed"}),(0,V.jsx)("img",{className:"mt-2",src:_s.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,V.jsx)(l.A,{className:"fw-24",children:"or"}),(0,V.jsx)(l.A,{className:"fw-24",children:"Enter Machine Code"}),(0,V.jsx)(i.A,{children:(0,V.jsx)(G.A,{})})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:"Clear All"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>s("/myjob"),children:(0,V.jsx)(l.A,{color:"black",children:"Confirm"})})]})]}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(l.A,{className:"fw-24",sx:{mt:4},children:"As we are going to start the process, Please check the machine and confirm"}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{className:"fw-24",children:"1. Instruction 1"}),(0,V.jsx)(l.A,{className:"fw-24",children:"2. Instruction 2"}),(0,V.jsx)(l.A,{className:"fw-24",children:"3. Instruction 3"})]}),(0,V.jsx)(l.A,{className:"fw-24",sx:{mt:4},children:"Quantity is distributed in 5 batches, 5 barcodes will be printed, Please apply on each batch"}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>d(!0),children:(0,V.jsx)(l.A,{color:"black",children:"Start"})})]})]})})},xn=()=>{const e=(0,P.zy)(),t=((0,P.Zp)(),e.state),[a,s]=(0,y.useState)([{jobid:"JOB_123",client:"unx@32",operations:5,qty:200}]),[n,i]=(0,y.useState)(),[l,r]=(0,y.useState)(0),[o,d]=(0,y.useState)(!1),[c,u]=(0,y.useState)(!1),[m,h]=(0,y.useState)(0),[p,x]=(0,y.useState)({name:"",metadata:{}}),{list:g,create:w,update:v,remove:f}=mn();(0,y.useEffect)((()=>{j()}),[m]);const j=async()=>{i("fetch");const[e,a]=await g(m+1,t);s(e),r(a),i(!1)},A=async()=>{const e={...p};i("fetch"),!0===o?await v(e):await w(e,t),x({}),u(!1),await j(),i(!1),d(!1)};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)("h1",{className:"mt-4",children:"ACC Circuit Master"})}),(0,V.jsx)($.A,{columns:[{id:1,title:"Circuit Name",render:e=>null===e||void 0===e?void 0:e.name},{id:2,title:"Circuit Code",render:e=>null===e||void 0===e?void 0:e.circuit_code},{id:3,title:"Description",render:e=>null===e||void 0===e?void 0:e.circuit_description},{id:5,title:"Materials Req",render:e=>null===e||void 0===e?void 0:e.qty}],rows:a,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:h,paginator:!0,serialize:!0,total:l}),(0,V.jsx)(hn,{open:"detail"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:A}),(0,V.jsx)(pn,{open:"start"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:A})]})},gn=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){const e=new M.Ay,a=await e.get("orders/lpc-circuit-list/",{},t,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.post(`${U.H.ASSET}/${a}/${U.H.DIVISIONS}/`,e,t,(e=>(0,L.So)(e,null,"Division created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.DIVISION}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Division Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.ASSET}/${U.H.DIVISION}/${e}/`,t,(e=>(0,L.So)(e,null,"Division deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},wn=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,V.jsx)(l.A,{className:"fw-36",sx:{mt:4},children:" Job ID - JB18769827629102"}),(0,V.jsx)(l.A,{className:"fw-24",children:"Detail"}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{className:"fw-24",children:"1. Detail 1"}),(0,V.jsx)(l.A,{className:"fw-24",children:"2. Detail 2"})]})]})},yn=e=>{let{open:t,onClose:a}=e;const s=(0,P.Zp)(),[n,r]=(0,y.useState)(new Map),[o,d]=(0,y.useState)(!1);return(0,V.jsx)(q.A,{open:t,onClose:a,width:"50vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:W.A,children:o?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(i.A,{sx:{alignItems:"center",mt:4},children:[(0,V.jsx)(l.A,{className:"fw-24",children:"Please Scan the machine barcode to proceed"}),(0,V.jsx)("img",{className:"mt-2",src:_s.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,V.jsx)(l.A,{className:"fw-24",children:"or"}),(0,V.jsx)(l.A,{className:"fw-24",children:"Enter Machine Code"}),(0,V.jsx)(i.A,{children:(0,V.jsx)(G.A,{})})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:"Clear All"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>s("/myjob"),children:(0,V.jsx)(l.A,{color:"black",children:"Confirm"})})]})]}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(l.A,{className:"fw-24",sx:{mt:4},children:"As we are going to start the process, Please check the machine and confirm"}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{className:"fw-24",children:"1. Instruction 1"}),(0,V.jsx)(l.A,{className:"fw-24",children:"2. Instruction 2"}),(0,V.jsx)(l.A,{className:"fw-24",children:"3. Instruction 3"})]}),(0,V.jsx)(l.A,{className:"fw-24",sx:{mt:4},children:"Quantity is distributed in 5 batches, 5 barcodes will be printed, Please apply on each batch"}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>d(!0),children:(0,V.jsx)(l.A,{color:"black",children:"Start"})})]})]})})},vn=()=>{const e=(0,P.zy)(),t=((0,P.Zp)(),e.state),[a,s]=(0,y.useState)([{jobid:"JOB_123",client:"unx@32",operations:5,qty:200}]),[n,i]=(0,y.useState)(),[l,r]=(0,y.useState)(0),[o,d]=(0,y.useState)(!1),[c,u]=(0,y.useState)(!1),[m,h]=(0,y.useState)(0),[p,x]=(0,y.useState)({name:"",metadata:{}}),{list:g,create:w,update:v,remove:f}=gn();(0,y.useEffect)((()=>{j()}),[m]);const j=async()=>{i("fetch");const[e,a]=await g(m+1,t);s(e),r(a),i(!1)},A=async()=>{const e={...p};i("fetch"),!0===o?await v(e):await w(e,t),x({}),u(!1),await j(),i(!1),d(!1)};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)("h1",{className:"mt-4",children:"LPC Circuit Master"})}),(0,V.jsx)($.A,{columns:[{id:1,title:"Circuit Name",render:e=>null===e||void 0===e?void 0:e.operations},{id:2,title:"Circuit Code",render:e=>null===e||void 0===e?void 0:e.operations},{id:3,title:"Description",render:e=>null===e||void 0===e?void 0:e.operations},{id:4,title:"Stages",render:e=>null===e||void 0===e?void 0:e.qty},{id:5,title:"Materials",render:e=>null===e||void 0===e?void 0:e.qty},{id:6,title:"ACC Circuit Req",render:e=>null===e||void 0===e?void 0:e.qty}],rows:a,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:h,paginator:!0,serialize:!0,total:l}),(0,V.jsx)(wn,{open:"detail"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:A}),(0,V.jsx)(yn,{open:"start"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:A})]})},fn=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){const e=new M.Ay,a=await e.get("orders/lpc-stage-master/",{},t,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.post(`${U.H.ASSET}/${a}/${U.H.DIVISIONS}/`,e,t,(e=>(0,L.So)(e,null,"Division created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.DIVISION}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Division Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.ASSET}/${U.H.DIVISION}/${e}/`,t,(e=>(0,L.So)(e,null,"Division deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},jn=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,V.jsx)(l.A,{className:"fw-36",sx:{mt:4},children:" Job ID - JB18769827629102"}),(0,V.jsx)(l.A,{className:"fw-24",children:"Detail"}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{className:"fw-24",children:"1. Detail 1"}),(0,V.jsx)(l.A,{className:"fw-24",children:"2. Detail 2"})]})]})},An=e=>{let{open:t,onClose:a}=e;const s=(0,P.Zp)(),[n,r]=(0,y.useState)(new Map),[o,d]=(0,y.useState)(!1);return(0,V.jsx)(q.A,{open:t,onClose:a,width:"50vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:W.A,children:o?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(i.A,{sx:{alignItems:"center",mt:4},children:[(0,V.jsx)(l.A,{className:"fw-24",children:"Please Scan the machine barcode to proceed"}),(0,V.jsx)("img",{className:"mt-2",src:_s.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,V.jsx)(l.A,{className:"fw-24",children:"or"}),(0,V.jsx)(l.A,{className:"fw-24",children:"Enter Machine Code"}),(0,V.jsx)(i.A,{children:(0,V.jsx)(G.A,{})})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:"Clear All"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>s("/myjob"),children:(0,V.jsx)(l.A,{color:"black",children:"Confirm"})})]})]}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(l.A,{className:"fw-24",sx:{mt:4},children:"As we are going to start the process, Please check the machine and confirm"}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{className:"fw-24",children:"1. Instruction 1"}),(0,V.jsx)(l.A,{className:"fw-24",children:"2. Instruction 2"}),(0,V.jsx)(l.A,{className:"fw-24",children:"3. Instruction 3"})]}),(0,V.jsx)(l.A,{className:"fw-24",sx:{mt:4},children:"Quantity is distributed in 5 batches, 5 barcodes will be printed, Please apply on each batch"}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>d(!0),children:(0,V.jsx)(l.A,{color:"black",children:"Start"})})]})]})})},Sn=()=>{const e=(0,P.zy)(),t=((0,P.Zp)(),e.state),[a,s]=(0,y.useState)([{jobid:"JOB_123",client:"unx@32",operations:5,qty:200}]),[n,i]=(0,y.useState)(),[l,r]=(0,y.useState)(0),[o,d]=(0,y.useState)(!1),[c,u]=(0,y.useState)(!1),[m,h]=(0,y.useState)(0),[p,x]=(0,y.useState)({name:"",metadata:{}}),{list:g,create:w,update:v,remove:f}=fn();(0,y.useEffect)((()=>{j()}),[m]);const j=async()=>{i("fetch");const[e,a]=await g(m+1,t);s(e),r(a),i(!1)},A=async()=>{const e={...p};i("fetch"),!0===o?await v(e):await w(e,t),x({}),u(!1),i(!1),d(!1)};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)("h1",{className:"mt-4",children:"LPC Stage Master"})}),(0,V.jsx)($.A,{columns:[{id:6,title:"Stage Name",render:e=>null===e||void 0===e?void 0:e.operations},{id:66,title:"Material Required",render:e=>null===e||void 0===e?void 0:e.qty}],rows:a,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:h,paginator:!0,serialize:!0,total:l}),(0,V.jsx)(jn,{open:"detail"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:A}),(0,V.jsx)(An,{open:"start"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:A})]})},bn=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`materials/material-master/?page=${e}&page_size=10`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.post(`${U.H.ASSET}/${a}/${U.H.DIVISIONS}/`,e,t,(e=>(0,L.So)(e,null,"Division created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.DIVISION}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Division Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.ASSET}/${U.H.DIVISION}/${e}/`,t,(e=>(0,L.So)(e,null,"Division deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},_n=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,V.jsx)(l.A,{className:"fw-36",sx:{mt:4},children:" Job ID - JB18769827629102"}),(0,V.jsx)(l.A,{className:"fw-24",children:"Detail"}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{className:"fw-24",children:"1. Detail 1"}),(0,V.jsx)(l.A,{className:"fw-24",children:"2. Detail 2"})]})]})},Cn=e=>{let{open:t,onClose:a}=e;const s=(0,P.Zp)(),[n,r]=(0,y.useState)(new Map),[o,d]=(0,y.useState)(!1);return(0,V.jsx)(q.A,{open:t,onClose:a,width:"50vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:W.A,children:o?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(i.A,{sx:{alignItems:"center",mt:4},children:[(0,V.jsx)(l.A,{className:"fw-24",children:"Please Scan the machine barcode to proceed"}),(0,V.jsx)("img",{className:"mt-2",src:_s.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,V.jsx)(l.A,{className:"fw-24",children:"or"}),(0,V.jsx)(l.A,{className:"fw-24",children:"Enter Machine Code"}),(0,V.jsx)(i.A,{children:(0,V.jsx)(G.A,{})})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:"Clear All"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>s("/myjob"),children:(0,V.jsx)(l.A,{color:"black",children:"Confirm"})})]})]}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(l.A,{className:"fw-24",sx:{mt:4},children:"As we are going to start the process, Please check the machine and confirm"}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{className:"fw-24",children:"1. Instruction 1"}),(0,V.jsx)(l.A,{className:"fw-24",children:"2. Instruction 2"}),(0,V.jsx)(l.A,{className:"fw-24",children:"3. Instruction 3"})]}),(0,V.jsx)(l.A,{className:"fw-24",sx:{mt:4},children:"Quantity is distributed in 5 batches, 5 barcodes will be printed, Please apply on each batch"}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>d(!0),children:(0,V.jsx)(l.A,{color:"black",children:"Start"})})]})]})})},Nn=()=>{const e=(0,P.zy)(),t=((0,P.Zp)(),e.state),[a,s]=(0,y.useState)([{jobid:"JOB_123",client:"unx@32",operations:5,qty:200}]),[n,i]=(0,y.useState)(),[l,r]=(0,y.useState)(0),[o,d]=(0,y.useState)(!1),[c,u]=(0,y.useState)(!1),[m,h]=(0,y.useState)(0),[p,x]=(0,y.useState)({name:"",metadata:{}}),{list:g,create:w,update:v,remove:f}=bn();(0,y.useEffect)((()=>{j()}),[m]);const j=async()=>{i("fetch");const[e]=await g(m+1);s(null===e||void 0===e?void 0:e.results),r(null===e||void 0===e?void 0:e.count),i(!1)},A=async()=>{const e={...p};i("fetch"),!0===o?await v(e):await w(e,t),x({}),u(!1),await j(),i(!1),d(!1)};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)("h1",{className:"mt-4",children:"Location Master"})}),(0,V.jsx)($.A,{columns:[{id:6,title:"Location",render:e=>null===e||void 0===e?void 0:e.operations},{id:66,title:"Type",render:e=>null===e||void 0===e?void 0:e.qty}],rows:a,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:h,paginator:!0,serialize:!0,total:l}),(0,V.jsx)(_n,{open:"detail"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:A}),(0,V.jsx)(Cn,{open:"start"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:A})]})},kn=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.get(`materials/material-master/?material_code=${a}&page=${e}&page_size=10`,{},t,L.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},packetList:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.get(`materials/material-packets/${a}/?page=${e}&page_size=10`,{},t,L.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.post(`${U.H.ASSET}/${a}/${U.H.DIVISIONS}/`,e,t,(e=>(0,L.So)(e,null)));return null===n||void 0===n?void 0:n.data},createPacket:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.post(`materials/material-packets/${a}/`,e,t,(e=>(0,L.So)(e,null)));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.DIVISION}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Division Updated successfully!")));return null===n||void 0===n?void 0:n.data},updatePacket:async(e,a)=>{const s=new M.Ay,n=await s.patch(`materials/material-packet/${e}/`,a,t,(e=>(0,L.So)(e,null)));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.ASSET}/${U.H.DIVISION}/${e}/`,t,(e=>(0,L.So)(e,null,"Division deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},En=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,V.jsx)(l.A,{className:"fw-36",sx:{mt:4},children:" Job ID - JB18769827629102"}),(0,V.jsx)(l.A,{className:"fw-24",children:"Detail"}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{className:"fw-24",children:"1. Detail 1"}),(0,V.jsx)(l.A,{className:"fw-24",children:"2. Detail 2"})]})]})},In=e=>{let{open:t,onClose:a}=e;const s=(0,P.Zp)(),[n,r]=(0,y.useState)(new Map),[o,d]=(0,y.useState)(!1);return(0,V.jsx)(q.A,{open:t,onClose:a,width:"50vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:W.A,children:o?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(i.A,{sx:{alignItems:"center",mt:4},children:[(0,V.jsx)(l.A,{className:"fw-24",children:"Please Scan the machine barcode to proceed"}),(0,V.jsx)("img",{className:"mt-2",src:_s.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,V.jsx)(l.A,{className:"fw-24",children:"or"}),(0,V.jsx)(l.A,{className:"fw-24",children:"Enter Machine Code"}),(0,V.jsx)(i.A,{children:(0,V.jsx)(G.A,{})})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:"Clear All"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>s("/myjob"),children:(0,V.jsx)(l.A,{color:"black",children:"Confirm"})})]})]}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(l.A,{className:"fw-24",sx:{mt:4},children:"As we are going to start the process, Please check the machine and confirm"}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{className:"fw-24",children:"1. Instruction 1"}),(0,V.jsx)(l.A,{className:"fw-24",children:"2. Instruction 2"}),(0,V.jsx)(l.A,{className:"fw-24",children:"3. Instruction 3"})]}),(0,V.jsx)(l.A,{className:"fw-24",sx:{mt:4},children:"Quantity is distributed in 5 batches, 5 barcodes will be printed, Please apply on each batch"}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>d(!0),children:(0,V.jsx)(l.A,{color:"black",children:"Start"})})]})]})})},Tn=()=>{const e=(0,P.zy)(),t=(0,P.Zp)(),a=e.state,[s,n]=(0,y.useState)([{jobid:"JOB_123",client:"unx@32",operations:5,qty:200}]),[r,o]=(0,y.useState)(),[d,c]=(0,y.useState)(0),[u,m]=(0,y.useState)(!1),[h,p]=(0,y.useState)(!1),[x,g]=(0,y.useState)(0),[w,v]=(0,y.useState)({name:"",metadata:{}}),[f,j]=(0,y.useState)(""),{list:A,create:S,update:b,remove:_}=kn();(0,y.useEffect)((()=>{C()}),[x,f]);const C=async()=>{o("fetch");const[e]=await A(x+1,f);console.log("results=---",e),n(null===e||void 0===e?void 0:e.results),c(null===e||void 0===e?void 0:e.count),o(!1)},N=async()=>{const e={...w};o("fetch"),!0===u?await b(e):await S(e,a),v({}),p(!1),await C(),o(!1),m(!1)},k=[{id:2,title:(0,pe.t)("materialCode"),render:e=>(0,V.jsxs)(l.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>t("/material-packet-detail",{state:e}),children:[" ",e.material_code]})},{id:6,title:(0,pe.t)("materialName"),render:e=>null===e||void 0===e?void 0:e.name},{id:66,title:(0,pe.t)("unit"),render:e=>null===e||void 0===e?void 0:e.unit},{id:668,title:(0,pe.t)("description"),render:e=>null===e||void 0===e?void 0:e.description}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("materialMaster")}),(0,V.jsx)(i.A,{mb:1,children:(0,V.jsx)(G.A,{height:"37px",value:f,placeholder:(0,pe.t)("search_by_material_code"),onChange:e=>{g(0),j(e.target.value)}})})]}),(0,V.jsx)($.A,{columns:k,rows:s,rowsPerPage:10,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:x,setPage:g,paginator:!0,serialize:!0,total:d}),(0,V.jsx)(En,{open:"detail"===h,onClose:()=>{p(!1),m(!1)},data:w,edit:u,setData:v,onSubmit:N}),(0,V.jsx)(In,{open:"start"===h,onClose:()=>{p(!1),m(!1)},data:w,edit:u,setData:v,onSubmit:N})]})},Dn=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,V.jsx)(l.A,{className:"fw-36",sx:{mt:4},children:" Job ID - JB18769827629102"}),(0,V.jsx)(l.A,{className:"fw-24",children:"Detail"}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{className:"fw-24",children:"1. Detail 1"}),(0,V.jsx)(l.A,{className:"fw-24",children:"2. Detail 2"})]})]})},Rn=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;const c=[!1===d&&{title:(0,pe.t)("grnNumber"),type:Q.wN.INPUT,name:"grn_number",validator:Q.wY.REQUIRED},{title:(0,pe.t)("totalQuantity"),type:Q.wN.INPUT,name:"total_quantity",validator:Q.wY.REQUIRED},!1===d&&{title:(0,pe.t)("unit"),type:Q.wN.INPUT,name:"unit",validator:Q.wY.REQUIRED},{title:(0,pe.t)("grnDate"),type:Q.wN.DATE,name:"grn_date",validator:Q.wY.REQUIRED},{title:(0,pe.t)("remainingQuantity"),type:Q.wN.INPUT,name:"remaining_quantity"},{title:(0,pe.t)("collectedQuantity"),type:Q.wN.INPUT,name:"collected_quantity"},{title:(0,pe.t)("remainingToCollect"),type:Q.wN.INPUT,name:"remaining_to_collect"}],[u,m]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",children:[!0===d?"EDIT":"ADD"," Packet"]}),(0,V.jsx)(B.A,{data:s,errors:u,onChange:e=>{const{name:t,value:a}=e.target;m((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:c}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{const e=(0,Y.bG)(c,s);m(e),e.size||await r()},loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})},Pn=()=>{const e=(0,P.zy)(),t=((0,P.Zp)(),e.state),[a,s]=(0,y.useState)([{jobid:"JOB_123",client:"unx@32",operations:5,qty:200}]),[n,r]=(0,y.useState)(),[d,c]=(0,y.useState)(0),[u,m]=(0,y.useState)(!1),[h,p]=(0,y.useState)(!1),[x,g]=(0,y.useState)(0),[w,v]=(0,y.useState)({name:"",metadata:{}}),[f,j]=(0,y.useState)({}),{list:A,create:S,update:b,remove:_,packetList:C,createPacket:N,updatePacket:k}=kn();(0,y.useLayoutEffect)((()=>{E()}),[x]);const E=async()=>{r("fetch");const[e]=await C(x+1,t.id);console.log("results=---",e),s(null===e||void 0===e?void 0:e.results),c(null===e||void 0===e?void 0:e.count),r(!1)},I=async()=>{const e={...f};let a=Object.fromEntries(Object.entries(e).filter((e=>{let[t,a]=e;return null!==a})));r("fetch"),await N(a,null===t||void 0===t?void 0:t.id),v({}),p(!1),await E(),r(!1),m(!1)},T=[{id:1,title:(0,pe.t)("grnDate"),render:e=>e.grn_date},{id:1,title:(0,pe.t)("grnNumber"),render:e=>e.grn_number||"-"},{id:7,title:(0,pe.t)("totalQuantity"),render:e=>(0,V.jsx)(l.A,{children:e.total_quantity?(0,Y.HY)(e.total_quantity):"-"})},{id:6,title:(0,pe.t)("totalRemainingQuantity"),render:e=>(0,V.jsx)(l.A,{children:e.remaining_quantity?(0,Y.HY)(e.remaining_quantity):"-"})},{id:7,title:(0,pe.t)("remainingToCollect"),render:e=>(0,V.jsx)(l.A,{children:e.remaining_to_collect?(0,Y.HY)(e.remaining_to_collect):"-"})},{id:7,title:(0,pe.t)("scannedQuantity"),render:e=>(0,V.jsx)(l.A,{children:e.collected_quantity?(0,Y.HY)(e.collected_quantity):"-"})},{id:5,title:(0,pe.t)("action"),render:e=>(0,V.jsx)(i.A,{flexDirection:"row",children:(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{D(e)},children:(0,V.jsx)(te.A,{color:"primary",fontSize:"small"})})})}],D=e=>{j((t=>e)),m(!0),p("add"),console.log("----------rowData",w)};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("materialDetail")}),(0,V.jsx)(H.A,{color:"gray",onClick:()=>p("add"),children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("addPacket")})})]}),(0,V.jsx)($.A,{columns:T,rows:a,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:x,setPage:g,paginator:!0,serialize:!0,total:d}),(0,V.jsx)(Dn,{open:"detail"===h,onClose:()=>{p(!1),m(!1)},data:w,edit:u,setData:v,onSubmit:I}),(0,V.jsx)(Rn,{open:"add"===h,onClose:()=>{p(!1),m(!1)},data:f,edit:u,setData:j,onSubmit:!0===u?async()=>{const e={...f};console.log("payload",e);let t=Object.fromEntries(Object.entries(e).filter((e=>{let[t,a]=e;return null!==a})));r("fetch");await k(f.id,t);g(0),j({}),p(!1),await E()}:I})]})},On=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`materials/material-master/?page=${e}&page_size=10`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.post(`${U.H.ASSET}/${a}/${U.H.DIVISIONS}/`,e,t,(e=>(0,L.So)(e,null,"Division created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.DIVISION}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Division Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.ASSET}/${U.H.DIVISION}/${e}/`,t,(e=>(0,L.So)(e,null,"Division deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},$n=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,V.jsx)(l.A,{className:"fw-36",sx:{mt:4},children:" Job ID - JB18769827629102"}),(0,V.jsx)(l.A,{className:"fw-24",children:"Detail"}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{className:"fw-24",children:"1. Detail 1"}),(0,V.jsx)(l.A,{className:"fw-24",children:"2. Detail 2"})]})]})},Ln=e=>{let{open:t,onClose:a}=e;const s=(0,P.Zp)(),[n,r]=(0,y.useState)(new Map),[o,d]=(0,y.useState)(!1);return(0,V.jsx)(q.A,{open:t,onClose:a,width:"50vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:W.A,children:o?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(i.A,{sx:{alignItems:"center",mt:4},children:[(0,V.jsx)(l.A,{className:"fw-24",children:"Please Scan the machine barcode to proceed"}),(0,V.jsx)("img",{className:"mt-2",src:_s.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,V.jsx)(l.A,{className:"fw-24",children:"or"}),(0,V.jsx)(l.A,{className:"fw-24",children:"Enter Machine Code"}),(0,V.jsx)(i.A,{children:(0,V.jsx)(G.A,{})})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:"Clear All"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>s("/myjob"),children:(0,V.jsx)(l.A,{color:"black",children:"Confirm"})})]})]}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(l.A,{className:"fw-24",sx:{mt:4},children:"As we are going to start the process, Please check the machine and confirm"}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{className:"fw-24",children:"1. Instruction 1"}),(0,V.jsx)(l.A,{className:"fw-24",children:"2. Instruction 2"}),(0,V.jsx)(l.A,{className:"fw-24",children:"3. Instruction 3"})]}),(0,V.jsx)(l.A,{className:"fw-24",sx:{mt:4},children:"Quantity is distributed in 5 batches, 5 barcodes will be printed, Please apply on each batch"}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>d(!0),children:(0,V.jsx)(l.A,{color:"black",children:"Start"})})]})]})})},Mn=()=>{const e=(0,P.zy)(),t=((0,P.Zp)(),e.state),[a,s]=(0,y.useState)([{jobid:"JOB_123",client:"unx@32",operations:5,qty:200}]),[n,i]=(0,y.useState)(),[l,r]=(0,y.useState)(0),[o,d]=(0,y.useState)(!1),[c,u]=(0,y.useState)(!1),[m,h]=(0,y.useState)(0),[p,x]=(0,y.useState)({name:"",metadata:{}}),{list:g,create:w,update:v,remove:f}=On();(0,y.useEffect)((()=>{j()}),[m]);const j=async()=>{i("fetch");const[e]=await g(m+1);s(null===e||void 0===e?void 0:e.results),r(null===e||void 0===e?void 0:e.count),i(!1)},A=async()=>{const e={...p};i("fetch"),!0===o?await v(e):await w(e,t),x({}),u(!1),await j(),i(!1),d(!1)};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)("h1",{className:"mt-4",children:"Store Mapping"})}),(0,V.jsx)($.A,{columns:[{id:2,title:"Material Code ",render:e=>e.client},{id:6,title:"Material Name",render:e=>null===e||void 0===e?void 0:e.operations},{id:66,title:"BIN No.",render:e=>null===e||void 0===e?void 0:e.qty}],rows:a,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:h,paginator:!0,serialize:!0,total:l}),(0,V.jsx)($n,{open:"detail"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:A}),(0,V.jsx)(Ln,{open:"start"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:A})]})},Un=()=>{const{t:e,i18n:t}=(0,j.Bd)(),a=(0,P.Zp)(),s=(0,P.zy)(),n=s.state.data,r=s.state.tab;console.log("location tab",r);const{summary:d,companies:c,plants:u,divisions:m,lines:h}=xa(),[p,x]=(0,y.useState)(null),[g,w]=(0,y.useState)(!1),[v,f]=(0,y.useState)(0),[A,S]=(0,y.useState)(0),[b,_]=(0,y.useState)("fetch"),[C,N]=(0,y.useState)([{email:"email@gmail.com",username:"user",fullname:"fullName",employee_id:"employee_id"}]),[k,E]=(0,y.useState)(new Map),[I,T]=(0,y.useState)({company_id:"",plant_id:"",division_id:"",line_id:n.line_id||"",date:n.date,shift_id:""}),[D,R]=(0,y.useState)([{value:"All",key:""}]),[O,L]=(0,y.useState)([{value:"All",key:""}]),[M,U]=(0,y.useState)([{value:"All",key:""}]),[z,F]=(0,y.useState)([{value:"All",key:""}]),[H,q]=(0,y.useState)([]),G=[{placeholder:"Date",type:Q.wN.DATE,name:"date",width:"150px"}];(0,y.useEffect)((()=>{w(r)}),[]),(0,y.useEffect)((()=>{!async function(){var e,t,a,s;let[n]=await d(v+1,!1===g?100:10,I.company_id||"",I.plant_id||"",I.division_id||"",I.line_id||"",I.date,I.shift_id||"");console.log("machine res-------",n);const i=(e,t)=>{const a=new Set(e.map((e=>e.key)));return t.filter((e=>!a.has(e.key)))};R((e=>[...e,...i(e,null===n||void 0===n?void 0:n.companies.map((e=>({value:e.name,key:e.id}))))])),L((e=>[...e,...i(e,null===n||void 0===n?void 0:n.plants.map((e=>({value:e.name,key:e.id}))))])),U((e=>[...e,...i(e,null===n||void 0===n?void 0:n.divisions.map((e=>({value:e.name,key:e.id}))))])),F((e=>[...e,...i(e,null===n||void 0===n?void 0:n.lines.map((e=>({value:e.name,key:e.id}))))])),(null===n||void 0===n||null===(e=n.summaries)||void 0===e||null===(t=e.results)||void 0===t?void 0:t.length)>=0?(q(n.summaries.results),S(n.summaries.count)):0===(null===n||void 0===n||null===(a=n.summaries)||void 0===a||null===(s=a.results)||void 0===s?void 0:s.length)&&_(!1);T((e=>{var t;return{...e,company:null===(t=D[0])||void 0===t?void 0:t.key}}))}()}),[v,I.company_id,g,I.plant_id,I.division_id,I.line_id,I.date,I.shift_id]);const Y=[{id:1,title:e("machineId"),render:e=>e.asset_name},{id:2,title:e("status"),render:e=>(0,V.jsx)(l.A,{sx:{textTransform:"capitalize"},color:"offline"===e.status?"#FF0000":"online"===e.status?"#27AE60":"#FAA036",children:e.status})},{id:3,title:"OEE",render:e=>e.oee+"%"},{id:4,title:e("availability"),render:e=>e.availability+"%"},{id:5,title:e("performance"),render:e=>e.utilization+"%"},{id:6,title:e("qty"),render:e=>e.quality},{id:7,title:e("action"),render:e=>(0,V.jsx)(l.A,{sx:{color:Q.lm.LIGHT_BLUE,cursor:"pointer"},onClick:()=>W(e),children:"Details"})}];function W(e){a("/child-machine",{state:{data:e,date:I.date}})}const X=(0,ga.Ay)(wa.A)((e=>{let{theme:t}=e;return{width:28,height:16,padding:0,display:"flex","&:active":{"& .MuiSwitch-thumb":{width:15},"& .MuiSwitch-switchBase.Mui-checked":{transform:"translateX(9px)"}},"& .MuiSwitch-switchBase":{padding:2,"&.Mui-checked":{transform:"translateX(12px)",color:"#fff","& + .MuiSwitch-track":{opacity:1,backgroundColor:"#FAA036",border:2,...t.applyStyles("dark",{backgroundColor:"#FAA036"})}}},"& .MuiSwitch-thumb":{width:12,height:12,borderRadius:6,transition:t.transitions.create(["width"],{duration:200})},"& .MuiSwitch-track":{borderRadius:8,opacity:1,backgroundColor:"rgba(0,0,0,.25)",boxSizing:"border-box",...t.applyStyles("dark",{backgroundColor:"rgba(255,255,255,.35)"})}}}));return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:1},children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1},children:[(0,V.jsx)(o.A,{onClick:()=>a(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsxs)(l.A,{className:"fw-20-500-36",children:[n.line_name," ",e("machines")]})]}),(0,V.jsx)(B.A,{data:I,errors:k,onChange:e=>{const{name:t,value:a}=e.target;console.log("name value",t,a),E((e=>(e.delete(t),e))),T((e=>({...e,[t]:0==a?"":a})))},schema:G}),(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:1},children:(0,V.jsxs)(i.A,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[(0,V.jsx)(l.A,{className:"fw-16-400-36",children:e("kanbanView")}),(0,V.jsx)(X,{defaultChecked:g,inputProps:{"aria-label":"ant design"},onChange:e=>{f(0),w(e.target.checked),_(!1),console.log("antswitch--------",e.target.checked)}}),(0,V.jsx)(l.A,{className:"fw-16-400-36",children:e("listView")})]})})]}),!1===g?(0,V.jsx)(Ge.Ay,{container:!0,spacing:2,sx:{mb:50,mt:1},children:H.length>0?H.map(((e,t)=>(0,V.jsx)(Ge.Ay,{item:!0,size:4,children:(0,V.jsx)("div",{style:{position:"relative",width:"430px",height:"auto"},children:(0,V.jsx)(pa,{data:e,expanded:p===t,onToggle:()=>(e=>{x(p===e?null:e)})(t),clickMore:()=>W(e)})},t)}))):(0,V.jsx)(i.A,{sx:{justifyContent:"center",alignItems:"center",mt:2,width:"100%"},children:!1===b&&(0,V.jsx)(l.A,{children:"Machine not found !"})})}):(0,V.jsx)($.A,{columns:Y,rows:H,rowsPerPage:10,loading:"fetch"===b,titleCellClasses:"c-gray fw-700",page:v,setPage:f,paginator:!0,serialize:!0,total:A,tableBodyColor:Q.lm.WHITE})]})},zn=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`${U.H.ASSET}/${U.H.COMPANIES}/?page=${e}&page_size=10`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post(`${U.H.ASSET}/${U.H.COMPANIES}/`,e,t,(e=>(0,L.So)(e,null,"Company created successfully!")));return null===s||void 0===s?void 0:s.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.COMPANY}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Company Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.ASSET}/${U.H.COMPANY}/${e}/`,t,(e=>(0,L.So)(e,null,"Company deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},Fn=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;const c=[{title:"Company Name",placeholder:"Enter Company Name",type:Q.wN.INPUT,name:"name",validator:Q.wY.REQUIRED}],[u,m]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",children:[!0===d?"EDIT":"ADD"," NEW COMPANY"]}),(0,V.jsx)(B.A,{data:s,errors:u,onChange:e=>{const{name:t,value:a}=e.target;m((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:c}),(0,V.jsx)(Ue.A,{setItemss:null===s||void 0===s?void 0:s.metadata,setJson:e=>{n((t=>({...t,metadata:e}))),console.log("data------",e)},title:"Details"}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:r,loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})};var Hn=a(49254);const qn=()=>{const e=(0,P.Zp)(),[t,a]=(0,y.useState)([]),[s,n]=(0,y.useState)(),[r,d]=(0,y.useState)(0),[c,u]=(0,y.useState)(!1),[m,h]=(0,y.useState)(!1),[p,x]=(0,y.useState)(0),[g,w]=(0,y.useState)({name:"",metadata:{}}),{list:v,create:f,update:j,remove:A}=zn();(0,y.useEffect)((()=>{S()}),[p]);const S=async()=>{n("fetch");const[e,t]=await v(p+1);a(e.results),d(e.count),n(!1)},b=[{id:2,title:"Company Name",render:t=>(0,V.jsx)(l.A,{color:"primary",sx:{cursor:"pointer",fontSize:20},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:6,title:"Details",render:e=>(0,V.jsx)(Fe,{icon:(0,V.jsx)(Hn.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})},{id:5,title:"Actions",render:e=>(0,V.jsxs)(i.A,{flexDirection:"row",children:[(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{w(e),u(!0),h("add")},children:(0,V.jsx)(te.A,{color:"primary",fontSize:"small"})}),(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{n("fetch"),await A(e),await S(),n(!1)})(null===e||void 0===e?void 0:e.id),children:(0,V.jsx)(ee.A,{color:"error",fontSize:"small"})})]})}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:"Companies"}),(0,V.jsx)(H.A,{color:"gray",onClick:()=>h("add"),loading:s,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:"Create Company"})})]}),(0,V.jsx)($.A,{columns:b,rows:t,rowsPerPage:10,loading:"fetch"===s,titleCellClasses:"c-gray fw-700",page:p,setPage:x,paginator:!0,serialize:!0,total:r}),(0,V.jsx)(Fn,{open:"add"===m,onClose:()=>{h(!1),u(!1)},data:g,edit:c,setData:w,onSubmit:async()=>{const e={...g};console.log("payload",e),n("fetch"),!0===c?await j(e):await f(e),w({name:"",metadata:{}}),h(!1),await S(),n(!1),u(!1)}})]})},Gn=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d,assetsList:c}=e;console.log("downtimeedit data",s);const u=[{title:(0,pe.t)("name"),placeholder:(0,pe.t)("enterName"),type:Q.wN.INPUT,name:"name",validator:Q.wY.REQUIRED},{title:(0,pe.t)("asset"),placeholder:"Select Assets",type:Q.wN.SELECT,name:"assets",multi:!0,validator:Q.wY.REQUIRED,keyValues:[{key:"All",value:"All"},...c]},{title:(0,pe.t)("type"),type:Q.wN.RADIO,name:"type",keyValues:[{value:"false",label:(0,pe.t)("productive")},{value:"true",label:(0,pe.t)("nonProductive")}]},..."false"===s.type?[{title:(0,pe.t)("thresholdS"),placeholder:(0,pe.t)("EnterThreshold"),type:Q.wN.INPUT,name:"timeLimit",validator:Q.wY.REQUIRED}]:[]],[m,h]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",children:[!0===d?(0,pe.t)("editDowntimeReason"):(0,pe.t)("addDowntimeReason")," "]}),(0,V.jsx)(B.A,{data:s,errors:m,onChange:e=>{const{name:t,value:a}=e.target;h((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:u}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{const e=(0,Y.bG)(u,s);h(e),e.size||await r()},loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})},Bn=()=>{(0,P.Zp)();const[e,t]=(0,y.useState)([]),[a,s]=(0,y.useState)(),[n,r]=(0,y.useState)(0),[d,c]=(0,y.useState)(!1),[u,m]=(0,y.useState)(!1),[h,p]=(0,y.useState)(0),[x,g]=(0,y.useState)({type:"false"}),[w,v]=(0,y.useState)([]),{list:f,create:j,update:A,remove:S,assetList:b}=(0,va.A)();(0,y.useEffect)((()=>{_()}),[h]),(0,y.useEffect)((()=>{C()}),[]);const _=async()=>{s("fetch");const[e]=await f(h+1);t(e.results),r(e.count),s(!1)},C=async()=>{s("fetch");const[e]=await b(h+1);console.log("assets linst",e);const t=e.results.map((e=>({value:`${e.owner} > ${e.line} > ${e.name}`,key:e.id})));v((e=>[...e,...t]))},N=[{id:1,title:(0,pe.t)("name"),render:e=>(0,V.jsx)(l.A,{sx:{cursor:"pointer",textTransform:"capitalize"},children:e.reason_name})},{id:2,title:(0,pe.t)("effectiveDowntime"),render:e=>(0,V.jsx)(l.A,{children:e.effective_downtime?"True":"False"})},{id:4,title:(0,pe.t)("createdOn"),render:e=>(0,V.jsx)(l.A,{children:fe()(e.created).format("ll")})},{id:8,title:(0,pe.t)("lines"),render:e=>(0,V.jsx)(i.A,{children:e.applicable_to.map(((t,a)=>(0,V.jsxs)(l.A,{children:[t.name,a!==e.applicable_to.length-1&&", "]})))})},{id:2,title:(0,pe.t)("threshold"),render:e=>(0,V.jsx)(l.A,{children:0!==e.time_limit?e.time_limit:"-"})},{id:5,title:(0,pe.t)("action"),render:e=>(0,V.jsxs)(i.A,{flexDirection:"row",children:[(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{k(e)},children:(0,V.jsx)(te.A,{color:"primary",fontSize:"small"})}),(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{s("fetch"),await S(e),p(0),await _()})(null===e||void 0===e?void 0:e.id),children:(0,V.jsx)(ee.A,{color:"error",fontSize:"small"})})]})}],k=e=>{const{effective_downtime:t,applicable_to:a,id:s,reason_name:n,time_limit:i}=e;g((e=>({...e,type:!0===t?"true":"false",assets:a.map((e=>e.id)),id:s,name:n,timeLimit:i}))),c(!0),m("add"),console.log("----------rowData",x)};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("downtimeMaster")}),(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:1},children:(0,V.jsx)(H.A,{color:"gray",onClick:()=>{g((e=>({...e,type:"false"}))),m("add")},loading:a,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("addDowntimeReason")})})})]}),(0,V.jsx)($.A,{columns:N,rows:e,rowsPerPage:10,loading:"fetch"===a,titleCellClasses:"c-gray fw-700",page:h,setPage:p,paginator:!0,serialize:!0,total:n}),(0,V.jsx)(Gn,{open:"add"===u,onClose:()=>{m(!1),c(!1),g({})},data:x,edit:d,setData:g,onSubmit:!0===d?async()=>{const e={...x};console.log("payload",e);const t={reason_name:e.name,effective_downtime:e.type,time_limit:"false"===e.type?e.timeLimit:0,asset_list:e.assets.includes("All")?w.map((e=>e.key)):e.assets};console.log("creat res----",t),s("fetch");await A(x.id,t);p(0),g({}),m(!1),await _()}:async()=>{const e={...x},t={reason_name:e.name,effective_downtime:e.type,time_limit:"false"===e.type?e.timeLimit:0,asset_list:e.assets.includes("All")?w.map((e=>e.key)):e.assets};s("fetch");let a=await j(t);g({}),m(!1),await _(),console.log("creat res----",a)},assetsList:w})]})},Qn=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`settings/shifts/?page=${e}&page_size=10`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},plantList:async function(){const e=new M.Ay,a=await e.get("asset/all-plants/?page=1&page_size=100",{},t,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post("settings/shifts/",e,t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data},update:async(e,a)=>{const s=new M.Ay,n=await s.put(`settings/shift/${e}/`,a,t,(e=>(0,L.So)(e,null,"Shift has been updated successfully.")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`settings/shift/${e}/`,t,(e=>(0,L.So)(e,null,"Shift has been successfully deleted.")));return null===s||void 0===s?void 0:s.data}}},Yn=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d,plantList:c,days:u,setDays:m,masterShift:h}=e;const p=[{title:(0,pe.t)("name"),placeholder:(0,pe.t)("enterName"),type:Q.wN.INPUT,name:"name",validator:Q.wY.REQUIRED},{title:(0,pe.t)("plant"),placeholder:(0,pe.t)("selectPlant"),type:Q.wN.SELECT,name:"plant",validator:Q.wY.REQUIRED,keyValues:c},{title:(0,pe.t)("startTime"),type:Q.wN.TIME,name:"start_time",validator:Q.wY.REQUIRED},{title:(0,pe.t)("endTime"),type:Q.wN.TIME,name:"end_time",validator:Q.wY.REQUIRED},{title:(0,pe.t)("type"),type:Q.wN.RADIO,name:"type",validator:Q.wY.REQUIRED,keyValues:[{value:!0,label:(0,pe.t)("workingShift")},{value:!1,label:(0,pe.t)("plannedBreak")}]},"false"===s.type&&{title:(0,pe.t)("masterShift"),placeholder:(0,pe.t)("selectMasterShift"),type:Q.wN.SELECT,name:"swiftmaster",keyValues:[{key:"",value:"None"},...h]}],[x,g]=(0,y.useState)(new Map),w={inputProps:{"aria-label":"Checkbox demo"}},v=e=>t=>{m((a=>({...a,[e]:t.target.checked})))};return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsx)("h3",{className:"opacity-80",children:d?(0,pe.t)("editShiftSchedule"):(0,pe.t)("addShiftSchedule")}),(0,V.jsx)(B.A,{data:s,errors:x,onChange:e=>{const{name:t,value:a}=e.target;g((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:p}),(0,V.jsxs)(i.A,{sx:{mt:1},children:[(0,V.jsx)(l.A,{children:(0,pe.t)("weekDays")}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1},children:[(0,V.jsx)(Ze.A,{onChange:v("monday"),checked:u.monday,...w,icon:(0,V.jsx)(l.A,{children:(0,pe.t)("mon")}),checkedIcon:(0,V.jsx)(l.A,{children:(0,pe.t)("mon")})}),(0,V.jsx)(Ze.A,{onChange:v("tuesday"),checked:u.tuesday,...w,icon:(0,V.jsx)(l.A,{children:(0,pe.t)("tue")}),checkedIcon:(0,V.jsx)(l.A,{children:(0,pe.t)("tue")})}),(0,V.jsx)(Ze.A,{onChange:v("wednesday"),checked:u.wednesday,...w,icon:(0,V.jsx)(l.A,{children:(0,pe.t)("wed")}),checkedIcon:(0,V.jsx)(l.A,{children:(0,pe.t)("wed")})}),(0,V.jsx)(Ze.A,{onChange:v("thursday"),checked:u.thursday,...w,icon:(0,V.jsx)(l.A,{children:(0,pe.t)("thu")}),checkedIcon:(0,V.jsx)(l.A,{children:(0,pe.t)("thu")})}),(0,V.jsx)(Ze.A,{onChange:v("friday"),checked:u.friday,...w,icon:(0,V.jsx)(l.A,{children:(0,pe.t)("fri")}),checkedIcon:(0,V.jsx)(l.A,{children:(0,pe.t)("fri")})}),(0,V.jsx)(Ze.A,{onChange:v("saturday"),checked:u.saturday,...w,icon:(0,V.jsx)(l.A,{children:(0,pe.t)("sat")}),checkedIcon:(0,V.jsx)(l.A,{children:(0,pe.t)("sat")})}),(0,V.jsx)(Ze.A,{onChange:v("sunday"),checked:u.sunday,...w,icon:(0,V.jsx)(l.A,{children:(0,pe.t)("sun")}),checkedIcon:(0,V.jsx)(l.A,{children:(0,pe.t)("sun")})})]})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{const e=(0,Y.bG)(p,s);g(e),e.size||await r()},loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})};var Wn=a(94992);const Vn=()=>{(0,P.Zp)();const[e,t]=(0,y.useState)([]),[a,s]=(0,y.useState)(),[n,r]=(0,y.useState)(0),[d,c]=(0,y.useState)(!1),[u,m]=(0,y.useState)(!1),[h,p]=(0,y.useState)(0),[x,g]=(0,y.useState)({}),[w,v]=(0,y.useState)([]),[f,j]=(0,y.useState)([]),[A,S]=(0,y.useState)([]),[b,_]=(0,y.useState)({monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1,saturday:!1,sunday:!1}),{list:C,create:N,update:k,remove:E,plantList:I}=Qn();(0,y.useEffect)((()=>{T()}),[h]),(0,y.useEffect)((()=>{D()}),[]);const T=async()=>{s("fetch");const[e]=await C(h+1);v(e.results),r(e.count),s(!1),j([]);const t=e.results.map((e=>({value:e.shift_name,key:e.id})));j((e=>[...e,...t]))},D=async()=>{const[e,t]=await I(h+1,100);console.log("plants---",e),S([]);const a=e.results.map((e=>({value:e.name,key:e.id})));S((e=>[...e,...a]))},R=[{id:1,title:(0,pe.t)("plant"),render:e=>(0,V.jsx)(l.A,{children:e.plant.name})},{id:2,title:(0,pe.t)("name"),render:e=>(0,V.jsx)(l.A,{sx:{textTransform:"capitalize"},children:e.shift_name})},{id:3,title:(0,pe.t)("type"),render:e=>(0,V.jsx)(l.A,{children:e.is_shift?"Working Shift":"Planned Break"})},{id:4,title:(0,pe.t)("duration"),render:e=>(0,V.jsxs)(l.A,{children:[" ",fe().utc(1e3*e.duration).format("H [hrs] mm [mins]")]})},{id:5,title:(0,pe.t)("startTime"),render:e=>(0,V.jsx)(l.A,{children:e.start_time})},{id:6,title:(0,pe.t)("endTime"),render:e=>(0,V.jsx)(l.A,{children:e.end_time})},{id:7,title:(0,pe.t)("mon"),render:e=>(0,V.jsx)(Wn.A,{color:e.monday?"success":"error"})},{id:8,title:(0,pe.t)("tue"),render:e=>(0,V.jsx)(Wn.A,{color:e.tuesday?"success":"error"})},{id:9,title:(0,pe.t)("wed"),render:e=>(0,V.jsx)(Wn.A,{color:e.wednesday?"success":"error"})},{id:10,title:(0,pe.t)("thu"),render:e=>(0,V.jsx)(Wn.A,{color:e.thursday?"success":"error"})},{id:11,title:(0,pe.t)("fri"),render:e=>(0,V.jsx)(Wn.A,{color:e.friday?"success":"error"})},{id:12,title:(0,pe.t)("sat"),render:e=>(0,V.jsx)(Wn.A,{color:e.saturday?"success":"error"})},{id:13,title:(0,pe.t)("sun"),render:e=>(0,V.jsx)(Wn.A,{color:e.sunday?"success":"error"})},{id:14,title:(0,pe.t)("action"),render:e=>(0,V.jsxs)(i.A,{flexDirection:"row",children:[(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{O(e)},children:(0,V.jsx)(te.A,{color:"primary",fontSize:"small"})}),(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{s("fetch"),await E(e),p(0),await T()})(null===e||void 0===e?void 0:e.id),children:(0,V.jsx)(ee.A,{color:"error",fontSize:"small"})})]})}],O=e=>{console.log("------shiftmaster----rowData",e),g({...x,id:e.id,name:e.shift_name,plant:e.plant.id,start_time:e.start_time,end_time:e.end_time,swiftmaster:e.master_shift,type:!0===e.is_shift?"true":"false"}),_((t=>({...t,monday:e.monday,tuesday:e.tuesday,wednesday:e.wednesday,thursday:e.thursday,friday:e.friday,saturday:e.saturday,sunday:e.sunday}))),c(!0),m("add")};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("shiftMaster")}),(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:1},children:(0,V.jsx)(H.A,{color:"gray",onClick:()=>m("add"),loading:a,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("addShiftSchedule")})})})]}),(0,V.jsx)($.A,{columns:R,rows:w,rowsPerPage:10,loading:"fetch"===a,titleCellClasses:"c-gray fw-700",page:h,setPage:p,paginator:!0,serialize:!0,total:n}),(0,V.jsx)(Yn,{open:"add"===u,onClose:()=>{m(!1),c(!1),g({})},data:x,edit:d,setData:g,onSubmit:!0===d?async()=>{const e={...x},t={shift_name:e.name,plant_code:e.plant,start_time:e.start_time,end_time:e.end_time,is_shift:e.type,master_shift_id:e.swiftmaster,...b};["master_shift_id"].forEach((e=>{t[e]||delete t[e]})),console.log("shift final payload",t),s("fetch");await k(e.id,t);p(0),g({}),m(!1),await T(),c(!1)}:async()=>{const e={...x},t={shift_name:e.name,plant_code:e.plant,start_time:e.start_time,end_time:e.end_time,is_shift:e.type,master_shift_id:e.swiftmaster,...b};["master_shift_id"].forEach((e=>{t[e]||delete t[e]})),console.log("shift final payload",t),s("fetch");await N(t);g({}),m(!1),await T()},plantList:A,days:b,setDays:_,masterShift:f})]})},Xn=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{matrixList:async e=>{const a=new M.Ay,s=await a.get(`monitoring/downtime-matrix/${e}/`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`settings/defect-reasons/?page=${e}&page_size=10`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},assetList:async function(){const e=new M.Ay,a=await e.get("asset/all-assets/?page=1&page_size=100",{},t,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post("settings/defect-reasons/",e,t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data},update:async(e,a)=>{const s=new M.Ay,n=await s.patch(`settings/defect-reason/${e}/`,a,t,(e=>(0,L.So)(e,null)));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`settings/defect-reason/${e}/`,t,(e=>(0,L.So)(e,null,"Deleted!")));return null===s||void 0===s?void 0:s.data},all_downtime_list:async(e,a,s,n,i,l,r)=>{const o=new M.Ay,d=await o.get(`monitoring/all-downtime-list/${r}/?company_id=${s}&plant_id=${n}&division_id=${i}&line_id=${l}&page=${e}&page_size=${a}`,{},t,L.So);return null!==d&&void 0!==d&&d.data?(console.log("res  ",d.data),[null===d||void 0===d?void 0:d.data]):[[],0]},unassi_downtime_list:async(e,a,s,n,i,l,r)=>{const o=new M.Ay,d=await o.get(`monitoring/unassigned-downtime-list/${r}/?company_id=${s}&plant_id=${n}&division_id=${i}&line_id=${l}&page=${e}&page_size=${a}`,{},t,L.So);return null!==d&&void 0!==d&&d.data?(console.log("res  ",d.data),[null===d||void 0===d?void 0:d.data]):[[],0]},reason_list:async e=>{const a=new M.Ay,s=await a.get(`monitoring/downtime-reasons/${e}/`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},post_reason:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new M.Ay,n=await s.patch(`monitoring/downtime-assign/${e}/`,a,t,(e=>(0,L.So)(e,null)));return null===n||void 0===n?void 0:n.data}}},Zn=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d,assetsList:c}=e;console.log("downtimeedit data",s);const u=[{title:(0,pe.t)("defectReason"),placeholder:(0,pe.t)("enterDefectReason"),type:Q.wN.INPUT,name:"reason_name",validator:Q.wY.REQUIRED},{title:(0,pe.t)("FG_Code"),placeholder:(0,pe.t)("enterFgCode"),type:Q.wN.INPUT,name:"fg_code",validator:Q.wY.REQUIRED}],[m,h]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",children:[!0===d?(0,pe.t)("editDefectReason"):(0,pe.t)("addDefectReason")," "]}),(0,V.jsx)(B.A,{data:s,errors:m,onChange:e=>{const{name:t,value:a}=e.target;h((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:u}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{const e=(0,Y.bG)(u,s);h(e),e.size||await r()},loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})},Jn=()=>{(0,P.Zp)();const[e,t]=(0,y.useState)([]),[a,s]=(0,y.useState)(),[n,r]=(0,y.useState)(0),[d,c]=(0,y.useState)(!1),[u,m]=(0,y.useState)(!1),[h,p]=(0,y.useState)(0),[x,g]=(0,y.useState)({type:"false"}),[w,v]=(0,y.useState)([]),{list:f,create:j,update:A,remove:S,assetList:b}=Xn();(0,y.useEffect)((()=>{_()}),[h]),(0,y.useEffect)((()=>{C()}),[]);const _=async()=>{s("fetch");const[e]=await f(h+1);t(e.results),r(e.count),s(!1)},C=async()=>{s("fetch");const[e]=await b(h+1);console.log("assets linst",e);const t=e.results.map((e=>({value:`${e.owner} > ${e.line} > ${e.name}`,key:e.id})));v((e=>[...e,...t]))},N=[{id:1,title:(0,pe.t)("name"),render:e=>(0,V.jsx)(l.A,{sx:{cursor:"pointer",textTransform:"capitalize"},children:e.reason_name})},{id:2,title:(0,pe.t)("FG_Code"),render:e=>(0,V.jsx)(l.A,{children:e.fg_code})},{id:4,title:(0,pe.t)("createdOn"),render:e=>(0,V.jsx)(l.A,{children:fe()(e.created).format("ll")})},{id:5,title:(0,pe.t)("action"),render:e=>(0,V.jsxs)(i.A,{flexDirection:"row",gap:2,children:[(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{k(e)},children:(0,V.jsx)(te.A,{color:"primary",fontSize:"small"})}),(0,V.jsx)(H.A,{width:"10%",color:!0===e.status?"light_green":"RADIAL_RED",onClick:()=>(async(e,t)=>{s("fetch");const a={status:!0!==t};await A(e,a),await _(),s(!1)})(null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.status),children:!0===e.status?(0,pe.t)("active"):(0,pe.t)("inactive")})]})}],k=e=>{console.log("defect rowdata",e);const{id:t,fg_code:a,reason_name:s}=e;g((e=>({...e,id:t,reason_name:s,fg_code:a}))),c(!0),m("add"),console.log("----------rowData",x)};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("defectMaster")}),(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:1},children:(0,V.jsx)(H.A,{color:"gray",onClick:()=>{g((e=>({...e,type:"false"}))),m("add")},loading:a,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("addDefectMaster")})})})]}),(0,V.jsx)($.A,{columns:N,rows:e,rowsPerPage:10,loading:"fetch"===a,titleCellClasses:"c-gray fw-700",page:h,setPage:p,paginator:!0,serialize:!0,total:n}),(0,V.jsx)(Zn,{open:"add"===u,onClose:()=>{m(!1),c(!1),g({})},data:x,edit:d,setData:g,onSubmit:!0===d?async()=>{const e={...x};console.log("payload",e);const t={reason_name:e.reason_name,fg_code:e.fg_code};console.log("creat res----",t),s("fetch");await A(x.id,t);p(0),g({}),m(!1),await _()}:async()=>{const e={...x},t={reason_name:e.reason_name,fg_code:e.fg_code};s("fetch");let a=await j(t);g({}),m(!1),await _(),console.log("creat res----",a)},assetsList:w})]})},Kn=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.get(`${U.H.ASSET}/${a}/${U.H.PLANTS}/?page=${e}&page_size=10`,{},t,L.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.post(`${U.H.ASSET}/${a}/${U.H.PLANTS}/`,e,t,(e=>(0,L.So)(e,null,"Plant created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.PLANT}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Plant Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.ASSET}/${U.H.PLANT}/${e}/`,t,(e=>(0,L.So)(e,null,"Plant deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},ei=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;const c=[{title:"Plant Name",placeholder:"Enter Plant Name",type:Q.wN.INPUT,name:"name",validator:Q.wY.REQUIRED}],[u,m]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",children:[!0===d?"EDIT":"ADD"," NEW PLANT"]}),(0,V.jsx)(B.A,{data:s,errors:u,onChange:e=>{const{name:t,value:a}=e.target;m((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:c}),(0,V.jsx)(Ue.A,{setItemss:s.metadata,setJson:e=>n((t=>({...t,metadata:e}))),title:"Details"}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:r,loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})},ti=()=>{const e=(0,P.zy)(),t=(0,P.Zp)(),a=e.state,[s,n]=(0,y.useState)([]),[r,d]=(0,y.useState)(),[c,u]=(0,y.useState)(0),[m,h]=(0,y.useState)(!1),[p,x]=(0,y.useState)(!1),[g,w]=(0,y.useState)(0),[v,f]=(0,y.useState)({name:"",metadata:{}}),{list:j,create:A,update:S,remove:b}=Kn();(0,y.useEffect)((()=>{_()}),[g]);const _=async()=>{d("fetch");const[e,t]=await j(g+1,a);n(e.results),u(e.count),d(!1)},C=[{id:1,title:"Plant Name",render:e=>(0,V.jsx)(l.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>t("/divisionpage",{state:e.id}),children:e.name})},{id:2,title:"Company Name",render:e=>e.company},{id:3,title:"Details",render:e=>(0,V.jsx)(Fe,{icon:(0,V.jsx)(Hn.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})},{id:5,title:"Actions",render:e=>(0,V.jsxs)(i.A,{flexDirection:"row",children:[(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{h(!0),x("add"),f(e)},children:(0,V.jsx)(te.A,{color:"primary",fontSize:"small"})}),(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{d("fetch"),await b(e),await _(),d(!1)})(null===e||void 0===e?void 0:e.id),children:(0,V.jsx)(ee.A,{color:"error",fontSize:"small"})})]})}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[(0,V.jsx)(o.A,{onClick:()=>t(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsx)(l.A,{className:"fw-20-500-36",children:"Plants"})]}),(0,V.jsx)(H.A,{color:"gray",onClick:()=>x("add"),loading:r,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:"Add Plant"})})]}),(0,V.jsx)($.A,{columns:C,rows:s,rowsPerPage:10,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:g,setPage:w,paginator:!0,serialize:!0,total:c}),(0,V.jsx)(ei,{open:"add"===p,onClose:()=>{x(!1),h(!1)},data:v,edit:m,setData:f,onSubmit:async()=>{const e={...v};d("fetch"),!0===m?await S(e):await A(e,a),f({name:"",metadata:{}}),x(!1),await _(),d(!1),h(!1)}})]})},ai=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.get(`${U.H.ASSET}/${a}/${U.H.DIVISIONS}/?page=${e}&page_size=10`,{},t,L.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.post(`${U.H.ASSET}/${a}/${U.H.DIVISIONS}/`,e,t,(e=>(0,L.So)(e,null,"Division created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.DIVISION}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Division Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.ASSET}/${U.H.DIVISION}/${e}/`,t,(e=>(0,L.So)(e,null,"Division deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},si=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;const c=[{title:"Division Name",placeholder:"Enter Division Name",type:Q.wN.INPUT,name:"name",validator:Q.wY.REQUIRED}],[u,m]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",children:[!0===d?"EDIT":"ADD"," NEW DIVISION"]}),(0,V.jsx)(B.A,{data:s,errors:u,onChange:e=>{const{name:t,value:a}=e.target;m((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:c}),(0,V.jsx)(Ue.A,{setItemss:s.metadata,setJson:e=>n((t=>({...t,metadata:e}))),title:"Details"}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{const e=(0,Y.bG)(c,s);m(e),e.size||await r()},loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})},ni=()=>{const e=(0,P.zy)(),t=(0,P.Zp)(),a=e.state,[s,n]=(0,y.useState)([]),[r,d]=(0,y.useState)(),[c,u]=(0,y.useState)(0),[m,h]=(0,y.useState)(!1),[p,x]=(0,y.useState)(!1),[g,w]=(0,y.useState)(0),[v,f]=(0,y.useState)({name:"",metadata:{}}),{list:j,create:A,update:S,remove:b}=ai();(0,y.useEffect)((()=>{_()}),[g]);const _=async()=>{d("fetch");const[e,t]=await j(g+1,a);n(e.results),u(e.count),d(!1)},C=[{id:1,title:"Division Name",render:e=>(0,V.jsx)(l.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>t("/line",{state:e.id}),children:e.name})},{id:2,title:"Plant Name",render:e=>e.plant},{id:6,title:"Details",render:e=>(0,V.jsx)(Fe,{icon:(0,V.jsx)(Hn.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})},{id:5,title:"Actions",render:e=>(0,V.jsxs)(i.A,{flexDirection:"row",children:[(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{h(!0),x("add"),f(e)},children:(0,V.jsx)(te.A,{color:"primary",fontSize:"small"})}),(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{d("fetch"),await b(e),await _(),d(!1)})(null===e||void 0===e?void 0:e.id),children:(0,V.jsx)(ee.A,{color:"error",fontSize:"small"})})]})}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[(0,V.jsx)(o.A,{onClick:()=>t(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsx)(l.A,{className:"fw-20-500-36",children:"Divisions"})]}),(0,V.jsx)(H.A,{color:"gray",onClick:()=>x("add"),loading:r,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:"Add Division"})})]}),(0,V.jsx)($.A,{columns:C,rows:s,rowsPerPage:10,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:g,setPage:w,paginator:!0,serialize:!0,total:c}),(0,V.jsx)(si,{open:"add"===p,onClose:()=>{x(!1),h(!1)},data:v,edit:m,setData:f,onSubmit:async()=>{const e={...v};d("fetch"),!0===m?await S(e):await A(e,a),f({name:"",metadata:{}}),x(!1),await _(),d(!1),h(!1)}})]})},ii=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.get(`${U.H.ASSET}/${a}/${U.H.LINES}/?page=${e}&page_size=10`,{},t,L.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.post(`${U.H.ASSET}/${a}/${U.H.LINES}/`,e,t,(e=>(0,L.So)(e,null,"Line created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.LINE}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Line Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.ASSET}/${U.H.LINE}/${e}/`,t,(e=>(0,L.So)(e,null,"Line deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},li=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;const c=[{title:"Line Name",placeholder:"Enter Line Name",type:Q.wN.INPUT,name:"name",validator:Q.wY.REQUIRED}],[u,m]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",children:[!0===d?"EDIT":"ADD"," NEW LINE"]}),(0,V.jsx)(B.A,{data:s,errors:u,onChange:e=>{const{name:t,value:a}=e.target;m((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:c}),(0,V.jsx)(Ue.A,{setItemss:s.metadata,setJson:e=>n((t=>({...t,metadata:e}))),title:"Details"}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:r,loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})},ri=()=>{const e=(0,P.zy)(),t=(0,P.Zp)(),a=e.state,[s,n]=(0,y.useState)([]),[r,d]=(0,y.useState)(),[c,u]=(0,y.useState)(0),[m,h]=(0,y.useState)(!1),[p,x]=(0,y.useState)(!1),[g,w]=(0,y.useState)(0),[v,f]=(0,y.useState)({name:"",metadata:{}}),{list:j,create:A,update:S,remove:b}=ii();(0,y.useEffect)((()=>{_()}),[g]);const _=async()=>{d("fetch");const[e,t]=await j(g+1,a);n(e.results),u(e.count),d(!1)},C=[{id:1,title:"Line Name",render:e=>(0,V.jsx)(l.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>t("/asset",{state:e.id}),children:e.name})},{id:2,title:"Division Name",render:e=>e.division},{id:3,title:"Details",render:e=>(0,V.jsx)(Fe,{icon:(0,V.jsx)(Hn.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})},{id:5,title:"Actions",render:e=>(0,V.jsxs)(i.A,{flexDirection:"row",children:[(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{h(!0),x("add"),f(e)},children:(0,V.jsx)(te.A,{color:"primary",fontSize:"small"})}),(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{d("fetch"),await b(e),await _(),d(!1)})(null===e||void 0===e?void 0:e.id),children:(0,V.jsx)(ee.A,{color:"error",fontSize:"small"})})]})}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[(0,V.jsx)(o.A,{onClick:()=>t(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsx)(l.A,{className:"fw-20-500-36",children:"Lines"})]}),(0,V.jsx)(H.A,{color:"gray",onClick:()=>x("add"),loading:r,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:"Add Line"})})]}),(0,V.jsx)($.A,{columns:C,rows:s,rowsPerPage:10,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:g,setPage:w,paginator:!0,serialize:!0,total:c}),(0,V.jsx)(li,{open:"add"===p,onClose:()=>{x(!1),h(!1)},data:v,edit:m,setData:f,onSubmit:async()=>{const e={...v};d("fetch"),!0===m?await S(e):await A(e,a),f({name:"",metadata:{}}),x(!1),await _(),d(!1),h(!1)}})]})},oi=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.get(`${U.H.ASSET}/${a}/${U.H.ASSETS}/?page=${e}&page_size=10`,{},t,L.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.post(`${U.H.ASSET}/${a}/${U.H.ASSETS}/`,e,t,(e=>(0,L.So)(e,null,"Asset created successfully!")));return null===n||void 0===n?void 0:n.data},update:async(e,a)=>{const s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.ASSET}/${e}/`,a,t,(e=>(0,L.So)(e,null,"Asset Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.ASSET}/${U.H.ASSET}/${e}/`,t,(e=>(0,L.So)(e,null,"Asset deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},di=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;const[c,u]=(0,y.useState)("Yes"),[m,h]=(0,y.useState)("Job/Part based"),[p,x]=(0,y.useState)("Yes");(0,y.useEffect)((()=>{console.log("asset edit ----\x3e>>",s)}),[d]);const g=[{title:"Asset Name",placeholder:"Enter Machine Name",type:Q.wN.INPUT,name:"alias",validator:Q.wY.REQUIRED},{title:"Model",placeholder:"Enter Machine Model",type:Q.wN.INPUT,name:"model"},{title:"Device ID",placeholder:"Enter Machine UUID",type:Q.wN.INPUT,name:"uuid",validator:Q.wY.REQUIRED},{title:"Platform ID",placeholder:"Enter Machine Platform ID",type:Q.wN.INPUT,name:"machineID"},{title:"Serial Number",placeholder:"Enter Machine serial number",type:Q.wN.INPUT,name:"snumber"},{title:"API Endpoint",placeholder:"Enter Machine API Endpoint",type:Q.wN.INPUT,name:"api_endpoint"},{title:"Show Parts (per seconds)",type:Q.wN.RADIO,name:"show_parts",keyValues:[{value:!0,label:"Yes"},{value:!1,label:"No"}],pl:.2},{title:"Is end of line",type:Q.wN.RADIO,name:"isEndLine",keyValues:[{value:!0,label:"Yes"},{value:!1,label:"No"}],pl:.2},{title:"Performance Calculation",type:Q.wN.RADIO,name:"PerformanceCal",keyValues:[{value:!0,label:"Job/Part based"},{value:!1,label:"Output based"}],pl:.2},..."true"===s.PerformanceCal?[{title:"Fixed Capacity ",type:Q.wN.RADIO,name:"fixed_capacity",keyValues:[{value:!0,label:"Yes"},{value:!1,label:"No"}],pl:.2}]:[],..."true"===s.PerformanceCal&&"true"===s.fixed_capacity?[{title:"Ideal Cycle Time (seconds)",placeholder:"",type:Q.wN.INPUT,name:"cycle_time"}]:[],..."false"===s.PerformanceCal?[{title:"Production Output Time (per hour)",placeholder:"",type:Q.wN.INPUT,name:"productionTime"}]:[]],[w,v]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",children:[!0===d?"EDIT":"ADD"," Machine"]}),(0,V.jsx)(B.A,{data:s,errors:w,onChange:e=>{const{name:t,value:a}=e.target;v((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:g}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{const e=(0,Y.bG)(g,s);v(e),e.size||(console.log("---------------data",s),await r())},loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})},ci=()=>{const e=(0,P.zy)(),t=(0,P.Zp)(),a=e.state,[s,n]=(0,y.useState)([]),[r,d]=(0,y.useState)(),[c,u]=(0,y.useState)(0),[m,h]=(0,y.useState)(!1),[p,x]=(0,y.useState)(!1),[g,w]=(0,y.useState)(0),[v,f]=(0,y.useState)({isEndLine:"",PerformanceCal:"",fixed_capacity:"",alias:"",api_endpoint:"",uuid:"",machineID:"",snumber:"",model:"",show_parts:"",productionTime:"",id:""}),{list:j,create:A,update:S,remove:b}=oi();(0,y.useEffect)((()=>{_()}),[g]);const _=async()=>{d("fetch");const[e,t]=await j(g+1,a);n(e.results),u(e._count),d(!1)},C=[{id:11,title:"Created At",render:e=>fe()(e.created).format("ll")},{id:1,title:"Asset Name",render:e=>e.name},{id:2,title:"Line Name",render:e=>e.line},{id:3,title:"Owner",render:e=>e.owner},{id:5,title:"Actions",render:e=>(0,V.jsxs)(i.A,{flexDirection:"row",children:[(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{h(!0),x("add"),(e=>{console.log("----------rowData",e),f({...v,id:e.id,isEndLine:e.is_end_of_line,PerformanceCal:e.time_based_utilization,fixed_capacity:e.fixed_capacity,alias:e.name,api_endpoint:e.api_url,uuid:e.gridx_id,machineID:e.device_id,snumber:e.serial_number,model:e.machine_model,show_parts:e.show_parts_per_second,productionTime:e.default_production_per_hour})})(e)},children:(0,V.jsx)(te.A,{color:"primary",fontSize:"small"})}),(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{d("fetch"),w(0),await b(e),await _(),d(!1)})(null===e||void 0===e?void 0:e.id),children:(0,V.jsx)(ee.A,{color:"error",fontSize:"small"})})]})}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[(0,V.jsx)(o.A,{onClick:()=>t(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsx)(l.A,{className:"fw-20-500-36",children:"Assets"})]}),(0,V.jsx)(H.A,{color:"gray",onClick:()=>x("add"),loading:r,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:"Add Asset"})})]}),(0,V.jsx)($.A,{columns:C,rows:s,rowsPerPage:10,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:g,setPage:w,paginator:!0,serialize:!0,total:c}),(0,V.jsx)(di,{open:"add"===p,onClose:()=>{x(!1),h(!1)},data:v,edit:m,setData:f,onSubmit:!0===m?async()=>{const e={...v};let t={name:e.alias,api_url:e.api_endpoint,gridx_id:e.uuid,device_id:e.machineID,serial_number:e.snumber,machine_model:e.model,is_end_of_line:"true"===e.isEndLine,show_parts_per_second:e.show_parts,time_based_utilization:"true"===e.PerformanceCal,fixed_capacity:"true"===e.PerformanceCal&&"true"===e.fixed_capacity,default_cycle_time:"true"===e.PerformanceCal&&"true"===e.fixed_capacity&&parseInt(e.cycle_time,10)||0,default_production_per_hour:"false"===e.PerformanceCal&&parseFloat(e.productionTime)||0};["api_url","device_id","serial_number","machine_model"].forEach((e=>{t[e]||delete t[e]})),console.log("machine ---payload",t),d("fetch");let a=await S(v.id,t);w(0),console.log("machine response",a),f({}),x(!1),h(!1),await _()}:async()=>{const e={...v};let t={name:e.alias,api_url:e.api_endpoint,gridx_id:e.uuid,device_id:e.machineID,serial_number:e.snumber,machine_model:e.model,is_end_of_line:"true"===e.isEndLine,show_parts_per_second:e.show_parts,time_based_utilization:"true"===e.PerformanceCal,fixed_capacity:"true"===e.PerformanceCal&&"true"===e.fixed_capacity,default_cycle_time:"true"===e.PerformanceCal&&"true"===e.fixed_capacity&&parseInt(e.cycle_time,10)||0,default_production_per_hour:"false"===e.PerformanceCal&&parseFloat(e.productionTime)||0};["api_url","device_id","serial_number","machine_model"].forEach((e=>{t[e]||delete t[e]})),console.log("machine ---payload",t),d("fetch");let s=await A(t,a);console.log("machine response",s),f({}),x(!1),await _()}})]})};var ui=a(21473),mi=a(64400),hi=a(57875);const pi=()=>{const{t:e,i18n:t}=(0,j.Bd)(),a=(0,P.zy)(),s=(0,P.Zp)(),n=null===a||void 0===a?void 0:a.state;console.log("location packet detail",n);const{assetSummary:r,timelineSummary:d,getFilters:c}=xa(),[u,m]=(0,y.useState)(null),[p,x]=(0,y.useState)("Kanban"),[g,w]=(0,y.useState)(0),[v,f]=(0,y.useState)(),[A,S]=(0,y.useState)({}),[b,_]=(0,y.useState)([]),[C,N]=(0,y.useState)(new Map),[k,E]=(0,y.useState)({date:"",shift:"",state:"",quality:""}),[I,T]=(0,y.useState)([]),[D,R]=(0,y.useState)({shifts:[],states:[],quality:[]});Q.wN.DATE,Q.wY.REQUIRED,Q.wN.SELECT,Q.wY.REQUIRED,D.shifts,Q.wN.SELECT,Q.wY.REQUIRED,D.states,Q.wN.SELECT,Q.wY.REQUIRED,D.quality;return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)(i.A,{sx:{justifyContent:"space-between",flexDirection:"row"},children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1},children:[(0,V.jsx)(o.A,{onClick:()=>s(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsx)(l.A,{className:"fw-20-500-36",children:"Data Point"})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",gap:2},children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1,alignItems:"center"},children:[(0,V.jsx)(ui.A,{color:"primary",fontSize:"small"}),(0,V.jsxs)(l.A,{className:"fw-20-500-36",children:[(0,V.jsx)("strong",{children:"Machine:"})," ",n.asset_name||"-"]})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1,alignItems:"center"},children:[(0,V.jsx)(hi.A,{color:"primary",fontSize:"small"}),(0,V.jsxs)(l.A,{className:"fw-20-500-36",children:[(0,V.jsx)("strong",{children:"Barcode: "}),n.barcode||"-"]})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1,alignItems:"center"},children:[(0,V.jsx)(mi.A,{color:"primary",fontSize:"small"}),(0,V.jsxs)(l.A,{className:"fw-20-500-36",children:[(0,V.jsx)("strong",{children:"Energy: "})," ",n.energy||"-"]})]})]})]}),(0,V.jsx)(h.A,{display:"flex",justifyContent:"center",children:(0,V.jsxs)(Ts.A,{elevation:3,sx:{padding:"20px",borderRadius:"8px",width:"100%",boxShadow:3},children:[(0,V.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Additional Details"}),(0,V.jsxs)(Ge.Ay,{container:!0,spacing:2,children:[(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"ID:"})," ",n.id]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"Created At:"})," ",new Date(n.modified_at).toLocaleString()]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"QC Passed:"})," ",n.parts_quantity]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"Serial Number:"})," ",n.serial_number]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"Start Time:"})," ",n.start_time]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"End Time:"})," ",n.end_time]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"Event Id:"})," ",n.event_id]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"Event Type:"})," ",n.event_type]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsx)(l.A,{color:"text.secondary",children:(0,V.jsx)("strong",{children:"Associated Job:"})})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"Operator Name:"})," ",n.operator_name]})})]})]})})]})},xi=()=>{(0,P.Zp)();const[e,t]=(0,y.useState)([{assets:"machine1"}]),[a,s]=(0,y.useState)(),[n,r]=(0,y.useState)(0),[o,d]=(0,y.useState)(!1),[c,u]=(0,y.useState)(!1),[m,h]=(0,y.useState)(0),[p,x]=(0,y.useState)({email_notification:"",sms_notification:"",whatsapp_notification:""}),{list:g,create:w,update:v,remove:f}=zn(),{getNotification:j,postNotification:A}=F();(0,y.useEffect)((()=>{S()}),[]);const S=async()=>{s("fetch");const e=await j(m+1);console.log("notification fetch",e),e.email_notification&&x((t=>({...t,email_notification:e.email_notification.toString(),sms_notification:e.sms_notification.toString(),whatsapp_notification:e.whatsapp_notification.toString()}))),s(!1)},b=[{title:(0,pe.t)("emailNotification"),type:Q.wN.RADIO,name:"email_notification",validator:Q.wY.REQUIRED,keyValues:[{value:!0,label:(0,pe.t)("yes")},{value:!1,label:(0,pe.t)("no")}],pl:.2},{title:(0,pe.t)("smsNotification"),type:Q.wN.RADIO,name:"sms_notification",validator:Q.wY.REQUIRED,keyValues:[{value:!0,label:(0,pe.t)("yes")},{value:!1,label:(0,pe.t)("no")}],pl:.2},{title:(0,pe.t)("whatsappNotification"),type:Q.wN.RADIO,name:"whatsapp_notification",validator:Q.wY.REQUIRED,keyValues:[{value:!0,label:(0,pe.t)("yes")},{value:!1,label:(0,pe.t)("no")}],pl:.2}],[_,C]=(0,y.useState)(new Map);return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)("h1",{className:"mt-4",children:(0,pe.t)("notificationSettings")})}),(0,V.jsx)(B.A,{data:p,errors:_,onChange:e=>{const{name:t,value:a}=e.target;x((e=>({...e,[t]:a})))},schema:b}),(0,V.jsx)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{s("fetch");const e={email_notification:"true"===p.email_notification,sms_notification:"true"===p.sms_notification,whatsapp_notification:"true"===p.whatsapp_notification};await A(e);await S()},loading:a,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})})]})},gi=e=>{var t,a,s;let{open:n,onClose:r,data:o,setData:d,onSubmit:c,loading:u,edit:m,assetsList:h,packetData:p}=e;(0,y.useEffect)((()=>{console.log("packet data------",p)}),[p]);const x=[{title:(0,pe.t)("reason"),placeholder:(0,pe.t)("selectDowntimeReason"),type:Q.wN.SELECT,name:"reason",validator:Q.wY.REQUIRED,keyValues:h}],[g,w]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:n,onClose:r,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsx)("h3",{className:"opacity-80",children:(0,pe.t)("addDowntimeReason")}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,V.jsxs)(l.A,{children:["Machine Name : ",(0,V.jsx)("strong",{children:null===p||void 0===p?void 0:p.asset_name})]}),(0,V.jsxs)(l.A,{children:["Operator Name : ",(0,V.jsx)("strong",{children:null===p||void 0===p?void 0:p.operator_name})]})]}),(0,V.jsxs)(i.A,{children:[(0,V.jsxs)(l.A,{children:["Shift Name : ",(0,V.jsx)("strong",{children:null===p||void 0===p||null===(t=p.shift)||void 0===t?void 0:t.shift_name})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,V.jsxs)(l.A,{children:["Shift Start Time : ",(0,V.jsx)("strong",{children:null===p||void 0===p||null===(a=p.shift)||void 0===a?void 0:a.start_time})]}),(0,V.jsxs)(l.A,{children:["Shift End Time : ",(0,V.jsx)("strong",{children:null===p||void 0===p||null===(s=p.shift)||void 0===s?void 0:s.end_time})]})]})]}),(0,V.jsx)(l.A,{color:"primary",children:(null===p||void 0===p?void 0:p.barcode)||(0,pe.t)("packetNameNotFound")}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,V.jsxs)(l.A,{children:[(0,pe.t)("startTime"),":  ",(0,V.jsx)("strong",{children:null===p||void 0===p?void 0:p.start_time})]}),(0,V.jsxs)(l.A,{children:[(0,pe.t)("endTime"),":  ",(0,V.jsx)("strong",{children:null===p||void 0===p?void 0:p.end_time})]})]}),(0,V.jsxs)(l.A,{children:[(0,pe.t)("duration"),":  ",(0,V.jsx)("strong",{children:null===p||void 0===p?void 0:p.duration})]}),(0,V.jsx)(B.A,{data:o,errors:g,onChange:e=>{const{name:t,value:a}=e.target;w((e=>(e.delete(t),e))),d((e=>({...e,[t]:a})))},schema:x}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:r,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{const e=(0,Y.bG)(x,o);w(e),e.size||(console.log("handleSubmit----------",o.reason),await c())},loading:u,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})},wi=()=>{(0,P.Zp)();const[e,t]=(0,y.useState)([]),[a,s]=(0,y.useState)(),[n,r]=(0,y.useState)(0),[d,c]=(0,y.useState)(!1),[u,m]=(0,y.useState)(!1),[h,p]=(0,y.useState)(!1),[x,g]=(0,y.useState)(0),[w,v]=(0,y.useState)({company_id:"",plant_id:"",division_id:"",line_id:"",date:(new Date).toISOString().split("T")[0],shift_id:""}),[f,j]=(0,y.useState)((new Date).toISOString().split("T")[0]),{matrixList:A,all_downtime_list:S,unassi_downtime_list:b,reason_list:_,post_reason:C}=(0,va.A)(),{summary:N}=xa(),[k,E]=(0,y.useState)(new Map),[I,T]=(0,y.useState)([{value:"All",key:""}]),[D,R]=(0,y.useState)([{value:"All",key:""}]),[O,L]=(0,y.useState)([{value:"All",key:""}]),[M,U]=(0,y.useState)([{value:"All",key:""}]),[z,F]=(0,y.useState)([]),[H,q]=(0,y.useState)({}),[G,Y]=(0,y.useState)();(0,y.useEffect)((()=>{X()}),[]),(0,y.useEffect)((()=>{!async function(){let[e]=await N(x+1,1,w.company_id||"",w.plant_id||"",w.division_id||"",w.line_id||"",w.date||"",w.shift_id||"",w.state||"");console.log("machine res-------",e);const t=(e,t)=>{const a=new Set(e.map((e=>e.key)));return t.filter((e=>!a.has(e.key)))};T((a=>[...a,...t(a,null===e||void 0===e?void 0:e.companies.map((e=>({value:e.name,key:e.id}))))])),R((a=>[...a,...t(a,null===e||void 0===e?void 0:e.plants.map((e=>({value:e.name,key:e.id}))))])),L((a=>[...a,...t(a,null===e||void 0===e?void 0:e.divisions.map((e=>({value:e.name,key:e.id}))))])),U((a=>[...a,...t(a,null===e||void 0===e?void 0:e.lines.map((e=>({value:e.name,key:e.id}))))])),v((e=>{var t;return{...e,company:null===(t=I[0])||void 0===t?void 0:t.key}}))}()}),[h,w.company_id,w.plant_id,w.division_id,w.line_id,w.date,w.shift_id]),(0,y.useEffect)((()=>{W()}),[x,h,w.company_id,w.plant_id,w.division_id,w.line_id,w.date,w.shift_id]);const W=async()=>{s("fetch");const[e]=!1===h?await b(x+1,10,w.company_id||"",w.plant_id||"",w.division_id||"",w.line_id||"",w.date||""):await S(x+1,10,w.company_id||"",w.plant_id||"",w.division_id||"",w.line_id||"",w.date||"");t(e.results),r(e.count),s(!1)},X=async()=>{s("fetch");const[e]=await A(w.date);console.log("matrix downtime-----",e),q(e),s(!1)},Z=[{id:1,title:(0,pe.t)("company"),render:e=>(0,V.jsx)(l.A,{sx:{cursor:"pointer",textTransform:"capitalize"},children:e.company_name})},{id:2,title:(0,pe.t)("plant"),render:e=>(0,V.jsx)(l.A,{children:e.plant_name})},{id:3,title:(0,pe.t)("division"),render:e=>(0,V.jsx)(l.A,{children:e.division_name})},{id:4,title:(0,pe.t)("line"),render:e=>(0,V.jsx)(l.A,{children:e.line_name})},{id:7,title:(0,pe.t)("station"),render:e=>(0,V.jsx)(l.A,{children:e.asset_name})},{id:22,title:(0,pe.t)("startTime"),render:e=>(0,V.jsx)(l.A,{children:e.start_time})},{id:23,title:(0,pe.t)("endTime"),render:e=>(0,V.jsx)(l.A,{children:e.end_time})},{id:24,title:(0,pe.t)("duration"),render:e=>(0,V.jsx)(l.A,{children:e.duration})},!1===h?{id:54,title:(0,pe.t)("action"),render:e=>(0,V.jsx)(i.A,{flexDirection:"row",children:(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{(async e=>{var t;Y(e),F([]),v({...w,id:e.id}),c(!0),m("add");const[a]=await _(e.id);if(console.log("reason_list linst",a),(null===a||void 0===a||null===(t=a.reasons)||void 0===t?void 0:t.length)>0){const e=null===a||void 0===a?void 0:a.reasons.map((e=>({value:e.reason_name,key:e.id})));F((t=>[...t,...e]))}})(e)},children:(0,V.jsx)(je.A,{color:"primary",fontSize:"small"})})})}:{id:234,title:(0,pe.t)("reason"),render:e=>(0,V.jsx)(l.A,{children:e.downtime_reason})}],J=(0,ga.Ay)(wa.A)((e=>{let{theme:t}=e;return{width:28,height:16,padding:0,display:"flex","&:active":{"& .MuiSwitch-thumb":{width:15},"& .MuiSwitch-switchBase.Mui-checked":{transform:"translateX(9px)"}},"& .MuiSwitch-switchBase":{padding:2,"&.Mui-checked":{transform:"translateX(12px)",color:"#fff","& + .MuiSwitch-track":{opacity:1,backgroundColor:"#FAA036",border:2,...t.applyStyles("dark",{backgroundColor:"#FAA036"})}}},"& .MuiSwitch-thumb":{width:12,height:12,borderRadius:6,transition:t.transitions.create(["width"],{duration:200})},"& .MuiSwitch-track":{borderRadius:8,opacity:1,backgroundColor:"rgba(0,0,0,.25)",boxSizing:"border-box",...t.applyStyles("dark",{backgroundColor:"rgba(255,255,255,.35)"})}}})),K=[{placeholder:(0,pe.t)("company"),type:Q.wN.SELECT,name:"company_id",width:"150px",keyValues:I},{placeholder:(0,pe.t)("plant"),type:Q.wN.SELECT,name:"plant_id",width:"150px",keyValues:D},{placeholder:(0,pe.t)("division"),type:Q.wN.SELECT,name:"division_id",validator:Q.wY.REQUIRED,width:"150px",keyValues:O},{placeholder:(0,pe.t)("line"),type:Q.wN.SELECT,name:"line_id",validator:Q.wY.REQUIRED,width:"150px",keyValues:M},{placeholder:(0,pe.t)("date"),type:Q.wN.DATE,name:"date",width:"150px"}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("downtime")}),(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:1},children:(0,V.jsxs)(i.A,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[(0,V.jsx)(l.A,{className:"fw-16-400-36",children:(0,pe.t)("unassigned")}),(0,V.jsx)(J,{defaultChecked:h,inputProps:{"aria-label":"ant design"},onChange:e=>{g(0),p(e.target.checked)}}),(0,V.jsx)(l.A,{className:"fw-16-400-36",children:(0,pe.t)("all")})]})})]}),(0,V.jsx)(i.A,{sx:{mb:1,flexDirection:"row",gap:1},children:(0,V.jsx)(B.A,{data:w,errors:k,onChange:e=>{const{name:t,value:a}=e.target;console.log("name value",t,a),E((e=>(e.delete(t),e))),v((e=>({...e,[t]:0==a?"":a})))},schema:K})}),(0,V.jsxs)(i.A,{sx:{mb:1,flexDirection:"row",gap:2},children:[(0,V.jsxs)(i.A,{sx:{width:"20%",justifyContent:"center",alignItems:"center",borderRadius:2,backgroundColor:"#d8d8d8d4",py:2},children:[(0,V.jsx)(l.A,{children:(0,pe.t)("eventsToday")}),(0,V.jsx)(l.A,{sx:{fontWeight:"bold",mt:1},children:H.total})]}),(0,V.jsxs)(i.A,{sx:{width:"20%",justifyContent:"center",alignItems:"center",borderRadius:2,backgroundColor:"#d8d8d8d4",py:2},children:[(0,V.jsx)(l.A,{children:(0,pe.t)("totalDowntime")}),(0,V.jsxs)(l.A,{sx:{fontWeight:"bold",mt:1},children:[(H.total_duration/60/60).toFixed(2)," hrs"]})]}),(0,V.jsxs)(i.A,{sx:{width:"20%",justifyContent:"center",alignItems:"center",borderRadius:2,backgroundColor:"#d8d8d8d4",py:2},children:[(0,V.jsx)(l.A,{children:(0,pe.t)("activeDowntime")}),(0,V.jsx)(l.A,{sx:{fontWeight:"bold",mt:1},children:H.active})]}),(0,V.jsxs)(i.A,{sx:{width:"20%",justifyContent:"center",alignItems:"center",borderRadius:2,backgroundColor:"#d8d8d8d4",py:2},children:[(0,V.jsx)(l.A,{children:(0,pe.t)("unassignedDowntime")}),(0,V.jsx)(l.A,{sx:{fontWeight:"bold",mt:1},children:H.unassigned})]})]}),(0,V.jsx)($.A,{columns:Z,rows:e,rowsPerPage:10,loading:"fetch"===a,titleCellClasses:"c-gray fw-700",page:x,setPage:g,paginator:!0,serialize:!0,total:n}),(0,V.jsx)(gi,{packetData:G,open:"add"===u,onClose:()=>{m(!1),c(!1)},data:w,edit:d,setData:v,onSubmit:async()=>{let e=w.id;const t={reason_id:w.reason};s("fetch");let a=await C(e,t);v({company_id:"",plant_id:"",division_id:"",line_id:"",date:(new Date).toISOString().split("T")[0],shift_id:""}),m(!1),await W(),console.log("creat res----",a)},assetsList:z})]})},yi=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`${U.H.TENANTS}/?page=${e}&page_size=10`,{},t,L.So);var n,i;return null!==s&&void 0!==s&&s.data?[null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.results,null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.count]:[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post(`${U.H.TENANTS}/`,e,t,(e=>(0,L.So)(e,null,"Tenant created successfully!")));return null===s||void 0===s?void 0:s.data},update:async(e,a)=>{const s=new M.Ay,n=await s.put(`tenant/${e}/`,a,t,(e=>(0,L.So)(e,null)));return null===n||void 0===n?void 0:n.data},remove:async e=>{if(!e)return;const a=new M.Ay,s=await a.delete(`${U.H.TENANT}/${e}/`,t,(e=>(0,L.So)(e,null,"Tenant deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},vi=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",children:[d?"Edit":"Create new"," Tenant"]}),(0,V.jsx)(G.A,{title:"Tenant name",placeholder:"Enter tenant name",width:"99%",name:"name",onChange:n,value:s.name}),(0,V.jsx)(G.A,{title:"Secret Key",placeholder:"Enter secret key",width:"99%",name:"secret_key",onChange:n,value:s.secret_key}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:r,loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})},fi=()=>{const e=(0,P.Zp)(),[t,a]=(0,y.useState)([]),[s,n]=(0,y.useState)(),[r,d]=(0,y.useState)(0),[c,u]=(0,y.useState)(!1),[m,h]=(0,y.useState)(0),[p,x]=(0,y.useState)({name:"",secret_key:""}),[g,w]=(0,y.useState)(!1),{list:v,create:f,remove:j,update:A}=yi();(0,y.useEffect)((()=>{S()}),[m]);const S=async()=>{n("fetch");const[e,t]=await v(m+1);a(e),d(t),n(!1)},b=[{id:3,title:(0,pe.t)("tenantName"),render:t=>(0,V.jsx)(l.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/tenant-Users",{state:t}),children:t.name})},{id:4,title:(0,pe.t)("secretCode"),render:e=>e.secret_key},{id:5,title:(0,pe.t)("action"),render:e=>(0,V.jsxs)(i.A,{flexDirection:"row",children:[(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{n("fetch"),await j(e),await S(),n(!1)})(null===e||void 0===e?void 0:e.id),children:(0,V.jsx)(ee.A,{color:"error",fontSize:"small"})}),(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{u("edit"),x(e),w(!0)},children:(0,V.jsx)(te.A,{color:"primary",fontSize:"small"})})]})}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("tenants")}),(0,V.jsx)(H.A,{color:"gray",onClick:()=>{u(!0)},children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("createTenant")})})]}),(0,V.jsx)($.A,{columns:b,rows:t,rowsPerPage:10,loading:"fetch"===s,titleCellClasses:"c-gray fw-700",page:m,setPage:h,paginator:!0,serialize:!0,total:r}),(0,V.jsx)(vi,{open:c,onClose:()=>{u(!1),w(!1)},data:p,setData:e=>x((t=>({...t,[e.target.name]:e.target.value}))),onSubmit:async()=>{let e;if(null!==p&&void 0!==p&&p.name||(e="Please enter the tenant name!"),null!==p&&void 0!==p&&p.secret_key||(e="Please enter the secret key!"),e)return void O.oR.error(e);n("add");let t={name:p.name,secret_key:p.secret_key};const a=!1===g?await f(p):await A(p.id,t);null!==a&&void 0!==a&&a.id&&(x({}),u(!1),S()),n(!1)},loading:"add"===s,edit:g})]})},ji=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.get(`${a}/${U.H.USERS}/?page=${e}&page_size=10`,{},t,L.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},create:async(e,a)=>{const s=new M.Ay,n=await s.post(`${a}/${U.H.USERS}/`,e,t,(e=>(0,L.So)(e,null,"User created successfully!")));return null===n||void 0===n?void 0:n.data},update:async(e,a,s)=>{const n=new M.Ay,i=await n.put(`${e}/${U.H.USER}/${a}/`,s,t,(e=>(0,L.So)(e,null,"User Updated successfully!")));return null===i||void 0===i?void 0:i.data},remove:async e=>{if(!e)return;const a=new M.Ay,s=await a.delete(`${U.H.USER}/${e}/`,t,(e=>(0,L.So)(e,null,"User deleted successfully!")));return null===s||void 0===s?void 0:s.data},opratorList:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new M.Ay,s=await a.get(`${e}/${U.H.OPERATORS}/`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},createOperator:async(e,a)=>{const s=new M.Ay,n=await s.post(`${a}/${U.H.OPERATORS}/`,e,t,(e=>(0,L.So)(e,null,"Operator created successfully!")));return null===n||void 0===n?void 0:n.data},updateOperator:async(e,a)=>{const s=new M.Ay,n=await s.put(`${U.H.OPERATOR}/${e}/`,a,t,(e=>(0,L.So)(e,null,"Operator Updated successfully!")));return null===n||void 0===n?void 0:n.data},removeOperator:async e=>{if(!e)return;const a=new M.Ay,s=await a.delete(`${U.H.OPERATOR}/${e}/`,t,(e=>(0,L.So)(e,null,"Operator deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},Ai=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,tab:d}=e;const c=[{title:"User Name",placeholder:"Enter User Name",type:Q.wN.INPUT,name:"username",validator:Q.wY.REQUIRED},{title:"Email",placeholder:"Enter Email",type:Q.wN.INPUT,name:"email"},{title:"Full Name",placeholder:"Enter Full Name",type:Q.wN.INPUT,name:"fullname"}],u=[{title:"Employee Id",placeholder:"Employee Id",type:Q.wN.INPUT,name:"employee_id",validator:Q.wY.REQUIRED},{title:"Full Name",placeholder:"Enter Full Name",type:Q.wN.INPUT,name:"fullname"}],[m,h]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",children:["ADD ",d]}),(0,V.jsx)(B.A,{data:s,errors:m,onChange:e=>{const{name:t,value:a}=e.target;h((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:"Users"===d?c:u}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{const e=(0,Y.bG)(c,s);h(e),e.size||r()},loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})},Si=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,modalOpen:o,loading:d,edit:c,tab:u}=e;const{t:m,i18n:h}=(0,j.Bd)(),{getMenu:p,postMenu:x}=(0,Ie.A)(),g=(0,f.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.USER_ITEM)||void 0===t?void 0:t.data})),[w,v]=(0,y.useState)([]),[A,S]=(0,y.useState)([]);(0,y.useEffect)((()=>{null!==g&&void 0!==g&&g.id&&"manage"===o&&b()}),["manage"===o,""!==(null===g||void 0===g?void 0:g.id)]);const b=async()=>{var e,t;const a=await p(null===g||void 0===g?void 0:g.id);S((null===(e=a[0])||void 0===e?void 0:e.all_menu.menu_items)||[]),v((null===(t=a[0])||void 0===t?void 0:t.user_menu.menu_items)||[]),console.log("menu item-----\x3e>>",null===g||void 0===g?void 0:g.id)};return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",style:{textTransform:"capitalize"},children:[null===g||void 0===g?void 0:g.username," ",m("menuManagement")]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:1,gap:1,height:400},children:[(0,V.jsxs)(i.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:Q.lm.LG_GRAY_2,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,V.jsx)(l.A,{sx:{px:1},children:m("permissionsOfUser")}),w.map(((e,t)=>(0,V.jsxs)(i.A,{sx:{flexDirection:"row",backgroundColor:Q.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,V.jsxs)(l.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e]},e.name),(0,V.jsx)(Ce.A,{fontSize:"small",sx:{color:Q.lm.DARK_RED,m:.2,cursor:"pointer"},onClick:()=>{return t=e,void v((e=>e.filter((e=>e!==t))));var t}})]},t)))]}),(0,V.jsxs)(i.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:Q.lm.LG_GRAY_2,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,V.jsx)(l.A,{sx:{px:1},children:m("allMenu")}),A.map(((e,t)=>(0,V.jsxs)(i.A,{sx:{flexDirection:"row",backgroundColor:Q.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,V.jsxs)(l.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e]},e.name),(0,V.jsx)(je.A,{fontSize:"small",sx:{color:Q.lm.DARK_GREEN,m:.2,cursor:"pointer"},onClick:()=>(async e=>{w.includes(e)?O.oR.warn("already in list"):v((t=>[...t,e]))})(e)})]},t)))]})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:1,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:m("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>(async()=>{let e={menu_items:w},t=await x(null===g||void 0===g?void 0:g.id,e);console.log("res----menu items",t),await a()})(),loading:d,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:m("submit")})})]})]})},bi=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,modalOpen:o,loading:d,edit:c,tab:u}=e;const{t:m,i18n:h}=(0,j.Bd)(),{getMenu:p,postMenu:x,getMachines:g,postMachine:w}=(0,Ie.A)(),v=(0,f.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.USER_ITEM)||void 0===t?void 0:t.data})),[A,S]=(0,y.useState)([]),[b,_]=(0,y.useState)([]);(0,y.useEffect)((()=>{null!==v&&void 0!==v&&v.id&&"machine"===o&&C()}),["machine"===o]);const C=async()=>{var e,t,a;const s=await g(null===v||void 0===v?void 0:v.id);_((null===(e=s[0])||void 0===e?void 0:e.all_assets.assets)||[]),S((null===(t=s[0])||void 0===t?void 0:t.user_assets.assets)||[]),console.log("getMachines item-----\x3e>>",null===(a=s[0])||void 0===a?void 0:a.all_assets.assets)};return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",style:{textTransform:"capitalize"},children:[null===v||void 0===v?void 0:v.username," Machine Permissions"]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:1,gap:1,height:400},children:[(0,V.jsxs)(i.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:Q.lm.LG_GRAY_2,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,V.jsx)(l.A,{sx:{px:1},children:m("permissionsOfUser")}),A.map(((e,t)=>(0,V.jsxs)(i.A,{sx:{flexDirection:"row",backgroundColor:Q.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,V.jsxs)(l.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e.name]},e.name),(0,V.jsx)(Ce.A,{fontSize:"small",sx:{color:Q.lm.DARK_RED,m:.2,cursor:"pointer"},onClick:()=>{return t=e,void S((e=>e.filter((e=>e!==t))));var t}})]},t)))]}),(0,V.jsxs)(i.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:Q.lm.LG_GRAY_2,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,V.jsx)(l.A,{sx:{px:1},children:m("All Machines")}),b.map(((e,t)=>(0,V.jsxs)(i.A,{sx:{flexDirection:"row",backgroundColor:Q.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,V.jsxs)(l.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e.name]},e.name),(0,V.jsx)(je.A,{fontSize:"small",sx:{color:Q.lm.DARK_GREEN,m:.2,cursor:"pointer"},onClick:()=>(async e=>{console.log("machine val",e),A.some((t=>t.id===e.id))?O.oR.warn("Machine already in the list"):S((t=>[...t,e]))})(e)})]},t)))]})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:1,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:m("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>(async()=>{let e={assets:A.map((e=>e.id))};await w(null===v||void 0===v?void 0:v.id,e),console.log("res----menu items",e),await a()})(),loading:d,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:m("submit")})})]})]})},_i=()=>{const e=(0,P.zy)(),t=(0,P.Zp)(),a=(0,f.wA)(),s=localStorage.getItem("userId"),n=null===e||void 0===e?void 0:e.state,{list:r,opratorList:d,create:c,createOperator:u,update:m}=ji(),[h,p]=(0,y.useState)("Users"),[x,g]=(0,y.useState)([]),[w,v]=(0,y.useState)(),[j,A]=(0,y.useState)(0),[S,b]=(0,y.useState)(0),[_,C]=(0,y.useState)(!1),[N,k]=(0,y.useState)({});(0,y.useEffect)((()=>{E()}),[S,h]);const E=async()=>{v("fetch");const[e,t]=await r(S+1,n.id),a=e.filter((e=>!e.is_operator));g(a),A(t),v(!1)},I=[{id:1,title:"Email",render:e=>e.email||"-"},{id:2,title:"User Name",render:e=>e.username||"-"},{id:3,title:"Full Name",render:e=>e.fullname||"-"},{id:5,title:"Role",render:e=>(0,V.jsx)(ne,{title:e.is_admin?"admin":"Na"})},{id:6,title:"Action",render:e=>(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(ye.A,{title:e.is_admin?"Remove Admin":"Make Admin",children:(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>T(null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.is_admin),children:(0,V.jsx)(we.A,{color:e.is_admin?"success":"error",fontSize:"small"})})}),(null===e||void 0===e?void 0:e.id)!==s.replace(/-/g,"")?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(ye.A,{title:"Manage Permission",children:(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{a((0,_e.t)(e)),C("manage")},children:(0,V.jsx)(ae.A,{color:"success",fontSize:"small"})})}),(0,V.jsx)(ye.A,{title:"Machine Permission",children:(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{a((0,_e.t)(e)),C("machine")},children:(0,V.jsx)(Re.A,{color:"success",fontSize:"small"})})})]}):null]})}],T=async(e,t)=>{v("fetch");const a={is_admin:!0!==t};await m(n.id,e,a),await E(),v(!1)};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1},children:[(0,V.jsx)(o.A,{onClick:()=>t(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsxs)(l.A,{className:"fw-20-500-36",children:[n.name," ",h]})]}),(0,V.jsx)(H.A,{color:"gray",onClick:()=>{C(!0)},children:(0,V.jsxs)(l.A,{className:"fw-20-500-24",children:["Create ",h]})})]}),(0,V.jsx)($.A,{columns:I,rows:x,rowsPerPage:10,loading:"fetch"===w,titleCellClasses:"c-gray fw-700",page:S,setPage:b,paginator:!0,serialize:!0,total:j}),(0,V.jsx)(Ai,{open:_,onClose:()=>C(!1),data:N,setData:k,onSubmit:async()=>{const e={...N};v("fetch"),"Users"===h?await c(e,n.id):await u(e,n.id),k({}),C(!1),await E(),v(!1)},loading:"add"===w,tab:h}),(0,V.jsx)(Si,{onClose:()=>C(!1),open:"manage"===_,modalOpen:_}),(0,V.jsx)(bi,{onClose:()=>C(!1),open:"machine"===_,modalOpen:_})]})},Ci=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{list:async e=>{const a=new M.Ay,s=await a.get(`settings/redbin/details/?qr_code=${e}`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new M.Ay,n=await s.post(`${U.H.ASSET}/${a}/${U.H.PLANTS}/`,e,t,(e=>(0,L.So)(e,null,"Plant created successfully!")));return null===n||void 0===n?void 0:n.data},qr_details:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post("redbin/get-details/",e,t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data},add_details:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post("redbin/add-details/",e,t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data},resolve_details:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new M.Ay,n=await s.post("redbin/resolution/",a,t,(e=>(0,L.So)(e,null)));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new M.Ay,n=await s.put(`${U.H.ASSET}/${U.H.PLANT}/${e.id}/`,a,t,(e=>(0,L.So)(e,null,"Plant Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`${U.H.ASSET}/${U.H.PLANT}/${e}/`,t,(e=>(0,L.So)(e,null,"Plant deleted successfully!")));return null===s||void 0===s?void 0:s.data},masterlist:async(e,a)=>{const s=new M.Ay,n=await s.get(`redbin/master/?resolved=${a}&page=${e}&page_size=10`,{},t,L.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},send_qr_to_circuitboard:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay;return await a.post("machining/scan-at-cb/",e,t,(e=>(0,L.So)(e,null)))},dockStation:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay;return await a.post("machining/confirmation/",e,t,(e=>(0,L.So)(e,null)))},docklist:async(e,a)=>{const s=new M.Ay,n=await s.get("machining/get-dock-info/",{},t,L.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]}}},Ni=e=>{let{open:t,onClose:a,data:s,setData:n,dataResolve:r,setDataResolve:o,onSubmit:d,loading:c,edit:u,reasonList:m}=e;const{list:h,listByAadhar2:p,listByAadharFortestPortal:x}=F();async function g(e){return await x(e||"")}const w=[{title:(0,pe.t)("selectReason"),placeholder:(0,pe.t)("selectReason"),type:Q.wN.SELECT,name:"reason",validator:Q.wY.REQUIRED,keyValues:m},{title:(0,pe.t)("operator"),placeholder:(0,pe.t)("selectOperator"),type:Q.wN.MASTER,name:"user",validator:Q.wY.REQUIRED,fetch:[g],noSearch:!0},{title:(0,pe.t)("comment"),placeholder:(0,pe.t)("comment"),type:Q.wN.INPUT,name:"comment"}],v=[{title:(0,pe.t)("workedBy"),placeholder:(0,pe.t)("selectOperator"),type:Q.wN.MASTER,name:"user",validator:Q.wY.REQUIRED,fetch:[g],noSearch:!0},{title:(0,pe.t)("date"),placeholder:(0,pe.t)("date"),type:Q.wN.DATE,name:"date",validator:Q.wY.REQUIRED},{title:(0,pe.t)("comment"),placeholder:(0,pe.t)("comment"),type:Q.wN.INPUT,name:"comment"}],[f,j]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",children:[!0===u?(0,pe.t)("resolveDefect"):(0,pe.t)("addDefect")," "]}),(0,V.jsx)(i.A,{sx:{alignItems:"flex-start",pl:3},children:(0,V.jsx)(B.A,{data:u?r:s,errors:f,onChange:u?async e=>{const{name:t,value:a}=e.target;j((e=>(e.delete(t),e))),"user"===t?(console.log("handle data","user",a.value),o((e=>({...e,user:a.value})))):o((e=>({...e,[t]:a})))}:async e=>{const{name:t,value:a}=e.target;j((e=>(e.delete(t),e))),"user"===t?(console.log("handle data","user",a.value),n((e=>({...e,user:a.value})))):n((e=>({...e,[t]:a})))},schema:u?v:w})}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{const e=(0,Y.bG)(u?v:w,u?r:s);j(e),e.size||await d()},loading:c,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("submit")})})]})]})},ki=e=>{let{open:t,onClose:a}=e;const s=(0,P.Zp)(),{taskList:n,list:r,qr_details:o,add_details:d,resolve_details:c}=Ci(),{listByAadharFortestPortal:u}=F(),{superUsers:m}=F(),[h,p]=(0,y.useState)(new Map),[x,g]=(0,y.useState)(!0),[w,v]=(0,y.useState)(""),[f,j]=(0,y.useState)(!1),[A,S]=(0,y.useState)(""),[b,_]=(0,y.useState)({}),[C,N]=(0,y.useState)(!0),[k,E]=(0,y.useState)({reason:"",comment:""}),[I,T]=(0,y.useState)({}),[D,R]=(0,y.useState)([]),[O,$]=(0,y.useState)([]),[L,M]=(0,y.useState)();(0,y.useEffect)((()=>{q()}),[]);const U=(0,y.useRef)(null);(0,y.useEffect)((()=>{U.current&&U.current.focus()}),[]);const z=async e=>{let t={qr_code:e},a=await o(t);console.log("res value----\x3e>",a),a&&s("/red-bin-rework",{state:t})},q=async()=>{M("fetch");try{const[e]=await m(),t=e.results.filter((e=>!e.is_operator&&e.status)).map((e=>{let{username:t,id:a}=e;return{value:t,key:a}}));$(t)}catch(Le){console.error("Error fetching users:",Le)}finally{M(!1)}};return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("redBin")})}),!0===C?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(i.A,{sx:{alignItems:"center",mt:4},children:[(0,V.jsx)(l.A,{className:"fw-24",children:(0,pe.t)("scanQRcodeToProceed")}),(0,V.jsx)("img",{className:"mt-2",src:_s.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,V.jsx)(i.A,{mt:2,children:(0,V.jsx)("input",{ref:U,style:{height:"1.5rem",width:"31rem",padding:"0.4rem",borderColor:"#4d8fce",borderRadius:"6px",borderWidth:"2px",borderStyle:"solid",background:"#fff",appearance:"none",boxShadow:"none",outline:"none"},type:"text",onKeyPress:e=>{"Enter"===e.key&&(console.log("handle key press",e.target.value),z(e.target.value),e.target.value="")}})})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mx:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:()=>v(""),children:"Clear All"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>j(""),children:(0,V.jsx)(l.A,{color:"black",children:"Confirm"})})]})]}):(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Additional Details"}),(0,V.jsxs)(Ge.Ay,{container:!0,spacing:2,mb:2,children:[(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsxs)("strong",{children:[(0,pe.t)("serialNumber")," :"]})," ",b.serial_no]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"Order Id:"})," ",b.order_id]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"FG Code:"})," ",b.fg_code]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"Assigned User:"})," ",b.assigned_user]})})]})]}),(0,V.jsx)(Ni,{open:"add"===f,onClose:()=>{j(!1)}})]})})},Ei=()=>{const e=(0,P.zy)(),t=((0,P.Zp)(),e.state),{taskList:a}=(0,Cs.A)(),{list:s,qr_details:n,add_details:r,resolve_details:o}=Ci(),[d,c]=(0,y.useState)([]),[u,m]=(0,y.useState)(),[h,p]=(0,y.useState)(0),[x,g]=(0,y.useState)(!1),[w,v]=(0,y.useState)(!1),[f,j]=(0,y.useState)(0),[A,S]=(0,y.useState)({name:"",metadata:{}}),[b,_]=(0,y.useState)(""),[C,N]=(0,y.useState)({}),[k,E]=(0,y.useState)({}),[I,T]=(0,y.useState)([]),[D,R]=(0,y.useState)("");(0,y.useEffect)((()=>{console.log("machineData-----",t),O()}),[]);const O=async()=>{m("fetch");let e=await n(t);c(null===e||void 0===e?void 0:e.defects),N({...C,order_id:null===e||void 0===e?void 0:e.order_id,serial_no:null===e||void 0===e?void 0:e.serial_no,fg_code:null===e||void 0===e?void 0:e.fg_code});const a=e.reasons.map((e=>({value:`${e.reason_name||e.fg_defect}`,key:e.id})));T(a),m(!1)},L=[{id:1,title:(0,pe.t)("defect"),render:e=>(0,V.jsx)(l.A,{sx:{cursor:"pointer",fontWeight:"bold"},children:e.fg_defect})},{id:2,title:(0,pe.t)("assignedUser"),render:e=>e.assigned_user},{id:6,title:(0,pe.t)("comment"),render:e=>null===e||void 0===e?void 0:e.comments},{id:66,title:(0,pe.t)("workedBy"),render:e=>(null===e||void 0===e?void 0:e.worked_by)||"-"},{id:5,title:(0,pe.t)("actions"),render:e=>e.status?(0,V.jsx)(Ke.A,{fontSize:"large",sx:{color:Q.lm.LIGHT_GREEN}}):(0,V.jsx)(H.A,{color:"light_green",onClick:()=>{g(!0),v("assign"),R(null===e||void 0===e?void 0:e.fg_defect)},children:(0,V.jsx)(l.A,{color:"black",children:"Resolve"})})}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("redBin")}),(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:1},children:(0,V.jsx)(H.A,{color:"gray",onClick:()=>{g(!1),v("assign")},loading:u,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("addNew")})})})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:2},children:[(0,V.jsxs)(l.A,{children:[(0,pe.t)("orderId")," : ",null===C||void 0===C?void 0:C.order_id]}),(0,V.jsxs)(l.A,{children:[(0,pe.t)("FGCode")," : ",null===C||void 0===C?void 0:C.fg_code]}),(0,V.jsxs)(l.A,{children:[(0,pe.t)("serialNumber")," : ",null===C||void 0===C?void 0:C.serial_no]})]}),(0,V.jsx)($.A,{columns:L,rows:d,rowsPerPage:5,loading:"fetch"===u,titleCellClasses:"c-gray fw-700",page:f,setPage:j,paginator:!0,serialize:!0,total:h}),(0,V.jsx)(Ni,{data:A,edit:x,setData:S,dataResolve:k,setDataResolve:E,open:"assign"===w,onClose:()=>{v(!1)},reasonList:I,onSubmit:x?async()=>{let e={order_id:C.order_id,worked_by:k.user,worked_on:k.date,resolution_comments:k.comment,qr_code:null===t||void 0===t?void 0:t.qr_code,defect:D},a=await o(C.id,e);console.log("resolution  response",a),null!==a&&void 0!==a&&a.message&&(v({}),E({}),O())}:async()=>{let e={qr_code:null===t||void 0===t?void 0:t.qr_code,defect_id:A.reason,assigned_user:A.user,comments:A.comment};await r(e)&&(v(!1),S({}),O())}})]})};var Ii=a(61598);const Ti=e=>{let{open:t,onClose:a,message:s,msgtype:n="success"}=e;const[r,o]=(0,y.useState)(new Map),[d,c]=(0,y.useState)(!1),[u,m]=(0,y.useState)({}),h=(0,y.useRef)(null),[p,x]=(0,y.useState)([]),[g,w]=(0,y.useState)(""),{getAssembly:v,getLabel:f}=(0,Cs.A)();(0,y.useEffect)((()=>{j()}),[]);const j=async()=>{let e=await v();console.log("res getAssembly",e);const t=null===e||void 0===e?void 0:e.map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.name})));t.sort(((e,t)=>parseInt(e.value.split(" ")[1],10)-parseInt(t.value.split(" ")[1],10))),x(t)},A=[{title:"Order Id",placeholder:"Enter Work order Id",type:Q.wN.INPUT,name:"order",validator:Q.wY.REQUIRED},{title:"FG Code",placeholder:"Enter FG Code",type:Q.wN.INPUT,name:"fg_code",validator:Q.wY.REQUIRED},{title:"Serial Number",placeholder:"Enter serial number",type:Q.wN.INPUT,name:"serial_number",validator:Q.wY.REQUIRED},{title:"Line Name",placeholder:"Select Line",type:Q.wN.SELECT,name:"line",validator:Q.wY.REQUIRED,keyValues:p}],S=async e=>{const t={order_id:null===u||void 0===u?void 0:u.order,fg_code:null===u||void 0===u?void 0:u.fg_code,serial:null===u||void 0===u?void 0:u.serial_number,line_id:null===u||void 0===u?void 0:u.line};let s=await f(t);null!==s&&void 0!==s&&s.qr?(console.log("res getLabel",s.qr),w(s.qr),b(),await a(),m({})):O.oR.error("No data found")},b=()=>{if(!h.current)return console.error("printRef is null. Cannot print."),void O.oR.error("Unable to print. Please try again.");const e=h.current.innerHTML,t=document.body.innerHTML;document.body.innerHTML="\n        <style>\n          @media print {\n            @page { margin: 0; size: auto; }\n            body { margin: 0; padding: 0; }\n            header, footer { display: none; }\n          }\n        </style>\n      "+e,window.print(),document.body.innerHTML=t,window.location.reload()};return(0,V.jsx)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",wrapperClasses:"px-6",hideCloseIcon:W.A,children:(0,V.jsxs)(i.A,{alignItems:"center",spacing:1,mb:4,gap:1,px:3,py:2,children:[(0,V.jsx)(B.A,{data:u,errors:r,onChange:e=>{const{name:t,value:a}=e.target;o((e=>(e.delete(t),e))),m((e=>({...e,[t]:"fg_code"===t?a.toUpperCase():a})))},schema:A}),(0,V.jsx)("div",{style:{display:"none"},children:(0,V.jsx)("div",{ref:h,children:(0,V.jsxs)(i.A,{sx:{width:"288px",height:"192px"},children:[(0,V.jsx)(l.A,{className:"fw-36",sx:{mt:2},textAlign:"center",children:"Dhoot Transmission"}),(0,V.jsx)(i.A,{sx:{justifyContent:"space-between",gap:1,flexDirection:"row"},children:(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1},children:[(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{children:"Order no :"}),(0,V.jsx)(l.A,{children:"Fg code :"}),(0,V.jsx)(l.A,{children:"S.No :"})]}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{children:null===u||void 0===u?void 0:u.order}),(0,V.jsx)(l.A,{children:null===u||void 0===u?void 0:u.fg_code}),(0,V.jsx)(l.A,{children:null===u||void 0===u?void 0:u.serial_number})]})]})}),(0,V.jsx)(i.A,{sx:{marginLeft:"70%"},children:(0,V.jsx)(Qs.Ay,{size:60,value:g,viewBox:"0 0 256 256"})})]})})}),(0,V.jsx)(H.A,{color:"green",onClick:()=>{(async()=>{const e=(0,Y.bG)(A,u);o(e),e.size||await S()})()},children:(0,V.jsx)(l.A,{color:Q.lm.WHITE,children:"Print Label"})})]})})},Di=e=>{var t,a,s,n,r,d;let{open:c,onClose:u,data:m}=e;const h=(0,P.Zp)(),p=(0,P.zy)().state,[x,g]=(0,y.useState)(new Map),[w,v]=(0,y.useState)({}),[f,j]=(0,y.useState)(localStorage.getItem("machineId")||""),[A,S]=(0,y.useState)(!1),[b,_]=(0,y.useState)(""),[C,N]=(0,y.useState)({}),{OrderMaterialList:k,create:E,updateOrderStatus:I,getMachineStatus:T,updateAssemblyOrderStatus:D,currentAssemblyOrderStatus:R,nextLabel:O}=(0,Cs.A)();(0,y.useEffect)((()=>{console.warn("locationData----",p),$();const e=setInterval((()=>{$()}),5e3);return()=>clearInterval(e)}),[]),(0,y.useEffect)((()=>{const e=async e=>{var t;"Enter"===e.key&&(null!==b&&void 0!==b&&null!==(t=b.order)&&void 0!==t&&t.id||await $(),L("COMPLETED"))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[b]);const $=async()=>{let e=await R(p);e&&(console.log("getMachineStatus respose----",e.state),_(e))};const L=async()=>{var e;const t={asset_id:f,order_id:null===b||void 0===b||null===(e=b.order)||void 0===e?void 0:e.id};let a=await O(t);console.log("printing",a),N(a),a&&setTimeout((()=>{U()}),1e3)},M=(0,y.useRef)(),U=()=>{const e=M.current.innerHTML,t=document.body.innerHTML;document.body.innerHTML="\n      <style>\n        @media print {\n          @page { margin: 0; size: auto; }\n          body { margin: 0; padding: 0; }\n          header, footer { display: none; }\n        }\n      </style>\n    "+e,window.print(),document.body.innerHTML=t,window.location.reload()};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:" items-center",children:(0,V.jsx)(o.A,{onClick:()=>h(-2),children:(0,V.jsx)(oa.A,{})})}),(0,V.jsx)(Ts.A,{elevation:3,sx:{padding:2,borderRadius:2,mb:2},children:(0,V.jsxs)(Ge.Ay,{container:!0,spacing:2,mb:2,children:[(0,V.jsxs)(Ge.Ay,{item:!0,xs:12,md:9,children:[(0,V.jsxs)(l.A,{variant:"h6",gutterBottom:!0,children:["Order Status: ",null===b||void 0===b?void 0:b.state]}),(0,V.jsxs)(Ge.Ay,{container:!0,spacing:3.5,children:[(0,V.jsx)(Ge.Ay,{item:!0,xs:12,sm:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsxs)("strong",{children:[(0,pe.t)("date"),":"]})," ",fe()(null===b||void 0===b||null===(t=b.order)||void 0===t?void 0:t.date_created).format("ll")]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:12,sm:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsxs)("strong",{children:[(0,pe.t)("FGCode"),":"]})," ",null===b||void 0===b||null===(a=b.order)||void 0===a?void 0:a.fg_code]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:12,sm:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"Order Id:"})," ",null===b||void 0===b||null===(s=b.order)||void 0===s?void 0:s.order_id]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:12,sm:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"Order Type:"})," ",null===b||void 0===b||null===(n=b.order)||void 0===n?void 0:n.order_type]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:12,sm:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"Quantity:"})," ",null===b||void 0===b||null===(r=b.order)||void 0===r?void 0:r.quantity]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:12,sm:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"Complete Quantity:"})," ",null===b||void 0===b?void 0:b.completed_quantity]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:12,sm:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"Printed Quantity:"})," ",null===b||void 0===b?void 0:b.label_count]})})]})]}),(0,V.jsxs)(Ge.Ay,{item:!0,xs:12,md:3,children:[(0,V.jsx)(Bs.A,{total:null===b||void 0===b||null===(d=b.order)||void 0===d?void 0:d.quantity,completed:null===b||void 0===b?void 0:b.completed_quantity}),(0,V.jsx)(l.A,{textAlign:"center",sx:{mt:-4},children:(0,V.jsx)("strong",{children:"Complete Quantity"})})]})]})}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:3,mb:2,justifyContent:"center"},children:[(0,V.jsx)(H.A,{color:"green",onClick:()=>{L("COMPLETED")},children:(0,V.jsx)(l.A,{color:Q.lm.WHITE,children:"Print Label"})}),(0,V.jsx)(H.A,{color:"green",onClick:()=>{S("duplicate")},children:(0,V.jsx)(l.A,{color:Q.lm.WHITE,children:"Duplicate Print"})})]}),(0,V.jsx)("div",{style:{display:"none"},children:(null===C||void 0===C?void 0:C.qr_code)&&(0,V.jsx)("div",{ref:M,children:(0,V.jsxs)(i.A,{sx:{width:"288px",height:"192px"},children:[(0,V.jsx)(l.A,{className:"fw-36",sx:{mt:2},textAlign:"center",children:"Dhoot Transmission"}),(0,V.jsx)(i.A,{sx:{justifyContent:"space-between",gap:1,flexDirection:"row"},children:(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:1},children:[(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{children:"Order no :"}),(0,V.jsx)(l.A,{children:"Fg code :"}),(0,V.jsx)(l.A,{children:"S.No :"})]}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{children:null===C||void 0===C?void 0:C.order}),(0,V.jsx)(l.A,{children:null===C||void 0===C?void 0:C.fg_code}),(0,V.jsx)(l.A,{children:null===C||void 0===C?void 0:C.serial_number})]})]})}),(0,V.jsx)(i.A,{sx:{marginLeft:"70%"},children:(0,V.jsx)(Qs.Ay,{size:60,value:null===C||void 0===C?void 0:C.qr_code,viewBox:"0 0 256 256"})})]})})}),(0,V.jsx)(Ii.A,{open:"printing"===A,oID:b,onClose:()=>{S(!1)}}),(0,V.jsx)(Ti,{open:"duplicate"===A,onClose:()=>{S(!1)}}),(0,V.jsx)(Gs.A,{open:"downtime"===A,onClose:()=>{S(!1)},packetData:w})]})},Ri=e=>{var t,a,s;let{open:n,onClose:r,data:o,setData:d,onSubmit:c,loading:u,edit:m,assetsList:h,packetData:p}=e;(0,y.useEffect)((()=>{console.log("packet data------",p)}),[p]);const x=[{title:(0,pe.t)("reason"),placeholder:(0,pe.t)("selectDowntimeReason"),type:Q.wN.SELECT,name:"reason",validator:Q.wY.REQUIRED,keyValues:h}],[g,w]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:n,onClose:r,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsx)("h3",{className:"opacity-80",children:(0,pe.t)("addDowntimeReason")}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,V.jsxs)(l.A,{children:["Machine Name : ",(0,V.jsx)("strong",{children:null===p||void 0===p?void 0:p.asset_name})]}),(0,V.jsxs)(l.A,{children:["Operator Name : ",(0,V.jsx)("strong",{children:null===p||void 0===p?void 0:p.operator_name})]})]}),(0,V.jsxs)(i.A,{children:[(0,V.jsxs)(l.A,{children:["Shift Name : ",(0,V.jsx)("strong",{children:null===p||void 0===p||null===(t=p.shift)||void 0===t?void 0:t.shift_name})]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,V.jsxs)(l.A,{children:["Shift Start Time : ",(0,V.jsx)("strong",{children:null===p||void 0===p||null===(a=p.shift)||void 0===a?void 0:a.start_time})]}),(0,V.jsxs)(l.A,{children:["Shift End Time : ",(0,V.jsx)("strong",{children:null===p||void 0===p||null===(s=p.shift)||void 0===s?void 0:s.end_time})]})]})]}),(0,V.jsx)(l.A,{color:"primary",children:(null===p||void 0===p?void 0:p.barcode)||(0,pe.t)("packetNameNotFound")}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,V.jsxs)(l.A,{children:[(0,pe.t)("startTime"),":  ",(0,V.jsx)("strong",{children:null===p||void 0===p?void 0:p.start_time})]}),(0,V.jsxs)(l.A,{children:[(0,pe.t)("endTime"),":  ",(0,V.jsx)("strong",{children:null===p||void 0===p?void 0:p.end_time})]})]}),(0,V.jsxs)(l.A,{children:[(0,pe.t)("duration"),":  ",(0,V.jsx)("strong",{children:null===p||void 0===p?void 0:p.duration})]}),(0,V.jsx)(B.A,{data:o,errors:g,onChange:e=>{const{name:t,value:a}=e.target;w((e=>(e.delete(t),e))),d((e=>({...e,[t]:a})))},schema:x}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:r,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{const e=(0,Y.bG)(x,o);w(e),e.size||(console.log("handleSubmit----------",o.reason),await c())},loading:u,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})},Pi=()=>{(0,P.Zp)();const[e,t]=(0,y.useState)([]),[a,s]=(0,y.useState)(),[n,r]=(0,y.useState)(0),[o,d]=(0,y.useState)(!1),[c,u]=(0,y.useState)(!1),[m,h]=(0,y.useState)(!1),[p,x]=(0,y.useState)(0),[g,w]=(0,y.useState)({company_id:"",plant_id:"",division_id:"",line_id:"",date:(new Date).toISOString().split("T")[0],shift_id:""}),[v,f]=(0,y.useState)((new Date).toISOString().split("T")[0]),{matrixList:j,all_downtime_list:A,unassi_downtime_list:S,reason_list:b,post_reason:_}=(0,va.A)(),{summary:C}=xa(),{masterlist:N}=Ci(),[k,E]=(0,y.useState)(new Map),[I,T]=(0,y.useState)([{value:"All",key:""}]),[D,R]=(0,y.useState)([{value:"All",key:""}]),[O,L]=(0,y.useState)([{value:"All",key:""}]),[M,U]=(0,y.useState)([{value:"All",key:""}]),[z,F]=(0,y.useState)([]),[H,q]=(0,y.useState)({}),[G,B]=(0,y.useState)();(0,y.useEffect)((()=>{Y()}),[p,m]);const Y=async()=>{s("fetch");const[e]=!1===m?await N(p+1,0):await N(p+1,1);t(e.results),r(e.count),s(!1)},W=[{id:1,title:(0,pe.t)("defect"),render:e=>(0,V.jsx)(l.A,{sx:{cursor:"pointer",fontWeight:"bold"},children:e.fg_defect})},{id:2,title:(0,pe.t)("assignedUser"),render:e=>e.assigned_user},{id:6,title:(0,pe.t)("comment"),render:e=>null===e||void 0===e?void 0:e.comments},{id:646,title:(0,pe.t)("workedOn"),render:e=>(null===e||void 0===e?void 0:e.worked_on)||"-"},{id:66,title:(0,pe.t)("workedBy"),render:e=>(null===e||void 0===e?void 0:e.worked_by)||"-"}],X=(0,ga.Ay)(wa.A)((e=>{let{theme:t}=e;return{width:28,height:16,padding:0,display:"flex","&:active":{"& .MuiSwitch-thumb":{width:15},"& .MuiSwitch-switchBase.Mui-checked":{transform:"translateX(9px)"}},"& .MuiSwitch-switchBase":{padding:2,"&.Mui-checked":{transform:"translateX(12px)",color:"#fff","& + .MuiSwitch-track":{opacity:1,backgroundColor:"#FAA036",border:2,...t.applyStyles("dark",{backgroundColor:"#FAA036"})}}},"& .MuiSwitch-thumb":{width:12,height:12,borderRadius:6,transition:t.transitions.create(["width"],{duration:200})},"& .MuiSwitch-track":{borderRadius:8,opacity:1,backgroundColor:"rgba(0,0,0,.25)",boxSizing:"border-box",...t.applyStyles("dark",{backgroundColor:"rgba(255,255,255,.35)"})}}}));(0,pe.t)("company"),Q.wN.SELECT,(0,pe.t)("plant"),Q.wN.SELECT,(0,pe.t)("division"),Q.wN.SELECT,Q.wY.REQUIRED,(0,pe.t)("line"),Q.wN.SELECT,Q.wY.REQUIRED,(0,pe.t)("date"),Q.wN.DATE;return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("redBinMaster")}),(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:1},children:(0,V.jsxs)(i.A,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[(0,V.jsx)(l.A,{className:"fw-16-400-36",children:(0,pe.t)("unresolved")}),(0,V.jsx)(X,{defaultChecked:m,inputProps:{"aria-label":"ant design"},onChange:e=>{x(0),h(e.target.checked)}}),(0,V.jsx)(l.A,{className:"fw-16-400-36",children:(0,pe.t)("resolved")})]})})]}),(0,V.jsx)($.A,{columns:W,rows:e,rowsPerPage:10,loading:"fetch"===a,titleCellClasses:"c-gray fw-700",page:p,setPage:x,paginator:!0,serialize:!0,total:n}),(0,V.jsx)(Ri,{packetData:G,open:"add"===c,onClose:()=>{u(!1),d(!1)},data:g,edit:o,setData:w,onSubmit:async()=>{let e=g.id;const t={reason_id:g.reason};s("fetch");let a=await _(e,t);w({company_id:"",plant_id:"",division_id:"",line_id:"",date:(new Date).toISOString().split("T")[0],shift_id:""}),u(!1),await Y(),console.log("creat res----",a)},assetsList:z})]})},Oi=e=>{var t,a;let{open:s,onClose:n,message:r}=e;const[o,d]=(0,y.useState)(new Map),[c,u]=(0,y.useState)(!1);return(0,V.jsx)(q.A,{open:s,onClose:n,width:"60vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:W.A,children:(0,V.jsxs)(i.A,{alignItems:"center",spacing:2,mb:4,gap:4,children:[null!==r&&void 0!==r&&null!==(t=r.data)&&void 0!==t&&t.message?(0,V.jsx)(Zs.A,{sx:{color:Q.lm.GREEN,fontSize:100}}):(0,V.jsx)("img",{src:Xs.A,alt:"warning Icon",style:{width:"100px",height:"100px"}}),(0,V.jsx)(l.A,{className:"fw-36",textAlign:"center",children:(null===r||void 0===r?void 0:r.message)||(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)})]})})},$i=e=>{let{open:t,onClose:a}=e;(0,P.Zp)();const{taskList:s,list:n,qr_details:r,add_details:o,resolve_details:d,send_qr_to_circuitboard:c}=Ci(),{listByAadharFortestPortal:u}=F(),{superUsers:m}=F(),[h,p]=(0,y.useState)(new Map),[x,g]=(0,y.useState)(!0),[w,v]=(0,y.useState)(""),[f,j]=(0,y.useState)(!1),[A,S]=(0,y.useState)(""),[b,_]=(0,y.useState)({}),[C,N]=(0,y.useState)(!0),[k,E]=(0,y.useState)({reason:"",comment:""}),[I,T]=(0,y.useState)({}),[D,R]=(0,y.useState)([]),[O,$]=(0,y.useState)([]),[L,M]=(0,y.useState)(),[U,z]=(0,y.useState)(""),q=(0,y.useRef)(null);(0,y.useEffect)((()=>{q.current&&q.current.focus()}),[]);const G=async e=>{let t={qr_code:e},a=await c(t);console.log("res value----\x3e>",null===a||void 0===a?void 0:a.data.message),a&&(z(a),j(!0)),setTimeout((()=>{j(!1)}),3e3)};return(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("circuitBoard")})}),!0===C?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(i.A,{sx:{alignItems:"center",mt:4},children:[(0,V.jsx)(l.A,{className:"fw-24",children:(0,pe.t)("scanQRcodeToProceed")}),(0,V.jsx)("img",{className:"mt-2",src:_s.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,V.jsx)(i.A,{mt:2,children:(0,V.jsx)("input",{ref:q,style:{height:"1.5rem",width:"31rem",padding:"0.4rem",borderColor:"#4d8fce",borderRadius:"6px",borderWidth:"2px",borderStyle:"solid",background:"#fff",appearance:"none",boxShadow:"none",outline:"none"},type:"text",onKeyPress:e=>{"Enter"===e.key&&(console.log("handle key press",e.target.value),G(e.target.value),e.target.value="")}})})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mx:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:()=>v(""),children:"Clear All"}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>j(""),children:(0,V.jsx)(l.A,{color:"black",children:"Confirm"})})]})]}):(0,V.jsxs)(i.A,{children:[(0,V.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Additional Details"}),(0,V.jsxs)(Ge.Ay,{container:!0,spacing:2,mb:2,children:[(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsxs)("strong",{children:[(0,pe.t)("serialNumber")," :"]})," ",b.serial_no]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"Order Id:"})," ",b.order_id]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"FG Code:"})," ",b.fg_code]})}),(0,V.jsx)(Ge.Ay,{item:!0,xs:6,children:(0,V.jsxs)(l.A,{color:"text.secondary",children:[(0,V.jsx)("strong",{children:"Assigned User:"})," ",b.assigned_user]})})]})]}),(0,V.jsx)(Oi,{open:f,onClose:()=>j(!1),message:U})]})})},Li=e=>{var t,a;let{open:s,onClose:n,message:r}=e;const[o,d]=(0,y.useState)(new Map),[c,u]=(0,y.useState)(!1);return(0,V.jsx)(q.A,{open:s,onClose:n,width:"60vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:W.A,children:(0,V.jsxs)(i.A,{alignItems:"center",spacing:2,mb:4,gap:4,children:[null!==r&&void 0!==r&&null!==(t=r.data)&&void 0!==t&&t.message?(0,V.jsx)(Zs.A,{sx:{color:Q.lm.GREEN,fontSize:100}}):(0,V.jsx)("img",{src:Xs.A,alt:"warning Icon",style:{width:"100px",height:"100px"}}),(0,V.jsx)(l.A,{className:"fw-36",textAlign:"center",children:(null===r||void 0===r?void 0:r.message)||(null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)})]})})},Mi=e=>{let{open:t,onClose:a}=e;(0,P.Zp)();const{taskList:s,list:n,qr_details:r,add_details:o,resolve_details:d,dockStation:c,docklist:u}=Ci(),{listByAadharFortestPortal:m}=F(),{superUsers:h}=F(),[p,x]=(0,y.useState)(new Map),[g,w]=(0,y.useState)(!0),[v,f]=(0,y.useState)(""),[j,A]=(0,y.useState)(!1),[S,b]=(0,y.useState)(""),[_,C]=(0,y.useState)({}),[N,k]=(0,y.useState)(!0),[E,I]=(0,y.useState)({reason:"",comment:""}),[T,D]=(0,y.useState)({}),[R,O]=(0,y.useState)([]),[L,M]=(0,y.useState)([]),[U,z]=(0,y.useState)(),[H,q]=(0,y.useState)(""),[G,B]=(0,y.useState)(0),[Q,Y]=(0,y.useState)(0);(0,y.useEffect)((()=>{X()}),[]);const W=(0,y.useRef)(null);(0,y.useEffect)((()=>{W.current&&W.current.focus()}),[]);const X=async()=>{let[e]=await u();console.log("res value----\x3e>",e),O(e)},Z=async e=>{let t={qr_code:e},a=await c(t);console.log("res value----\x3e>",a),a&&q(a),A(!0),await X(),setTimeout((()=>{A(!1)}),3e3)};const J=[{id:1,title:(0,pe.t)("workOrderId"),render:e=>(null===e||void 0===e?void 0:e.order_id)||"-"},{id:2,title:(0,pe.t)("FGCode"),render:e=>(null===e||void 0===e?void 0:e.fg_code)||"-"},{id:66,title:(0,pe.t)("qty"),render:e=>null===e||void 0===e?void 0:e.quantity},{id:66,title:(0,pe.t)("completedQty"),render:e=>null===e||void 0===e?void 0:e.completed_quantity}];return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsx)("div",{className:"flex items-center justify-between",children:(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("dockStation")})}),(0,V.jsxs)(i.A,{sx:{flexDirection:"column",gap:2},children:[(0,V.jsxs)(i.A,{sx:{alignItems:"center"},children:[(0,V.jsx)(l.A,{className:"fw-24",children:(0,pe.t)("scanQRcodeToProceed")}),(0,V.jsx)("img",{className:"mt-2",src:_s.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,V.jsx)(i.A,{mt:2,children:(0,V.jsx)("input",{ref:W,style:{height:"1.5rem",width:"31rem",padding:"0.4rem",borderColor:"#4d8fce",borderRadius:"6px",borderWidth:"2px",borderStyle:"solid",background:"#fff",appearance:"none",boxShadow:"none",outline:"none"},type:"text",onKeyPress:e=>{"Enter"===e.key&&(console.log("handle key press",e.target.value),Z(e.target.value),e.target.value="")}})})]}),(0,V.jsx)(i.A,{sx:{},children:(0,V.jsx)($.A,{columns:J,rows:R,rowsPerPage:5,loading:"fetch"===U,titleCellClasses:"c-gray fw-700",page:Q,setPage:Y,serialize:!0,total:G})})]})]}),(0,V.jsx)(Li,{open:j,onClose:()=>A(!1),message:H})]})};a(87813);const Ui=()=>{var e,t;const a=(0,P.zy)(),s=(0,P.Zp)(),n=null===(e=a.state)||void 0===e?void 0:e.machineId,r=null===(t=a.state)||void 0===t?void 0:t.machineType,{taskList:d,getLineManpowerlist:c,postLineManpowerlist:u}=(0,Cs.A)(),[m,h]=(0,y.useState)([]),[p,x]=(0,y.useState)(),[g,w]=(0,y.useState)(0),[v,f]=(0,y.useState)(!0),[j,A]=(0,y.useState)(!1),[S,b]=(0,y.useState)(0),[_,C]=(0,y.useState)({name:"",metadata:{}}),[N,k]=(0,y.useState)({});(0,y.useEffect)((()=>{E()}),[]);const E=async()=>{x("fetch");let e=await c(n);console.log("getLineManpowerlist res",e);const t=null===e||void 0===e?void 0:e.latest.reduce(((e,t)=>(e[t.substation]=t.operator_name,e)),{}),a=null===e||void 0===e?void 0:e.stations.map((e=>({...e,operator_name:t[e.substation]||""})));x(!1),h(a)},I=[{id:1,title:(0,pe.t)("stationName"),render:e=>(0,V.jsx)(l.A,{sx:{cursor:"pointer",fontWeight:"bold"},children:e.substation})},{id:2,title:(0,pe.t)("operatorName"),render:e=>(0,V.jsx)("input",{type:"text",value:e.operator_name,onChange:t=>T(t,e.substation)})}],T=(e,t)=>{const{value:a}=e.target;console.log("e.target.value",a),console.log("substation",t),h((e=>e.map((e=>e.substation===t?{...e,operator_name:a}:e))))};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,V.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:2,alignItems:"center"},children:[(0,V.jsx)(o.A,{onClick:()=>s(-1),children:(0,V.jsx)(oa.A,{})}),(0,V.jsxs)("h1",{className:"mt-4",children:[r," ",(0,pe.t)("manpowerList")," "]})]}),(0,V.jsx)(i.A,{children:(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{(async()=>{let e={record:m},t=await u(n,e);console.log("postLineManpowerlist res",t),"Success"===(null===t||void 0===t?void 0:t.message)&&s("/job",{state:n})})(),console.log("users",m)},children:(0,V.jsx)(l.A,{color:Q.lm.TEXT_GRAY,children:"Next"})})})]}),(0,V.jsx)($.A,{columns:I,rows:m,rowsPerPage:10,loading:"fetch"===p,titleCellClasses:"c-gray fw-700",page:S,setPage:b,serialize:!0,total:g}),(0,V.jsx)(i.A,{direction:"row",alignItems:"center",justifyContent:"center",mt:2,mb:1})]})},zi=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{matrixList:async e=>{const a=new M.Ay,s=await a.get(`monitoring/downtime-matrix/${e}/`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`teams/areas/?page=${e}&page_size=10`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},assetList:async function(){const e=new M.Ay,a=await e.get("asset/all-assets/?page=1&page_size=100",{},t,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post("teams/areas/",e,t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data},update:async(e,a)=>{const s=new M.Ay,n=await s.put(`teams/area/${e}/`,a,t,(e=>(0,L.So)(e,null)));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`teams/area/${e}/`,t,(e=>(0,L.So)(e,null,"Deleted!")));return null===s||void 0===s?void 0:s.data},getDetail:async e=>{const a=new M.Ay,s=await a.get(`teams/area/${e}/`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]}}};var Fi=a(60704);const Hi=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d,selectedOptions:c,setSelectedOptions:u}=e;const{listByUserName:m}=F(),[h,p]=(0,y.useState)([]),[x,g]=(0,y.useState)(!1),w=[{title:(0,pe.t)("areaName"),placeholder:(0,pe.t)("enterAreaName"),type:Q.wN.INPUT,name:"area_name",validator:Q.wY.REQUIRED},{title:(0,pe.t)("description"),placeholder:(0,pe.t)("enterDescription"),type:Q.wN.INPUT,name:"description",validator:Q.wY.REQUIRED}],[v,f]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",children:[!0===d?(0,pe.t)("editTeam"):(0,pe.t)("addTeam")," "]}),(0,V.jsxs)(i.A,{children:[(0,V.jsx)(B.A,{data:s,errors:v,onChange:e=>{const{name:t,value:a}=e.target;f((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:w,kk:!0}),(0,V.jsxs)(i.A,{sx:{width:"100%",flexDirection:"row",position:"relative",py:1},children:[(0,V.jsx)(l.A,{sx:{width:"150px"},children:(0,pe.t)("supervisors")}),(0,V.jsx)(Fi.A,{sx:{width:"510px"},multiple:!0,options:h.filter((e=>!c.some((t=>t.id===e.id)))),getOptionLabel:e=>e.label||"",value:c,onChange:(e,t)=>{u(t),g(!1)},filterSelectedOptions:!0,renderInput:e=>(0,V.jsx)(Rs.A,{sx:{borderRadius:6,borderColor:"#eee",borderWidth:1,minHeight:40,maxHeight:"auto"},...e,onChange:e=>{const t=e.target.value;t.trim()&&(async e=>{const t=await m(e||"admin");if(console.log("assets list",t),Array.isArray(t)){const e=t.map((e=>({label:e.username||e.fullname||"Unknown",id:e.id})));p(e)}else console.error("Expected _list to be an array, but got:",t)})(t)},placeholder:(0,pe.t)("selectSupervisor"),error:x,helperText:x?(0,pe.t)("this Field is required"):""}),renderTags:(e,t)=>e.map(((e,a)=>(0,V.jsx)(se.A,{label:e.label,...t({index:a}),sx:{height:"24px",fontSize:"0.75rem",margin:"1px","& .css-i4bv87-MuiSvgIcon-root":{border:"none!important"}}})))})]})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{const e=(0,Y.bG)(w,s);f(e),0===c.length?g(!0):g(!1),e.size||0===c.length||await r()},loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})},qi=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,modalOpen:o,loading:d,edit:c,tab:u,rowItem:m}=e;const{t:h,i18n:p}=(0,j.Bd)(),{getMenu:x,postMenu:g,getMachines:w,postMachine:v}=(0,Ie.A)(),{list:A,create:S,update:b,remove:_,assetList:C,getDetail:N}=zi(),{listByAadhar2:k,listByAadhar:E}=F(),I=(0,f.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.TEAM_ITEM)||void 0===t?void 0:t.data})),[T,D]=(0,y.useState)([]),[R,P]=(0,y.useState)([]);(0,y.useEffect)((()=>{"UserManage"===o&&null!==I&&void 0!==I&&I.id&&(async()=>{console.log("userData---",null===I||void 0===I?void 0:I.id),D((null===I||void 0===I?void 0:I.users)||[]),console.log("getMachines item---getDetail--\x3e>>",null===I||void 0===I?void 0:I.users)})()}),[o,null===I||void 0===I?void 0:I.id]);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",style:{textTransform:"capitalize"},children:[null===I||void 0===I?void 0:I.name," Team Users"]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:1,gap:1,height:400},children:[(0,V.jsx)(i.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:Q.lm.LG_GRAY_2,p:1,overflow:"scroll",scrollbarWidth:"none"},children:T.map(((e,t)=>(0,V.jsxs)(i.A,{sx:{flexDirection:"row",backgroundColor:Q.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,V.jsxs)(l.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e.username]},e.name),(0,V.jsx)(Ce.A,{fontSize:"small",sx:{color:Q.lm.DARK_RED,m:.2,cursor:"pointer"},onClick:()=>{return t=e,void D((e=>e.filter((e=>e!==t))));var t}})]},t)))}),(0,V.jsxs)(i.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:Q.lm.LG_GRAY_2,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,V.jsx)("input",{placeholder:"Search by Aadhar Number",style:{borderRadius:5,borderColor:Q.lm.LG_GRAY_2,borderWidth:1,padding:10,marginBottom:5},onChange:e=>(async e=>{let t=await E(e);console.log("getLineManpowerlist res",t),P(t)})(e.target.value)}),R.map(((e,t)=>(0,V.jsxs)(i.A,{sx:{flexDirection:"row",backgroundColor:Q.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,V.jsxs)(l.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". op_",e.aadhar_number]},e.name),(0,V.jsx)(je.A,{fontSize:"small",sx:{color:Q.lm.DARK_GREEN,m:.2,cursor:"pointer"},onClick:()=>(async e=>{console.log("machine val",e);let t={id:e.user.id,username:`op_${e.aadhar_number}`};T.some((e=>e.id===t.id))?O.oR.warn("Operator already in the list"):D((e=>[...e,t]))})(e)})]},t)))]})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:1,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:h("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>(async()=>{let e={name:null===I||void 0===I?void 0:I.name,users:T.map((e=>e.id))};await b(null===I||void 0===I?void 0:I.id,e),console.log("res----menu items",e),await a()})(),loading:d,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:h("submit")})})]})]})};var Gi=a(5791);const Bi=()=>{(0,P.Zp)();const e=(0,f.wA)(),[t,a]=(0,y.useState)([]),[s,n]=(0,y.useState)(),[r,d]=(0,y.useState)(0),[c,u]=(0,y.useState)(!1),[m,h]=(0,y.useState)(!1),[p,x]=(0,y.useState)(0),[g,w]=(0,y.useState)({id:"",area_name:"",description:"",supervisor:[]}),[v,j]=(0,y.useState)([]),[A,S]=(0,y.useState)([]),{list:b,create:_,update:C,remove:N,assetList:k}=zi(),{superUsers:E}=F(),[I,T]=(0,y.useState)([]),[D,R]=(0,y.useState)("");(0,y.useEffect)((()=>{O()}),[p]),(0,y.useEffect)((()=>{L()}),[]);const O=async()=>{n("fetch");const[e]=await b(p+1);a(e.results),d(e.count),n(!1)},L=async()=>{n("fetch");const[e]=await E(p+1);console.log("assets linst",e);const t=e.results.map((e=>({value:e.username,key:e.id})));T((e=>[...e,...t]))},M=async()=>{const e={...g},t={name:e.area_name,description:e.description,supervisors:v.map((e=>e.id))};n("fetch");let a=await _(t);w({}),h(!1),await O(),console.log("creat res----",a)},U=[{id:1,title:(0,pe.t)("areaName"),render:e=>(0,V.jsx)(l.A,{sx:{cursor:"pointer",textTransform:"capitalize"},children:e.name})},{id:2,title:(0,pe.t)("description"),render:e=>(0,V.jsx)(l.A,{children:e.description})},{id:4,title:(0,pe.t)("supervisors"),render:e=>(0,V.jsx)(i.A,{children:e.supervisors.map((e=>(0,V.jsx)(l.A,{children:e.username},e.id)))})},{id:5,title:(0,pe.t)("action"),render:t=>(0,V.jsxs)(i.A,{flexDirection:"row",gap:2,children:[(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{z(t)},children:(0,V.jsx)(te.A,{color:"primary",fontSize:"small"})}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>{e((0,Gi.X)(t)),h("UserManage")},children:(0,pe.t)("addOperator")}),(0,V.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{n("fetch"),await N(e),x(0),await O()})(null===t||void 0===t?void 0:t.id),children:(0,V.jsx)(ee.A,{color:"error",fontSize:"small"})})]})}],z=e=>{console.log("defect rowdata",e);const{id:t,name:a,description:s,supervisors:n}=e;if(Array.isArray(n)){const e=n.map((e=>({label:e.username||e.fullname||"Unknown",id:e.id})));j(e)}w((e=>({...e,id:t,area_name:a,description:s,supervisor:n.map((e=>e.id))}))),u(!0),h("add"),console.log("----------rowData",g)},q=async()=>{const e={...g};console.log("payload",e);const t={name:e.area_name,description:e.description,supervisors:e.supervisor};console.log("creat res----",t),n("fetch");await C(g.id,t);x(0),w({}),h(!1),await O()};return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("teamMaster")}),(0,V.jsx)(i.A,{sx:{flexDirection:"row",gap:1},children:(0,V.jsx)(H.A,{color:"gray",onClick:()=>{w((e=>({...e,type:"false"}))),h("add")},loading:s,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("addTeamMaster")})})})]}),(0,V.jsx)($.A,{columns:U,rows:t,rowsPerPage:10,loading:"fetch"===s,titleCellClasses:"c-gray fw-700",page:p,setPage:x,paginator:!0,serialize:!0,total:r}),(0,V.jsx)(Hi,{open:"add"===m,onClose:()=>{h(!1),u(!1),w({})},data:g,edit:c,setData:w,onSubmit:!0===c?q:M,assetsList:I,setSelectedOptions:j,selectedOptions:v}),(0,V.jsx)(qi,{open:"UserManage"===m,onClose:()=>{h(!1),u(!1),w({})},data:g,edit:c,setData:w,onSubmit:!0===c?q:M,assetsList:I,rowItem:D,modalOpen:m})]})},Qi=()=>{const{token:e}=(0,f.d4)((e=>e[z.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":M.yw.APPLICATION_JSON};return{areaList:async e=>{const a=new M.Ay,s=await a.get("teams/supervisors-areas/",{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},performanceList:async e=>{const a=new M.Ay,s=await a.get(`teams/performance-cards/${e}/`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new M.Ay,s=await a.get(`teams/areas/?page=${e}&page_size=10`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},assetList:async function(){const e=new M.Ay,a=await e.get("asset/all-assets/?page=1&page_size=100",{},t,L.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new M.Ay,s=await a.post("teams/areas/",e,t,(e=>(0,L.So)(e,null)));return null===s||void 0===s?void 0:s.data},update:async(e,a)=>{const s=new M.Ay,n=await s.put(`teams/area/${e}/`,a,t,(e=>(0,L.So)(e,null)));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new M.Ay,s=await a.delete(`teams/area/${e}/`,t,(e=>(0,L.So)(e,null,"Deleted!")));return null===s||void 0===s?void 0:s.data},getDetail:async e=>{const a=new M.Ay,s=await a.get(`teams/area/${e}/`,{},t,L.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]}}},Yi=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d,assetsList:c}=e;console.log("downtimeedit data",s);const u=[{title:(0,pe.t)("areaName"),placeholder:(0,pe.t)("enterAreaName"),type:Q.wN.INPUT,name:"area_name",validator:Q.wY.REQUIRED},{title:(0,pe.t)("description"),placeholder:(0,pe.t)("enterDescription"),type:Q.wN.INPUT,name:"description",validator:Q.wY.REQUIRED},{title:(0,pe.t)("supervisor"),placeholder:(0,pe.t)("selectSupervisor"),type:Q.wN.SELECT,name:"supervisor",multi:!0,validator:Q.wY.REQUIRED,keyValues:c}],[m,h]=(0,y.useState)(new Map);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",children:[!0===d?(0,pe.t)("editTeam"):(0,pe.t)("addTeam")," "]}),(0,V.jsx)(B.A,{data:s,errors:m,onChange:e=>{const{name:t,value:a}=e.target;h((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:u}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:(0,pe.t)("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:async()=>{const e=(0,Y.bG)(u,s);h(e),e.size||await r()},loading:o,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:(0,pe.t)("create")})})]})]})},Wi=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,modalOpen:o,loading:d,edit:c,tab:u,rowItem:m}=e;const{t:h,i18n:p}=(0,j.Bd)(),{getMenu:x,postMenu:g,getMachines:w,postMachine:v}=(0,Ie.A)(),{list:A,create:S,update:b,remove:_,assetList:C,getDetail:N}=zi(),{listByAadhar2:k,listByAadhar:E}=F(),I=(0,f.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.TEAM_ITEM)||void 0===t?void 0:t.data})),[T,D]=(0,y.useState)([]),[R,P]=(0,y.useState)([]);(0,y.useEffect)((()=>{"UserManage"===o&&null!==I&&void 0!==I&&I.id&&(async()=>{console.log("userData---",null===I||void 0===I?void 0:I.id),D((null===I||void 0===I?void 0:I.users)||[]),console.log("getMachines item---getDetail--\x3e>>",null===I||void 0===I?void 0:I.users)})()}),[o,null===I||void 0===I?void 0:I.id]);return(0,V.jsxs)(q.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:W.A,wrapperClasses:"px-6",children:[(0,V.jsxs)("h3",{className:"opacity-80",style:{textTransform:"capitalize"},children:[null===I||void 0===I?void 0:I.name," Team Users"]}),(0,V.jsxs)(i.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:1,gap:1,height:400},children:[(0,V.jsx)(i.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:Q.lm.LG_GRAY_2,p:1,overflow:"scroll",scrollbarWidth:"none"},children:T.map(((e,t)=>(0,V.jsxs)(i.A,{sx:{flexDirection:"row",backgroundColor:Q.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,V.jsxs)(l.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e.username]},e.name),(0,V.jsx)(Ce.A,{fontSize:"small",sx:{color:Q.lm.DARK_RED,m:.2,cursor:"pointer"},onClick:()=>{return t=e,void D((e=>e.filter((e=>e!==t))));var t}})]},t)))}),(0,V.jsxs)(i.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:Q.lm.LG_GRAY_2,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,V.jsx)("input",{placeholder:"Search by Aadhar Number",style:{borderRadius:5,borderColor:Q.lm.LG_GRAY_2,borderWidth:1,padding:10,marginBottom:5},onChange:e=>(async e=>{let t=await E(e);console.log("getLineManpowerlist res",t),P(t)})(e.target.value)}),R.map(((e,t)=>(0,V.jsxs)(i.A,{sx:{flexDirection:"row",backgroundColor:Q.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,V.jsxs)(l.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". op_",e.aadhar_number]},e.name),(0,V.jsx)(je.A,{fontSize:"small",sx:{color:Q.lm.DARK_GREEN,m:.2,cursor:"pointer"},onClick:()=>(async e=>{console.log("machine val",e);let t={id:e.user.id,username:`op_${e.aadhar_number}`};T.some((e=>e.id===t.id))?O.oR.warn("Operator already in the list"):D((e=>[...e,t]))})(e)})]},t)))]})]}),(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:1,mb:1,children:[(0,V.jsx)(H.A,{bordered:!0,gray:!0,onClick:a,children:h("cancel")}),(0,V.jsx)(H.A,{color:"light_green",onClick:()=>(async()=>{let e={name:null===I||void 0===I?void 0:I.name,users:T.map((e=>e.id))};await b(null===I||void 0===I?void 0:I.id,e),console.log("res----menu items",e),await a()})(),loading:d,children:(0,V.jsx)(l.A,{className:"fw-20-500-24",children:h("submit")})})]})]})},Vi=()=>{(0,P.Zp)();const e=(0,f.wA)(),[t,a]=(0,y.useState)([]),[s,n]=(0,y.useState)(),[r,o]=(0,y.useState)(0),[d,c]=(0,y.useState)(!1),[u,m]=(0,y.useState)(!1),[h,p]=(0,y.useState)(0),[x,g]=(0,y.useState)({id:"",area_name:"",description:"",supervisor:[]}),[w,v]=(0,y.useState)(0),[j,A]=(0,y.useState)([]),{list:S,create:b,update:_,remove:C,assetList:N,areaList:k,performanceList:E}=Qi(),{superUsers:I}=F(),[T,D]=(0,y.useState)(new Map),[R,O]=(0,y.useState)([]),[L,M]=(0,y.useState)(""),[U,z]=(0,y.useState)([]),[q,G]=(0,y.useState)([]);(0,y.useEffect)((()=>{Y()}),[h]);const Y=async()=>{var e;n("fetch");const[t]=await k(h+1);console.log("area list",t),a(t),g((e=>{var a;return{...e,stations:(null===(a=t[0])||void 0===a?void 0:a.id)||""}})),z(t[0]);const s=t.map((e=>({value:e.name,key:e.id})));O((e=>[...e,...s])),W(null===(e=t[0])||void 0===e?void 0:e.id),n(!1)},W=async e=>{n("fetch");const[t]=await E(e);console.log("performance list",t)},X=async()=>{const e={...x},t={name:e.area_name,description:e.description,supervisors:e.supervisor};n("fetch");let a=await b(t);g({}),m(!1),await Y(),console.log("creat res----",a)},Z=[{id:1,title:(0,pe.t)("areaName"),render:e=>(0,V.jsx)(l.A,{sx:{cursor:"pointer",textTransform:"capitalize"},children:e.username})},{id:2,title:(0,pe.t)("fullname"),render:e=>(0,V.jsx)(l.A,{children:e.fullname})},{id:5,title:(0,pe.t)("action"),render:t=>(0,V.jsx)(i.A,{flexDirection:"row",gap:2,children:(0,V.jsx)(H.A,{color:t.status?"RADIAL_RED":"light_green",onClick:()=>{e((0,Gi.X)(t)),m("UserManage")},children:t.status?(0,pe.t)("inactive"):(0,pe.t)("active")})})}],ee=[{id:1,title:(0,pe.t)("areaName"),render:e=>(0,V.jsx)(l.A,{sx:{cursor:"pointer",textTransform:"capitalize"},children:e.username})},{id:2,title:(0,pe.t)("fullname"),render:e=>(0,V.jsx)(l.A,{children:e.fullname})},{id:5,title:(0,pe.t)("action"),render:t=>(0,V.jsx)(i.A,{flexDirection:"row",gap:2,children:(0,V.jsx)(H.A,{color:t.status?"RADIAL_RED":"light_green",onClick:()=>{e((0,Gi.X)(t)),m("UserManage")},children:t.status?(0,pe.t)("inactive"):(0,pe.t)("active")})})}],te=async()=>{const e={...x};console.log("payload",e);const t={name:e.area_name,description:e.description,supervisors:e.supervisor};console.log("creat res----",t),n("fetch");await _(x.id,t);p(0),g({}),m(!1),await Y()},ae=[{placeholder:(0,pe.t)("selectArea"),type:Q.wN.SELECT,name:"stations",validator:Q.wY.REQUIRED,keyValues:R}];return(0,V.jsxs)("div",{className:"mx-3 my-2",children:[(0,V.jsxs)("div",{className:"flex items-center justify-between",children:[(0,V.jsx)(l.A,{className:"fw-20-500-36",children:(0,pe.t)("teamDashboard")}),(0,V.jsx)(i.A,{sx:{mb:1},children:(0,V.jsx)(B.A,{data:x,errors:T,onChange:e=>{z(t.filter((t=>t.id===e.target.value))[0]);const{name:a,value:s}=e.target;D((e=>(e.delete(a),e))),g((e=>({...e,[a]:s}))),setTimeout((()=>{console.log("data",x)}),2e3),console.log("data",x)},schema:ae})})]}),(0,V.jsx)(J.A,{value:w,onChange:(e,t)=>{v(t),p(0)},className:"mb-2 fw-500",children:[(0,pe.t)("operatorList"),(0,pe.t)("operatorsPerformance")].map(((e,t)=>(0,V.jsx)(K.A,{label:e,className:"fw-500",value:t})))}),0===w?(0,V.jsx)($.A,{columns:Z,rows:null===U||void 0===U?void 0:U.users,rowsPerPage:10,loading:"fetch"===s,titleCellClasses:"c-gray fw-700",page:h,setPage:p,serialize:!0,total:r}):(0,V.jsx)($.A,{columns:ee,rows:q,rowsPerPage:10,loading:"fetch"===s,titleCellClasses:"c-gray fw-700",page:h,setPage:p,serialize:!0,total:r}),(0,V.jsx)(Yi,{open:"add"===u,onClose:()=>{m(!1),c(!1),g({})},data:x,edit:d,setData:g,onSubmit:!0===d?te:X,assetsList:R}),(0,V.jsx)(Wi,{open:"UserManage"===u,onClose:()=>{m(!1),c(!1),g({})},data:x,edit:d,setData:g,onSubmit:!0===d?te:X,assetsList:R,rowItem:L,modalOpen:u})]})},Xi=()=>{var e,t;const a=(0,f.wA)(),[s,n]=(0,y.useState)(!1),i=(0,f.d4)((e=>e[z.X.AUTH])),[l,r]=(null===i||void 0===i||null===(e=i.user)||void 0===e||null===(t=e.data)||void 0===t||t.role,(0,y.useState)(new Set));(0,y.useEffect)((()=>{const e=localStorage.getItem("menu");if(e){const t=JSON.parse(e);r(new Set(t))}(0,L.A)(a,i),n(!0)}),[a,i]);const o=[{name:"Material Master",path:"/material-master",element:(0,V.jsx)(Tn,{})},{name:"Material Master",path:"/material-packet-detail",element:(0,V.jsx)(Pn,{})},{name:"Material Movement",path:"/store-material-movement",element:(0,V.jsx)(un,{})},{name:"Pending Items",path:"/store-pending-orders",element:(0,V.jsx)(Ea,{})},{name:"Pending Items",path:"/store-pending-items",element:(0,V.jsx)(Na,{})},{name:"Failure Reasons",path:"/material-planner/addfailureReasonPage",element:(0,V.jsx)(Za,{})},{name:"Store",path:"/material-planner",element:(0,V.jsx)(Wa,{})},{name:"test result",path:"/test-users",element:(0,V.jsx)(ra,{})},{name:"performance",path:"/report",element:(0,V.jsx)(Kt,{})},{name:"plan training",path:"/plan-training",element:(0,V.jsx)(Xt,{})},{name:"test portal",path:"/test-portal",element:(0,V.jsx)(Yt,{})},{name:"skill matrix",path:"/skill-matrix",element:(0,V.jsx)(Qt,{})},{name:"test master",path:"/test-upload",element:(0,V.jsx)(mt,{})},{name:"skill page",path:"/skill-page",element:(0,V.jsx)(wt,{})},{name:"question bank",path:"/question-bank",element:(0,V.jsx)(yt,{})},{name:"groups",path:"/group",element:(0,V.jsx)(qe,{})},{name:"users",path:"/users",element:(0,V.jsx)($e,{})},{name:"test portal",path:"/test",element:(0,V.jsx)(rt,{})},{name:"test portal",path:"/TestDetail",element:(0,V.jsx)(Je,{})},{name:"test result",path:"/result-page",element:(0,V.jsx)(da,{})},{name:"Machine Monitoring",path:"/machine-monitoring",element:(0,V.jsx)(ya,{})},{name:"Machine Monitoring",path:"/child-machine",element:(0,V.jsx)(ba,{})},{name:"Machine Monitoring",path:"/machines",element:(0,V.jsx)(Un,{})},{name:"Machine Monitoring",path:"/packet-detail-page",element:(0,V.jsx)(pi,{})},{name:"Notification",path:"/notification",element:(0,V.jsx)(xi,{})},{name:"Tenant Master",path:"/tenant-master",element:(0,V.jsx)(fi,{})},{name:"Tenant Master",path:"/tenant-Users",element:(0,V.jsx)(_i,{})},{name:"Asset Master",path:"/company-master",element:(0,V.jsx)(qn,{})},{name:"Asset Master",path:"/plantpage",element:(0,V.jsx)(ti,{})},{name:"Asset Master",path:"/divisionpage",element:(0,V.jsx)(ni,{})},{name:"Asset Master",path:"/line",element:(0,V.jsx)(ri,{})},{name:"Asset Master",path:"/asset",element:(0,V.jsx)(ci,{})},{name:"Shift Master",path:"/shift-master",element:(0,V.jsx)(Vn,{})},{name:"Downtime Master",path:"/downtime-master",element:(0,V.jsx)(Bn,{})},{name:"Downtime",path:"/downtime-packet",element:(0,V.jsx)(wi,{})},{name:"Planning",path:"/planning-material",element:(0,V.jsx)(ys,{})},{name:"Planning",path:"/planning-material-plan",element:(0,V.jsx)(js,{})},{name:"Planning",path:"/planning-lpc-material",element:(0,V.jsx)(Ss,{})},{name:"Planning",path:"/planning-assembly-material",element:(0,V.jsx)(bs,{})},{name:"Operator Portal",path:"/machine-scan",element:(0,V.jsx)(Ns,{})},{name:"Operator Portal",path:"/job",element:(0,V.jsx)(qs,{})},{name:"Operator Portal",path:"/myjob",element:(0,V.jsx)(Ws,{})},{name:"Operator Portal",path:"/job-material-scan",element:(0,V.jsx)(Ks,{})},{name:"Operator Portal",path:"/lpc-scan",element:(0,V.jsx)(en,{})},{name:"Operator Portal",path:"/job-assembly-scan",element:(0,V.jsx)(tn,{})},{name:"Operator Portal",path:"/machine-data",element:(0,V.jsx)(Ys,{})},{name:"Operator Portal",path:"/lpc-machine-data",element:(0,V.jsx)(an,{})},{name:"Operator Portal",path:"/assembly-machine-data",element:(0,V.jsx)(Di,{})},{name:"Downtime Master",path:"/defect-master",element:(0,V.jsx)(Jn,{})},{name:"Red Bin",path:"/red-bin",element:(0,V.jsx)(ki,{})},{name:"Red Bin",path:"/red-bin-rework",element:(0,V.jsx)(Ei,{})},{name:"Red Bin Master",path:"/red-bin-master",element:(0,V.jsx)(Pi,{})},{name:"Circuit Board",path:"/circuit-board",element:(0,V.jsx)($i,{})},{name:"Dock Station",path:"/dock-station-board",element:(0,V.jsx)(Mi,{})},{name:"Team Master",path:"/team-master",element:(0,V.jsx)(Bi,{})},{name:"Team Dashboard",path:"/team-dashboard",element:(0,V.jsx)(Vi,{})},{path:"/error",element:(0,V.jsx)(Le,{})}],d=[{path:"/HorizontalStackedBarChart",element:(0,V.jsx)(ja,{})},{path:"/profile",element:(0,V.jsx)(Ye,{})},{path:"/change-password",element:(0,V.jsx)(na,{})},{path:"/change-language",element:(0,V.jsx)(ia,{})},{path:"/material-planner-plan",element:(0,V.jsx)(ts,{})},{path:"/material-planner-plan/scanning",element:(0,V.jsx)(xs,{})},{path:"/manpower",element:(0,V.jsx)(Ui,{})},{path:"/team-master",element:(0,V.jsx)(Bi,{})},{path:"/team-dashboard",element:(0,V.jsx)(Vi,{})},{path:"/acc-circuit-master",element:(0,V.jsx)(xn,{})},{path:"/lpc-circuit-master",element:(0,V.jsx)(vn,{})},{path:"/lpc-stage-master",element:(0,V.jsx)(Sn,{})},{path:"/material-mapping",element:(0,V.jsx)(Mn,{})},{path:"/locaton-master",element:(0,V.jsx)(Nn,{})},{path:"/traceablity",element:(0,V.jsx)(nn,{})},{path:"/product-details",element:(0,V.jsx)(rn,{})},{path:"/open-issues",element:(0,V.jsx)(Is,{})},{path:"/add-issue",element:(0,V.jsx)(zs,{})}],c=o.map((e=>l.has(e.name)?e:{...e,element:(0,V.jsx)(Le,{})}));return s?(0,V.jsxs)(P.BV,{children:[c.map((e=>{let{path:t,element:a}=e;return(0,V.jsx)(P.qh,{element:a,path:t},t)})),d.map((e=>{let{path:t,element:a}=e;return(0,V.jsx)(P.qh,{element:a,path:t},t)}))]}):null};var Zi=a(53042),Ji=a(52177),Ki=a(64717),el=a(63235),tl=a(37991),al=a(92429),sl=a(1006),nl=a(16472);const il=parseInt(localStorage.getItem("draweWidth")),ll=(0,R.A)(s.Ay,{shouldForwardProp:e=>"open"!==e})((e=>{let{open:t}=e;return{width:il,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...t&&{width:il,overflowX:"hidden","& .MuiDrawer-paper":{width:il,overflowX:"hidden",backgroundColor:Q.lm.BG_GRAY}},...!t&&{overflowX:"hidden",width:"35px","& .MuiDrawer-paper":{backgroundColor:Q.lm.BG_GRAY,overflowX:"hidden",width:"35px"}}}})),rl=()=>{const e=localStorage.getItem("t_token"),{t:t,i18n:a}=(0,j.Bd)(),[s,R]=(0,y.useState)([]),$=((0,f.d4)((e=>e[z.X.AUTH])),(0,f.d4)((e=>{var t;return null===(t=e[z.X.AUTH].user)||void 0===t?void 0:t.data}))),{logout:L,profile2:M}=(0,Ie.A)(),[U,F]=(0,y.useState)(!0),H=(0,P.Zp)(),{pathname:q}=(0,P.zy)(),G=()=>F((e=>!e)),[B,Y]=(0,y.useState)(null),W=Boolean(B),[X,Z]=(0,y.useState)([{groupName:"User Management",title:t("userManagement"),icon:tl.A,path:"/users",items:[]},{groupName:"Training Master",title:t("trainingMaster"),icon:D.A,path:"/training",items:[]},{groupName:"Store Master",title:t("storeMaster"),icon:I.A,path:"/material-planner",items:[]},{groupName:"Monitoring",title:t("monitoring"),icon:Zi.A,path:"/monitoring",items:[]},{groupName:"Orders",title:t("orders"),icon:al.A,path:"/operator",items:[]},{groupName:"Setting",title:t("setting"),icon:b.A,path:"/setting",items:[]}]),J=[{name:"Tenant Master",title:t("tenantMaster"),path:"/tenant-master",groupName:"User Management"},{name:"users",title:t("users"),path:"/users",groupName:"User Management"},{name:"groups",title:t("groups"),path:"/group",groupName:"User Management"},{name:"skill matrix",title:t("skillMatrix"),path:"/skill-matrix",groupName:"Training Master"},{name:"plan training",title:t("planTraining"),path:"/plan-training",groupName:"Training Master"},{name:"skill page",title:t("skillPage"),path:"/skill-page",groupName:"Training Master"},{name:"performance",title:t("performance"),path:"/report",groupName:"Training Master"},{name:"test portal",title:t("testPortal"),path:"/test-portal",groupName:"Training Master"},{name:"question bank",title:t("questionBank"),path:"/question-bank",groupName:"Training Master"},{name:"test master",title:t("testMaster"),path:"/test-upload",groupName:"Training Master"},{name:"test result",title:t("testResult"),path:"/test-users",groupName:"Training Master"},{name:"Store",title:t("store"),path:"/material-planner",groupName:"Store Master"},{name:"Pending Items",title:t("pendingItems"),icon:_.A,path:"/store-pending-orders",groupName:"Store Master"},{name:"Failure Reasons",title:t("failureReasons"),icon:D.A,path:"/material-planner/addfailureReasonPage",groupName:"Store Master"},{name:"Material Movement",title:t("materialMovement"),path:"/store-material-movement",groupName:"Store Master"},{name:"Material Master",title:t("materialMaster"),path:"/material-master",groupName:"Store Master"},{name:"Failure Reasons",title:"ACC Circuit",path:"/acc-circuit-master"},{name:"Failure Reasons",title:"LPC Circuit",path:"/lpc-circuit-master"},{name:"Failure Reasons",title:"LPC Stage",path:"/lpc-stage-master"},{name:"Machine Monitoring",title:t("liveView"),path:"/machine-monitoring",groupName:"Monitoring"},{name:"Asset Master",title:t("assetMaster"),path:"/company-master",groupName:"Setting"},{name:"Shift Master",title:t("shiftMaster"),path:"/shift-master",groupName:"Setting"},{name:"Downtime Master",title:t("downtimeMaster"),path:"/downtime-master",groupName:"Setting"},{name:"Defect Master",title:t("defectMaster"),path:"/defect-master",groupName:"Setting"},{name:"Downtime",title:t("downtime"),path:"/downtime-packet",groupName:"Monitoring"},{name:"Notification",title:t("notification"),path:"/notification",groupName:"Setting"},{name:"Red Bin Master",title:t("redBinMaster"),path:"/red-bin-master",groupName:"Setting"},{name:"Planning",title:t("planning"),path:"/planning-material",groupName:"Orders"},{name:"Operator Portal",title:t("operatorPortal"),path:"/machine-scan",groupName:"Orders"},{name:"Circuit Board",title:t("Circuit Board"),path:"/circuit-board",groupName:"Orders"},{name:"Red Bin",title:t("redBin"),path:"/red-bin",groupName:"Orders"},{name:"Dock Station",title:t("dockStation"),path:"/dock-station-board",groupName:"Orders"},{name:"Team Master",title:t("Team Master"),path:"/team-master",groupName:"Setting"},{name:"Team Dashboard",title:t("Team Dashboard"),path:"/team-dashboard",groupName:"Training Master"}];t("users"),C.A,t("userList"),t("userRoles"),t("reports"),D.A;(0,y.useEffect)((()=>{if(e){const e=localStorage.getItem("menu"),t=JSON.parse(e);if(null!==t){const e=J.filter((e=>t.some((t=>t===e.name))));R(e);const a=X.map((t=>({...t,items:e.filter((e=>e.groupName===t.groupName))})));Z(a),console.log("Updated Grouped Menu:",a)}}else O.oR.error("Please login!"),H("/")}),[e,H]);const K=()=>{Y(null)},[ee,te]=(0,y.useState)(localStorage.getItem("openTitle")||""),[ae,se]=(0,y.useState)((()=>{const e=localStorage.getItem("setMenu");return e?JSON.parse(e):{}}));return(0,y.useEffect)((()=>{localStorage.setItem("setMenu",JSON.stringify(ae))}),[ae]),(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(n.A,{variant:"outlined",sx:{zIndex:e=>e.zIndex.drawer+1,width:"100%",position:"fixed",backgroundColor:Q.lm.WHITE},children:(0,V.jsxs)(i.A,{sx:{flexDirection:"row",px:1,py:.5,justifyContent:"space-between"},children:[(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:2,alignItems:"center"},children:[(0,V.jsx)("img",{src:sl,width:"80px",height:"43px",style:{objectFit:"contain"}}),(0,V.jsx)("img",{src:Dt,width:"180px",height:"45px",style:{objectFit:"contain"}})]}),0!==il&&(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:2,justifyContent:"flex-end",alignItems:"center"},children:[(0,V.jsxs)(l.A,{className:"fw-14",sx:{width:"100%",pr:2,mt:1,color:Q.lm.TEXT_GRAY},children:[t("welcome")," ",(null===$||void 0===$?void 0:$.name)||(null===$||void 0===$?void 0:$.username)]}),(0,V.jsx)(r.A,{sx:{maxWidth:`calc(100vw - ${U?180:50}px)`},disableGutters:!0,className:"h-50 minh-50",children:(0,V.jsxs)(i.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,V.jsx)(o.A,{id:"basic-button","aria-controls":W?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":W?"true":void 0,onClick:e=>{console.log("popup",e.currentTarget),Y(e.currentTarget)},children:(0,V.jsx)(el.A,{fontSize:"large"})}),(0,V.jsxs)(d.A,{id:"basic-menu",anchorEl:B,open:W,onClose:K,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,V.jsxs)(c.A,{sx:{py:0},onClick:()=>{K()},children:[(0,V.jsx)(u.A,{children:(0,V.jsx)(Ji.A,{fontSize:"small"})}),(0,V.jsx)(m.A,{children:null===$||void 0===$?void 0:$.username})]}),(0,V.jsx)(v.A,{}),(0,V.jsxs)(c.A,{sx:{py:0},onClick:()=>{K()},children:[(0,V.jsx)(u.A,{children:(0,V.jsx)(T.A,{fontSize:"small"})}),(0,V.jsx)(m.A,{children:null===$||void 0===$?void 0:$.email})]}),(0,V.jsx)(v.A,{}),(0,V.jsxs)(c.A,{sx:{py:0},onClick:()=>{K(),H("/change-password")},children:[(0,V.jsx)(u.A,{children:(0,V.jsx)(Ki.A,{fontSize:"small"})}),(0,V.jsx)(m.A,{children:t("changePassword")})]}),(0,V.jsx)(v.A,{}),(0,V.jsxs)(c.A,{sx:{py:0},onClick:()=>{K(),H("/change-language")},children:[(0,V.jsx)(u.A,{children:(0,V.jsx)(nl.A,{fontSize:"small"})}),(0,V.jsx)(m.A,{children:t("changeLanguage")})]}),(0,V.jsx)(v.A,{}),(0,V.jsxs)(c.A,{sx:{py:0},onClick:()=>{K(),L()},children:[(0,V.jsx)(u.A,{children:(0,V.jsx)(N.A,{fontSize:"small"})}),(0,V.jsx)(m.A,{children:t("logout")})]})]})]})})]})]})}),(0,V.jsx)(ll,{open:U,variant:"permanent",onClose:G,sx:{backgroundColor:Q.lm.BG_GRAY},children:(0,V.jsxs)(h.A,{sx:{width:il,backgroundColor:Q.lm.BG_GRAY,mt:6},role:"presentation",children:[(0,V.jsx)(o.A,{onClick:G,sx:{mt:.5},children:U?(0,V.jsx)(k.A,{}):(0,V.jsx)(E.A,{})}),(0,V.jsx)(p.A,{dense:!0,sx:{mt:-1},children:X.map((e=>e.items.length>0&&(0,V.jsxs)(y.Fragment,{children:[(0,V.jsx)(x.Ay,{sx:{px:.6},button:!0,onClick:()=>{return e.items?(t=e.groupName,void se((e=>{const a={...e,[t]:!e[t]};return console.log("---updatedMenus",a),localStorage.setItem("setMenu",JSON.stringify(a)),a}))):H(e.path);var t},children:(0,V.jsxs)(i.A,{sx:{flexDirection:"row",gap:.3,justifyContent:"space-between",width:"100%"},children:[(0,V.jsx)(u.A,{sx:{minWidth:26},children:(0,V.jsx)(g.A,{component:e.icon})}),U&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(m.A,{sx:{color:ae[e.groupName]?Q.lm.BLACK:Q.lm.TEXT_GRAY},primary:e.title}),e.items?ae[e.groupName]?(0,V.jsx)(A.A,{}):(0,V.jsx)(S.A,{}):null]})]})}),U&&(0,V.jsx)(i.A,{children:e.items&&(0,V.jsx)(w.A,{in:ae[e.groupName],timeout:"auto",unmountOnExit:!0,children:(0,V.jsx)(p.A,{component:"div",disablePadding:!0,children:e.items.map(((e,t)=>(0,V.jsx)(x.Ay,{button:!0,sx:{pl:4,backgroundColor:ee===e.name?Q.lm.WHITE:"none",transition:"background-color 0.3s ease, color 0.3s ease","&:hover":{backgroundColor:Q.lm.WHITE}},onClick:()=>{te(e.name),H(e.path),localStorage.setItem("openTitle",e.name)},children:(0,V.jsx)(m.A,{primary:e.title,sx:{my:0,color:ee===e.title?Q.lm.BLACK:Q.lm.TEXT_GRAY}})},e.title)))})})})]},e.groupName)))})]})}),(0,V.jsx)(h.A,{sx:{mt:8,position:"relative",left:U?il:"35px",overflow:"hidden"},children:(0,V.jsx)(h.A,{sx:{maxWidth:`calc(100vw - ${U?il:35}px)`},children:(0,V.jsx)(Xi,{})})})]})}},42634:()=>{}}]);
//# sourceMappingURL=442.39a33130.chunk.js.map