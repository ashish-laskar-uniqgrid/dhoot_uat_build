"use strict";(self.webpackChunktraceability=self.webpackChunktraceability||[]).push([[230],{3959:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ul});var n=a(4109),l=a(2314),s=a(7642),i=a(5865),o=a(7392),r=a(5263),c=a(378),d=a(2143),u=a(2050),h=a(8734),p=a(6446),m=a(5721),x=a(1322),g=a(5043),v=a(9336),y=a(3003),w=a(9237),A=a(9193),j=a(5084),f=a(9906),S=a(7402),b=a(6710),C=a(5374),N=a(5415),E=a(5459),k=a(5903),I=a(3216),_=a(1036),T=a(1806),D=a(3460),R=a(9652),O=a(7502),P=a(9650),U=a(4882),L=a(8076),F=a(207),H=a(9090),z=a(7423),M=a(8057),Q=a(8426),Y=a(6467),B=a(579);const G=e=>{let{rows:t=[],columns:a=[],minWidth:n=650,tableClasses:l="",titleCellClasses:i="",rowClassesMethod:o=(()=>{}),rowClasses:r="",rowCellClasses:c="",rowsPerPage:d=10,paginator:u=!1,loading:h,dense:p,hideBorder:m=!1,onRowClick:x=Function.prototype,onTableHeadCellClick:v=Function.prototype,handleFgCodeFilterInput:y=Function.prototype,handleOrderIdFilterInput:w=Function.prototype,handleOrderTypeFilterInput:A=Function.prototype,handleOrderStatusFilterInput:j=Function.prototype,serialize:f=!1,page:S=0,setPage:b=Function.prototype,total:C}=e;const[N,E]=(0,g.useState)(null),[k,I]=(0,g.useState)(null),[_,Q]=(0,g.useState)(null),[G,q]=(0,g.useState)(null);return(0,B.jsx)(P.A,{children:(0,B.jsxs)(T.A,{sx:{minWidth:n},className:"".concat(l),size:p&&"small",children:[(0,B.jsx)(U.A,{sx:{backgroundColor:Y.lm.BG_GRAY},children:(0,B.jsxs)(L.A,{children:[f&&(0,B.jsx)(R.A,{className:"".concat(i," text-nowrap h3"),sx:{color:"black"},children:"S No."}),a.map(((e,t)=>(0,B.jsxs)(R.A,{style:{width:e.width&&e.width,color:"black"},className:"".concat(i," text-nowrap"),children:[(0,B.jsx)("div",{onClick:()=>v(e.id),children:e.title}),"order_id"===e.id&&(0,B.jsx)("input",{type:"text",placeholder:"filter by order_id",value:N,onChange:e=>{console.log("Updated value: ".concat(e.target.value)),E(e.target.value),w(e.target.value)},style:{borderRadius:"0.35vw",border:"1px solid grey",padding:"0.25vw",width:"90%",fontSize:"0.8rem"}}),"fg_code"===e.id&&(0,B.jsx)("input",{type:"text",placeholder:"filter by ".concat(e.id),value:k,onChange:e=>{console.log("Updated value: ".concat(e.target.value)),I(e.target.value),y(e.target.value)},style:{borderRadius:"0.35vw",border:"1px solid grey",padding:"0.25vw",width:"90%"}}),"order_type"===e.id&&(0,B.jsxs)("select",{value:_,onChange:e=>{console.log("Updated value: ".concat(e.target.value)),Q(e.target.value),A(e.target.value)},style:{borderRadius:"0.35vw",border:"1px solid grey",padding:"0.25vw",width:"10vw"},children:[(0,B.jsx)("option",{value:"",children:"Select Order Type"}),(0,B.jsx)("option",{value:"ACC",children:"ACC"}),(0,B.jsx)("option",{value:"LPC",children:"LPC"}),(0,B.jsx)("option",{value:"ASSEMBLY",children:"ASSEMBLY"})]}),"status"===e.id&&(0,B.jsxs)("select",{value:G,onChange:e=>{console.log("Updated value: ".concat(e.target.value)),q(e.target.value),j(e.target.value)},style:{borderRadius:"0.35vw",border:"1px solid grey",padding:"0.25vw",width:"8vw"},children:[(0,B.jsx)("option",{value:"",children:"Select Status"}),(0,B.jsx)("option",{value:"PLAN",children:"PLAN"}),(0,B.jsx)("option",{value:"ISSUING",children:"ISSUING"}),(0,B.jsx)("option",{value:"RUNNING",children:"RUNNING"})]})]},t)))]})}),(0,B.jsx)(s.A,{sx:{p:.3}}),(0,B.jsx)(D.A,{children:h?(0,B.jsx)(L.A,{children:(0,B.jsx)(R.A,{colSpan:12,className:"flex h-300 text-center",children:(0,B.jsx)(z.A,{big:!0,blue:!0})})}):t&&t.length?t.map(((e,t)=>(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(L.A,{sx:{backgroundColor:Y.lm.LG_GRAY,["& .".concat(O.A.root)]:{borderBottom:m?"none":"true",mt:10},...o(t,e)},className:"".concat(r),onClick:()=>x(e.id),children:[f&&(0,B.jsx)(R.A,{sx:{color:"black"},className:"".concat(c," fw-500 "),align:"left",children:t+1}),a.map(((t,a)=>(0,B.jsx)(R.A,{sx:{width:t.width&&t.width,color:"black"},className:"".concat(c," fw-500"),align:"left",children:t.render(e)},a)))]},t),(0,B.jsx)(s.A,{sx:{p:.3}})]}))):(0,B.jsx)(L.A,{children:(0,B.jsxs)(R.A,{colSpan:12,className:"text-center h-300 flex items-center opacity-60 w-full",children:[(0,B.jsx)("img",{src:M,alt:"leaf",height:100,className:"w-full object-contain"}),(0,B.jsx)("p",{className:"text-center",children:"No Records found!"})]})})}),u&&(0,B.jsx)(F.A,{children:(0,B.jsx)(L.A,{children:(0,B.jsx)(H.A,{rowsPerPageOptions:[],count:C||t.length,rowsPerPage:d,onPageChange:(e,t)=>b(t),page:S})})})]})})};var q=a(1136),W=a(3549),V=a(2359),J=a(2670);const X=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new W.Ay,n=await a.get("".concat(V.H.TENANTS,"/?page=").concat(e),{},t,q.So);var l,s;return null!==n&&void 0!==n&&n.data?[null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.results,null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.count]:[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.post("".concat(V.H.TENANTS,"/"),e,t,(e=>(0,q.So)(e,null,"Tenant created successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{if(!e)return;const a=new W.Ay,n=await a.delete("".concat(V.H.TENANT,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Tenant deleted successfully!")));return null===n||void 0===n?void 0:n.data}}};var Z=a(949),K=a(7810);const $=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o}=e;return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsx)("h3",{className:"opacity-80",children:"CREATE NEW TENANT"}),(0,B.jsx)(Q.A,{title:"Tenant name",placeholder:"Enter tenant name",width:"99%",name:"name",onChange:l,value:n.name}),(0,B.jsx)(Q.A,{title:"Secret Key",placeholder:"Enter secret key",width:"99%",name:"secret_key",onChange:l,value:n.secret_key}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,loading:o,children:"Create"})]})]})};var ee=a(3768),te=a(3159);const ae=()=>{const e=(0,I.Zp)(),[t,a]=(0,g.useState)([]),[n,l]=(0,g.useState)(),[r,c]=(0,g.useState)(0),[d,u]=(0,g.useState)(!1),[h,p]=(0,g.useState)(0),[m,x]=(0,g.useState)({name:"",secret_key:""}),{list:v,create:y,remove:w}=X();(0,g.useEffect)((()=>{A()}),[h]);const A=async()=>{l("fetch");const[e,t]=await v(h+1);a(e),c(t),l(!1)},j=[{id:2,title:"ID",render:e=>e.id},{id:3,title:"Tenant Name",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/tenant-Users",{state:t.id}),children:t.name})},{id:4,title:"Secret Code",render:e=>e.secret_key},{id:5,title:"Actions",render:e=>(0,B.jsxs)(s.A,{flexDirection:"row",children:[(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{l("fetch"),await w(e),await A(),l(!1)})(null===e||void 0===e?void 0:e.id),children:(0,B.jsx)(ee.A,{color:"error",fontSize:"small"})}),(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{u("edit"),x(e)},children:(0,B.jsx)(te.A,{color:"primary",fontSize:"small"})})]})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)("h1",{className:"mt-4",children:["Tenants",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",r,")"]})]}),(0,B.jsx)(Z.A,{onClick:()=>u(!0),children:"Create Tenant"})]}),(0,B.jsx)(G,{columns:j,rows:t,rowsPerPage:5,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:h,setPage:p,paginator:!0,serialize:!0,total:r}),(0,B.jsx)($,{open:d,onClose:()=>u(!1),data:m,setData:e=>x((t=>({...t,[e.target.name]:e.target.value}))),onSubmit:async()=>{let e;if(null!==m&&void 0!==m&&m.name||(e="Please enter the tenant name!"),null!==m&&void 0!==m&&m.secret_key||(e="Please enter the secret key!"),e)return void _.oR.error(e);l("add");const t=await y(m);null!==t&&void 0!==t&&t.id&&(x({}),u(!1),A()),l(!1)},loading:"add"===n})]})},ne=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){const e=new W.Ay,a=await e.get("".concat(V.H.USERS,"/"),{},t,q.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.post("".concat(V.H.USERS,"/"),e,t,(e=>(0,q.So)(e,null,"User created successfully!")));return null===n||void 0===n?void 0:n.data},userProfile:async e=>{const a=new W.Ay,n=await a.get("".concat(V.H.USER,"-").concat(V.H.PROFILE,"/").concat(e,"/"),{},t,q.So);return null!==n&&void 0!==n&&n.data?null===n||void 0===n?void 0:n.data:[[],0]},updateProfile:async(e,a)=>{const n=new W.Ay,l=await n.put("".concat(V.H.USER,"-").concat(V.H.PROFILE,"/").concat(e,"/"),a,t,(e=>(0,q.So)(e,null,"User Updated successfully!")));return null===l||void 0===l?void 0:l.data},update:async(e,a)=>{const n=new W.Ay,l=await n.put("".concat(V.H.USER,"/").concat(e,"/"),a,t,(e=>(0,q.So)(e,null,"User Updated successfully!")));return null===l||void 0===l?void 0:l.data},remove:async e=>{if(!e)return;const a=new W.Ay,n=await a.delete("".concat(V.H.USER,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"User deleted successfully!")));return null===n||void 0===n?void 0:n.data},opratorList:async function(){var e;const a=new W.Ay,n=await a.get("".concat(V.H.OPERATORS,"/"),{},t,q.So);return(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.results.length)>0?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data.results,n.data.count]):[[],0]},createOperator:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.post("".concat(V.H.OPERATORS,"/"),e,t,(e=>(0,q.So)(e,null,"User created successfully!")));return null===n||void 0===n?void 0:n.data},updateOperator:async(e,a)=>{const n=new W.Ay,l=await n.put("".concat(V.H.OPERATOR,"/").concat(e,"/"),a,t,(e=>(0,q.So)(e,null,"Operator Updated successfully!")));return null===l||void 0===l?void 0:l.data},removeOperator:async e=>{if(!e)return;const a=new W.Ay,n=await a.delete("".concat(V.H.OPERATOR,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Operator deleted successfully!")));return null===n||void 0===n?void 0:n.data},listByUserName:async e=>{const a={username:e},n=new W.Ay,l=await n.post("search-by-username/",a,t,(e=>(0,q.So)(e,null)));return null!==l&&void 0!==l&&l.data?null===l||void 0===l?void 0:l.data:[[]]},listByAadhar:async e=>{const a={aadhar_number:e},n=new W.Ay,l=await n.post("search-by-aadhar/",a,t,(e=>(0,q.So)(e,null)));return null!==l&&void 0!==l&&l.data?null===l||void 0===l?void 0:l.data:[[]]},listByAadhar2:async e=>{const a=new W.Ay,n=await a.get("".concat(V.H.USERS,"/"),{},t,q.So);if(null!==n&&void 0!==n&&n.data){return n.data.filter((e=>e.is_operator)).map((e=>({value:e.username,key:e.id})))}return[[],0]},updateOpSkill:async(e,a)=>{const n=new W.Ay,l=await n.post("training/update-skill/".concat(e,"/"),a,t,(e=>(0,q.So)(e,null,"Skill Updated successfully!")));return null===l||void 0===l?void 0:l.data}}};var le=a(6335),se=a(8595);const ie=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,handleAdd2:o,loading:r,tab:c}=e;const d=[{title:"User Name",placeholder:"Enter User Name",type:Y.wN.INPUT,name:"username",validator:Y.wY.REQUIRED},{title:"Email",placeholder:"Enter Email",type:Y.wN.INPUT,name:"email"},{title:"Full Name",placeholder:"Enter Full Name",type:Y.wN.INPUT,name:"fullname"}],u=[{title:"Aadhar Number",placeholder:"Aadhar Number",type:Y.wN.INPUT,name:"aadhar_no",inputType:"number",validator:Y.wY.REQUIRED},{title:"Full Name",placeholder:"Enter Full Name",type:Y.wN.INPUT,name:"fullname"}],h=[{title:"Phone Number",placeholder:"Phone Number",type:Y.wN.INPUT,name:"phone_number",inputType:"number"},{title:"Employee Id",placeholder:"employee_id",type:Y.wN.INPUT,name:"employee_id"},"Users"===c&&{title:"Aadhar Number",placeholder:"Aadhar Number",type:Y.wN.INPUT,name:"aadhar_number",inputType:"number"},{title:"Employee Type",placeholder:"Employee Type",type:Y.wN.INPUT,name:"employee_type"},{title:"Date of Joining",placeholder:"date_of_joining",type:Y.wN.DATE,name:"date_of_joining"}],[p,m]=(0,g.useState)(new Map),[x,v]=(0,g.useState)(0);return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:["ADD ",c]}),(0,B.jsx)(le.A,{data:n,errors:p,onChange:e=>{const{name:t,value:a}=e.target;m((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:0===x?"Users"===c?d:u:h}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:async()=>{if(0===x){const e=(0,se.bG)("Users"===c?d:u,n);if(m(e),e.size)return;return await i(),void v((e=>e+1))}if(1===x){const e=(0,se.bG)(h,n);if(m(e),e.size)return;return await o(),void v(0)}},loading:r,children:"Next"})]})]})};var oe=a(8903);const re=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:o,loading:r,tab:c}=e;return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsx)("h3",{className:"opacity-80",children:"ADD REPORT"}),(0,B.jsxs)(oe.Ay,{display:"grid",sx:{pt:1,gap:1},gridTemplateColumns:{sm:"repeat(4, 1fr)",xs:"repeat(4, 1fr)"},children:[(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"S no"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Item Name"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Plan"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Actual"}),[{itemName:"item 1",plan:1e3},{itemName:"item 2",plan:800},{itemName:"item 3",plan:1e3}].map(((e,t)=>(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(i.A,{children:t+1}),(0,B.jsx)(i.A,{sx:{textTransform:"capitalize"},children:e.itemName}),(0,B.jsx)(i.A,{children:e.plan}),(0,B.jsx)("input",{type:"text"})]})))]}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:o,loading:r,children:"Create"})]})]})};var ce=a(9869),de=a(4056),ue=a(3845);const he=e=>{let{title:t="N/A",color:a}=e;return t?(0,B.jsx)(ue.A,{label:t,variant:"filled",sx:{backgroundColor:a||"#C1FFB6",fontSize:"10px","& .MuiChip-label":{fontSize:"13px"}},size:"small"}):(0,B.jsx)("p",{className:"c-gray fs-12 ml-1",children:"N/A"})};var pe=a(3374),me=a(3875),xe=a(4973),ge=a(5766),ve=a.n(ge);const ye=a.p+"static/media/SampleSheet.2da2e90959e1d87dfed0.csv",we=a.p+"static/media/userCsv.eaefb67338841526a91a.csv",Ae=a.p+"static/media/operatorCsv.4bfcfd2de35c2736e438.csv",je=a.p+"static/media/mcq.62bd97559875ee5253f1.csv",fe=(0,k.A)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),Se=e=>{let{file:t,setFile:a,loading:n,open:l,onClose:i,onSubmit:o,setCsvData:r,tab:c}=e;const[d,u]=(0,g.useState)(!1);return(0,B.jsxs)(K.A,{open:l,onClose:i,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsx)("h3",{className:"opacity-80",children:"UPLOAD CSV"}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",my:3,children:[(0,B.jsx)("p",{className:"c-gray",children:"Need assistance?"}),(0,B.jsx)(Z.A,{bordered:!0,color:"orange",height:"30px",onClick:()=>{window.open("Users"===c?we:"Operators"===c?Ae:"question"===c?je:ye,"_blank")},children:"Download sample CSV"})]}),(0,B.jsxs)(p.A,{className:"h-400 w-full rounded-10 flex flex-col items-center justify-center",sx:{border:"2px dotted ".concat(Y.lm.GRAY)},children:[(0,B.jsx)(pe.A,{fontSize:"large",color:"disabled"}),(0,B.jsx)("h3",{className:"opacity-80",children:"Drop your file here to upload"}),!!t&&(0,B.jsxs)("p",{className:"".concat(d?"c-red":"c-primary"," flex items-center"),children:[(0,B.jsx)(me.A,{fontSize:"small"})," ",null===t||void 0===t?void 0:t.name]}),(0,B.jsxs)(Z.A,{onClick:e=>document.getElementById("file").click(),children:[(0,B.jsx)(xe.A,{})," Upload File"]}),(0,B.jsx)(fe,{type:"file",id:"file",onChange:async e=>{var t,n;const l=e.target.files[0];console.log("file-----",l),l&&(null!==l&&void 0!==l&&null!==(t=l.type)&&void 0!==t&&null!==(n=t.toLowerCase())&&void 0!==n&&n.includes("csv")?(u(!1),ve().parse(l,{header:!1,complete:function(e){console.log("csv res-----------",null===e||void 0===e?void 0:e.data),r(null===e||void 0===e?void 0:e.data)}}),a(l)):u("The selected file is not a csv file!"))}})]}),!!d&&(0,B.jsx)("p",{className:"fw-500 c-red text-center",children:d}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",my:2,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:i,children:"Cancel"}),(0,B.jsx)(Z.A,{disabled:d||!t,onClick:o,loading:n,children:"Create"})]})]})};var be=a(630),Ce=a(7739),Ne=a(6178),Ee=a.n(Ne),ke=a(7201);const Ie=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,users:r,skill:c,edit:d}=e;const[u,h]=(0,g.useState)(new Map),p=[{title:"Supervisor",placeholder:"Select Supervisor",type:Y.wN.SELECT,name:"supervisor",validator:Y.wY.REQUIRED,keyValues:r},{title:"Skill",placeholder:"Select Skill",type:Y.wN.SELECT,name:"skill",validator:Y.wY.REQUIRED,keyValues:c}];return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:[d?"Edit":"Add"," Supervisor"]}),(0,B.jsx)(le.A,{data:n,errors:u,onChange:e=>{const{name:t,value:a}=e.target;h((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:p}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:async()=>{const e=(0,se.bG)(p,n);h(e),e.size||await i()},loading:o,children:"Submit"})]})]})},_e=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,users:r,testList:c}=e;const[d,u]=(0,g.useState)(new Map),[h,p]=(0,g.useState)(0),[m,x]=(0,g.useState)([]),v=[{title:"Skill",placeholder:"Select Skill",type:Y.wN.SELECT,name:"skill",validator:Y.wY.REQUIRED,keyValues:r}];return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsx)("h3",{className:"opacity-80",children:"Add Skill"}),(0,B.jsx)(le.A,{data:n,errors:d,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:v}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:async()=>{const e=(0,se.bG)(v,n);u(e),e.size||await i()},loading:o,children:"Submit"})]})]})},Te=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){const e=new W.Ay,a=await e.get("training/skills/",{},t,q.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.post("training/skills/",e,t,(e=>(0,q.So)(e,null,"Skill created successfully!")));return null===n||void 0===n?void 0:n.data},updateProfile:async(e,a)=>{const n=new W.Ay,l=await n.put("".concat(V.H.USER,"-").concat(V.H.PROFILE,"/").concat(e,"/"),a,t,(e=>(0,q.So)(e,null,"User Updated successfully!")));return null===l||void 0===l?void 0:l.data},update:async(e,a)=>{const n=new W.Ay,l=await n.put("".concat(V.H.USER,"/").concat(e,"/"),a,t,(e=>(0,q.So)(e,null,"User Updated successfully!")));return null===l||void 0===l?void 0:l.data},addSupervisor:async(e,a)=>{const n=new W.Ay,l=await n.put("training/skill/".concat(e,"/"),a,t,(e=>(0,q.So)(e,null,"Supervisor Updated successfully!")));return null===l||void 0===l?void 0:l.data},remove:async e=>{if(!e)return;const a=new W.Ay,n=await a.delete("training/skills/".concat(e,"/"),t,(e=>(0,q.So)(e,null,"Skill deleted successfully!")));return null===n||void 0===n?void 0:n.data},opratorList:async function(){var e;const a=new W.Ay,n=await a.get("".concat(V.H.OPERATORS,"/"),{},t,q.So);return(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.results.length)>0?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data.results,n.data.count]):[[],0]},createOperator:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.post("".concat(V.H.OPERATORS,"/"),e,t,(e=>(0,q.So)(e,null,"User created successfully!")));return null===n||void 0===n?void 0:n.data},updateOperator:async(e,a)=>{const n=new W.Ay,l=await n.put("".concat(V.H.OPERATOR,"/").concat(e,"/"),a,t,(e=>(0,q.So)(e,null,"Operator Updated successfully!")));return null===l||void 0===l?void 0:l.data},removeOperator:async e=>{if(!e)return;const a=new W.Ay,n=await a.delete("".concat(V.H.OPERATOR,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Operator deleted successfully!")));return null===n||void 0===n?void 0:n.data},updateSkill:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const n=new W.Ay,l=await n.put("training/skill/".concat(a,"/"),e,t,(e=>(0,q.So)(e,null,"Skill created successfully!")));return null===l||void 0===l?void 0:l.data}}},De=()=>{const[e,t]=(0,g.useState)("Users"),[a,n]=(0,g.useState)([]),[l,r]=(0,g.useState)([]),[c,d]=(0,g.useState)(),[u,h]=(0,g.useState)(0),[p,m]=(0,g.useState)(!1),[x,v]=(0,g.useState)([]),[y,w]=(0,g.useState)(0),[A,j]=(0,g.useState)(null),[f,S]=(0,g.useState)({}),[b,C]=(0,g.useState)([]),[N,E]=(0,g.useState)(""),[k,I]=(0,g.useState)([]),[_,T]=(0,g.useState)(""),[D,R]=(0,g.useState)(""),[O,P]=(0,g.useState)(!1),{list:U,create:L,updateProfile:F,update:H,userProfile:z,remove:M,listByUserName:Y,listByAadhar:q,updateOpSkill:W}=ne(),{list:V}=Te();(0,g.useEffect)((()=>{n([]),X()}),[y,e]),(0,g.useEffect)((()=>{J()}),[]);const J=async()=>{const[e]=await V(y+1),t=e.results.map((e=>({value:e.skill_name,key:e.id})));C((e=>[...e,...t]))},X=async()=>{d("fetch");try{const[e,t]=await U(y+1),a=e.filter((e=>e.is_operator)),l=e.filter((e=>!e.is_operator)),s=l.map((e=>({value:e.username,key:e.id})));I(s),n(l),h(t);const i=await Promise.all(a.map((e=>z(e.id))));r(i)}catch(xt){console.error("Error fetching users:",xt)}finally{d(!1)}},K=async()=>{const t={...f};localStorage.setItem("op_ad_no",f.aadhar_no),t.is_operator="Users"!==e,"Operators"===e&&(t.username="op_".concat(f.aadhar_no)),console.log("id response--------",t),d("fetch");const a=await L(t);E(a.id),S({}),d(!1)},$=async(t,a,n)=>{d("fetch");const l={is_admin:!0!==a},s={status:!0!==a};"Users"===e?await H(t,"status"===n?s:l):H(t,"status"===n?s:l),await X(),d(!1)},ae=[{id:1,title:"Email",render:e=>e.email},{id:2,title:"User Name",render:e=>e.username},{id:3,title:"Full Name",render:e=>e.fullname},{id:4,title:"Employee Id",render:e=>e.employee_id},{id:5,title:"Role",render:e=>(0,B.jsx)(he,{title:e.is_admin?"admin":"Na"})},{id:6,title:"Actions",render:t=>(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(s.A,{flexDirection:"row",sx:{gap:1},children:[(0,B.jsx)(Z.A,{width:"10%",color:t.status?"green":"red",onClick:()=>$(null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.status,"status"),children:t.status?"Active":"Inactive"}),(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{d("fetch"),await M(e),await X(),d(!1)})(null===t||void 0===t?void 0:t.id),children:(0,B.jsx)(ee.A,{color:"error",fontSize:"small"})}),"Users"===e&&!1===(null===t||void 0===t?void 0:t.is_admin)?(0,B.jsx)(Ce.A,{title:"Make Admin",children:(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>$(null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.is_admin,"delete"),children:(0,B.jsx)(be.A,{color:t.is_admin?"error":"success",fontSize:"small"})})}):null]})})}],le=[{id:4,title:"Aadhar Number",render:e=>e.aadhar_number},{id:1,title:"Date of Joining",render:e=>Ee()(e.date_of_joining).format("ll")},{id:11,title:"Supervisor",render:t=>{var a;return(0,B.jsxs)(s.A,{sx:{flexDirection:"row",alignItems:"center"},children:[t.passed_induction&&(0,B.jsx)(i.A,{children:null===(a=t.supervisor)||void 0===a?void 0:a.username}),"Users"!==e&&(t.passed_induction?(0,B.jsx)(Ce.A,{title:t.supervisor?"Edit Supervisor":"Add Supervisor",children:(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{t.supervisor?P(!0):P(!1),E(t.id),R(t.user.id),m("addSupervisor")},children:t.supervisor?(0,B.jsx)(te.A,{fontSize:"small",color:"primary"}):(0,B.jsx)(ke.A,{})})}):(0,B.jsx)(i.A,{children:"Induction not passed"}))]})}},{id:6,title:"Actions",render:t=>(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(s.A,{flexDirection:"row",sx:{gap:1,alignItems:"center"},children:[(0,B.jsx)(Z.A,{width:"10%",color:t.user.status?"green":"red",onClick:()=>$(null===t||void 0===t?void 0:t.user.id,null===t||void 0===t?void 0:t.user.status,"status"),children:!0===t.user.status?"Active":"Inactive"}),"Users"===e&&!1===(null===t||void 0===t?void 0:t.is_admin)?(0,B.jsx)(Ce.A,{title:"Make Admin",children:(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>$(null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.is_admin,"delete"),children:(0,B.jsx)(be.A,{color:t.is_admin?"error":"success"})})}):null]})})}],se=async()=>{d("fetch");const e={skill:f.skill,supervisor:f.supervisor};W(D,e),m(!1),await X(),d(!1)};return(0,B.jsxs)("div",{className:"mx-3 my-2 fw-500",children:[(0,B.jsx)(ce.A,{value:e,onChange:(e,a)=>{t(a),w(0),T("")},className:"mb-2 fw-500",children:["Users","Operators"].map(((e,t)=>(0,B.jsx)(de.A,{label:e,className:"fw-500",value:e})))}),(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsx)(s.A,{children:(0,B.jsx)(Q.A,{height:"37px",value:_,placeholder:"Users"===e?"Search By username":"Search by Aadhar Number",onChange:t=>{T(t.target.value),"Users"===e?(async e=>{d("fetch");const[t]=await Y(e);void 0!==t&&n([t]),d(!1)})(t.target.value):(async e=>{const[t,a]=await q(e);void 0!==t&&r([t])})(t.target.value)}})}),(0,B.jsxs)(s.A,{justifyContent:"flex-end",direction:"row",sx:{mb:1},children:[(0,B.jsx)(Z.A,{onClick:()=>m("csvUser"),bordered:!0,classes:"mr-1",children:"Upload CSV"}),(0,B.jsxs)(Z.A,{onClick:()=>m("add"),children:["Create ",e]})]})]}),(0,B.jsx)(G,{columns:"Users"===e?ae:le,rows:"Users"===e?a:l,rowsPerPage:10,loading:"fetch"===c,titleCellClasses:"c-gray fw-700",page:y,setPage:w,paginator:!0,serialize:!0,total:u}),(0,B.jsx)(ie,{open:"add"===p,onClose:()=>m(!1),data:f,setData:S,onSubmit:K,loading:"add"===c,tab:e,handleAdd2:async()=>{const t={...f};"Operators"===e&&(t.aadhar_number=localStorage.getItem("op_ad_no")),t.is_operator="Users"!==e,d("fetch");let a=await z(N);await F(a.id,t),m(!1),await X(),d(!1)}}),(0,B.jsx)(re,{open:"Report"===p,onClose:()=>m(!1),onSubmit:K}),(0,B.jsx)(Ie,{data:f,setData:S,open:"addSupervisor"===p,onClose:()=>m(!1),onSubmit:async()=>{d("fetch");const e={add_supervisor:f.supervisor};F(N,e),se(),m(!1),d(!1)},users:k,skill:b,edit:O}),(0,B.jsx)(_e,{data:f,setData:S,open:"addSkill"===p,onClose:()=>m(!1),onSubmit:se,users:b}),(0,B.jsx)(Se,{onClose:()=>m(!1),open:"csvUser"===p,onSubmit:async()=>{x.slice(1).map((async t=>{if("Users"===e){if(""===t[0])return;{const e={username:t[0],fullname:t[1],email:t[2]},a=await L(e),n=null===a||void 0===a?void 0:a.id,l={phone_number:t[3],aadhar_number:t[4],employee_id:t[5],employee_type:t[6],date_of_joining:t[7]};let s=await z(n);await F(s.id,l)}}else{if(""===t[4]||""===t[0])return;{const e={aadhar_number:t[4],username:t[0],fullname:t[1],is_operator:!0},a=await L(e),n=null===a||void 0===a?void 0:a.id,l={is_operator:!0,phone_number:t[3],employee_id:t[5],employee_type:t[6],date_of_joining:t[7]};let s=await z(n);await F(s.id,l)}}})),m(!1),await X()},file:A,setFile:j,setCsvData:v,tab:e})]})},Re=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new W.Ay,n=await a.get("".concat(V.H.TOOLS,"/?page=").concat(e,"&page_size=",10),{},t,Function.prototype);var l,s;return null!==n&&void 0!==n&&n.data?[null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.results,null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.count]:[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.post("".concat(V.H.TOOLS,"/"),e,t,(e=>(0,q.So)(e,null,"Tool created successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{if(!e)return;const a=new W.Ay,n=await a.delete("".concat(V.H.TOOLS,"/").concat(V.H.DETAIL,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Tool deleted successfully!")));return null===n||void 0===n?void 0:n.data},createInbound:async(e,a)=>{if(!a)return;const n=new W.Ay,l=await n.post("".concat(V.H.TOOLS,"/").concat(a,"/").concat(V.H.ALL_INBOUND,"/"),e,t,Function.prototype);return null===l||void 0===l?void 0:l.data},listInbound:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new W.Ay,n=await a.get("".concat(V.H.TOOLS,"/").concat(V.H.LIST_INBOUND,"/?page=").concat(e),{},t,Function.prototype);var l,s;return null!==n&&void 0!==n&&n.data?[null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.results,null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.count]:[[],0]},listIssued:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new W.Ay,n=await a.get("".concat(V.H.TOOLS,"/").concat(V.H.ALL_ISSUED,"/?page=").concat(e),{},t,Function.prototype);var l,s;return null!==n&&void 0!==n&&n.data?[null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.results,null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.count]:[[],0]},genBarCode:async(e,a)=>{const n=new W.Ay,l=await n.post("".concat(V.H.TOOLS,"/").concat(V.H.GENERATEBARCODE,"/").concat(a,"/"),e,t,(e=>(0,q.So)(e,null,"Barcode Generated!")));var s;return null!==l&&void 0!==l&&l.data?[null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.serial_number_list]:[[],0]},update:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.put("".concat(V.H.TOOLS,"/").concat(V.H.DETAIL,"/").concat(e.id,"/"),e,t,(e=>(0,q.So)(e,null,"Material created successfully!")));return null===n||void 0===n?void 0:n.data},searchList:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const l=new W.Ay,s=await l.get("".concat(V.H.TOOLS,"/?search_field=").concat(a,"&search_value=").concat(n,"&page=").concat(e,"&page_size=",10),{},t,Function.prototype);var i,o;return null!==s&&void 0!==s&&s.data?[null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.results,null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.count]:[[],0]},getBarInfo:async e=>{const a={barcode:e},n=new W.Ay,l=await n.post("".concat(V.H.TOOLS,"/").concat(V.H.SEARCH,"/"),a,t);return null!==l&&void 0!==l&&l.data?[null===l||void 0===l?void 0:l.data]:0},outBoundItem:async(e,a)=>{const n={serial_number:e.barcode,internal_id:a,quantity:e.quantity},l=new W.Ay,s=await l.post("".concat(V.H.TOOLS,"/").concat(e.id,"/").concat(V.H.ALL_ISSUED,"/"),n,t);return null===s||void 0===s?void 0:s.data},historyList:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new W.Ay,n=await a.get("".concat(V.H.TOOLS,"/").concat(V.H.OUTBOUNDLIST,"/?page=").concat(e,"&page_size=",10),{},t,Function.prototype);var l,s;return null!==n&&void 0!==n&&n.data?[null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.results,null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.count]:[[],0]},searchOutbound:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const l=new W.Ay,s=await l.get("".concat(V.H.TOOLS,"/").concat(V.H.OUTBOUNDLIST,"/?search_field=").concat(a,"&search_value=").concat(n,"&page=").concat(e,"&page_size=",10),{},t,Function.prototype);var i,o;return null!==s&&void 0!==s&&s.data?[null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.results,null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.count]:[[],0]}}};var Oe=a(9254),Pe=a(7289),Ue=a(9484);const Le=e=>{var t;let{json:a={},icon:n}=e;return null!==(t=Object.values(a||{}))&&void 0!==t&&t.length?(0,B.jsx)(m.A,{dense:!0,disablePadding:!0,children:Object.entries(a).map((e=>{var t;let[a,l]=e;return(0,B.jsxs)(x.Ay,{dense:!0,disablePadding:!0,disableGutters:!0,alignItems:"center",className:"h-45",children:[(0,B.jsx)(o.A,{className:"h-25 w-25 mr-1 fs-10 c-gray",children:n}),(0,B.jsx)(h.A,{className:"capitalize",primary:null===a||void 0===a||null===(t=a.split("_"))||void 0===t?void 0:t.join(" "),secondary:l})]})}))}):(0,B.jsx)("p",{className:"c-gray fs-12 ml-1",children:"N/A"})},Fe=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new W.Ay,n=await a.get("".concat(V.H.MATERIALS,"/?page=").concat(e),{},t,Function.prototype);var l,s;return null!==n&&void 0!==n&&n.data?[null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.results,null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.count]:[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.post("".concat(V.H.MATERIALS,"/"),e,t,(e=>(0,q.So)(e,null,"Material created successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{if(!e)return;const a=new W.Ay,n=await a.delete("".concat(V.H.MATERIALS,"/").concat(V.H.DETAIL,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Material deleted successfully!")));return null===n||void 0===n?void 0:n.data},createInbound:async(e,a)=>{if(!a)return;const n=new W.Ay,l=await n.post("".concat(V.H.MATERIALS,"/").concat(a,"/").concat(V.H.ALL_INBOUND,"/"),e,t,Function.prototype);return null===l||void 0===l?void 0:l.data},listInbound:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new W.Ay,n=await a.get("".concat(V.H.MATERIALS,"/").concat(V.H.LIST_INBOUND,"/?page=").concat(e),{},t,Function.prototype);var l,s;return null!==n&&void 0!==n&&n.data?[null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.results,null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.count]:[[],0]},listIssued:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new W.Ay,n=await a.get("".concat(V.H.MATERIALS,"/").concat(V.H.ALL_ISSUED,"/?page=").concat(e),{},t,Function.prototype);var l,s;return null!==n&&void 0!==n&&n.data?[null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.results,null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.count]:[[],0]},update:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.put("".concat(V.H.MATERIALS,"/").concat(V.H.DETAIL,"/").concat(e.id,"/"),e,t,(e=>(0,q.So)(e,null,"Material created successfully!")));return null===n||void 0===n?void 0:n.data},searchlistMat:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const l=new W.Ay,s=await l.get("".concat(V.H.MATERIALS,"/?search_field=").concat(a,"&search_value=").concat(n,"&page=").concat(e,"&page_size=",10),{},t,Function.prototype);var i,o;return null!==s&&void 0!==s&&s.data?[null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.results,null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.count]:[[],0]},matOutBoundItem:async(e,a)=>{const n={serial_number:e.barcode,internal_id:a,quantity:e.quantity},l=new W.Ay,s=await l.post("".concat(V.H.MATERIALS,"/").concat(e.id,"/").concat(V.H.ALL_ISSUED,"/"),n,t);return null===s||void 0===s?void 0:s.data},historyList:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new W.Ay,n=await a.get("".concat(V.H.MATERIALS,"/").concat(V.H.OUTBOUNDLIST,"/?page=").concat(e),{},t,Function.prototype);var l,s;return null!==n&&void 0!==n&&n.data?[null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.results,null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.count]:[[],0]},getBarInfo:async e=>{const a={barcode:e},n=new W.Ay,l=await n.post("".concat(V.H.MATERIALS,"/").concat(V.H.SEARCH,"/"),a,t);return null!==l&&void 0!==l&&l.data?[null===l||void 0===l?void 0:l.data]:0},searchOutbound:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const l=new W.Ay,s=await l.get("".concat(V.H.MATERIALS,"/").concat(V.H.OUTBOUNDLIST,"/?search_field=").concat(a,"&search_value=").concat(n,"&page=").concat(e,"&page_size=",10),{},t,Function.prototype);var i,o;return null!==s&&void 0!==s&&s.data?[null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.results,null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.count]:[[],0]}}};var He=a(2432),ze=a(1497),Me=a(4726),Qe=a(3985);const Ye=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{categories:async()=>{var e;const a=new W.Ay,n=await a.get("".concat(V.H.CATEGORIES,"/"),{},t,Function.prototype);var l,s;return null!==n&&void 0!==n&&null!==(e=n.data)&&void 0!==e&&e.results?null===n||void 0===n||null===(l=n.data)||void 0===l||null===(s=l.results)||void 0===s?void 0:s.map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.name}))):[]},createCategory:async e=>{if(!e)return;const a=new W.Ay,n=await a.post("".concat(V.H.CATEGORIES,"/"),{name:e},t,Function.prototype);return null!==n&&void 0!==n&&n.data?null===n||void 0===n?void 0:n.data:void 0}}},Be=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,isTool:o}=e;const[r,c]=(0,g.useState)(0),[d,u]=(0,g.useState)(new Map),[h,p]=(0,g.useState)(!1),{categories:m}=Ye(),x=[{title:"Name",placeholder:"Enter name",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED},{title:"SAP Id",placeholder:"Enter SAP Id",type:Y.wN.INPUT,name:"sap_id"},{title:"HSN CODE",placeholder:"HSN CODE",type:Y.wN.INPUT,name:"hsn_code"},{title:"Vendor part ID",placeholder:"vendor part id",type:Y.wN.INPUT,name:"vendor_part_id"},{title:"Category",placeholder:"Select Category",type:Y.wN.MASTER,name:"category",validator:Y.wY.REQUIRED,fetch:[m],noSearch:!0},{title:"Unit",placeholder:"",type:Y.wN.SELECT,name:"unit",validator:Y.wY.REQUIRED,keyValues:Y.QN},{title:"Cost",placeholder:"cost",type:Y.wN.INPUT,name:"cost",validator:Y.wY.REQUIRED},{title:"Expected Life",placeholder:"",type:Y.wN.INPUT,name:"expected_life"},{title:"Serialization",placeholder:"Select the serialization type",type:Y.wN.SELECT,name:"serialization_method",validator:Y.wY.NUMBER,keyValues:Y.QO}],v=()=>{u(new Map),l({location:{},specification:{}}),c(0),a()};return(0,g.useEffect)((()=>{o||v()}),[o]),(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,80vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:["CREATE NEW ",o?"TOOL":"MATERIAL"]}),(0,B.jsx)(He.A,{activeStep:r,alternativeLabel:!0,children:["Info","Specifications","Location"].map((e=>(0,B.jsx)(ze.A,{children:(0,B.jsx)(Me.A,{children:e})},e)))}),0===r&&(0,B.jsx)(le.A,{data:n,errors:d,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:x}),1===r&&(0,B.jsx)(Qe.A,{setItemss:null===n||void 0===n?void 0:n.specification,setJson:e=>l((t=>({...t,specification:e}))),title:"Specification"}),2===r&&(0,B.jsx)(Qe.A,{setItemss:null===n||void 0===n?void 0:n.location,setJson:e=>l((t=>({...t,location:e}))),title:"Location"}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:()=>{0===r?v():c((e=>e-1))},children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:async()=>{if(0!==r)1!==r?2===r&&(p(!0),await i(),p(!1),c(0)):c((e=>e+1));else{const e=(0,se.bG)(x,n);if(u(e),e.size)return;c((e=>e+1))}},loading:h,children:2===r?"Create":"Next"})]})]})},Ge=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,isTool:o}=e;const[r,c]=(0,g.useState)(0),[d,u]=(0,g.useState)(new Map),[h,p]=(0,g.useState)(!1),{categories:m}=Ye(),x=[{title:"Name",placeholder:"Enter name",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED},{title:"SAP Id",placeholder:"Enter SAP Id",type:Y.wN.INPUT,name:"sap_id"},{title:"HSN CODE",placeholder:"HSN CODE",type:Y.wN.INPUT,name:"hsn_code"},{title:"Vendor part ID",placeholder:"vendor part id",type:Y.wN.INPUT,name:"vendor_part_id"},{title:"Category",placeholder:"Select Category",type:Y.wN.MASTER,name:"category",validator:Y.wY.REQUIRED,fetch:[m],noSearch:!0},{title:"Unit",placeholder:"",type:Y.wN.SELECT,name:"unit",validator:Y.wY.REQUIRED,keyValues:Y.QN},{title:"Cost",placeholder:"cost",type:Y.wN.INPUT,name:"cost",validator:Y.wY.REQUIRED},{title:"Expected Life",placeholder:"",type:Y.wN.INPUT,name:"expected_life",validator:Y.wY.REQUIRED},{title:"Serialization",placeholder:"Select the serialization type",type:Y.wN.SELECT,name:"serialization_method",validator:Y.wY.NUMBER,keyValues:Y.QO}],v=()=>{u(new Map),l({location:{},specification:{}}),c(0),a()};return(0,g.useEffect)((()=>{o||v()}),[o]),(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,80vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:["EDIT ",o?"TOOL":"MATERIAL"]}),(0,B.jsx)(He.A,{activeStep:r,alternativeLabel:!0,children:["Info","Specifications","Location"].map((e=>(0,B.jsx)(ze.A,{children:(0,B.jsx)(Me.A,{children:e})},e)))}),0===r&&(0,B.jsx)(le.A,{data:n,errors:d,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:x}),1===r&&(0,B.jsx)(Qe.A,{setItemss:null===n||void 0===n?void 0:n.specification,setJson:e=>l((t=>({...t,specification:e}))),title:"Specification"}),2===r&&(0,B.jsx)(Qe.A,{setItemss:null===n||void 0===n?void 0:n.location,setJson:e=>l((t=>({...t,location:e}))),title:"Location"}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:()=>{0===r?v():c((e=>e-1))},children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:async()=>{if(0!==r)1!==r?2===r&&(p(!0),await i(),p(!1),c(0)):c((e=>e+1));else{const e=(0,se.bG)(x,n);if(u(e),e.size)return;c((e=>e+1))}},loading:h,children:2===r?"Edit":"Next"})]})]})};var qe=a(6012);const We=()=>{const[e,t]=(0,g.useState)([]),[a,n]=(0,g.useState)(),[l,i]=(0,g.useState)(0),[r,c]=(0,g.useState)(!1),[d,u]=(0,g.useState)(0),[h,p]=(0,g.useState)(null),[m,x]=(0,g.useState)([]),[v,y]=(0,g.useState)(0),[w,A]=(0,g.useState)(""),[j,f]=(0,g.useState)(""),[S,b]=(0,g.useState)(!1),[C,N]=(0,g.useState)({specification:{},location:{}}),{list:E,create:k,remove:I,createInbound:T,update:D,searchList:R}=Re(),{list:O,create:P,remove:U,update:L,createInbound:F,searchlistMat:H}=Fe(),{createCategory:z,categories:M}=Ye();(0,g.useEffect)((()=>{Y()}),[d,v]);const Y=async()=>{n("fetch");const[e,a]=1===v?await O(d+1):await E(d+1);t(e),i(a),n(!1)},q=async e=>{""!==w?(n("fetch"),setTimeout((async()=>{const[a,n]=1===v?await H(d+1,w,e):await R(d+1,w,e);t(a),i(n)}),1e3),n(!1)):_.oR.warn("Please Select Search by Option")},W=[{id:42,title:"Name",render:e=>e.name},{id:1,title:"SAP ID",render:e=>e.sap_id},{id:2,title:"HSN CODE",render:e=>e.hsn_code},{id:3,title:"Serialization",render:e=>1===e.serialization_method?"No Serialization":2===e.serialization_method?"Use Pre-Generated ID":3===e.serialization_method?"Use Own ID":"-"},{id:4,title:"Vendor Part ID",render:e=>e.vendor_part_id},{id:5,title:"Category",render:e=>(0,B.jsx)(he,{title:null===e||void 0===e?void 0:e.category})},{id:6,title:"Specifications",render:e=>(0,B.jsx)(Le,{icon:(0,B.jsx)(Oe.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.specification})},{id:8,title:"Location",render:e=>(0,B.jsx)(Le,{icon:(0,B.jsx)(Pe.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.location})},{id:9,title:"Actions",render:e=>(0,B.jsxs)(s.A,{sx:{flexDirection:"row"},children:[(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{n("fetch"),1===v?await U(e):await I(e),await Y(),n(!1)})(null===e||void 0===e?void 0:e.id),children:(0,B.jsx)(ee.A,{color:"error",fontSize:"small"})}),(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{c("edit"),N(e),N((t=>({...t,category:{value:e.category}})))},children:(0,B.jsx)(te.A,{color:"primary",fontSize:"small"})})]})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)("h1",{className:"mt-4",children:["Master",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",l,")"]})]}),(0,B.jsxs)(s.A,{justifyContent:"flex-end",direction:"row",children:[(0,B.jsx)(Z.A,{onClick:()=>c("csv"),bordered:!0,classes:"mr-1",children:"Upload CSV"}),(0,B.jsx)(Z.A,{onClick:()=>c("add"),children:"Create"})]})]}),(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsx)(ce.A,{value:v,onChange:(e,t)=>{y(t),u(0)},className:"mb-2",children:["Tools","Materials"].map(((e,t)=>(0,B.jsx)(de.A,{label:e,className:"fw-500",value:t})))}),(0,B.jsxs)(s.A,{direction:"row",justifyContent:"flex-end",children:[(0,B.jsx)(qe.A,{keyValues:[{id:"name",title:"Name"},{id:"sap_id",title:"SAP ID"},{id:"hsn_code",title:"HSN CODE"},{id:"internal_id",title:"Internal ID"},{id:"serialization",title:"Serialization"},{id:"category",title:"Category"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Search by",classes:"mr-1",value:w,onChange:e=>A(e.target.value)}),(0,B.jsx)(Q.A,{height:"37px",placeholder:"Universal Search",onChange:e=>{f(e.target.value),q(e.target.value)},icon:(0,B.jsx)(Ue.A,{sx:{cursor:"pointer"},onClick:()=>q()})})]})]}),(0,B.jsx)(G,{edit:S,columns:W,rows:e,rowsPerPage:5,loading:"fetch"===a,titleCellClasses:"c-gray fw-700",page:d,setPage:u,paginator:!0,serialize:!0,total:l}),(0,B.jsx)(Be,{onClose:()=>c(!1),open:"add"===r,data:C,onSubmit:async()=>{var e,t;let a=null===C||void 0===C||null===(e=C.category)||void 0===e?void 0:e.key;if(null!==C&&void 0!==C&&null!==(t=C.category)&&void 0!==t&&t.isNew){const e=await z(a);a=null===e||void 0===e?void 0:e.id}const n={...C,category:a},l=1===v?await P(n):await k(n);null!==l&&void 0!==l&&l.id&&(N({specification:{},location:{}}),c(!1),await Y())},setData:N,isTool:0===v}),(0,B.jsx)(Se,{onClose:()=>c(!1),open:"csv"===r,onSubmit:async()=>{const e=await M();var t="";m.map((async a=>{if(e.map((async e=>{a.category===e.value&&(t=e.key)})),console.log("pre catID",t),""===t&&void 0===t){const e=await z(a.category);t=null===e||void 0===e?void 0:e.id}a.category=t,console.log(" final item",a),1===v?await P(a):await k(a)})),c(!1),setTimeout((async()=>{await Y()}),500)},file:h,setFile:p,setCsvData:x}),(0,B.jsx)(Ge,{onClose:()=>c(!1),open:"edit"===r,data:C,onSubmit:async e=>{const t={...C};n("fetch"),1===v?await L(t):await D(t),c(!1),await Y(),n(!1)},setData:N,isTool:0===v})]})};Y.wN.INPUT,Y.wY.REQUIRED,Y.wN.INPUT,Y.wN.INPUT,Y.wN.INPUT,Y.wY.REQUIRED,Y.wN.INPUT,Y.wY.REQUIRED,Y.wN.SELECT,Y.wY.NUMBER,Y.QO;var Ve=a(3141),Je=a(3092),Xe=a.n(Je),Ze=a(1867);const Ke=[],$e=(0,g.forwardRef)(((e,t)=>{let{open:a,onClose:n,data:l,setData:o,onSubmit:r,isTool:c,onGenerate:d,codes:u}=e;const h=(0,y.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.InboundItem)||void 0===t?void 0:t.data})),p=(0,g.useRef)(null),m=(0,g.useRef)(null),[x,w]=(0,g.useState)(0),[A,j]=(0,g.useState)(new Map),[f,S]=(0,g.useState)(!1),[b,C]=(0,g.useState)([]),[N,E]=(0,g.useState)(""),[k,I]=(0,g.useState)(""),_=()=>{j(new Map),o({}),w(0),n()};function T(){setTimeout((()=>{p.current.focus()}),500)}(0,g.useImperativeHandle)(t,(()=>({handleFocus:T,handlePrintq:D}))),(0,g.useEffect)((()=>{c||_()}),[c]);const D=(0,Ve.useReactToPrint)({content:()=>m.current,onPrintError:()=>console.log("error------"),removeAfterPrint:!0});return(0,B.jsxs)(K.A,{open:a,onClose:n,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsxs)(i.A,{sx:{mt:2},children:[null===h||void 0===h?void 0:h.sap_id," / ",null===h||void 0===h?void 0:h.hsn_code," ",">"," ",null===h||void 0===h?void 0:h.category," ",">"," ",null===h||void 0===h?void 0:h.name]}),(0,B.jsx)(v.A,{}),(0,B.jsx)(s.A,{sx:{flexDirection:"row"},children:(0,B.jsx)(i.A,{children:"Location"})}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row"},children:[(0,B.jsxs)(s.A,{sx:{width:"40%"},children:[(0,B.jsxs)("p",{className:Ze.A.title,style:{marginBottom:0},children:["Unit : ",null===h||void 0===h?void 0:h.unit]}),2===(null===h||void 0===h?void 0:h.serialization_method)&&(0,B.jsxs)("p",{className:Ze.A.title,style:{marginBottom:0},children:["New Quantity :\xa0",2===(null===h||void 0===h?void 0:h.serialization_method)&&b.length]})]}),(0,B.jsxs)(s.A,{sx:{width:"60%"},children:[(0,B.jsxs)("p",{className:Ze.A.title,style:{marginBottom:0},children:["Present Quanitity : ",null===h||void 0===h?void 0:h.remaining_stock]}),2===(null===h||void 0===h?void 0:h.serialization_method)&&(0,B.jsxs)(s.A,{sx:{flexDirection:"row",width:"100%",alignItems:"center",gap:1,mt:1.5},children:[(0,B.jsx)("label",{className:Ze.A.title,style:{marginBottom:0},children:"Scan Code :"}),(0,B.jsx)("input",{ref:p,type:"text",value:N,onKeyUp:e=>{"Enter"===e.code&&(b.includes(N)||C([...b,N]),E(""),console.log("count---",l[0]))},onChange:e=>E(e.target.value)})]})]})]}),2!==(null===h||void 0===h?void 0:h.serialization_method)&&(0,B.jsxs)(s.A,{sx:{flexDirection:"row",width:"100%",alignItems:"center",gap:1,mt:1},children:[(0,B.jsx)("label",{className:Ze.A.title,children:"New Quanitity :"}),(0,B.jsx)("input",{onChange:e=>I(e.target.value)})]}),(0,B.jsx)(le.A,{data:l,errors:A,onChange:e=>{const{name:t,value:a}=e.target;j((e=>(e.delete(t),e))),o((e=>({...e,[t]:a})))},schema:Ke,handleCounter:e=>{"add"===e?o((e=>({...e,[Object.keys(l)[0]]:Number(l.newQuanitity)+1}))):l.newQuanitity>0&&o((e=>({...e,[Object.keys(l)[0]]:Number(l.newQuanitity)-1})))}}),2===(null===h||void 0===h?void 0:h.serialization_method)&&(0,B.jsx)(s.A,{sx:{mt:2},children:(0,B.jsx)(i.A,{variant:"h4",sx:{alignSelf:"center",letterSpacing:4},children:N})}),3===(null===h||void 0===h?void 0:h.serialization_method)&&(0,B.jsxs)(s.A,{sx:{mt:1},children:[(0,B.jsx)(Z.A,{onClick:async()=>{const e={quantity:Number(k)};await d(e,null===h||void 0===h?void 0:h.id)},loading:f,children:"Print Barcode"}),3===(null===h||void 0===h?void 0:h.serialization_method)&&u&&u.length&&(0,B.jsx)(s.A,{sx:{overflow:"scroll",height:70,overflowX:"hidden"},children:(0,B.jsx)(s.A,{ref:m,gap:1,sx:{justifyItems:"center",alignItems:"center"},children:u&&u[0].map(((e,t)=>(0,B.jsx)(Xe(),{value:e,width:1,height:40,fontSize:16,margin:5},t)))})})]}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:()=>{0===x?_():w((e=>e-1))},children:"Cancel"}),3===(null===h||void 0===h?void 0:h.serialization_method)?(0,B.jsx)(Z.A,{onClick:()=>(()=>{const e={quantity:u[0].length,serial_numbers:u[0]};r(null===h||void 0===h?void 0:h.id,e)})(),loading:f,children:"Save"}):(0,B.jsx)(Z.A,{onClick:()=>{const e={quantity:1===(null===h||void 0===h?void 0:h.serialization_method)?k:b.length,serial_numbers:b};r(null===h||void 0===h?void 0:h.id,e)},loading:f,children:"Save"})]})]})})),et=$e;var tt=a(1282);const at=()=>{const e=(0,y.wA)(),t=(0,g.useRef)(),[a,n]=(0,g.useState)([]),[l,i]=(0,g.useState)(),[r,c]=(0,g.useState)(),[d,u]=(0,g.useState)(0),[h,p]=(0,g.useState)(!1),[m,x]=(0,g.useState)(0),[v,w]=(0,g.useState)(0),[A,j]=(0,g.useState)({}),[f,S]=(0,g.useState)(""),[b,C]=(0,g.useState)(""),{list:N,create:E,createInbound:k,genBarCode:I,searchList:T}=Re(),{list:D,create:R,createInbound:O,searchlistMat:P}=Fe(),[U,L]=(0,g.useState)({});(0,g.useEffect)((()=>{F()}),[m,v]);const F=async(e,t)=>{c("fetch");const[a,l]=1===v?await D(m+1):await N(m+1);n(a),u(l),c(!1)},H=async e=>{""!==f?(c("fetch"),setTimeout((async()=>{const[t,a]=1===v?await P(m+1,f,e):await T(m+1,f,e);n(t),u(a)}),1e3),c(!1)):_.oR.warn("Please Select Search by Option")},z=[{id:3,title:"Name",render:e=>e.name},{id:4,title:"HSN Code",render:e=>e.hsn_code},{id:5,title:"Vendor Part ID",render:e=>e.vendor_part_id},{id:"cat",title:"Category",render:e=>e.category},{id:6,title:"Serialization",render:e=>1===e.serialization_method?"No Serialization":2===e.serialization_method?"Use Pre-Generated ID":3===e.serialization_method?"Use Own ID":"-"},{id:7,title:"Details",render:e=>e.details},{id:9,title:"Cost",render:e=>e.cost},{id:10,title:"Quantity",render:e=>e.remaining_stock},{id:10,title:"Expected Life",render:e=>e.expected_life},{id:11,title:"Actions",render:a=>(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{var n;(p("add"),2===a.serialization_method)&&(null===(n=t.current)||void 0===n||n.handleFocus());e((0,tt.S)(a))},children:(0,B.jsx)(ke.A,{color:"primary",fontSize:"small"})})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsx)("div",{className:"flex items-center justify-between",children:(0,B.jsxs)("h1",{className:"mt-4",children:["Inbound",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",d,")"]})]})}),(0,B.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,B.jsx)(ce.A,{value:v,onChange:(e,t)=>{w(t),x(0)},children:["Tools","Materials"].map(((e,t)=>(0,B.jsx)(de.A,{className:"fw-500",label:e,value:t},t)))}),(0,B.jsxs)(s.A,{direction:"row",justifyContent:"flex-end",children:[(0,B.jsx)(qe.A,{keyValues:[{id:"name",title:"Name"},{id:"sap_id",title:"SAP ID"},{id:"hsn_code",title:"HSN CODE"},{id:"internal_id",title:"Internal ID"},{id:"serialization",title:"Serialization"},{id:"category",title:"Category"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Search by",classes:"mr-1",value:f,onChange:e=>{S(e.target.value)}}),(0,B.jsx)(Q.A,{height:"37px",placeholder:"Universal Search",onChange:e=>{C(e.target.value),H(e.target.value)},icon:(0,B.jsx)(Ue.A,{onClick:()=>H(),sx:{cursor:"pointer"}})})]})]}),(0,B.jsx)(G,{columns:z,rows:a,rowsPerPage:5,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:m,setPage:x,paginator:!0,serialize:!0,total:d}),(0,B.jsx)(et,{row:U,onClose:()=>p(!1),open:"add"===h,data:A,onSubmit:async(e,t)=>{1===v?await O(t,e):await k(t,e),await F(),j({}),p(!1)},setData:j,isTool:0===v,ref:t,onGenerate:async(e,a)=>{const n=await I(e,a);i(n),n.length&&setTimeout((()=>{var e;null===(e=t.current)||void 0===e||e.handlePrintq()}),1e3)},codes:l})]})},nt=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t=(0,y.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.SelectSearch)||void 0===t?void 0:t.data})),a={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=new W.Ay,n=await t.get("".concat(V.H.MATERIALS,"/?page=").concat(e),{},a,Function.prototype);var l,s;return null!==n&&void 0!==n&&n.data?[null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.results,null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.count]:[[],0]},searchlistMat:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const l=new W.Ay,s=await l.get("".concat(V.H.MATERIALS,"/?search_field=").concat(t,"&search_value=").concat(n,"&page=").concat(e,"&page_size=",10),{},a,Function.prototype);var i,o;return null!==s&&void 0!==s&&s.data?[null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.results,null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.count]:[[],0]},matOutBoundItem:async(e,t)=>{const n={serial_number:e.barcode,internal_id:t},l=new W.Ay,s=await l.post("".concat(V.H.MATERIALS,"/").concat(e.id,"/").concat(V.H.ALL_ISSUED,"/"),n,a);return null===s||void 0===s?void 0:s.data},historyList:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=new W.Ay,n=await t.get("".concat(V.H.MATERIALS,"/").concat(V.H.OUTBOUNDLIST,"/?page=").concat(e),{},a,Function.prototype);var l,s;return null!==n&&void 0!==n&&n.data?[null===n||void 0===n||null===(l=n.data)||void 0===l?void 0:l.results,null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.count]:[[],0]},getBarInfo:async e=>{const t={barcode:e},n=new W.Ay,l=await n.post("".concat(V.H.MATERIALS,"/").concat(V.H.SEARCH,"/"),t,a);return null!==l&&void 0!==l&&l.data?[null===l||void 0===l?void 0:l.data]:0},searchOutbound:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const l=new W.Ay,s=await l.get("".concat(V.H.MATERIALS,"/").concat(V.H.OUTBOUNDLIST,"/?search_field=").concat(t,"&search_value=").concat(n,"&page=").concat(e,"&page_size=",10),{},a,Function.prototype);var i,o;return null!==s&&void 0!==s&&s.data?[null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.results,null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.count]:[[],0]},fetchToolInbound:async(e,t)=>{const n=new W.Ay,l=await n.get("".concat(V.H.TOOLS,"/?serialization=1&search_field=").concat(e,"&search_value=").concat(t),{},a,Function.prototype);var s,i;return null!==l&&void 0!==l&&l.data?[null===l||void 0===l||null===(s=l.data)||void 0===s?void 0:s.results,null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.count]:[]},fetchMaterialInbound:async(e,n)=>{const l=new W.Ay,s=await l.get("".concat(V.H.MATERIALS,"/?serialization=1&search_field=").concat(t,"&search_value=").concat(e),{},a,Function.prototype);var i,o;return null!==s&&void 0!==s&&s.data?[null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.results,null===s||void 0===s||null===(o=s.data)||void 0===o?void 0:o.count]:[]}}};a(8943),a(6638);const lt=()=>{(0,y.wA)();const e=(0,g.useRef)(),[t,a]=(0,g.useState)([]),[n,l]=(0,g.useState)(),[o,r]=(0,g.useState)(0),[c,d]=(0,g.useState)(0),[u,h]=(0,g.useState)(0),[p,m]=(0,g.useState)("Serialization"),[x,v]=(0,g.useState)(""),[w,A]=(0,g.useState)(""),[j,f]=(0,g.useState)(""),{list:S,create:b,createInbound:C,genBarCode:N,searchList:E,getBarInfo:k,outBoundItem:I}=Re(),{list:T,create:D,createInbound:R,searchlistMat:O,matOutBoundItem:P,getBarInfo:U}=Fe(),{fetchToolInbound:L,fetchMaterialInbound:F}=nt(),[H,z]=(0,g.useState)(""),[M,Y]=(0,g.useState)([]),[q,W]=(0,g.useState)([]);(0,g.useEffect)((()=>{"Serialization"===p&&e.current.focus()}),[c,u]);const V=[{id:2,title:"Inbound Date",render:e=>(0,B.jsx)(i.A,{children:Ee()(e.created).format("LL")})},{id:3,title:"Name",render:e=>e.name},{id:1,title:"Barcode",render:e=>e.barcode},{id:4,title:"Expected Life",render:e=>e.expected_life},{id:6,title:"Total Stock",render:e=>"No Serialization"===p?e.remaining_stock:1},{id:5,title:"Quantity ",render:e=>"No Serialization"===p?(0,B.jsx)(Q.A,{width:"15%",onChange:t=>J(t,e.id)}):1}],J=(e,t)=>{const{value:a}=e.target,n=q.map((e=>e.id===t?{...e,quantity:a}:e));W(n)};return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsx)("div",{className:"flex items-center justify-between",children:(0,B.jsx)("h1",{className:"mt-4",children:"Outbound"})}),(0,B.jsx)("div",{className:" items-center  mb-3 fw-500",children:(0,B.jsx)(ce.A,{value:u,onChange:(e,t)=>{h(t),d(0)},children:["Tools","Materials"].map(((e,t)=>(0,B.jsx)(de.A,{label:e,className:"fw-500",value:t},t)))})}),(0,B.jsxs)("div",{className:"flex items-center  mb-3",children:[(0,B.jsx)(ce.A,{value:p,onChange:(e,t)=>{m(t)},children:["Serialization","No Serialization"].map(((e,t)=>(0,B.jsx)(de.A,{label:e,value:e},t)))}),"No Serialization"===p?(0,B.jsxs)(s.A,{direction:"row",justifyContent:"flex-end",ml:5,children:[(0,B.jsx)(qe.A,{keyValues:[{id:"name",title:"Name"},{id:"sap_id",title:"SAP ID"},{id:"hsn_code",title:"HSN CODE"},{id:"internal_id",title:"Internal ID"},{id:"serialization",title:"Serialization"},{id:"category",title:"Category"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Search by",classes:"mr-1",value:w,onChange:e=>{A(e.target.value)}}),(0,B.jsx)(Q.A,{height:"37px",placeholder:"Universal Search",onChange:e=>{f(e.target.value),(async(e,t)=>{l("fetch");const[a,n]=1===u?await F(e,t):await L(e,t);W(a),l(!1)})(w,e.target.value)}})]}):(0,B.jsx)("input",{style:{marginLeft:50},className:Ze.A.input,ref:e,height:"17px",placeholder:"Scan Code",value:H,onKeyUp:e=>async function(e){if("Enter"===e.code){if(!M.includes(H)){Y([...M,H]);const e=1===u?await U(H):await k(H);if(e[0]){const t=1===u?{created:e[0].material_lot.created,name:e[0].material_type.name,id:e[0].material_type.id,expected_life:e[0].material_type.expected_life,barcode:e[0].barcode}:{created:e[0].tool_lot.created,name:e[0].tool_type.name,id:e[0].tool_type.id,expected_life:e[0].tool_type.expected_life,barcode:e[0].barcode};W([...q,t])}}z("")}}(e),onChange:e=>z(e.target.value)})]}),q.length>0&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(G,{columns:V,rows:q,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700"}),(0,B.jsx)(s.A,{sx:{mt:1,alignItems:"flex-end"},children:(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:1},children:[(0,B.jsx)(Q.A,{placeholder:"Internal Id",value:x,onChange:e=>{v(e.target.value)}}),(0,B.jsx)(Z.A,{width:"fit-content",onClick:async()=>{""!==x?(q.map((async(e,t)=>{if("No Serialization"===p){if(!e.quantity)return;0===u?await I(e,x):P(e,x)}else 0===u?await I(e,x):P(e,x)})),W([]),Y([]),v("")):_.oR.warn("Please Fill Internal Id")},loading:n,children:"Save"})]})})]})]})},st=()=>{(0,y.wA)(),(0,g.useRef)();const[e,t]=(0,g.useState)([]),[a,n]=(0,g.useState)(),[l,i]=(0,g.useState)(),[o,r]=(0,g.useState)(0),[c,d]=(0,g.useState)(!1),[u,h]=(0,g.useState)(0),[p,m]=(0,g.useState)(0),[x,v]=(0,g.useState)({}),[w,A]=(0,g.useState)(""),[j,f]=(0,g.useState)(""),{historyList:S,searchOutbound:b}=Re(),{historyList:C,searchOutbound:N}=Fe(),[E,k]=(0,g.useState)({});(0,g.useEffect)((()=>{I()}),[u,p]);const I=async(e,a)=>{i("fetch");const[n,l]=1===p?await C(u+1):await S(u+1);t(n),r(l),i(!1)},T=async e=>{""!==w?(i("fetch"),setTimeout((async()=>{const[a,n]=1===p?await N(u+1,w,e):await b(u+1,w,e);t(a),r(n)}),1e3),i(!1)):_.oR.warn("Please Select Search by Option")},D=[{id:3,title:"Name",render:e=>{var t,a;return(null===(t=e.tool_type)||void 0===t?void 0:t.name)||(null===(a=e.material_type)||void 0===a?void 0:a.name)}},{id:4,title:"Bar Code",render:e=>e.serial_number},{id:5,title:"Internal ID",render:e=>e.internal_id},{id:6,title:"Category",render:e=>{var t,a;return(null===(t=e.tool_type)||void 0===t?void 0:t.category)||(null===(a=e.material_type)||void 0===a?void 0:a.category)}},{id:1,title:"Inbound Date",render:e=>{var t,a;return null!==(t=e.tool_lot)&&void 0!==t&&t.created?Ee()(e.tool_lot.created).format("lll"):Ee()(null===(a=e.material_lot)||void 0===a?void 0:a.created).format("lll")}},{id:2,title:"Outbound Date",render:e=>Ee()(e.created).format("lll")}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsx)("div",{className:"flex items-center justify-between",children:(0,B.jsxs)("h1",{className:"mt-4",children:["Outbound History",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",o,")"]})]})}),(0,B.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,B.jsx)(ce.A,{value:p,onChange:(e,t)=>{m(t),h(0)},children:["Tools","Materials"].map(((e,t)=>(0,B.jsx)(de.A,{label:e,className:"fw-500",value:t},t)))}),(0,B.jsxs)(s.A,{direction:"row",justifyContent:"flex-end",children:[(0,B.jsx)(qe.A,{keyValues:[{id:"name",title:"Name"},{id:"internal_id",title:"Internal ID"},{id:"category",title:"Category"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Search by",classes:"mr-1",value:w,onChange:e=>{A(e.target.value)}}),(0,B.jsx)(Q.A,{height:"37px",placeholder:"Universal Search",onChange:e=>{f(e.target.value),T(e.target.value)},icon:(0,B.jsx)(Ue.A,{onClick:()=>T(),sx:{cursor:"pointer"}})})]})]}),(0,B.jsx)(G,{columns:D,rows:e,rowsPerPage:5,loading:"fetch"===l,titleCellClasses:"c-gray fw-700",page:u,setPage:h,paginator:!0,serialize:!0,total:o})]})},it=()=>{(0,y.wA)();const e=(0,g.useRef)(),[t,a]=(0,g.useState)([]),[n,l]=(0,g.useState)(),[s,i]=(0,g.useState)(),[o,r]=(0,g.useState)(0),[c,d]=(0,g.useState)(!1),[u,h]=(0,g.useState)(0),[p,m]=(0,g.useState)(0),[x,v]=(0,g.useState)({}),[w,A]=(0,g.useState)(),{list:j,create:f,createInbound:S,genBarCode:b}=Re(),{list:C,create:N,createInbound:E}=Fe(),[k,I]=(0,g.useState)({});(0,g.useEffect)((()=>{_()}),[u,p]);const _=async()=>{i("fetch");const[e,t]=1===p?await C(u+1):await j(u+1);a(e),r(t),i(!1)};return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsx)("div",{className:"flex items-center justify-between",children:(0,B.jsxs)("h1",{className:"mt-4",children:["Store Order",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",o,")"]})]})}),(0,B.jsx)("div",{className:"flex items-center justify-between mb-3"}),(0,B.jsx)(et,{row:k,onClose:()=>d(!1),open:"add"===c,data:x,onSubmit:async(e,t)=>{1===p?await E:await S(t,e),await _(),v({}),d(!1)},setData:v,isTool:0===p,ref:e,onGenerate:async(t,a)=>{const n=await b(t,a);l(n),n.length&&setTimeout((()=>{var t;null===(t=e.current)||void 0===t||t.handlePrintq()}),1e3)},codes:n})]})};var ot=a(2559),rt=a(9593),ct=a(9704),dt=a(2019);function ut(e){let{label:t,colorCode:a,chart:n,...l}=e;const{colors:s,series:i,options:o}=n,r=i.map((e=>e.value)),c={chart:{type:"radialBar",sparkline:{enabled:!0}},plotOptions:{radialBar:{startAngle:-90,endAngle:90,track:{background:"#e7e7e7",strokeWidth:"97%",dropShadow:{enabled:!0,left:0,color:"#999",opacity:1,blur:2}},dataLabels:{name:{show:!0,fontSize:"18px",fontWeight:600,color:a,offsetY:5},value:{show:!0,fontSize:"24px",fontFamily:"Helvetica, Arial",fontWeight:400,color:a,offsetY:-30,formatter:function(e){return e+"%"}}}}},grid:{padding:{top:1}},fill:{type:"solid",colors:[a]},labels:[t]};return(0,B.jsx)(p.A,{sx:{display:"flex",justifyContent:"center"},children:(0,B.jsx)(dt.A,{type:"radialBar",series:r,options:c})})}function ht(e){let{title:t,colorCode:a,chart:n,...l}=e;const{series:i,options:o}=n,r=i.map((e=>e.value)),c={chart:{type:"radialBar",sparkline:{enabled:!0}},plotOptions:{radialBar:{track:{color:a,background:"#e7e7e7",strokeWidth:"85%",margin:5,dropShadow:{enabled:!0,left:0,color:"#999",opacity:1,blur:1}},hollow:{size:"50%"},dataLabels:{show:!0,name:{show:!1},value:{show:!0,fontSize:"14px",color:a,offsetY:5}}}},grid:{padding:{top:1}},stroke:{lineCap:"round"},fill:{type:"solid",colors:[a]}};return(0,B.jsx)(s.A,{sx:{},dir:"ltr",children:(0,B.jsx)(dt.A,{type:"radialBar",series:r,options:c})})}const pt=e=>{let{cCode:t,mState:a}=e;const n=(0,I.Zp)();return(0,B.jsxs)(s.A,{sx:{overflow:"hidden",boxShadow:3,borderRadius:2},children:[(0,B.jsxs)(s.A,{sx:{backgroundColor:t,p:1},children:[(0,B.jsxs)(s.A,{sx:{flexDirection:"row"},children:["on"===a&&(0,B.jsx)(rt.A,{style:{color:Y.lm.WHITE}}),"off"===a&&(0,B.jsx)(ot.A,{style:{color:Y.lm.WHITE}}),"downtime"===a&&(0,B.jsx)(ct.A,{style:{color:Y.lm.WHITE}}),(0,B.jsx)(i.A,{sx:{ml:1},children:"Line 1"})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,B.jsx)(i.A,{variant:"subtitle2",sx:{},children:"Running"}),(0,B.jsx)(i.A,{variant:"subtitle2",sx:{alignSelf:"flex-end"},children:"Last update: July 29, 2024, 11:34 a.m."})]})]}),(0,B.jsx)(s.A,{sx:{mb:1},children:(0,B.jsx)(ut,{label:"OEE",colorCode:t,chart:{series:[{label:"OEE",value:37.77}]}})}),(0,B.jsx)(v.A,{}),(0,B.jsxs)(s.A,{sx:{p:1},children:[(0,B.jsx)(i.A,{children:"Key Metrics"}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:1},children:[(0,B.jsxs)(s.A,{sx:{justifyContent:"center",alignItems:"center",width:"33%"},children:[(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Availablity"}),(0,B.jsx)(ht,{chart:{series:[{label:"America",value:70}]},colorCode:t})]}),(0,B.jsxs)(s.A,{sx:{justifyContent:"center",alignItems:"center",width:"33%"},children:[(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Performance"}),(0,B.jsx)(ht,{chart:{series:[{label:"America",value:80}]},colorCode:t})]}),(0,B.jsxs)(s.A,{sx:{justifyContent:"center",alignItems:"center",width:"33%"},children:[(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Quantity"}),(0,B.jsx)(ht,{chart:{series:[{label:"America",value:90}]},colorCode:t})]})]})]}),(0,B.jsx)(v.A,{}),(0,B.jsxs)(s.A,{sx:{p:1},children:[(0,B.jsx)(i.A,{children:"Product Metrics"}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",justifyContent:"space-between",p:1},children:[(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Total"}),(0,B.jsx)(i.A,{children:"10000"})]}),(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Good"}),(0,B.jsx)(i.A,{children:"10000"})]}),(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"NG"}),(0,B.jsx)(i.A,{children:"23"})]}),(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Pass"}),(0,B.jsx)(i.A,{children:"10000"})]}),(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Fail"}),(0,B.jsx)(i.A,{children:"333"})]})]})]}),(0,B.jsx)(v.A,{}),(0,B.jsxs)(s.A,{sx:{p:1},children:[(0,B.jsx)(i.A,{children:"Packet Per Second"}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",justifyContent:"space-between",p:1},children:[(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Best"}),(0,B.jsx)(i.A,{children:"10000"})]}),(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Worst"}),(0,B.jsx)(i.A,{children:"10000"})]}),(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Average"}),(0,B.jsx)(i.A,{children:"23"})]})]})]}),(0,B.jsx)(v.A,{}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold",textDecoration:"underline",p:1,cursor:"pointer"},onClick:()=>n("/operator-portal"),children:"Operator Portal"})]})};var mt=a(1750);const xt=()=>{const[e,t]=(0,g.useState)(0),[a,n]=(0,g.useState)(""),[l,o]=(0,g.useState)(""),[r,c]=(0,g.useState)({company:"",location:"",division:"",line:""});return(0,B.jsx)(s.A,{children:(0,B.jsx)(i.A,{variant:"h1",children:"404"})})},gt=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o}=e;const r=[{title:"Name",placeholder:"Enter Name",type:Y.wN.INPUT,name:"username",validator:Y.wY.REQUIRED},{title:"Description",placeholder:"Enter description",type:Y.wN.INPUT,name:"email",validator:Y.wY.REQUIRED},{title:"Product Division",placeholder:"",type:Y.wN.SELECT,name:"fullname",validator:Y.wY.REQUIRED}],[c,d]=(0,g.useState)(new Map);return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsx)("h3",{className:"opacity-80",children:"ADD NEW LINE"}),(0,B.jsx)(le.A,{data:n,errors:c,onChange:e=>{const{name:t,value:a}=e.target;d((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:r}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,loading:o,children:"Create"})]})]})};var vt=a(4256),yt=a(8492),wt=a(4605),At=a(3193),jt=a(1292);const ft=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,edit:r}=e;const c=[{title:"Alias",placeholder:"Enter Name",type:Y.wN.INPUT,name:"alias",validator:Y.wY.REQUIRED},{title:"Model",placeholder:"Enter model",type:Y.wN.INPUT,name:"model",validator:Y.wY.REQUIRED},{title:"Machine ID",placeholder:"Enter machine ID",type:Y.wN.INPUT,name:"machineID",validator:Y.wY.REQUIRED},{title:"Serial Number",placeholder:"Enter serial number",type:Y.wN.INPUT,name:"snumber",validator:Y.wY.REQUIRED},{title:"Supplier",placeholder:"Enter supplier",type:Y.wN.INPUT,name:"supplier",validator:Y.wY.REQUIRED},{title:"Purchase Date",type:Y.wN.DATE,name:"purchase_date",validator:Y.wY.REQUIRED},{title:"Warranty Expiration",type:Y.wN.DATE,name:"warranty",validator:Y.wY.REQUIRED},{title:"API Endpoint",placeholder:"Enter API Endpoint",type:Y.wN.INPUT,name:"api_endpoint",validator:Y.wY.REQUIRED},{title:"Ideal Cycle Time (seconds)",placeholder:"",type:Y.wN.INPUT,name:"api_endpoint",validator:Y.wY.REQUIRED}],[d,u]=(0,g.useState)(new Map),[h,p]=(0,g.useState)("Yes"),[m,x]=(0,g.useState)("Job/Part based"),[v,y]=(0,g.useState)("Yes");return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:[!0===r?"EDIT":"ADD"," Station"]}),(0,B.jsx)(le.A,{data:n,errors:d,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:c}),(0,B.jsxs)(s.A,{mt:1,children:[(0,B.jsxs)(At.A,{children:[(0,B.jsx)(jt.A,{sx:{color:"black"},id:"demo-row-radio-buttons-group-label",children:"Is end of line"}),(0,B.jsxs)(yt.A,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:h,onChange:e=>p(e.target.value),children:[(0,B.jsx)(wt.A,{value:"Yes",control:(0,B.jsx)(vt.A,{}),label:"Yes"}),(0,B.jsx)(wt.A,{value:"No",control:(0,B.jsx)(vt.A,{}),label:"No"})]})]}),(0,B.jsxs)(At.A,{children:[(0,B.jsx)(jt.A,{sx:{color:"black"},id:"demo-row-radio-buttons-group-label",children:"Performance Calculation"}),(0,B.jsxs)(yt.A,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:m,onChange:e=>x(e.target.value),children:[(0,B.jsx)(wt.A,{value:"Job/Part based",control:(0,B.jsx)(vt.A,{}),label:"Job/Part based"}),(0,B.jsx)(wt.A,{value:"Output based",control:(0,B.jsx)(vt.A,{}),label:"Output based"})]})]}),(0,B.jsxs)(At.A,{children:[(0,B.jsx)(jt.A,{sx:{color:"black"},id:"demo-row-radio-buttons-group-label",children:"Fixed Cycle Time"}),(0,B.jsxs)(yt.A,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:v,onChange:e=>y(e.target.value),children:[(0,B.jsx)(wt.A,{value:"Yes",control:(0,B.jsx)(vt.A,{}),label:"Yes"}),(0,B.jsx)(wt.A,{value:"No",control:(0,B.jsx)(vt.A,{}),label:"No"})]})]})]}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,loading:o,children:"Create"})]})]})};var St=a(1337),bt=a(3968);const Ct=()=>{const[e,t]=(0,g.useState)([]),[a,n]=(0,g.useState)(),[l,o]=(0,g.useState)(0),[r,c]=(0,g.useState)(!1),[d,u]=(0,g.useState)(!1),[h,p]=(0,g.useState)(0),[m,x]=(0,g.useState)(!1),[v,y]=(0,g.useState)({name:"",metadata:""}),{list:w,create:A,update:j,remove:f}=ne();(0,g.useEffect)((()=>{S()}),[h]);const S=async()=>{n("fetch");const[e,a]=await w(h+1);t(e),o(a),n(!1)},b=async()=>{const e={...v};n("fetch");let t=e.id;await j(t,e),y({}),u(!1),await S(),n(!1)};return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)("h1",{className:"mt-4",children:["Machine Master",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",e.length,")"]})]}),(0,B.jsx)(Z.A,{onClick:()=>u("add"),children:"Create New Line"})]}),(0,B.jsx)(i.A,{children:"Company 1 / Plant 1 / SMT"}),(0,B.jsxs)(s.A,{sx:{backgroundColor:Y.lm.BLUE_OPAQUE,flexDirection:"row",mt:2,p:.5,borderRadius:1},children:[m?(0,B.jsx)(St.A,{sx:{cursor:"pointer"},onClick:()=>x(!1)}):(0,B.jsx)(bt.A,{sx:{cursor:"pointer"},onClick:()=>x(!0)}),(0,B.jsx)(i.A,{children:"Demo"})]}),m&&(0,B.jsx)(s.A,{sx:{mx:1},children:(0,B.jsxs)(oe.Ay,{sx:{pt:1,gap:1},container:!0,direction:"row",children:[(0,B.jsx)(s.A,{sx:{backgroundColor:Y.lm.BG_GRAY,borderRadius:1,width:"fit-content",p:1,px:2},onClick:()=>{u("addstation"),c(!0)},children:(0,B.jsx)(i.A,{sx:{width:"fit-content"},children:"Wire Cut"})}),(0,B.jsx)(s.A,{sx:{backgroundColor:Y.lm.BG_GRAY,borderRadius:1,width:"fit-content",p:1,px:2},children:(0,B.jsx)(i.A,{sx:{width:"fit-content"},children:"CNC"})}),(0,B.jsx)(s.A,{sx:{width:"fit-content",p:1},children:(0,B.jsx)(ke.A,{color:"primary",onClick:()=>u("addstation")})})]})}),(0,B.jsx)(gt,{open:"add"===d,onClose:()=>{u(!1),c(!1)},data:v,setData:y,onSubmit:b}),(0,B.jsx)(ft,{edit:r,open:"addstation"===d,onClose:()=>{u(!1),c(!1)},data:v,setData:y,onSubmit:b})]})},Nt=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){const e=new W.Ay,a=await e.get("".concat(V.H.ASSET,"/").concat(V.H.COMPANIES,"/"),{},t,q.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.post("".concat(V.H.ASSET,"/").concat(V.H.COMPANIES,"/"),e,t,(e=>(0,q.So)(e,null,"Company created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},n=new W.Ay,l=await n.put("".concat(V.H.ASSET,"/").concat(V.H.COMPANY,"/").concat(e.id,"/"),a,t,(e=>(0,q.So)(e,null,"Company Updated successfully!")));return null===l||void 0===l?void 0:l.data},remove:async e=>{const a=new W.Ay,n=await a.delete("".concat(V.H.ASSET,"/").concat(V.H.COMPANY,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Company deleted successfully!")));return null===n||void 0===n?void 0:n.data}}},Et=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,edit:r}=e;const c=[{title:"Company Name",placeholder:"Enter Company Name",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED}],[d,u]=(0,g.useState)(new Map);return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:[!0===r?"EDIT":"ADD"," NEW COMPANY"]}),(0,B.jsx)(le.A,{data:n,errors:d,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:c}),(0,B.jsx)(Qe.A,{setItemss:null===n||void 0===n?void 0:n.metadata,setJson:e=>{l((t=>({...t,metadata:e}))),console.log("data------",e)},title:"Details"}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,loading:o,children:"Create"})]})]})},kt=()=>{const e=(0,I.Zp)(),[t,a]=(0,g.useState)([]),[n,l]=(0,g.useState)(),[r,c]=(0,g.useState)(0),[d,u]=(0,g.useState)(!1),[h,p]=(0,g.useState)(!1),[m,x]=(0,g.useState)(0),[v,y]=(0,g.useState)({name:"",metadata:{}}),{list:w,create:A,update:j,remove:f}=Nt();(0,g.useEffect)((()=>{S()}),[m]);const S=async()=>{l("fetch");const[e,t]=await w(m+1);a(e),c(t),l(!1)},b=[{id:2,title:"Company Name",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer",fontSize:20},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:6,title:"Details",render:e=>(0,B.jsx)(Le,{icon:(0,B.jsx)(Oe.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})},{id:5,title:"Actions",render:e=>(0,B.jsxs)(s.A,{flexDirection:"row",children:[(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{y(e),u(!0),p("add")},children:(0,B.jsx)(te.A,{color:"primary",fontSize:"small"})}),(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{l("fetch"),await f(e),await S(),l(!1)})(null===e||void 0===e?void 0:e.id),children:(0,B.jsx)(ee.A,{color:"error",fontSize:"small"})})]})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)("h1",{className:"mt-4",children:["Companies",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",t.length,")"]})]}),(0,B.jsx)(Z.A,{onClick:()=>p("add"),children:"Create Company"})]}),(0,B.jsx)(G,{columns:b,rows:t,rowsPerPage:5,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:x,paginator:!0,serialize:!0,total:r}),(0,B.jsx)(Et,{open:"add"===h,onClose:()=>{p(!1),u(!1)},data:v,edit:d,setData:y,onSubmit:async()=>{const e={...v};console.log("payload",e),l("fetch"),!0===d?await j(e):await A(e),y({}),p(!1),await S(),l(!1),u(!1)}})]})},It=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new W.Ay,n=await a.get("".concat(V.H.ASSET,"/").concat(e,"/").concat(V.H.PLANTS,"/"),{},t,q.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const n=new W.Ay,l=await n.post("".concat(V.H.ASSET,"/").concat(a,"/").concat(V.H.PLANTS,"/"),e,t,(e=>(0,q.So)(e,null,"Plant created successfully!")));return null===l||void 0===l?void 0:l.data},update:async e=>{const a={name:e.name,metadata:e.metadata},n=new W.Ay,l=await n.put("".concat(V.H.ASSET,"/").concat(V.H.PLANT,"/").concat(e.id,"/"),a,t,(e=>(0,q.So)(e,null,"Plant Updated successfully!")));return null===l||void 0===l?void 0:l.data},remove:async e=>{const a=new W.Ay,n=await a.delete("".concat(V.H.ASSET,"/").concat(V.H.PLANT,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Plant deleted successfully!")));return null===n||void 0===n?void 0:n.data}}},_t=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,edit:r}=e;const c=[{title:"Plant Name",placeholder:"Enter Plant Name",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED}],[d,u]=(0,g.useState)(new Map);return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:[!0===r?"EDIT":"ADD"," NEW PLANT"]}),(0,B.jsx)(le.A,{data:n,errors:d,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:c}),(0,B.jsx)(Qe.A,{setItemss:n.metadata,setJson:e=>l((t=>({...t,metadata:e}))),title:"Details"}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,loading:o,children:"Create"})]})]})};var Tt=a(9120);const Dt=()=>{const e=(0,I.zy)(),t=(0,I.Zp)(),a=e.state,[n,l]=(0,g.useState)([]),[r,c]=(0,g.useState)(),[d,u]=(0,g.useState)(0),[h,p]=(0,g.useState)(!1),[m,x]=(0,g.useState)(!1),[v,y]=(0,g.useState)(0),[w,A]=(0,g.useState)({name:"",metadata:{}}),{list:j,create:f,update:S,remove:b}=It();(0,g.useEffect)((()=>{C()}),[v]);const C=async()=>{c("fetch");const[e,t]=await j(v+1,a);l(e),u(t),c(!1)},N=[{id:1,title:"Plant Name",render:e=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>t("/divisionpage",{state:e.id}),children:e.name})},{id:2,title:"Company Name",render:e=>e.company},{id:3,title:"Details",render:e=>(0,B.jsx)(Le,{icon:(0,B.jsx)(Oe.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})},{id:5,title:"Actions",render:e=>(0,B.jsxs)(s.A,{flexDirection:"row",children:[(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{p(!0),x("add"),A(e)},children:(0,B.jsx)(te.A,{color:"primary",fontSize:"small"})}),(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{c("fetch"),await b(e),await C(),c(!1)})(null===e||void 0===e?void 0:e.id),children:(0,B.jsx)(ee.A,{color:"error",fontSize:"small"})})]})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)(s.A,{sx:{flexDirection:"row",alignItems:"center"},children:[(0,B.jsx)(Tt.A,{color:"primary",sx:{mr:1,cursor:"pointer"},onClick:()=>t(-1)}),(0,B.jsxs)("h1",{className:"mt-4",children:["Plant's",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",n.length,")"]})]})]}),(0,B.jsx)(Z.A,{onClick:()=>x("add"),children:"Add Plant"})]}),(0,B.jsx)(G,{columns:N,rows:n,rowsPerPage:5,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:v,setPage:y,paginator:!0,serialize:!0,total:d}),(0,B.jsx)(_t,{open:"add"===m,onClose:()=>{x(!1),p(!1)},data:w,edit:h,setData:A,onSubmit:async()=>{const e={...w};c("fetch"),!0===h?await S(e):await f(e,a),A({}),x(!1),await C(),c(!1),p(!1)}})]})},Rt=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new W.Ay,n=await a.get("".concat(V.H.ASSET,"/").concat(e,"/").concat(V.H.DIVISIONS,"/"),{},t,q.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const n=new W.Ay,l=await n.post("".concat(V.H.ASSET,"/").concat(a,"/").concat(V.H.DIVISIONS,"/"),e,t,(e=>(0,q.So)(e,null,"Division created successfully!")));return null===l||void 0===l?void 0:l.data},update:async e=>{const a={name:e.name,metadata:e.metadata},n=new W.Ay,l=await n.put("".concat(V.H.ASSET,"/").concat(V.H.DIVISION,"/").concat(e.id,"/"),a,t,(e=>(0,q.So)(e,null,"Division Updated successfully!")));return null===l||void 0===l?void 0:l.data},remove:async e=>{const a=new W.Ay,n=await a.delete("".concat(V.H.ASSET,"/").concat(V.H.DIVISION,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Division deleted successfully!")));return null===n||void 0===n?void 0:n.data}}},Ot=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,edit:r}=e;const c=[{title:"Division Name",placeholder:"Enter Division Name",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED}],[d,u]=(0,g.useState)(new Map);return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:[!0===r?"EDIT":"ADD"," NEW DIVISION"]}),(0,B.jsx)(le.A,{data:n,errors:d,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:c}),(0,B.jsx)(Qe.A,{setItemss:n.metadata,setJson:e=>l((t=>({...t,metadata:e}))),title:"Details"}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,loading:o,children:"Create"})]})]})},Pt=()=>{const e=(0,I.zy)(),t=(0,I.Zp)(),a=e.state,[n,l]=(0,g.useState)([]),[r,c]=(0,g.useState)(),[d,u]=(0,g.useState)(0),[h,p]=(0,g.useState)(!1),[m,x]=(0,g.useState)(!1),[v,y]=(0,g.useState)(0),[w,A]=(0,g.useState)({name:"",metadata:{}}),{list:j,create:f,update:S,remove:b}=Rt();(0,g.useEffect)((()=>{C()}),[v]);const C=async()=>{c("fetch");const[e,t]=await j(v+1,a);l(e),u(t),c(!1)},N=[{id:1,title:"Division Name",render:e=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>t("/line",{state:e.id}),children:e.name})},{id:2,title:"Plant Name",render:e=>e.plant},{id:6,title:"Details",render:e=>(0,B.jsx)(Le,{icon:(0,B.jsx)(Oe.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})},{id:5,title:"Actions",render:e=>(0,B.jsxs)(s.A,{flexDirection:"row",children:[(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{p(!0),x("add"),A(e)},children:(0,B.jsx)(te.A,{color:"primary",fontSize:"small"})}),(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{c("fetch"),await b(e),await C(),c(!1)})(null===e||void 0===e?void 0:e.id),children:(0,B.jsx)(ee.A,{color:"error",fontSize:"small"})})]})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)(s.A,{sx:{flexDirection:"row",alignItems:"center"},children:[(0,B.jsx)(Tt.A,{color:"primary",sx:{mr:1,cursor:"pointer"},onClick:()=>t(-1)}),(0,B.jsxs)("h1",{className:"mt-4",children:["Division's",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",n.length,")"]})]})]}),(0,B.jsx)(Z.A,{onClick:()=>x("add"),children:"Add Division"})]}),(0,B.jsx)(G,{columns:N,rows:n,rowsPerPage:5,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:v,setPage:y,paginator:!0,serialize:!0,total:d}),(0,B.jsx)(Ot,{open:"add"===m,onClose:()=>{x(!1),p(!1)},data:w,edit:h,setData:A,onSubmit:async()=>{const e={...w};c("fetch"),!0===h?await S(e):await f(e,a),A({}),x(!1),await C(),c(!1),p(!1)}})]})},Ut=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new W.Ay,n=await a.get("".concat(V.H.ASSET,"/").concat(e,"/").concat(V.H.LINES,"/"),{},t,q.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const n=new W.Ay,l=await n.post("".concat(V.H.ASSET,"/").concat(a,"/").concat(V.H.LINES,"/"),e,t,(e=>(0,q.So)(e,null,"Line created successfully!")));return null===l||void 0===l?void 0:l.data},update:async e=>{const a={name:e.name,metadata:e.metadata},n=new W.Ay,l=await n.put("".concat(V.H.ASSET,"/").concat(V.H.LINE,"/").concat(e.id,"/"),a,t,(e=>(0,q.So)(e,null,"Line Updated successfully!")));return null===l||void 0===l?void 0:l.data},remove:async e=>{const a=new W.Ay,n=await a.delete("".concat(V.H.ASSET,"/").concat(V.H.LINE,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Line deleted successfully!")));return null===n||void 0===n?void 0:n.data}}},Lt=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,edit:r}=e;const c=[{title:"Line Name",placeholder:"Enter Line Name",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED}],[d,u]=(0,g.useState)(new Map);return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:[!0===r?"EDIT":"ADD"," NEW LINE"]}),(0,B.jsx)(le.A,{data:n,errors:d,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:c}),(0,B.jsx)(Qe.A,{setItemss:n.metadata,setJson:e=>l((t=>({...t,metadata:e}))),title:"Details"}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,loading:o,children:"Create"})]})]})},Ft=()=>{const e=(0,I.zy)(),t=(0,I.Zp)(),a=e.state,[n,l]=(0,g.useState)([]),[r,c]=(0,g.useState)(),[d,u]=(0,g.useState)(0),[h,p]=(0,g.useState)(!1),[m,x]=(0,g.useState)(!1),[v,y]=(0,g.useState)(0),[w,A]=(0,g.useState)({name:"",metadata:{}}),{list:j,create:f,update:S,remove:b}=Ut();(0,g.useEffect)((()=>{C()}),[v]);const C=async()=>{c("fetch");const[e,t]=await j(v+1,a);l(e),u(t),c(!1)},N=[{id:1,title:"Line Name",render:e=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>t("/asset",{state:e.id}),children:e.name})},{id:2,title:"Division Name",render:e=>e.division},{id:3,title:"Details",render:e=>(0,B.jsx)(Le,{icon:(0,B.jsx)(Oe.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})},{id:5,title:"Actions",render:e=>(0,B.jsxs)(s.A,{flexDirection:"row",children:[(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{p(!0),x("add"),A(e)},children:(0,B.jsx)(te.A,{color:"primary",fontSize:"small"})}),(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{c("fetch"),await b(e),await C(),c(!1)})(null===e||void 0===e?void 0:e.id),children:(0,B.jsx)(ee.A,{color:"error",fontSize:"small"})})]})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)(s.A,{sx:{flexDirection:"row",alignItems:"center"},children:[(0,B.jsx)(Tt.A,{color:"primary",sx:{mr:1,cursor:"pointer"},onClick:()=>t(-1)}),(0,B.jsxs)("h1",{className:"mt-4",children:["Line's",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",n.length,")"]})]})]}),(0,B.jsx)(Z.A,{onClick:()=>x("add"),children:"Add Line"})]}),(0,B.jsx)(G,{columns:N,rows:n,rowsPerPage:5,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:v,setPage:y,paginator:!0,serialize:!0,total:d}),(0,B.jsx)(Lt,{open:"add"===m,onClose:()=>{x(!1),p(!1)},data:w,edit:h,setData:A,onSubmit:async()=>{const e={...w};c("fetch"),!0===h?await S(e):await f(e,a),A({}),x(!1),await C(),c(!1),p(!1)}})]})},Ht=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new W.Ay,n=await a.get("".concat(V.H.ASSET,"/").concat(e,"/").concat(V.H.ASSETS,"/"),{},t,q.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const n=new W.Ay,l=await n.post("".concat(V.H.ASSET,"/").concat(a,"/").concat(V.H.ASSETS,"/"),e,t,(e=>(0,q.So)(e,null,"Asset created successfully!")));return null===l||void 0===l?void 0:l.data},update:async e=>{const a={name:e.name,metadata:e.metadata},n=new W.Ay,l=await n.put("".concat(V.H.ASSET,"/").concat(V.H.ASSET,"/").concat(e.id,"/"),a,t,(e=>(0,q.So)(e,null,"Asset Updated successfully!")));return null===l||void 0===l?void 0:l.data},remove:async e=>{const a=new W.Ay,n=await a.delete("".concat(V.H.ASSET,"/").concat(V.H.ASSET,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Asset deleted successfully!")));return null===n||void 0===n?void 0:n.data}}},zt=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,edit:r}=e;const c=[{title:"Asset Name",placeholder:"Enter asset Name",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED}],[d,u]=(0,g.useState)(new Map);return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:[!0===r?"EDIT":"ADD"," NEW LINE"]}),(0,B.jsx)(le.A,{data:n,errors:d,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:c}),(0,B.jsx)(Qe.A,{setItemss:n.metadata,setJson:e=>l((t=>({...t,metadata:e}))),title:"Details"}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,loading:o,children:"Create"})]})]})},Mt=()=>{const e=(0,I.zy)(),t=(0,I.Zp)(),a=e.state,[n,l]=(0,g.useState)([]),[i,r]=(0,g.useState)(),[c,d]=(0,g.useState)(0),[u,h]=(0,g.useState)(!1),[p,m]=(0,g.useState)(!1),[x,v]=(0,g.useState)(0),[y,w]=(0,g.useState)({name:"",metadata:{}}),{list:A,create:j,update:f,remove:S}=Ht();(0,g.useEffect)((()=>{b()}),[x]);const b=async()=>{r("fetch");const[e,t]=await A(x+1,a);l(e),d(t),r(!1)},C=[{id:1,title:"Asset Name",render:e=>e.name},{id:2,title:"Line Name",render:e=>e.line},{id:6,title:"Details",render:e=>(0,B.jsx)(Le,{icon:(0,B.jsx)(Oe.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})},{id:5,title:"Actions",render:e=>(0,B.jsxs)(s.A,{flexDirection:"row",children:[(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{h(!0),m("add"),w(e)},children:(0,B.jsx)(te.A,{color:"primary",fontSize:"small"})}),(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{r("fetch"),await S(e),await b(),r(!1)})(null===e||void 0===e?void 0:e.id),children:(0,B.jsx)(ee.A,{color:"error",fontSize:"small"})})]})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)(s.A,{sx:{flexDirection:"row",alignItems:"center"},children:[(0,B.jsx)(Tt.A,{color:"primary",sx:{mr:1,cursor:"pointer"},onClick:()=>t(-1)}),(0,B.jsxs)("h1",{className:"mt-4",children:["Asset's",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",n.length,")"]})]})]}),(0,B.jsx)(Z.A,{onClick:()=>m("add"),children:"Add Asset"})]}),(0,B.jsx)(G,{columns:C,rows:n,rowsPerPage:5,loading:"fetch"===i,titleCellClasses:"c-gray fw-700",page:x,setPage:v,paginator:!0,serialize:!0,total:c}),(0,B.jsx)(zt,{open:"add"===p,onClose:()=>{m(!1),h(!1)},data:y,edit:u,setData:w,onSubmit:async()=>{const e={...y};r("fetch"),!0===u?await f(e):await j(e,a),w({}),m(!1),await b(),r(!1),h(!1)}})]})},Qt=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){const e=new W.Ay,a=await e.get("".concat(V.H.ASSET,"/").concat(V.H.GROUPS,"/"),{},t,q.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.post("".concat(V.H.ASSET,"/").concat(V.H.GROUPS,"/"),e,t,(e=>(0,q.So)(e,null,"Group created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},n=new W.Ay,l=await n.put("".concat(V.H.ASSET,"/").concat(V.H.GROUP,"/").concat(e.id,"/"),a,t,(e=>(0,q.So)(e,null,"Group Updated successfully!")));return null===l||void 0===l?void 0:l.data},remove:async e=>{const a=new W.Ay,n=await a.delete("".concat(V.H.ASSET,"/").concat(V.H.GROUP,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Group deleted successfully!")));return null===n||void 0===n?void 0:n.data},allAssets:async function(){const e=new W.Ay,a=await e.get("".concat(V.H.ASSET,"/").concat(V.H.ALLASSETS,"/"),{},t);return null!==a&&void 0!==a&&a.data?[null===a||void 0===a?void 0:a.data]:[[],0]},groupAsset:async e=>{const a=new W.Ay,n=await a.get("".concat(V.H.ASSET,"/").concat(V.H.GROUP,"/").concat(e,"/"),{},t);return null===n||void 0===n?void 0:n.data},updateAssets:async(e,a)=>{const n=new W.Ay,l=await n.put("".concat(V.H.ASSET,"/").concat(V.H.GROUP,"/").concat(a,"/"),e,t);return null===l||void 0===l?void 0:l.data}}},Yt=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){const e=new W.Ay,a=await e.get("".concat(V.H.OPERATOR,"-").concat(V.H.GROUPS,"/"),{},t,q.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.post("".concat(V.H.OPERATOR,"-").concat(V.H.GROUPS,"/"),e,t,(e=>(0,q.So)(e,null,"Group created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},n=new W.Ay,l=await n.put("".concat(V.H.OPERATOR,"-").concat(V.H.GROUP,"/").concat(e.id,"/"),a,t,(e=>(0,q.So)(e,null,"Group Updated successfully!")));return null===l||void 0===l?void 0:l.data},remove:async e=>{const a=new W.Ay,n=await a.delete("".concat(V.H.OPERATOR,"-").concat(V.H.GROUP,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Group deleted successfully!")));return null===n||void 0===n?void 0:n.data},allOperator:async function(){const e=new W.Ay,a=await e.get("".concat(V.H.OPERATORS,"/"),{},t);var n;return null!==a&&void 0!==a&&a.data?[null===a||void 0===a||null===(n=a.data)||void 0===n?void 0:n.results]:[[],0]},groupOp:async e=>{const a=new W.Ay,n=await a.get("".concat(V.H.OPERATOR,"-").concat(V.H.GROUP,"/").concat(e,"/"),{},t);return null===n||void 0===n?void 0:n.data},updateAssets:async(e,a)=>{const n=new W.Ay,l=await n.put("".concat(V.H.OPERATOR,"-").concat(V.H.GROUP,"/").concat(a,"/"),e,t);return null===l||void 0===l?void 0:l.data}}},Bt=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){const e=new W.Ay,a=await e.get("".concat(V.H.USER,"-").concat(V.H.GROUPS,"/"),{},t,q.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.post("".concat(V.H.USER,"-").concat(V.H.GROUPS,"/"),e,t,(e=>(0,q.So)(e,null,"Group created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},n=new W.Ay,l=await n.put("".concat(V.H.USER,"-").concat(V.H.GROUP,"/").concat(e.id,"/"),a,t,(e=>(0,q.So)(e,null,"Group Updated successfully!")));return null===l||void 0===l?void 0:l.data},remove:async e=>{const a=new W.Ay,n=await a.delete("".concat(V.H.USER,"-").concat(V.H.GROUP,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Group deleted successfully!")));return null===n||void 0===n?void 0:n.data},allUser:async function(){const e=new W.Ay,a=await e.get("".concat(V.H.USERS,"/"),{},t);return null!==a&&void 0!==a&&a.data?[null===a||void 0===a?void 0:a.data]:[[],0]},updateAssets:async(e,a)=>{const n=new W.Ay,l=await n.put("".concat(V.H.USER,"-").concat(V.H.GROUP,"/").concat(a,"/"),e,t);return null===l||void 0===l?void 0:l.data},groupUser:async e=>{const a=new W.Ay,n=await a.get("".concat(V.H.USER,"-").concat(V.H.GROUP,"/").concat(e,"/"),{},t);return null===n||void 0===n?void 0:n.data}}};var Gt=a(5502);const qt=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:o,loading:r,edit:c,tab:d}=e;const{allAssets:u,groupAsset:h,updateAssets:p}=Qt(),{allOperator:m,groupOp:x,updateAssets:v}=Yt(),{allUser:w,groupUser:A,updateAssets:j}=Bt(),[f,S]=(0,g.useState)(new Map),[b,C]=(0,g.useState)([]),[N,E]=(0,g.useState)([]),[k,I]=(0,g.useState)([]),_=(0,y.d4)((e=>{var t,a;return null===e||void 0===e||null===(t=e.SelectedId)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.id})),T=(0,y.d4)((e=>{var t,a;return null===e||void 0===e||null===(t=e.SelectedId)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.name}));(0,g.useLayoutEffect)((()=>{R()}),[""!==_]);const D=async(e,t)=>{let a=t;e.map((e=>{a.map(((t,n)=>{if(t.id===e.id){a.indexOf(t);a.splice(n,1)}}))})),C(a)},R=async()=>{if("Machines"===d){var e;const[t]=await u(),a=await h(_);D(a.assets,t),(null===(e=a.assets)||void 0===e?void 0:e.length)>0&&E(a.assets)}else if("Operators"===d){var t;const[e]=await m(),a=await x(_);D(a.operators,e),(null===(t=a.operators)||void 0===t?void 0:t.length)>0&&E(a.operators)}else if("Users"===d){var a;const[e]=await w(),t=await A(_);D(t.users,e),(null===(a=t.users)||void 0===a?void 0:a.length)>0&&E(t.users)}},O=async(e,t)=>{const a={remove:[e]},n={add:[e]};"Machines"===d?await p("add"===t?n:a,_):"Operators"===d?await v("add"===t?n:a,_):"Users"===d&&await j("add"===t?n:a,_),R()};return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(800px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",style:{textTransform:"capitalize"},children:["(",T,") ",d," Management"]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:1,gap:1,height:400},children:[(0,B.jsxs)(s.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:Y.lm.PRIMARY,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,B.jsxs)(i.A,{sx:{px:1},children:[d," in Group"]}),N.map(((e,t)=>(0,B.jsxs)(s.A,{sx:{flexDirection:"row",backgroundColor:Y.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,B.jsxs)(i.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e.name||e.fullname||e.username]},e.name),(0,B.jsx)(Gt.A,{fontSize:"small",sx:{color:Y.lm.DARK_RED,m:.2,cursor:"pointer"},onClick:()=>O(e.id,"remove")})]},t)))]}),(0,B.jsxs)(s.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:Y.lm.PRIMARY,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,B.jsxs)(i.A,{sx:{px:1},children:["All ",d]}),b.map(((e,t)=>(0,B.jsxs)(s.A,{sx:{flexDirection:"row",backgroundColor:Y.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,B.jsxs)(i.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e.name||e.fullname||e.username]},e.name),(0,B.jsx)(ke.A,{fontSize:"small",sx:{color:Y.lm.DARK_GREEN,m:.2,cursor:"pointer"},onClick:()=>O(e.id,"add")})]},t)))]})]})]})},Wt=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,edit:r}=e;const c=[{title:"Group Name",placeholder:"Enter Group Name",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED}],[d,u]=(0,g.useState)(new Map);return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:[!0===r?"EDIT":"ADD"," NEW GROUP"]}),(0,B.jsx)(le.A,{data:n,errors:d,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:c}),(0,B.jsx)(Qe.A,{setItemss:n.metadata,setJson:e=>l((t=>({...t,metadata:e}))),title:"Details"}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,loading:o,children:"Create"})]})]})};var Vt=a(7404);const Jt=()=>{const e=(0,y.wA)(),[t,a]=((0,I.zy)(),(0,I.Zp)(),(0,g.useState)("Users")),[n,l]=(0,g.useState)([]),[r,c]=(0,g.useState)(),[d,u]=(0,g.useState)(0),[h,p]=(0,g.useState)(!1),[m,x]=(0,g.useState)(!1),[v,w]=(0,g.useState)(0),[A,j]=(0,g.useState)({name:"",metadata:{}}),{list:f,create:S,update:b,remove:C}=Qt(),{list:N,create:E,update:k,remove:_}=Yt(),{list:T,create:D,update:R,remove:O}=Bt();(0,g.useEffect)((()=>{P()}),[v,t]);const P=async()=>{c("fetch");const[e,a]="Machines"===t?await f(v+1):await T(v+1);l(e),u(a),c(!1)},U=async()=>{const e={...A};c("fetch"),!0===h?"Machines"===t?await b(e):"Operators"===t?await k(e):await R(e):"Machines"===t?await S(e):"Operators"===t?await E(e):await D(e),j({name:"",metadata:{}}),x(!1),await P(),c(!1),p(!1)},L=[{id:1,title:"Group Name",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer",fontSize:20},onClick:()=>{e((0,Vt.z)({id:t.id,name:t.name})),x("addremove")},children:t.name})},{id:3,title:"Details",render:e=>(0,B.jsx)(Le,{icon:(0,B.jsx)(Oe.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})},{id:5,title:"Actions",render:e=>(0,B.jsxs)(s.A,{flexDirection:"row",children:[(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{p(!0),x("add"),j(e)},children:(0,B.jsx)(te.A,{color:"primary",fontSize:"small"})}),(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{c("fetch"),"Machines"===t?await C(e):"Operators"===t?await _(e):await O(e),await P(),c(!1)})(null===e||void 0===e?void 0:e.id),children:(0,B.jsx)(ee.A,{color:"error",fontSize:"small"})})]})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsx)(ce.A,{value:t,onChange:(e,t)=>{a(t),w(0)},className:"mb-2 fw-500",children:["Users","Machines"].map(((e,t)=>(0,B.jsx)(de.A,{label:e,className:"fw-500",value:e})))}),(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsx)(s.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,B.jsxs)("h1",{className:"mt-4",children:[t," Group's",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",n.length,")"]})]})}),(0,B.jsxs)(Z.A,{onClick:()=>x("add"),children:["Add ",t," Group"]})]}),(0,B.jsx)(G,{columns:L,rows:n,rowsPerPage:5,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:v,setPage:w,paginator:!0,serialize:!0,total:d}),(0,B.jsx)(Wt,{open:"add"===m,onClose:()=>{x(!1),p(!1)},data:A,edit:h,setData:j,onSubmit:U}),"addremove"===m&&(0,B.jsx)(qt,{open:"addremove"===m,onClose:()=>{x(!1)},data:A,setData:j,onSubmit:U,tab:t})]})},Xt=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new W.Ay,n=await a.get("".concat(e,"/").concat(V.H.USERS,"/"),{},t,q.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},create:async(e,a)=>{const n=new W.Ay,l=await n.post("".concat(a,"/").concat(V.H.USERS,"/"),e,t,(e=>(0,q.So)(e,null,"User created successfully!")));return null===l||void 0===l?void 0:l.data},update:async(e,a,n)=>{const l=new W.Ay,s=await l.put("".concat(e,"/").concat(V.H.USER,"/").concat(a,"/"),n,t,(e=>(0,q.So)(e,null,"User Updated successfully!")));return null===s||void 0===s?void 0:s.data},remove:async e=>{if(!e)return;const a=new W.Ay,n=await a.delete("".concat(V.H.USER,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"User deleted successfully!")));return null===n||void 0===n?void 0:n.data},opratorList:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new W.Ay,n=await a.get("".concat(e,"/").concat(V.H.OPERATORS,"/"),{},t,q.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},createOperator:async(e,a)=>{const n=new W.Ay,l=await n.post("".concat(a,"/").concat(V.H.OPERATORS,"/"),e,t,(e=>(0,q.So)(e,null,"Operator created successfully!")));return null===l||void 0===l?void 0:l.data},updateOperator:async(e,a)=>{const n=new W.Ay,l=await n.put("".concat(V.H.OPERATOR,"/").concat(e,"/"),a,t,(e=>(0,q.So)(e,null,"Operator Updated successfully!")));return null===l||void 0===l?void 0:l.data},removeOperator:async e=>{if(!e)return;const a=new W.Ay,n=await a.delete("".concat(V.H.OPERATOR,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Operator deleted successfully!")));return null===n||void 0===n?void 0:n.data}}},Zt=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,tab:r}=e;const c=[{title:"User Name",placeholder:"Enter User Name",type:Y.wN.INPUT,name:"username",validator:Y.wY.REQUIRED},{title:"Email",placeholder:"Enter Email",type:Y.wN.INPUT,name:"email"},{title:"Full Name",placeholder:"Enter Full Name",type:Y.wN.INPUT,name:"fullname"}],d=[{title:"Employee Id",placeholder:"Employee Id",type:Y.wN.INPUT,name:"employee_id",validator:Y.wY.REQUIRED},{title:"Full Name",placeholder:"Enter Full Name",type:Y.wN.INPUT,name:"fullname"}],[u,h]=(0,g.useState)(new Map);return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:["ADD ",r]}),(0,B.jsx)(le.A,{data:n,errors:u,onChange:e=>{const{name:t,value:a}=e.target;h((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:"Users"===r?c:d}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:async()=>{const e=(0,se.bG)(c,n);h(e),e.size||i()},loading:o,children:"Create"})]})]})},Kt=()=>{const e=(0,I.zy)(),t=((0,I.Zp)(),null===e||void 0===e?void 0:e.state),{list:a,opratorList:n,create:l,createOperator:s,update:i}=Xt(),[r,c]=(0,g.useState)("Users"),[d,u]=(0,g.useState)([]),[h,p]=(0,g.useState)(),[m,x]=(0,g.useState)(0),[v,y]=(0,g.useState)(0),[w,A]=(0,g.useState)(!1),[j,f]=(0,g.useState)({});(0,g.useEffect)((()=>{S()}),[v,r]);const S=async()=>{p("fetch");const[e,n]=await a(v+1,t);u(e),x(n),p(!1)},b=[{id:1,title:"Email",render:e=>e.email},{id:2,title:"User Name",render:e=>e.username},{id:3,title:"Full Name",render:e=>e.fullname},{id:4,title:"Employee Id",render:e=>e.employee_id},{id:5,title:"Role",render:e=>(0,B.jsx)(he,{title:e.is_admin?"admin":"Na"})},{id:6,title:"Action",render:e=>(0,B.jsx)(Ce.A,{title:e.is_admin?"Remove Admin":"Make Admin",children:(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>C(null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.is_admin),children:(0,B.jsx)(be.A,{color:e.is_admin?"error":"success",fontSize:"small"})})})}],C=async(e,a)=>{p("fetch");const n={is_admin:!0!==a};await i(t,e,n),await S(),p(!1)};return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)("h1",{className:"mt-4",children:[r,(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",d.length,")"]})]}),(0,B.jsxs)(Z.A,{onClick:()=>A(!0),children:["Create ",r]})]}),(0,B.jsx)(G,{columns:b,rows:d,rowsPerPage:10,loading:"fetch"===h,titleCellClasses:"c-gray fw-700",page:v,setPage:y,paginator:!0,serialize:!0,total:m}),(0,B.jsx)(Zt,{open:w,onClose:()=>A(!1),data:j,setData:f,onSubmit:async()=>{const e={...j};p("fetch"),"Users"===r?await l(e,t):await s(e,t),f({}),A(!1),await S(),p(!1)},loading:"add"===h,tab:r})]})},$t=()=>{const[e,t]=(0,g.useState)(0),[a,n]=(0,g.useState)(""),[l,i]=(0,g.useState)(""),[o,r]=(0,g.useState)({company:"",location:"",division:"",line:""});return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(s.A,{sx:{p:2,justifyContent:"space-between",flexDirection:"row"},children:[(0,B.jsx)(ce.A,{value:e,onChange:(e,a)=>{t(a)},children:["Kanban View","Table View"].map(((e,t)=>(0,B.jsx)(de.A,{label:e,className:"fw-500",value:t})))}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row"},children:[(0,B.jsx)(qe.A,{keyValues:[{id:"All",title:"All"},{id:"company list",title:"company list"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Company",classes:"mr-1",value:o.company,onChange:e=>r({...o,company:e.target.value})}),(0,B.jsx)(qe.A,{keyValues:[{id:"All",title:"All"},{id:"location list",title:"location list"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Location",classes:"mr-1",value:o.location,onChange:e=>r({...o,location:e.target.value})}),(0,B.jsx)(qe.A,{keyValues:[{id:"All",title:"All"},{id:"division list",title:"division list"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Division",classes:"mr-1",value:o.division,onChange:e=>r({...o,division:e.target.value})}),(0,B.jsx)(qe.A,{keyValues:[{id:"All",title:"All"},{id:"line list",title:"line list"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Line/Cell",classes:"mr-1",value:o.line,onChange:e=>r({...o,line:e.target.value})}),(0,B.jsx)(mt.A,{width:"fit-content"})]})]}),0===e?(0,B.jsxs)(oe.Ay,{display:"grid",sx:{gap:1,p:2},gridTemplateColumns:{sm:"repeat(3, 1fr)",xs:"repeat(3, 1fr)"},children:[(0,B.jsx)(pt,{cCode:Y.lm.RED,mState:"off"}),(0,B.jsx)(pt,{cCode:Y.lm.YELLOW,mState:"downtime"}),(0,B.jsx)(pt,{cCode:Y.lm.GREEN,mState:"on"})]}):(0,B.jsxs)(s.A,{sx:{p:2},children:[(0,B.jsxs)(s.A,{direction:"row",justifyContent:"flex-end",sx:{mb:1},children:[(0,B.jsx)(qe.A,{keyValues:[{id:"Division",title:"Division"},{id:"Line",title:"Line"},{id:"OEE",title:"OEE"},{id:"Availability",title:"Availability"},{id:"Performance",title:"Performance"},{id:"Quality",title:"Quality"},{id:"Total Cycle Time",title:"Total Cycle Time"},{id:"Total Downtime",title:"Total Downtime"},{id:"Total Available Time",title:"Total Available Time"},{id:"Pass",title:"Pass"},{id:"Fail",title:"Fail"},{id:"Status",title:"Status"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Search by",classes:"mr-1",value:a,onChange:e=>n(e.target.value)}),(0,B.jsx)(Q.A,{height:"37px",placeholder:"Universal Search",value:l,onChange:e=>{i(e.target.value)}})]}),(0,B.jsx)(G,{columns:[{id:42,title:"Division",render:e=>e.name},{id:1,title:"Line",render:e=>e.sap_id},{id:2,title:"OEE",render:e=>e.hsn_code},{id:3,title:"Availability",render:e=>1===e.serialization_method?"No Serialization":2===e.serialization_method?"Use Pre-Generated ID":3===e.serialization_method?"Use Own ID":"-"},{id:4,title:"Performance",render:e=>e.vendor_part_id},{id:5,title:"Quality",render:e=>null===e||void 0===e?void 0:e.category},{id:6,title:"Total Cycle Time",render:e=>e.hsn_code},{id:7,title:"Total Downtime",render:e=>e.hsn_code},{id:8,title:"Total Available Time",render:e=>e.hsn_code},{id:9,title:"Pass",render:e=>e.hsn_code},{id:10,title:"Fail",render:e=>e.hsn_code},{id:11,title:"Status",render:e=>e.hsn_code},{id:12,title:"Last Event Received At",render:e=>e.hsn_code},{id:13,title:"Details",render:e=>e.hsn_code}],rowsPerPage:5,titleCellClasses:"c-gray fw-700 text text-nowrap",paginator:!0,serialize:!0})]})]})},ea=()=>{const[e,t]=(0,g.useState)([]),[a,n]=(0,g.useState)(!1),l={chart:{height:350,type:"rangeBar"},plotOptions:{bar:{horizontal:!0,barHeight:"50%",rangeBarGroupRows:!0}},colors:["#008000","#ff0000","#ffff00"],fill:{type:"solid"},xaxis:{type:"datetime",labels:{formatter:e=>Ee()(e).format("LT")}},tooltip:{custom:function(e){const t=new Date(e.y1).getFullYear(),a=new Date(e.y2).getFullYear(),n=e.ctx.w;let l=n.globals.labels[e.dataPointIndex],s=n.config.series[e.seriesIndex].name?n.config.series[e.seriesIndex].name:"";return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+n.globals.colors[e.seriesIndex]+'">'+(s||"")+'</span></div><div> <span class="category">'+l+' </span> <span class="value start-value">'+t+'</span> <span class="separator">-</span> <span class="value end-value">'+a+"</span></div></div>"}}},i=[{startTime:1722495760,endTime:1722495794},{startTime:1722495848,endTime:1722495919},{startTime:1722495986,endTime:1722496049},{startTime:1722496049,endTime:1722496092}];(0,g.useLayoutEffect)((()=>{!async function(){const e=[];(e=>{for(let t=0;t<e.length-1;t++){const a=e[t].endTime,n=e[t+1].startTime;300>Math.abs(a-n)&&(e[t+1].startTime=a)}return e})(i).map((t=>{let a={x:"State",y:[t.startTime,t.endTime]};e.push(a)})),t(e),n(!0)}()}),[]);const o=[{name:"Online",data:e}];return console.log("new obj",e),(0,B.jsx)(s.A,{sx:{width:"95%"},children:a&&(0,B.jsx)(dt.A,{options:l,series:o,type:"rangeBar",height:200})})};a(4951);const ta=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,edit:r}=e;const c=[{title:"Name",placeholder:"Enter Name",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED},{title:"Lines",placeholder:"Enter Line",type:Y.wN.INPUT,name:"Line",validator:Y.wY.REQUIRED},{title:"Threshold (seconds)",placeholder:"Enter Name",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED},{title:"Status",type:Y.wN.RADIO,name:"status",keyValues:[{value:"1",label:"Enable"},{value:"2",label:"Disable"}]}],[d,u]=(0,g.useState)(new Map);return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:[!0===r?"EDIT":"ADD"," DOWNTIME REASON"]}),(0,B.jsx)(le.A,{data:n,errors:d,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:c}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,loading:o,children:"Create"})]})]})},aa=()=>{const e=(0,I.Zp)(),[t,a]=(0,g.useState)([]),[n,l]=(0,g.useState)(),[r,c]=(0,g.useState)(0),[d,u]=(0,g.useState)(!1),[h,p]=(0,g.useState)(!1),[m,x]=(0,g.useState)(0),[v,y]=(0,g.useState)({name:"",metadata:{}}),{list:w,create:A,update:j,remove:f}=Nt(),S=async()=>{l("fetch");const[e,t]=await w(m+1);a(e),c(t),l(!1)},b=[{id:1,title:"Name",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:2,title:"Effective Downtime",render:e=>e.name},{id:3,title:"Created By",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:4,title:"Created on",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:7,title:"Status",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:8,title:"Lines",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:2,title:"Threshold",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:5,title:"Action",render:e=>(0,B.jsx)(s.A,{flexDirection:"row",children:(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{y(e),u(!0),p("add")},children:(0,B.jsx)(te.A,{color:"primary",fontSize:"small"})})})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)("h1",{className:"mt-4",children:["Downtime Master",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",t.length,")"]})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:1},children:[(0,B.jsx)(Z.A,{onClick:()=>p("add"),children:"Add Downtime Reason"}),(0,B.jsx)(Z.A,{children:"Default Downtime Reason"})]})]}),(0,B.jsxs)(s.A,{direction:"row",justifyContent:"flex-end",sx:{mb:1},children:[(0,B.jsx)(qe.A,{keyValues:[{id:"name",title:"Name"},{id:"sap_id",title:"SAP ID"},{id:"hsn_code",title:"HSN CODE"},{id:"internal_id",title:"Internal ID"},{id:"serialization",title:"Serialization"},{id:"category",title:"Category"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Search by",classes:"mr-1"}),(0,B.jsx)(Q.A,{height:"37px",placeholder:"Universal Search"})]}),(0,B.jsx)(G,{columns:b,rows:t,rowsPerPage:5,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:x,paginator:!0,serialize:!0,total:r}),(0,B.jsx)(ta,{open:"add"===h,onClose:()=>{p(!1),u(!1)},data:v,edit:d,setData:y,onSubmit:async()=>{const e={...v};console.log("payload",e),l("fetch"),!0===d?await j(e):await A(e),y({}),p(!1),await S(),l(!1),u(!1)}})]})},na=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,edit:r}=e;const c=[{title:"Model",placeholder:"Enter model",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED},{title:"Material Code",placeholder:"Enter code",type:Y.wN.INPUT,name:"Line",validator:Y.wY.REQUIRED},{title:"Barcode Identifier",placeholder:"Enter identifier",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED},{title:"Customer",placeholder:"Select customer",type:Y.wN.SELECT,name:"serialization_method",validator:Y.wY.REQUIRED,keyValues:[]},{title:"Description",placeholder:"Enter description",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED},{title:"Fixed Cycle Time",type:Y.wN.RADIO,name:"cycle_time",validator:Y.wY.REQUIRED,keyValues:[{value:"yes",label:"Yes"},{value:"no",label:"No"}]}],[d,u]=(0,g.useState)(new Map);return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:[!0===r?"EDIT":"ADD"," MODEL"]}),(0,B.jsx)(le.A,{data:n,errors:d,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:c}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,loading:o,children:"Create"})]})]})},la=()=>{const e=(0,I.Zp)(),[t,a]=(0,g.useState)([]),[n,l]=(0,g.useState)(),[r,c]=(0,g.useState)(0),[d,u]=(0,g.useState)(!1),[h,p]=(0,g.useState)(!1),[m,x]=(0,g.useState)(0),[v,y]=(0,g.useState)({name:"",metadata:{}}),{list:w,create:A,update:j,remove:f}=Nt(),S=async()=>{l("fetch");const[e,t]=await w(m+1);a(e),c(t),l(!1)},b=[{id:1,title:"Name",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:2,title:"Effective Downtime",render:e=>e.name},{id:3,title:"Created By",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:4,title:"Created on",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:7,title:"Status",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:8,title:"Lines",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:2,title:"Threshold",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:5,title:"Action",render:e=>(0,B.jsx)(s.A,{flexDirection:"row",children:(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{y(e),u(!0),p("add")},children:(0,B.jsx)(te.A,{color:"primary",fontSize:"small"})})})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)("h1",{className:"mt-4",children:["Model Master",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",t.length,")"]})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:1},children:[(0,B.jsx)(Z.A,{onClick:()=>p("add"),children:"Add Model"}),(0,B.jsx)(Z.A,{onClick:()=>p("bulkUpload"),bordered:!0,children:"Bulk Upload"})]})]}),(0,B.jsxs)(s.A,{direction:"row",justifyContent:"flex-end",sx:{mb:1},children:[(0,B.jsx)(qe.A,{keyValues:[{id:"name",title:"Name"},{id:"sap_id",title:"SAP ID"},{id:"hsn_code",title:"HSN CODE"},{id:"internal_id",title:"Internal ID"},{id:"serialization",title:"Serialization"},{id:"category",title:"Category"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Search by",classes:"mr-1"}),(0,B.jsx)(Q.A,{height:"37px",placeholder:"Universal Search"})]}),(0,B.jsx)(G,{columns:b,rows:t,rowsPerPage:5,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:x,paginator:!0,serialize:!0,total:r}),(0,B.jsx)(na,{open:"add"===h,onClose:()=>{p(!1),u(!1)},data:v,edit:d,setData:y,onSubmit:async()=>{const e={...v};console.log("payload",e),l("fetch"),!0===d?await j(e):await A(e),y({}),p(!1),await S(),l(!1),u(!1)}}),(0,B.jsx)(Se,{onClose:()=>p(!1),open:"bulkUpload"===h})]})},sa=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,edit:r}=e;const c=[{title:"Name",placeholder:"Enter Name",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED},{title:"Model",placeholder:"Select Model",type:Y.wN.SELECT,name:"Line",validator:Y.wY.REQUIRED,keyValues:[]},{title:"Status",type:Y.wN.RADIO,name:"status",validator:Y.wY.REQUIRED,keyValues:[{value:"enable",label:"Enable"},{value:"disable",label:"Disable"}]}],[d,u]=(0,g.useState)(new Map);return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsx)("h3",{className:"opacity-80",children:"PARTS REJECTION MODE REASON"}),(0,B.jsx)(le.A,{data:n,errors:d,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:c}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,loading:o,children:"Create"})]})]})},ia=()=>{const e=(0,I.Zp)(),[t,a]=(0,g.useState)([]),[n,l]=(0,g.useState)(),[r,c]=(0,g.useState)(0),[d,u]=(0,g.useState)(!1),[h,p]=(0,g.useState)(!1),[m,x]=(0,g.useState)(0),[v,y]=(0,g.useState)({name:"",metadata:{}}),{list:w,create:A,update:j,remove:f}=Nt(),S=async()=>{l("fetch");const[e,t]=await w(m+1);a(e),c(t),l(!1)},b=[{id:1,title:"Name",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:2,title:"Effective Downtime",render:e=>e.name},{id:3,title:"Created By",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:4,title:"Created on",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:7,title:"Status",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:8,title:"Lines",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:2,title:"Threshold",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:5,title:"Action",render:e=>(0,B.jsx)(s.A,{flexDirection:"row",children:(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{y(e),u(!0),p("add")},children:(0,B.jsx)(te.A,{color:"primary",fontSize:"small"})})})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)("h1",{className:"mt-4",children:["Parts Rejection Mode",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",t.length,")"]})]}),(0,B.jsx)(s.A,{sx:{flexDirection:"row",gap:1},children:(0,B.jsx)(Z.A,{onClick:()=>p("add"),children:"Add NG"})})]}),(0,B.jsxs)(s.A,{direction:"row",justifyContent:"flex-end",sx:{mb:1},children:[(0,B.jsx)(qe.A,{keyValues:[{id:"name",title:"Name"},{id:"sap_id",title:"SAP ID"},{id:"hsn_code",title:"HSN CODE"},{id:"internal_id",title:"Internal ID"},{id:"serialization",title:"Serialization"},{id:"category",title:"Category"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Search by",classes:"mr-1"}),(0,B.jsx)(Q.A,{height:"37px",placeholder:"Universal Search"})]}),(0,B.jsx)(G,{columns:b,rows:t,rowsPerPage:5,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:x,paginator:!0,serialize:!0,total:r}),(0,B.jsx)(sa,{open:"add"===h,onClose:()=>{p(!1),u(!1)},data:v,edit:d,setData:y,onSubmit:async()=>{const e={...v};console.log("payload",e),l("fetch"),!0===d?await j(e):await A(e),y({}),p(!1),await S(),l(!1),u(!1)}})]})};var oa=a(1962);const ra=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:o,loading:r,edit:c}=e;const d=[{title:"Name",placeholder:"Enter Name",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED},{title:"Plant",placeholder:"Select Model",type:Y.wN.SELECT,name:"Line",validator:Y.wY.REQUIRED,keyValues:[]},{title:"Start Time",placeholder:"select time",type:Y.wN.TIME,name:"start_time",validator:Y.wY.REQUIRED},{title:"End Time",placeholder:"select time",type:Y.wN.TIME,name:"end_time",validator:Y.wY.REQUIRED},{title:"Overlap",placeholder:"Select Overlap",type:Y.wN.SELECT,name:"plant",validator:Y.wY.REQUIRED,keyValues:[]},{title:"Type",placeholder:"Select Plant",type:Y.wN.RADIO,name:"plant",validator:Y.wY.REQUIRED,keyValues:[{value:"working_shift",label:"Working Shift"},{value:"planned_break",label:"Planned Break"}]}],[u,h]=(0,g.useState)(new Map),p={inputProps:{"aria-label":"Checkbox demo"}};return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsx)("h3",{className:"opacity-80",children:"Add Shift Schedule"}),(0,B.jsx)(le.A,{data:n,errors:u,onChange:e=>{const{name:t,value:a}=e.target;h((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:d}),(0,B.jsxs)(s.A,{sx:{mt:1},children:[(0,B.jsx)(i.A,{children:"Week Days"}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:1},children:[(0,B.jsx)(oa.A,{...p,icon:(0,B.jsx)(i.A,{children:"M"}),checkedIcon:(0,B.jsx)(i.A,{children:"M"})}),(0,B.jsx)(oa.A,{...p,icon:(0,B.jsx)(i.A,{children:"T"}),checkedIcon:(0,B.jsx)(i.A,{children:"T"})}),(0,B.jsx)(oa.A,{...p,icon:(0,B.jsx)(i.A,{children:"W"}),checkedIcon:(0,B.jsx)(i.A,{children:"W"})}),(0,B.jsx)(oa.A,{...p,icon:(0,B.jsx)(i.A,{children:"T"}),checkedIcon:(0,B.jsx)(i.A,{children:"T"})}),(0,B.jsx)(oa.A,{...p,icon:(0,B.jsx)(i.A,{children:"F"}),checkedIcon:(0,B.jsx)(i.A,{children:"F"})}),(0,B.jsx)(oa.A,{...p,icon:(0,B.jsx)(i.A,{children:"S"}),checkedIcon:(0,B.jsx)(i.A,{children:"S"})}),(0,B.jsx)(oa.A,{...p,icon:(0,B.jsx)(i.A,{children:"S"}),checkedIcon:(0,B.jsx)(i.A,{children:"S"})})]})]}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:o,loading:r,children:"Create"})]})]})},ca=()=>{const e=(0,I.Zp)(),[t,a]=(0,g.useState)([]),[n,l]=(0,g.useState)(),[r,c]=(0,g.useState)(0),[d,u]=(0,g.useState)(!1),[h,p]=(0,g.useState)(!1),[m,x]=(0,g.useState)(0),[v,y]=(0,g.useState)({name:"",metadata:{}}),{list:w,create:A,update:j,remove:f}=Nt();(0,g.useEffect)((()=>{S()}),[m]);const S=async()=>{l("fetch");const[e,t]=await w(m+1);a(e),c(t),l(!1)},b=[{id:1,title:"Plant",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:2,title:"Name",render:e=>e.name},{id:3,title:"Type",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:4,title:"Duration",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:5,title:"Start",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:6,title:"End",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:7,title:"Mon",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:8,title:"Tue",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:9,title:"Wed",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:10,title:"Thu",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:11,title:"Fri",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:12,title:"Sat",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:13,title:"Sun",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:14,title:"Action",render:e=>(0,B.jsx)(s.A,{flexDirection:"row",children:(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{y(e),u(!0),p("add")},children:(0,B.jsx)(te.A,{color:"primary",fontSize:"small"})})})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)("h1",{className:"mt-4",children:["Shift Master",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",t.length,")"]})]}),(0,B.jsx)(s.A,{sx:{flexDirection:"row",gap:1},children:(0,B.jsx)(Z.A,{onClick:()=>p("add"),children:"Add Shift Schedule"})})]}),(0,B.jsxs)(s.A,{direction:"row",justifyContent:"flex-end",sx:{mb:1},children:[(0,B.jsx)(qe.A,{keyValues:[{id:"plant",title:"Plant"},{id:"name",title:"Name"},{id:"type",title:"Type"},{id:"duration",title:"Duration"},{id:"start",title:"Start"},{id:"end",title:"End"},{id:"mon",title:"Mon"},{id:"tue",title:"Tue"},{id:"wed",title:"Wed"},{id:"thu",title:"Thu"},{id:"fri",title:"Fri"},{id:"sat",title:"Sat"},{id:"sun",title:"Sun"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Search by",classes:"mr-1"}),(0,B.jsx)(Q.A,{height:"37px",placeholder:"Universal Search"})]}),(0,B.jsx)(G,{columns:b,rows:t,rowsPerPage:5,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:x,paginator:!0,serialize:!0,total:r}),(0,B.jsx)(ra,{open:"add"===h,onClose:()=>{p(!1),u(!1)},data:v,edit:d,setData:y,onSubmit:async()=>{const e={...v};console.log("payload",e),l("fetch"),!0===d?await j(e):await A(e),y({}),p(!1),await S(),l(!1),u(!1)}})]})},da=()=>{(0,I.Zp)();const[e,t]=(0,g.useState)([{assets:"machine1"}]),[a,n]=(0,g.useState)(),[l,i]=(0,g.useState)(0),[o,r]=(0,g.useState)(!1),[c,d]=(0,g.useState)(!1),[u,h]=(0,g.useState)(0),[p,m]=(0,g.useState)({name:"",metadata:{}}),{list:x,create:v,update:y,remove:w}=Nt(),A=[{id:1,title:"Assets",render:e=>e.assets},{id:2,title:"Online",render:e=>(0,B.jsx)(oa.A,{})},{id:3,title:"Offline",render:e=>(0,B.jsx)(oa.A,{})},{id:4,title:"Downtime",render:e=>(0,B.jsx)(oa.A,{})},{id:5,title:"Action",render:e=>(0,B.jsx)(Z.A,{children:"Confirm"})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsx)("div",{className:"flex items-center justify-between",children:(0,B.jsxs)("h1",{className:"mt-4",children:["Notification Settings",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",e.length,")"]})]})}),(0,B.jsxs)(s.A,{direction:"row",justifyContent:"flex-end",sx:{mb:1},children:[(0,B.jsx)(qe.A,{keyValues:[{id:"assets",title:"Assets"},{id:"online",title:"Online"},{id:"downtime",title:"Downtime"},{id:"offline",title:"Offline"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Search by",classes:"mr-1"}),(0,B.jsx)(Q.A,{height:"37px",placeholder:"Universal Search"})]}),(0,B.jsx)(G,{columns:A,rows:e,rowsPerPage:5,loading:"fetch"===a,titleCellClasses:"c-gray fw-700",page:u,setPage:h,paginator:!0,serialize:!0,total:l})]})},ua=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,edit:r}=e;const c=[{title:"Name",placeholder:"Enter name",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED},{title:"Unit",placeholder:"Enter unit",type:Y.wN.INPUT,name:"unit",validator:Y.wY.REQUIRED},{title:"Reorder Point",placeholder:"Enter identifier",type:Y.wN.INPUT,name:"reorder_point",validator:Y.wY.REQUIRED},{title:"Initial Stock",placeholder:"Enter Stock",type:Y.wN.INPUT,name:"stock",validator:Y.wY.REQUIRED},{title:"Vendor",placeholder:"Select Vendor",type:Y.wN.SELECT,name:"vendor",validator:Y.wY.REQUIRED,keyValues:[]}],[d,u]=(0,g.useState)(new Map);return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:[!0===r?"EDIT":"ADD"," NEW RESOURCE"]}),(0,B.jsx)(le.A,{data:n,errors:d,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:c}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,loading:o,children:"Create"})]})]})},ha=()=>{const e=(0,I.Zp)(),[t,a]=(0,g.useState)([]),[n,l]=(0,g.useState)(),[r,c]=(0,g.useState)(0),[d,u]=(0,g.useState)(!1),[h,p]=(0,g.useState)(!1),[m,x]=(0,g.useState)(0),[v,y]=(0,g.useState)({name:"",metadata:{}}),{list:w,create:A,update:j,remove:f}=Nt(),S=async()=>{l("fetch");const[e,t]=await w(m+1);a(e),c(t),l(!1)},b=[{id:1,title:"Name",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:2,title:"Effective Downtime",render:e=>e.name},{id:3,title:"Created By",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:4,title:"Created on",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:7,title:"Status",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:8,title:"Lines",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:2,title:"Threshold",render:t=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:5,title:"Action",render:e=>(0,B.jsx)(s.A,{flexDirection:"row",children:(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{y(e),u(!0),p("add")},children:(0,B.jsx)(te.A,{color:"primary",fontSize:"small"})})})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)("h1",{className:"mt-4",children:["Consumables",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",t.length,")"]})]}),(0,B.jsx)(s.A,{sx:{flexDirection:"row",gap:1},children:(0,B.jsx)(Z.A,{onClick:()=>p("add"),children:"Add New Resource"})})]}),(0,B.jsxs)(s.A,{direction:"row",justifyContent:"flex-end",children:[(0,B.jsx)(qe.A,{keyValues:[{id:"name",title:"Name"},{id:"sap_id",title:"SAP ID"},{id:"hsn_code",title:"HSN CODE"},{id:"internal_id",title:"Internal ID"},{id:"serialization",title:"Serialization"},{id:"category",title:"Category"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Search by",classes:"mr-1"}),(0,B.jsx)(Q.A,{height:"37px",placeholder:"Universal Search"})]}),(0,B.jsx)(G,{columns:b,rows:t,rowsPerPage:5,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:x,paginator:!0,serialize:!0,total:r}),(0,B.jsx)(ua,{open:"add"===h,onClose:()=>{p(!1),u(!1)},data:v,edit:d,setData:y,onSubmit:async()=>{const e={...v};console.log("payload",e),l("fetch"),!0===d?await j(e):await A(e),y({}),p(!1),await S(),l(!1),u(!1)}}),(0,B.jsx)(Se,{onClose:()=>p(!1),open:"bulkUpload"===h})]})};var pa=a(7965),ma=a(9761);const xa=()=>{(0,I.Zp)();const[e,t]=(0,g.useState)([]),[a,n]=(0,g.useState)(),[l,r]=(0,g.useState)(0),[c,d]=(0,g.useState)(!1),[u,h]=(0,g.useState)(!1),[p,m]=(0,g.useState)(0),[x,y]=(0,g.useState)({name:"",metadata:{}}),{list:w,create:A,update:j,remove:f}=Nt();return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsx)("div",{className:"flex items-center justify-between",children:(0,B.jsx)("h1",{className:"mt-4",children:"Organization Profile"})}),(0,B.jsxs)(s.A,{sx:{backgroundColor:"#edf7ff"},children:[(0,B.jsx)(s.A,{sx:{backgroundColor:"#c5e3f7",height:"35vh"},children:(0,B.jsx)("img",{width:"100%",height:"100%",alt:"image industry",style:{objectFit:"cover"},src:"https://www.advsyscon.com/blog/wp-content/uploads/intelligent-process-automation-examples.jpg"})}),(0,B.jsx)(s.A,{sx:{backgroundColor:"yellow",height:"30vh",borderRadius:"50%",width:"18%",alignSelf:"center",mt:-15,overflow:"hidden"},children:(0,B.jsx)("img",{width:"100%",height:"100%",alt:"image industry",src:"https://wellgroomedgentleman.com/wp-content/uploads/2023/10/Tony_Stark_Beard_with_Quiff_Hairstyle.width-800.jpg"})}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",justifyContent:"center",my:2},children:[(0,B.jsx)(o.A,{sx:{p:1,color:"black"},children:(0,B.jsx)(pa.A,{})}),(0,B.jsx)(o.A,{sx:{p:1,color:"black"},children:(0,B.jsx)(ma.A,{})}),(0,B.jsx)(o.A,{sx:{p:1,color:"black"},children:(0,B.jsx)(S.A,{})}),(0,B.jsx)(o.A,{sx:{p:1,color:"black"},children:(0,B.jsx)(te.A,{})})]})]}),(0,B.jsxs)(oe.Ay,{display:"grid",sx:{gap:1,mt:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,B.jsxs)(s.A,{sx:{backgroundColor:"#edf7ff",p:1},children:[(0,B.jsx)(i.A,{variant:"h6",sx:{textTransform:"uppercase"},children:"Organizational Details"}),(0,B.jsx)(v.A,{}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:2,mt:1},children:[(0,B.jsx)(i.A,{children:"Organizational Name :"}),(0,B.jsx)(i.A,{children:"Dhoot Transmission"})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:2},children:[(0,B.jsx)(i.A,{children:"Joining Code :"}),(0,B.jsx)(i.A,{children:"SNL1234"})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:2},children:[(0,B.jsx)(i.A,{children:"Organization Type :"}),(0,B.jsx)(i.A,{children:"Dhoot Transmission"})]})]}),(0,B.jsxs)(s.A,{sx:{backgroundColor:"#edf7ff",p:1},children:[(0,B.jsx)(i.A,{variant:"h6",sx:{textTransform:"uppercase"},children:"Address Details"}),(0,B.jsx)(v.A,{}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:2,mt:1},children:[(0,B.jsx)(i.A,{children:"Address :"}),(0,B.jsx)(i.A,{children:"Hoshyarpur, Haryana 202098 "})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:2},children:[(0,B.jsx)(i.A,{children:"City :"}),(0,B.jsx)(i.A,{children:"Hoshyarpur"})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:2},children:[(0,B.jsx)(i.A,{children:"State :"}),(0,B.jsx)(i.A,{children:"Haryana"})]})]}),(0,B.jsxs)(s.A,{sx:{backgroundColor:"#edf7ff",p:1},children:[(0,B.jsx)(i.A,{variant:"h6",sx:{textTransform:"uppercase"},children:"General Details"}),(0,B.jsx)(v.A,{}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:2,mt:1},children:[(0,B.jsx)(i.A,{children:"GSTIN :"}),(0,B.jsx)(i.A,{children:"GSTIN202098 "})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:2},children:[(0,B.jsx)(i.A,{children:"Module Access :"}),(0,B.jsx)(s.A,{sx:{width:"70%"},children:(0,B.jsxs)(oe.Ay,{sx:{gap:1},children:[(0,B.jsx)(ue.A,{sx:{mb:.5,ml:.2},label:"Module 1"}),(0,B.jsx)(ue.A,{sx:{mb:.5,ml:.2},label:"Module 2"}),(0,B.jsx)(ue.A,{sx:{mb:.5,ml:.2},label:"Module 3"}),(0,B.jsx)(ue.A,{sx:{mb:.5,ml:.2},label:"Module 4"}),(0,B.jsx)(ue.A,{sx:{mb:.5,ml:.2},label:"Module 5"}),(0,B.jsx)(ue.A,{sx:{mb:.5,ml:.2},label:"Module 6"})]})})]})]}),(0,B.jsxs)(s.A,{sx:{backgroundColor:"#edf7ff",p:1},children:[(0,B.jsx)(i.A,{variant:"h6",sx:{textTransform:"uppercase"},children:"Additional Details"}),(0,B.jsx)(v.A,{}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:2,mt:1},children:[(0,B.jsx)(i.A,{children:"Created On :"}),(0,B.jsxs)(i.A,{children:[Ee()().format("llll")," "]})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:2},children:[(0,B.jsx)(i.A,{children:"Last Modified :"}),(0,B.jsx)(i.A,{children:Ee()().format("llll")})]})]})]})]})},ga=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){const e=new W.Ay,a=await e.get("".concat(V.H.ORDERS,"/"),{},t,q.So);return null!==a&&void 0!==a&&a.data?[null===a||void 0===a?void 0:a.data]:[[],0]},subList:async function(e){const a=new W.Ay,n=await a.get("".concat(V.H.ORDERS,"/").concat(V.H.DETAIL,"/").concat(e,"/"),{},t,q.So);return null!==n&&void 0!==n&&n.data?[null===n||void 0===n?void 0:n.data.suborder]:[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.post("".concat(V.H.ORDERS,"/"),e,t,(e=>(0,q.So)(e,null,"Order created successfully!")));return null===n||void 0===n?void 0:n.data},createSub:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new W.Ay,l=await n.post("".concat(V.H.ORDERS,"/").concat(e,"/"),a,t,(e=>(0,q.So)(e,null,"Order created successfully!")));return null===l||void 0===l?void 0:l.data},update:async e=>{const a={name:e.name,metadata:e.metadata},n=new W.Ay,l=await n.put("".concat(V.H.ASSET,"/").concat(V.H.PLANT,"/").concat(e.id,"/"),a,t,(e=>(0,q.So)(e,null,"Plant Updated successfully!")));return null===l||void 0===l?void 0:l.data},remove:async e=>{const a=new W.Ay,n=await a.delete("".concat(V.H.ASSET,"/").concat(V.H.PLANT,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Plant deleted successfully!")));return null===n||void 0===n?void 0:n.data}}},va=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,edit:r}=e;const c=[{title:"Name",placeholder:"Enter Name",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED},{title:"Sales Order Number",placeholder:"Enter Sales Order Number",type:Y.wN.INPUT,name:"sales_order_number",validator:Y.wY.REQUIRED},{title:"Target Warehouse",placeholder:"Enter Target Warehouse",type:Y.wN.INPUT,name:"target_warehouse",validator:Y.wY.REQUIRED}],[d,u]=(0,g.useState)(new Map);return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:[!0===r?"EDIT":"ADD"," NEW ORDER"]}),(0,B.jsx)(le.A,{data:n,errors:d,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:c}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,loading:o,children:"Create"})]})]})},ya=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:o,loading:r,edit:c}=e;const d=(0,y.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.OrderItem)||void 0===t?void 0:t.data}));Y.wN.INPUT,Y.wY.REQUIRED,Y.wN.INPUT,Y.wY.REQUIRED,Y.wN.INPUT,Y.wY.REQUIRED;return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsx)("h3",{className:"opacity-80",children:"ORDER DETAILS"}),(0,B.jsxs)(s.A,{sx:{gap:1},children:[(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:5},children:[(0,B.jsx)(i.A,{sx:{width:"20%"},children:"Order ID :"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:null===d||void 0===d?void 0:d.order_id})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:5},children:[(0,B.jsx)(i.A,{sx:{width:"20%"},children:"Client :"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:null===d||void 0===d?void 0:d.target_warehouse})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:5},children:[(0,B.jsx)(i.A,{sx:{width:"20%"},children:"Oty :"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:null===d||void 0===d?void 0:d.planned_quantity})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:5},children:[(0,B.jsx)(i.A,{sx:{width:"20%"},children:"Start Date :"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:Ee()(null===d||void 0===d?void 0:d.created).format("ll")})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:5},children:[(0,B.jsx)(i.A,{sx:{width:"20%"},children:"End Date :"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:Ee()(null===d||void 0===d?void 0:d.modified).format("ll")})]})]})]})};var wa=a(616);const Aa=e=>{let{children:t,onClick:a,variant:n,top:l,colorCode:i,classes:o,height:r,width:c,bordered:d,gray:u,disabled:h,loading:p,hide:m,background:x,white:g}=e;return(0,B.jsx)(s.A,{onClick:a,sx:{cursor:"pointer",borderRadius:5,textTransform:"capitalize",justifyContent:"center",alignItems:"center",px:.4,fontSize:18,fontWeight:400,backgroundColor:"outline"===n?"transparent":i,color:"outline"===n?"#3E3E3E":"white",border:"outline"===n?1:"none",borderColor:i},children:t})},ja=()=>{const e=(0,I.Zp)(),t=(0,y.wA)(),[a,n]=((0,g.useRef)(),(0,g.useState)([])),[l,s]=(0,g.useState)(),[o,r]=(0,g.useState)(),[c,d]=(0,g.useState)(0),[u,h]=(0,g.useState)(!1),[p,m]=(0,g.useState)(0),[x,v]=(0,g.useState)(0),[w,A]=(0,g.useState)({}),[j,f]=(0,g.useState)(2),[S,b]=(0,g.useState)(),{list:C,create:N,createInbound:E,genBarCode:k}=ga(),[_,T]=(0,g.useState)({});(0,g.useEffect)((()=>{D()}),[p,x]);const D=async()=>{r("fetch");const[e]=await C(p+1);console.log("counnt----",e.count),n(null===e||void 0===e?void 0:e.results),d(e.count),r(!1)},R=async()=>{const e={...w};await N(e),await D(),A({}),h(!1)},O=[{id:1,title:"Order ID",render:e=>(0,B.jsx)(i.A,{sx:{cursor:"pointer",color:"blue",fontSize:20},onClick:()=>{t((0,wa.l)(e)),h("detail")},children:e.order_id})},{id:2,title:"Client ID",render:e=>e.vendor_part_id},{id:3,title:"Oty",render:e=>e.planned_quantity},{id:4,title:"Start Date",render:e=>Ee()(e.created).format("ll")},{id:5,title:"End Date",render:e=>Ee()(e.created).format("ll")},{id:6,title:"Actions",render:t=>(0,B.jsx)(Aa,{variant:"outline",colorCode:"#FA7474",onClick:()=>e("/plan",{state:t.id}),children:"on hold"})},{id:7,title:"Status",render:e=>(0,B.jsx)(He.A,{style:{padding:0,backgroundColor:Y.lm.LG_GRAY},activeStep:j,alternativeLabel:!0,children:["I","S","L"].map((e=>(0,B.jsx)(ze.A,{children:(0,B.jsx)(Me.A,{})},e)))})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)("h1",{className:"mt-4",children:["Order",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",c,")"]})]}),(0,B.jsx)(Z.A,{onClick:()=>h("add"),children:"Add Order"})]}),(0,B.jsx)("div",{className:"flex items-center justify-between mb-3"}),(0,B.jsx)(G,{columns:O,rows:a,rowsPerPage:5,loading:"fetch"===o,titleCellClasses:"c-gray fw-700",page:p,setPage:m,paginator:!0,serialize:!0,total:c}),(0,B.jsx)(va,{onClose:()=>h(!1),open:"add"===u,data:w,onSubmit:R,setData:A}),(0,B.jsx)(ya,{onClose:()=>h(!1),open:"detail"===u,data:w,onSubmit:R,setData:A})]})},fa=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{jobList:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new W.Ay,n=await a.get("".concat(V.H.ORDERS,"/all-jobs/").concat(e,"/"),{},t,q.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},subList:async function(e){const a=new W.Ay,n=await a.get("".concat(V.H.ORDERS,"/").concat(e,"/"),{},t,q.So);return null!==n&&void 0!==n&&n.data?[null===n||void 0===n?void 0:n.data]:[[],0]},createJob:async function(){let e=arguments.length>1?arguments[1]:void 0;const a={...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},prerequisite_jobs:[]},n=new W.Ay,l=await n.post("".concat(V.H.ORDERS,"/").concat(V.H.JOBS,"/").concat(e,"/"),a,t,(e=>(0,q.So)(e,null,"Job created successfully!")));return null===l||void 0===l?void 0:l.data},createSub:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new W.Ay,l=await n.post("".concat(V.H.ORDERS,"/").concat(e,"/"),a,t,(e=>(0,q.So)(e,null,"Job created successfully!")));return null===l||void 0===l?void 0:l.data},update:async e=>{const a={name:e.name,metadata:e.metadata},n=new W.Ay,l=await n.put("".concat(V.H.ASSET,"/").concat(V.H.PLANT,"/").concat(e.id,"/"),a,t,(e=>(0,q.So)(e,null,"Plant Updated successfully!")));return null===l||void 0===l?void 0:l.data},remove:async e=>{const a=new W.Ay,n=await a.delete("".concat(V.H.ASSET,"/").concat(V.H.PLANT,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Plant deleted successfully!")));return null===n||void 0===n?void 0:n.data}}},Sa=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,edit:r,tab:c}=e;const d=[{title:"Name",placeholder:"Enter Name",type:Y.wN.INPUT,name:"name",validator:Y.wY.REQUIRED}],[u,h]=(0,g.useState)(new Map);return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",style:{textTransform:"uppercase"},children:[!0===r?"EDIT":"ADD"," ",c]}),(0,B.jsx)(le.A,{data:n,errors:u,onChange:e=>{const{name:t,value:a}=e.target;h((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:d}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,loading:o,children:"Create"})]})]})};var ba=a(1223);const Ca=()=>{const e=(0,I.Zp)(),t=(0,I.zy)(),[a,n]=((0,y.wA)(),(0,g.useState)(t.state)),[l,s]=(0,g.useState)([]),[i,r]=(0,g.useState)(),[c,d]=(0,g.useState)(),[u,h]=(0,g.useState)(0),[p,m]=(0,g.useState)(!1),[x,v]=(0,g.useState)(0),[w,A]=(0,g.useState)("Sub Orders"),[j,f]=(0,g.useState)({}),[S,b]=(0,g.useState)(),{list:C,subList:N,createSub:E,createInbound:k,genBarCode:_}=ga(),{jobList:T,createJob:D}=fa(),[R,O]=(0,g.useState)({});(0,g.useEffect)((()=>{P()}),[x,w,a]);const P=async()=>{d("fetch");const[e]="Sub Orders"===w?await N(a,x+1):await T(x+1,a);s(e),h(e.count),d(!1)},U=[{id:1,title:"Sub Orders"===w?"Order ID":"Name",render:e=>"Sub Orders"===w?e.order_id:e.name},{id:2,title:"Client ID",render:e=>e.vendor_part_id},{id:3,title:"Oty",render:e=>e.planned_quantity},{id:4,title:"Start Date",render:e=>Ee()(e.created).format("ll")},{id:5,title:"End Date",render:e=>Ee()(e.created).format("ll")},{id:7,title:"Status",render:e=>(0,B.jsx)(Aa,{colorCode:"#1535DB",onClick:()=>{"Sub Orders"===w&&n(e.id)},children:"To Plan"})},{id:6,title:"Actions",render:t=>(0,B.jsx)(o.A,{onClick:()=>e("/plan-overview",{state:t.order_id}),children:(0,B.jsx)(ba.A,{})})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsx)("div",{className:"flex items-center justify-between",children:(0,B.jsxs)("h1",{className:"mt-4",children:[w,(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",l.length,")"]})]})}),(0,B.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,B.jsx)(ce.A,{value:w,onChange:(e,t)=>A(t),children:["Sub Orders","Jobs"].map(((e,t)=>(0,B.jsx)(de.A,{label:e,value:e},t)))}),(0,B.jsxs)(Z.A,{onClick:()=>m("add"),children:["Add ",w]})]}),(0,B.jsx)(G,{columns:U,rows:l,rowsPerPage:5,loading:"fetch"===c,titleCellClasses:"c-gray fw-700",page:x,setPage:v,paginator:!0,serialize:!0,total:u}),(0,B.jsx)(Sa,{onClose:()=>m(!1),open:"add"===p,data:j,onSubmit:async()=>{const e={...j};"Sub Orders"===w?await E(a,e):await D(e,a),await P(),f({}),m(!1)},setData:f,tab:w})]})};var Na=a(4535),Ea=a(1906),ka=a(2954);const Ia=()=>{const e=(0,I.zy)(),[t,a]=((0,I.Zp)(),(0,y.wA)(),(0,g.useRef)(),(0,g.useState)([])),[n,l]=(0,g.useState)(),[o,r]=(0,g.useState)(),[c,d]=(0,g.useState)(0),[u,h]=(0,g.useState)(!1),[p,m]=(0,g.useState)(0),[x,v]=(0,g.useState)(0),[w,A]=(0,g.useState)({}),[j,f]=(0,g.useState)(),{list:S,create:b,createInbound:C,genBarCode:N}=ga(),[E,k]=(0,g.useState)({}),_=e.state,T=(0,Na.Ay)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});(0,g.useEffect)((()=>{D()}),[p,x]);const D=async()=>{r("fetch");const[e]=await S(_,p+1);console.log("counnt----",e.count),a(null===e||void 0===e?void 0:e.results),d(e.count),r(!1)};return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsx)("div",{className:"flex items-center justify-between",children:(0,B.jsxs)(s.A,{sx:{gap:.5,flexDirection:"row",alignItems:"center"},children:[(0,B.jsx)("h2",{className:"",children:"Plan Overview "}),(0,B.jsx)(bt.A,{fontSize:"large"}),(0,B.jsxs)("span",{className:"fs-30 c-gray",children:[" ",_]})]})}),(0,B.jsx)("div",{className:"flex items-center justify-between mb-3"}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",justifyContent:"space-between",pr:2},children:[(0,B.jsx)(i.A,{children:"To start please select file"}),(0,B.jsxs)(Ea.A,{sx:{width:"fit-content"},component:"label",role:void 0,variant:"contained",tabIndex:-1,startIcon:(0,B.jsx)(ka.A,{}),children:["Upload file",(0,B.jsx)(T,{type:"file"})]})]}),(0,B.jsx)(va,{onClose:()=>h(!1),open:"add"===u,data:w,onSubmit:async()=>{const e={...w};await b(e),await D(),A({}),h(!1)},setData:A})]})},_a=()=>{(0,I.zy)(),(0,I.Zp)();const[e,t]=(0,g.useState)([]),[a,n]=(0,g.useState)(""),[l,i]=(0,g.useState)(""),[o,r]=(0,g.useState)({shift:"",state:"",quality:""});return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsx)("h1",{className:"mt-2",children:"Live View"}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:2},children:[(0,B.jsxs)(s.A,{sx:{flexDirection:"row"},children:[(0,B.jsx)(qe.A,{keyValues:[{id:"All",title:"All"},{id:"Shift A",title:"Shift A"},{id:"Shift B",title:"Shift B"},{id:"Out of Shift",title:"Out of Shift"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Shift",classes:"mr-1",value:o.shift,onChange:e=>r({...o,shift:e.target.value})}),(0,B.jsx)(qe.A,{keyValues:[{id:"All",title:"All"},{id:"Production",title:"Production"},{id:"Downtime",title:"Downtime"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"State",classes:"mr-1",value:o.state,onChange:e=>r({...o,state:e.target.value})}),(0,B.jsx)(qe.A,{keyValues:[{id:"All",title:"All"},{id:"Good",title:"Good"},{id:"NG",title:"NG"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Quality",classes:"mr-1",value:o.quality,onChange:e=>r({...o,quality:e.target.value})}),(0,B.jsx)(mt.A,{width:"fit-content"})]}),(0,B.jsxs)(s.A,{direction:"row",justifyContent:"flex-end",children:[(0,B.jsx)(qe.A,{keyValues:[{id:"Division",title:"Division"},{id:"Line",title:"Line"},{id:"OEE",title:"OEE"},{id:"Availability",title:"Availability"},{id:"Performance",title:"Performance"},{id:"Quality",title:"Quality"},{id:"Total Cycle Time",title:"Total Cycle Time"},{id:"Total Downtime",title:"Total Downtime"},{id:"Total Available Time",title:"Total Available Time"},{id:"Pass",title:"Pass"},{id:"Fail",title:"Fail"},{id:"Status",title:"Status"}].map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Search by",classes:"mr-1",value:a,onChange:e=>n(e.target.value)}),(0,B.jsx)(Q.A,{height:"37px",placeholder:"Universal Search",value:l,onChange:e=>{i(e.target.value)}})]})]}),(0,B.jsx)(ea,{}),(0,B.jsx)(G,{columns:[{id:42,title:"Division",render:e=>e.name},{id:1,title:"Line",render:e=>e.sap_id},{id:2,title:"OEE",render:e=>e.hsn_code},{id:3,title:"Availability",render:e=>1===e.serialization_method?"No Serialization":2===e.serialization_method?"Use Pre-Generated ID":3===e.serialization_method?"Use Own ID":"-"},{id:4,title:"Performance",render:e=>e.vendor_part_id},{id:5,title:"Quality",render:e=>null===e||void 0===e?void 0:e.category},{id:6,title:"Total Cycle Time",render:e=>e.hsn_code},{id:7,title:"Total Downtime",render:e=>e.hsn_code},{id:8,title:"Total Available Time",render:e=>e.hsn_code},{id:9,title:"Pass",render:e=>e.hsn_code},{id:10,title:"Fail",render:e=>e.hsn_code},{id:11,title:"Status",render:e=>e.hsn_code},{id:12,title:"Last Event Received At",render:e=>e.hsn_code},{id:13,title:"Details",render:e=>e.hsn_code}],rows:e,rowsPerPage:5,titleCellClasses:"c-gray fw-700",serialize:!0})]})},Ta=e=>{let{options:t,series:a}=e;const[n,l]=(0,g.useState)([]),[i,o]=(0,g.useState)(!1);return(0,B.jsx)(s.A,{sx:{width:"95%"},children:(0,B.jsx)(dt.A,{options:t,series:a,type:"bar",height:300})})},Da=[{id:"SPM-DUPLEX-512",title:"SPM-DUPLEX-512"}],Ra=()=>{(0,I.zy)(),(0,I.Zp)();const[e,t]=(0,g.useState)([]),[a,n]=(0,g.useState)(""),[l,o]=(0,g.useState)(""),[r,c]=(0,g.useState)({shift:Da[0].title,state:"",quality:""});return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsx)("h1",{className:"mt-2",children:"Operator Portal"}),(0,B.jsx)(s.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:2},children:(0,B.jsxs)(s.A,{sx:{flexDirection:"row"},children:[(0,B.jsx)(qe.A,{keyValues:Da.map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Shift",classes:"mr-1",value:r.shift,onChange:e=>c({...r,shift:e.target.value})}),(0,B.jsx)(mt.A,{width:"fit-content"})]})}),(0,B.jsxs)(s.A,{children:[(0,B.jsxs)(s.A,{sx:{border:2,borderColor:"#eeee",flexDirection:"row",justifyContent:"space-between",p:1},children:[(0,B.jsxs)(s.A,{sx:{flexDirection:"row",justifyContent:"space-between",width:"49%"},children:[(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{children:"Good"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"123"})]}),(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{children:"NG"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"65"})]}),(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{children:"ass"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"55"})]}),(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{children:"Fail"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"44"})]}),(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{children:"Total"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"33"})]})]}),(0,B.jsx)(s.A,{sx:{borderRight:2,borderColor:"#eeee"}}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",justifyContent:"space-between",width:"49%"},children:[(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{children:"OEE"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"123"})]}),(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{children:"Availability"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"65"})]}),(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{children:"Performance"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"55"})]}),(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{children:"Quality"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"44"})]})]})]}),(0,B.jsxs)(s.A,{sx:{border:2,borderColor:"#eeee",flexDirection:"row",justifyContent:"space-between",p:1,mt:1},children:[(0,B.jsxs)(s.A,{sx:{flexDirection:"row",justifyContent:"space-between",width:"25%",alignContent:"center",alignItems:"center"},children:[(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{children:"Machining Time"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"0:00:00"})]}),(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{children:"Downtime"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"0:00:00"})]})]}),(0,B.jsx)(s.A,{sx:{borderRight:2,borderColor:"#eeee"}}),(0,B.jsxs)(s.A,{sx:{width:"73%"},children:[(0,B.jsx)(i.A,{children:"Downtime Event"}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{children:"Start Time"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"0:00:00"})]}),(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{children:"End Time"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"0:00:00"})]}),(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{children:"Duration Time"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"0:00:00"})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row"},children:[(0,B.jsx)(qe.A,{keyValues:Da.map((e=>({key:null===e||void 0===e?void 0:e.id,value:null===e||void 0===e?void 0:e.title}))),width:"120px",placeholder:"Shift",classes:"mr-1",value:r.shift,onChange:e=>c({...r,shift:e.target.value})}),(0,B.jsx)(s.A,{sx:{justifyContent:"center"},children:(0,B.jsx)(Z.A,{sx:{width:"fit-content"},children:"Submit"})})]})]})]})]}),(0,B.jsxs)(s.A,{sx:{border:2,borderColor:"#eeee",p:1,mt:1},children:[(0,B.jsx)(i.A,{children:"Production"}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row"},children:[(0,B.jsx)(s.A,{sx:{width:"30%"},children:(0,B.jsx)(ht,{chart:{series:[{label:"America",value:80}]},colorCode:"#e334e6"})}),(0,B.jsx)(s.A,{sx:{width:"70%"},children:(0,B.jsx)(Ta,{series:[{name:"Sales",data:[30,40,35,50,49,60,70]},{name:"Buy",data:[30,40,35,50,49,60,70]}],options:{chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1,columnWidth:"55%",endingShape:"rounded",dataLabels:{orientation:"vertical"}}},dataLabels:{enabled:!0,offsetY:-20,style:{fontSize:"12px",colors:["#fff"]}},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul"]},fill:{opacity:1},tooltip:{y:{formatter:function(e){return"$ "+e+" thousands"}}}}})})]})]})]})]})},Oa=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{question_list:async function(){const e=new W.Ay,a=await e.get("training/question-bank/",{},t,q.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},skill_question_list:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new W.Ay,n=await a.get("training/skill-questions/".concat(e,"/"),{},t,q.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},skill_list:async function(){const e=new W.Ay,a=await e.get("training/skills/",{},t,q.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},induction_question:async function(){const e=new W.Ay,a=await e.get("training/induction-questions/",{},t,q.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},hr_question:async function(){const e=new W.Ay,a=await e.get("training/miscellaneous-questions/",{},t,q.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},result:async e=>{const a=new W.Ay,n=await a.get("training/update-test-results/".concat(e,"/"),{},t,q.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},get_Test:async e=>{const a=new W.Ay,n=await a.get("training/test-instance/".concat(e,"/"),{},t,q.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},test_list:async function(){const e=new W.Ay,a=await e.get("training/test-masters/",{},t,q.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},createTest:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.post("training/test-masters/",e,t,(e=>(0,q.So)(e,null)));return null===n||void 0===n?void 0:n.data},assignExam:async e=>{const a=new W.Ay,n=await a.post("training/".concat(e.test,"/test-instance/").concat(e.operator.key,"/"),{},t,(e=>(0,q.So)(e,null,"Test Successfully Assign !")));return null===n||void 0===n?void 0:n.data},addQuestion:async(e,a)=>{const n=new W.Ay,l=await n.put("training/test-master/".concat(e,"/"),a,t,(e=>(0,q.So)(e,null,"Test Updated Successfully!")));return null===l||void 0===l?void 0:l.data},updateTest:async(e,a)=>{const n=new W.Ay,l=await n.put("training/test-instance/".concat(e,"/"),a,t,(e=>(0,q.So)(e,null)));return null===l||void 0===l?void 0:l.data},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.post("training/question-bank/",e,t,(e=>(0,q.So)(e,null)));return null===n||void 0===n?void 0:n.data},updateProfile:async(e,a)=>{const n=new W.Ay,l=await n.put("".concat(V.H.USER,"-").concat(V.H.PROFILE,"/").concat(e,"/"),a,t,(e=>(0,q.So)(e,null,"User Updated successfully!")));return null===l||void 0===l?void 0:l.data},remove:async e=>{if(!e)return;const a=new W.Ay,n=await a.delete("".concat(V.H.USER,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"User deleted successfully!")));return null===n||void 0===n?void 0:n.data},linkPlanTestMaster:async(e,a)=>{const n=new W.Ay,l=await n.put("training/training/".concat(e,"/"),a,t,(e=>(0,q.So)(e,null)));return null===l||void 0===l?void 0:l.data}}};var Pa=a(9413);const Ua=e=>{let{open:t,onClose:a,data:n,setData:l,onStart:o,loading:r,edit:c,setModalOpen:d,testData:u}=e;return(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(p.A,{sx:{display:"flex",gap:2},children:[(0,B.jsxs)(s.A,{sx:{width:"55%"},children:[(0,B.jsx)(s.A,{sx:{backgroundColor:Y.lm.LIGHT_BLUE,borderRadius:2,p:2},children:(0,B.jsx)(i.A,{className:"fw-600-16",children:(null===u||void 0===u?void 0:u.test.test_name)||"sass"})}),(0,B.jsxs)(s.A,{className:"fw-500-14",sx:{backgroundColor:Y.lm.LIGHT_GRAY,mt:2,borderRadius:2,p:2},children:[(0,B.jsx)(i.A,{className:"fw-500-14",children:"You are going to start the Test, Please read carefully below Instructions"}),(0,B.jsxs)(s.A,{children:[(0,B.jsxs)(i.A,{className:"fw-500-14",children:["1.The test is designed to test your Skill - ",(null===u||void 0===u?void 0:u.test.skill)||"sass"]}),(0,B.jsxs)(i.A,{className:"fw-500-14",children:["2.The time duration is ",(null===u||void 0===u?void 0:u.test.alloted_minutes)||"sass"," mins."]}),(0,B.jsxs)(i.A,{className:"fw-500-14",children:["3.The test will auto close  at ",(null===u||void 0===u?void 0:u.test.alloted_minutes)||"sass"," mins"]}),(0,B.jsx)(i.A,{className:"fw-500-14",children:"4.Each question is on 1 mark."}),(0,B.jsxs)(i.A,{className:"fw-500-14",children:["5.There are ",(null===u||void 0===u?void 0:u.test.maximum_questions)||"sass"," Questions."]}),(0,B.jsx)(i.A,{className:"fw-500-14",children:"6.There is no negative marking "}),(0,B.jsx)(i.A,{className:"fw-500-14",children:"7.Choose only one best answer"}),(0,B.jsx)(i.A,{className:"fw-500-14",children:"8.You can go back and change your answers."}),(0,B.jsx)(i.A,{className:"fw-500-14",children:"9.Please take the test at one go."}),(0,B.jsx)(i.A,{className:"fw-500-14",children:"10.Please click submit when you are finished"})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",justifyContent:"space-between",mt:2},children:[(0,B.jsx)(Z.A,{color:"gray",children:"Back"}),(0,B.jsx)(Z.A,{color:"light_green",onClick:()=>{d("start"),o()},children:"Start"})]})]})]}),(0,B.jsx)(s.A,{sx:{width:"43%"},children:(0,B.jsxs)(s.A,{sx:{backgroundColor:Y.lm.LIGHT_GRAY,borderRadius:2,p:2},children:[(0,B.jsx)(i.A,{className:"fw-600-16",children:"Sample Question 1"}),(0,B.jsx)(i.A,{sx:{mt:1},className:"fw-600-16",children:"Tick the correct answer or Answers and  Submit"}),(0,B.jsx)(i.A,{sx:{mt:1},className:"fw-500-14",children:"Question 1"}),(0,B.jsx)(i.A,{sx:{mt:1,mb:1},className:"fw-500-14",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}),[{option:"Answer 1",check:!0},{option:"Answer 2",check:!1},{option:"Answer 3",check:!1},{option:"Answer 4",check:!1}].map(((e,t,a)=>(0,B.jsx)(Pa.A,{sx:{mb:1.4},children:(0,B.jsx)(wt.A,{disabled:!0,control:(0,B.jsx)(oa.A,{className:"fw-500-14",defaultChecked:e.check}),label:e.option})},a)))]})})]})})};var La=a(1338);const Fa=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:o,loading:r,edit:c}=e;return(0,B.jsx)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:(0,B.jsxs)(s.A,{sx:{justifyContent:"center",alignItems:"center",mt:4},children:[(0,B.jsx)(La.A,{sx:{width:55,height:55},color:"primary"}),(0,B.jsx)(s.A,{sx:{justifyContent:"center",alignItems:"center",mt:2,mb:2},children:(0,B.jsx)(i.A,{sx:{fontSize:20,fontWeight:"bold"},color:"primary",children:"Done !"})})]})})};var Ha=a(1825);const za=e=>{let{activeQuestion:t,totalQuestions:a,setModalOpen:n,testData:l}=e;(0,I.Zp)();const[o,r]=(0,g.useState)(null===l||void 0===l?void 0:l.remaining_time_in_seconds);return(0,g.useEffect)((()=>{if(o>0){const e=setTimeout((()=>{r((e=>e-1)),localStorage.setItem("time",o)}),1e3);return()=>clearTimeout(e)}o<1&&(n("timeUps"),localStorage.setItem("draweWidth",270))}),[o]),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:.5,alignItems:"baseline"},children:[(0,B.jsx)(i.A,{sx:{fontWeight:500,fontSize:40},children:(0,se.gv)(t)}),(0,B.jsxs)(i.A,{sx:{fontWeight:500,fontSize:20},children:["/",(0,se.gv)(a)]})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:1,alignItems:"center",mr:2},children:[(0,B.jsx)(Ha.A,{fontSize:"large"}),(0,B.jsx)(i.A,{sx:{fontWeight:500,fontSize:18},children:(0,se.fU)(o)})]})]})};var Ma=a(6240);const Qa=e=>{let{highlightAnswer:t,children:a,...n}=e;const l=(0,Ma.A)();return(0,B.jsx)(p.A,{...n,sx:{fontSize:{xs:"18px",sm:"calc(18px + 2vw)",md:"calc(18px + 4vw)",lg:"16px"},color:l.palette.text.secondary,fontWeight:t?400:300,border:"1px solid ".concat(t?l.palette.primary.main:l.palette.divider),backgroundColor:t?l.palette.background.selected:l.palette.background.paper,borderRadius:"16px",marginTop:{xs:"13px",sm:"calc(10px + 6 * ((100vw - 600px) / 1320))",md:"16px"},cursor:"pointer",transition:t?"border 0.2s ease-in":"none","& input":{visibility:"hidden",margin:0}},children:a})},Ya=e=>{let{onChange:t,index:a,choice:n,type:l,correct:s}=e;const o=String.fromCharCode(65+a),[r,c]=(0,g.useState)("");return(0,B.jsx)(Qa,{highlightAnswer:!0===s?"21":"",children:(0,B.jsxs)(i.A,{sx:{p:1.5,display:"flex",fontWeight:!0===s?"bold":""},onClick:()=>t(n),children:[(0,B.jsxs)(i.A,{sx:{fontWeight:!0===s?"bold":""},children:[o,"."]}),n]})},a)},Ba=e=>{let{question:t,code:a,image:n,type:l,choices:o=[],selectedAnswer:r,handleAnswerSelection:c,ans:d,questionNo:u}=e;return(0,B.jsxs)(s.A,{children:[(0,B.jsx)(i.A,{className:"fw-500-14",sx:{mb:1},children:null===t||void 0===t?void 0:t.question_text}),(0,B.jsx)(s.A,{children:o.map(((e,a)=>{var n;return(0,B.jsx)(Ya,{choice:e,index:a,onChange:e=>c(a+1,t.id),type:l,selectedAnswer:r,correct:(null===(n=d[u])||void 0===n?void 0:n.ans)-1===a},a)}))})]})},Ga=()=>{var e;const t=new URLSearchParams(window.location.search).get("key1"),a=(0,I.zy)(),[n,l]=((0,I.Zp)(),a.state,(0,g.useState)([])),[o,r]=(0,g.useState)(),[c,d]=(0,g.useState)(0),[u,h]=(0,g.useState)(!1),[p,m]=(0,g.useState)("testDetail"),[x,v]=(0,g.useState)(0),[y,w]=(0,g.useState)({name:"",metadata:{}}),{get_Test:A,updateTest:j,result:f}=Oa(),[S,b]=(0,g.useState)([]),[C,N]=(0,g.useState)(0),[E,k]=(0,g.useState)([]),[_,T]=(0,g.useState)(null),[D,R]=(0,g.useState)([]),[O,P]=(0,g.useState)(),[U,L]=(0,g.useState)([]);(0,g.useEffect)((()=>{F()}),[]);const F=async()=>{r("fetch");const[e,a]=await A(t);P(e);const n=e.questions_list.map((e=>({question:e.id,ans:""})));k((e=>[...e,...n]));const l=E.map((e=>({[e.question]:0})));L((e=>[...e,...l])),d(a),r(!1)};function H(e){"pre"===e&&C>=1&&N((e=>e-1)),"next"===e&&C+1<O.questions_list.length&&N((e=>e+1))}function z(){window.opener=null,window.open("","_self"),window.close()}return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsx)("div",{className:"flex items-center justify-between",children:(0,B.jsx)(s.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,B.jsx)("h1",{className:"mt-4",children:"Test"})})}),"start"===p&&(0,B.jsxs)(s.A,{sx:{flexDirection:"row",justifyContent:"space-between",p:1},children:[(0,B.jsxs)(s.A,{sx:{width:"78%"},children:[(0,B.jsx)(za,{activeQuestion:C+1,totalQuestions:O.questions_list.length,setModalOpen:m,testData:O}),(0,B.jsx)(Ba,{question:O.questions_list[C],choices:null===(e=O.questions_list[C])||void 0===e?void 0:e.question_options,type:"MAQs",handleAnswerSelection:(e,a)=>{!async function(e,a){let n=localStorage.getItem("time"),l={answers:{[a]:e},remaining_time_in_seconds:n};if(await j(t,l),n<=1){m("timeUps");let e={completed:!0,remaining_time_in_seconds:0};await j(t,e);await f(t);setTimeout((()=>{z()}),2e3)}}(e,a),k((t=>{const n=t.findIndex((e=>e.question===a));if(-1!==n){const l=[...t];return l[n]={question:a,ans:e},l}return[...t,{question:a,ans:e}]}))},ans:E,questionNo:C}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",justifyContent:"space-between",mt:3},children:[(0,B.jsx)(Z.A,{onClick:()=>H("pre"),children:"Previous"}),C===O.questions_list.length-1?(0,B.jsx)(Z.A,{onClick:()=>async function(e){localStorage.setItem("time",0),await j(t,{completed:!0}),await f(t),m("timeUps"),setTimeout((()=>{z()}),3e3)}(),children:"Submit"}):(0,B.jsx)(Z.A,{onClick:()=>H("next"),children:"Next"})]})]}),(0,B.jsxs)(s.A,{sx:{width:"18%",boxShadow:3,p:1,py:2,borderRadius:2,justifyContent:"space-between"},children:[(0,B.jsx)(oe.Ay,{display:"grid",gap:1,gridTemplateColumns:{sm:"repeat(5, 1fr)",xs:"repeat(5, 1fr)"},children:E.map(((e,t)=>(0,B.jsx)(s.A,{sx:{backgroundColor:e.ans?"#86D56A":"#3E3E3E",justifyContent:"center",alignItems:"center",borderRadius:1,width:22,height:22,cursor:"pointer"},onClick:()=>N(t),children:(0,B.jsx)(i.A,{style:{fontSize:"12px",fontWeight:"bold"},sx:{color:e.ans?"black":"white",textAlign:"center"},children:t+1})},t)))}),(0,B.jsxs)(s.A,{sx:{},children:[(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:1},children:[(0,B.jsx)(s.A,{sx:{backgroundColor:"#86D56A",justifyContent:"center",alignItems:"center",borderRadius:1,width:22,height:22}}),(0,B.jsx)(i.A,{sx:{mb:1,fontWeight:"bold"},children:"Answered"})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:1},children:[(0,B.jsx)(s.A,{sx:{backgroundColor:"#3E3E3E",justifyContent:"center",alignItems:"center",borderRadius:1,width:22,height:22}}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Not Answered"})]})]})]})]}),"testDetail"===p&&(0,B.jsx)(Ua,{testData:O,setModalOpen:m,onStart:async()=>{await j(t,{started:!0})}}),(0,B.jsx)(Fa,{open:"timeUps"===p,onClose:()=>m(!1)}),(0,B.jsx)(Se,{onClose:()=>m(!1),open:"csvUser"===p,onSubmit:function(){const e=[];D.slice(1).forEach((t=>{const a=t[0],n=t[t.length-1],l=new Set;t.slice(1).forEach((e=>{""!==e&&l.add(e)}));const s={question:a,choices:Array.from(l),answer:n};e.push(s),console.log("Processed object",s)})),console.log("All results",e)},file:_,setFile:T,setCsvData:R})]})};var qa=a(728);const Wa=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:r,loading:c,tab:d,skills:u}=e;const[h,p]=(0,g.useState)(new Map),[m,x]=(0,g.useState)(0),[v,y]=(0,g.useState)([]),[w,A]=(0,g.useState)([]),[j,f]=(0,g.useState)([]),{question_list:S,skill_question_list:b,induction_question:C,hr_question:N,create:E,update:k,remove:I}=Oa(),[_,T]=(0,g.useState)({skill:""}),[D,R]=(0,g.useState)([]),[O,P]=(0,g.useState)({}),[U,L]=(0,g.useState)([]),[F,H]=(0,g.useState)([]),[z,M]=(0,g.useState)("");(0,g.useEffect)((()=>{""===_.skill&&""===_.skill||Q()}),[_.skill]),(0,g.useEffect)((()=>{q(),W()}),[]);const Q=async()=>{const[e,t]=await b(1,_.skill?_.skill:n.skill);!function(e){y([]);const t=e.filter((e=>!0===e.compulsory)),a=e.filter((e=>!1===e.compulsory));console.log("compulsoryList",t.length,"List",a.length),y((e=>[...e,...a])),A((e=>[...e,...t]))}(e)},q=async()=>{const[e,t]=await C();H(e)},W=async()=>{const[e,t]=await N();L(e)};const V=[{title:"Question Type",placeholder:"Select",type:Y.wN.SELECT,name:"tranning",validator:Y.wY.REQUIRED,keyValues:[{value:"Induction",key:"Induction"},{value:"Skill",key:"Skill"},{value:"HR",key:"HR"}]},"Skill"===_.tranning&&{title:"Skill",placeholder:"Select Skill",type:Y.wN.SELECT,name:"skill",validator:Y.wY.REQUIRED,keyValues:u}],J=[{id:122,title:"",render:e=>(0,B.jsx)(Pa.A,{children:(0,B.jsx)(wt.A,{control:(0,B.jsx)(oa.A,{defaultChecked:e.checked,onChange:t=>((e,t)=>{const a=O[z].findIndex((e=>e.id===t));console.log("index of sel",a),P((t=>({...t,[z]:t[z].map(((t,n)=>n===a?{...t,checked:e}:t))}))),f((a=>e?[...a,t]:a.filter((e=>e!==t))))})(t.target.checked,e.id)})})},e.id)},{id:1,title:"Question",render:e=>e.question_text},{id:2,title:"Compulsory",render:e=>!0===e.compulsory?"Yes":"No"},{id:3,title:"Question Level",render:e=>e.skill_level||"-"}];return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",children:[(0,B.jsx)("h3",{className:"opacity-80",children:"Add Questions"}),(0,B.jsx)(s.A,{sx:{gap:1,width:"60%"},children:(0,B.jsx)(le.A,{data:_,errors:h,onChange:async e=>{const{name:t,value:a}=e.target;if("skill"===t&&"Skill"!==t&&"Skill"!==a){let e=u.filter((e=>a===e.key))[0].value;M(e);const[t,n]=await b(1,a),l=t.map((e=>({...e,checked:e.compulsory})));R((t=>t.includes(e)?t:[...t,e])),P((t=>t.hasOwnProperty(e)?t:{...t,[e]:l}))}if("skill"!==t&&"Skill"!==t&&"Skill"!==a){const e=("Induction"===a?F:U).map((e=>({...e,checked:e.compulsory})));console.log("value question",a),M(a),P((t=>t.hasOwnProperty(a)?t:{...t,[a]:e})),R((e=>e.includes(a)?e:[...e,a]))}T((e=>({..._,[t]:a}))),console.log("name or value------\x3e",O)},schema:V})}),(0,B.jsx)(s.A,{sx:{flexDirection:"row",gap:2,mt:2,border:1,borderColor:Y.lm.LIGHT_GRAY,borderTopLeftRadius:5,borderTopRightRadius:5,width:"fit-content"},children:D.map(((e,t)=>(0,B.jsxs)(s.A,{sx:{p:.5,flexDirection:"row",gap:1,borderRight:1,borderColor:Y.lm.LIGHT_GRAY},children:[(0,B.jsx)(i.A,{onClick:()=>{M(e)},sx:{fontSize:14,color:z===e?"black":Y.lm.GRAY},children:e}),(0,B.jsx)(o.A,{sx:{height:14,width:14,cursor:"pointer"},onClick:()=>(e=>{R((t=>t.filter((t=>t!==e))));const{[e]:t,...a}=O;P(a)})(e),children:(0,B.jsx)(qa.A,{color:z===e?"black":Y.lm.LG_GRAY,fontSize:"small"})})]})))}),(0,B.jsx)(s.A,{sx:{},children:(0,B.jsx)(G,{columns:J,rows:D.length>0?O[z]:[],rowsPerPage:10,loading:"fetch"===c,titleCellClasses:"c-gray fw-700"})}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:()=>{0===m?(p(new Map),l({}),x(0),a()):x((e=>e-1))},children:"Back"}),(0,B.jsx)(Z.A,{onClick:async()=>{let e=D.map((e=>O[e].filter((e=>!0===e.checked)))).flat();await r(e)},loading:c,children:1===m?"Create":"Next"})]})]})},Va=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,tab:r,setSelectedQuestions:c,skills:d,users:u,testList:h}=e;const[p,m]=(0,g.useState)(new Map),[x,v]=(0,g.useState)(0),[y,w]=(0,g.useState)([]),A=[{title:"Admins",placeholder:"Select Admins",type:Y.wN.SELECT,name:"admins",validator:Y.wY.REQUIRED,keyValues:u,multi:!0,height:"auto"}];return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsx)("h3",{className:"opacity-80",children:"Assign Admins"}),(0,B.jsx)(le.A,{data:n,errors:p,onChange:e=>{const{name:t,value:a}=e.target;m((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:A}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:async()=>{if(0!==x);else{const e=(0,se.bG)(A,n);if(m(e),e.size)return;await i()}},loading:o,children:"Next"})]})]})},Ja=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,tab:r,setSelectedQuestions:c,skills:d,users:u,testList:h}=e;const[p,m]=(0,g.useState)(new Map),[x,v]=(0,g.useState)(0),[y,w]=(0,g.useState)([]),A=[{title:"Test Type",placeholder:"Select",type:Y.wN.SELECT,name:"tranning_type",validator:Y.wY.REQUIRED,keyValues:[{value:"Induction Training",key:"Induction Training"},{value:"Skill Test",key:"Skill Test"},{value:"Tranning Test",key:"Tranning Test"}]},"Skill Test"===n.tranning_type&&{title:"Skill",placeholder:"Select Skill",type:Y.wN.SELECT,name:"skill",validator:Y.wY.REQUIRED,keyValues:d},"Skill Test"===n.tranning_type&&{title:"Test Level",placeholder:"Select Test Level",type:Y.wN.SELECT,name:"level",validator:Y.wY.REQUIRED,keyValues:[{value:"Level 1",key:1},{value:"Level 2",key:2},{value:"Level 3",key:3}]},{title:"Test Name",placeholder:"Select Test Level",type:Y.wN.INPUT,name:"testname",validator:Y.wY.REQUIRED},{title:"Max Question",placeholder:"enter number of question",type:Y.wN.INPUT,inputType:"number",name:"totalQuestion",validator:Y.wY.REQUIRED},"Skill Test"!==n.tranning_type&&{title:"Passing Criteria",placeholder:"enter passing criteria",type:Y.wN.INPUT,name:"passing_criteria",inputType:"number",validator:Y.wY.REQUIRED},{title:"Time (in min)",placeholder:"enter time in min",type:Y.wN.INPUT,name:"time",inputType:"number",validator:Y.wY.REQUIRED}];return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsx)("h3",{className:"opacity-80",children:"Create Test"}),(0,B.jsx)(le.A,{data:n,errors:p,onChange:e=>{const{name:t,value:a}=e.target;m((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:A}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:async()=>{if(0!==x);else{const e=(0,se.bG)(A,n);if(m(e),e.size)return;await i()}},loading:o,children:"Next"})]})]})},Xa=()=>{const e=(0,I.zy)(),t=((0,I.Zp)(),e.state),[a,n]=(0,g.useState)([]),[l,r]=(0,g.useState)(),[c,d]=(0,g.useState)(0),[u,h]=(0,g.useState)(!1),[p,m]=(0,g.useState)("testDetail"),[x,v]=(0,g.useState)(0),[y,w]=(0,g.useState)({name:"",tranning_type:"",metadata:{},skill:""}),{question_list:A,skill_list:j,test_list:f,assignExam:S,createTest:b,update:C,linkPlanTestMaster:N,addQuestion:E}=Oa(),{list:k}=ne(),[_,T]=(0,g.useState)(new Map),[D,R]=(0,g.useState)([]),[O,P]=(0,g.useState)([]),[U,L]=(0,g.useState)([]),[F,H]=(0,g.useState)(""),z=[{id:1,title:"Test Name",render:e=>e.test_name},{id:2,title:"Test Type",render:e=>e.test_type},{id:3,title:"Skill",render:e=>e.skill},{id:4,title:"Skill Level",render:e=>e.skill_level},{id:5,title:"Maximum Questions",render:e=>e.maximum_questions},{id:6,title:"Questions in Test",render:e=>e.questions_master.length},{id:7,title:"Alloted Minutes",render:e=>e.alloted_minutes},{id:8,title:"Admins",render:e=>(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:1},children:[(0,B.jsx)(s.A,{sx:{flexDirection:"column"},children:e.admin.map((e=>(0,B.jsx)(i.A,{sx:{textTransform:"capitalize"},children:e})))}),(0,B.jsx)(Ce.A,{title:"add admins",children:(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{H(e.id),m("addAssign")},children:(0,B.jsx)(ke.A,{color:"primary",fontSize:"small"})})})]})})}];(0,g.useEffect)((()=>{console.log("planData----",t),m(!!t&&"createTest"),Y(),M(),Q()}),[]);const M=async()=>{const[e,t]=await f();L(e)},Q=async()=>{const[e,t]=await k(x+1),a=e.filter((e=>!e.is_operator)).map((e=>({value:e.username,key:e.id})));n((e=>[...e,...a]))},Y=async()=>{r("fetch");const[e]=await j(x+1),t=e.results.map((e=>({value:e.skill_name,key:e.id})));P((e=>[...e,...t])),r(!1)};return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsx)(s.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,B.jsx)("h1",{className:"mt-4",children:"Test Master"})}),(0,B.jsx)(s.A,{sx:{flexDirection:"row",gap:1},children:(0,B.jsx)(Z.A,{onClick:()=>m("createTest"),children:"Create Test"})})]}),(0,B.jsx)(G,{columns:z,rows:U,rowsPerPage:10,loading:"fetch"===l,titleCellClasses:"c-gray fw-700",page:x,setPage:v,paginator:!0,serialize:!0,total:c}),(0,B.jsx)(Ja,{open:"createTest"===p,onClose:()=>{m(!1)},onSubmit:async()=>{const e={test_name:y.testname,test_type:y.tranning_type,skill:y.skill,skill_level:parseInt(y.level),maximum_questions:parseInt(y.totalQuestion),alloted_minutes:parseInt(y.time)},t={test_name:y.testname,test_type:y.tranning_type,maximum_questions:parseInt(y.totalQuestion),passing_criteria:y.passing_criteria,alloted_minutes:parseInt(y.time)},a=await b("Skill Test"!==y.tranning_type?t:e);a.id&&(H(a.id),m("addQues"))},skills:O,data:y,setData:w}),(0,B.jsx)(Wa,{open:"addQues"===p,onClose:()=>{m(!1)},onSubmit:async e=>{const a=e.map((e=>e.id)),n={questions:a};await E(F,n),t&&await N(t.id,{test_master:F,training_admin:t.training_admin,trainees:t.trainees}),w({}),m(!1),await M()},selectQuestions:D,setSelectedQuestions:R,skills:O,data:y,setData:w}),(0,B.jsx)(Va,{open:"addAssign"===p,onClose:()=>{m(!1)},onSubmit:async()=>{const e={admin:y.admins};await E(F,e),m(!1),w({}),await M()},users:a,testList:U,data:y,setData:w})]})},Za=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:o,loading:r,tab:c,edit:d,selectSkill:u}=e;const h=[!0!==d&&{title:"Skill Name",placeholder:"Enter SkillName",type:Y.wN.INPUT,name:"skill_name",validator:Y.wY.REQUIRED}],[p,m]=(0,g.useState)(new Map),[x,v]=(0,g.useState)(0);console.log("selectSkill",u);return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(600px,90vw)",children:[(0,B.jsxs)("h3",{className:"opacity-80",children:[!0===d?"Edit":"Add"," Skill"]}),d&&(0,B.jsx)("h3",{className:"opacity-80",children:n.skill_name}),(0,B.jsx)(le.A,{data:n,errors:p,onChange:e=>{const{name:t,value:a}=e.target;m((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:h}),0===x&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(s.A,{sx:{},children:[(0,B.jsx)(i.A,{sx:{mt:1,fontWeight:"bold"},children:"Level 1"}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",mt:-1},children:[(0,B.jsx)(Q.A,{type:"number",title:"Duration",value:n.l1_duration,placeholder:"in days",width:"90%",onChange:e=>l((t=>({...t,l1_duration:e.target.value})))}),(0,B.jsx)(Q.A,{type:"number",title:"Exam Passing Criteria",value:n.l1_exam,placeholder:"Exam Passing Criteria",width:"90%",onChange:e=>l((t=>({...t,l1_exam:e.target.value})))}),(0,B.jsx)(Q.A,{type:"number",title:"Floor Work Criteria",value:n.l1_floor,placeholder:"Floor Work Criteria",width:"90%",onChange:e=>l((t=>({...t,l1_floor:e.target.value})))}),(0,B.jsx)(Q.A,{type:"number",title:"No of Entry",value:n.l1_performance,placeholder:"No of Entry",width:"90%",onChange:e=>l((t=>({...t,l1_performance:e.target.value})))})]})]}),(0,B.jsxs)(s.A,{sx:{},children:[(0,B.jsx)(i.A,{sx:{mt:1,fontWeight:"bold"},children:"Level 2"}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",mt:-1},children:[(0,B.jsx)(Q.A,{type:"number",title:"Duration",placeholder:"in days",width:"90%",value:n.l2_duration,onChange:e=>l((t=>({...t,l2_duration:e.target.value})))}),(0,B.jsx)(Q.A,{type:"number",title:"Exam Passing Criteria",placeholder:"Exam Passing Criteria",width:"90%",value:n.l2_exam,onChange:e=>l((t=>({...t,l2_exam:e.target.value})))}),(0,B.jsx)(Q.A,{type:"number",title:"Floor Work Criteria",placeholder:"Floor Work Criteria",width:"90%",value:n.l2_floor,onChange:e=>l((t=>({...t,l2_floor:e.target.value})))}),(0,B.jsx)(Q.A,{type:"number",title:"No of Entry",value:n.l2_performance,placeholder:"No of Entry",width:"90%",onChange:e=>l((t=>({...t,l2_performance:e.target.value})))})]})]}),(0,B.jsxs)(s.A,{sx:{},children:[(0,B.jsx)(i.A,{sx:{mt:1,fontWeight:"bold"},children:"Level 3"}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",mt:-1},children:[(0,B.jsx)(Q.A,{type:"number",title:"Duration",placeholder:"in days",width:"90%",value:n.l3_duration,onChange:e=>l((t=>({...t,l3_duration:e.target.value})))}),(0,B.jsx)(Q.A,{type:"number",title:"Exam Passing Criteria",placeholder:"Exam Passing Criteria",width:"90%",value:n.l3_exam,onChange:e=>l((t=>({...t,l3_exam:e.target.value})))}),(0,B.jsx)(Q.A,{type:"number",title:"Floor Work Criteria",placeholder:"Floor Work Criteria",width:"90%",value:n.l3_floor,onChange:e=>l((t=>({...t,l3_floor:e.target.value})))}),(0,B.jsx)(Q.A,{type:"number",title:"No of Entry",value:n.l3_performance,placeholder:"No of Entry",width:"90%",onChange:e=>l((t=>({...t,l3_performance:e.target.value})))})]})]})]}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:async()=>{if(0===x){const e=(0,se.bG)(h,n);if(m(e),e.size)return;return await o(),void a()}},loading:r,children:"Next"})]})]})},Ka=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:o,loading:r,tab:c}=e;return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsx)("h3",{className:"opacity-80",children:"ADD REPORT"}),(0,B.jsxs)(oe.Ay,{display:"grid",sx:{pt:1,gap:1},gridTemplateColumns:{sm:"repeat(4, 1fr)",xs:"repeat(4, 1fr)"},children:[(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"S no"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Item Name"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Plan"}),(0,B.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Actual"}),[{itemName:"item 1",plan:1e3},{itemName:"item 2",plan:800},{itemName:"item 3",plan:1e3}].map(((e,t)=>(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(i.A,{children:t+1}),(0,B.jsx)(i.A,{sx:{textTransform:"capitalize"},children:e.itemName}),(0,B.jsx)(i.A,{children:e.plan}),(0,B.jsx)("input",{type:"text"})]})))]}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:o,loading:r,children:"Create"})]})]})},$a=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,user:r}=e;const[c,d]=(0,g.useState)(new Map),u=[{title:"Supervisor",placeholder:"Select Supervisor",type:Y.wN.SELECT,name:"supervisor",multi:!0,height:"auto",keyValues:r}];return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsx)("h3",{className:"opacity-80",children:"ADD SUPERVISOR"}),(0,B.jsx)(le.A,{data:n,errors:c,onChange:e=>{const{name:t,value:a}=e.target;d((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:u}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,loading:o,children:"Create"})]})]})},en=()=>{const[e,t]=(0,g.useState)("Users"),[a,n]=(0,g.useState)([]),[l,r]=(0,g.useState)([]),[c,d]=(0,g.useState)(),[u,h]=(0,g.useState)(0),[p,m]=(0,g.useState)(!1),[x,v]=(0,g.useState)([]),[y,w]=(0,g.useState)(0),[A,j]=(0,g.useState)(null),[f,S]=(0,g.useState)({}),{list:b,create:C,updateSkill:N,update:E,addSupervisor:k,remove:I,opratorList:_,createOperator:T,removeOperator:D,updateOperator:R}=Te(),[O,P]=(0,g.useState)(!1),[U,L]=(0,g.useState)(""),{list:F}=ne(),[H,z]=(0,g.useState)();(0,g.useEffect)((()=>{Q()}),[y,e]),(0,g.useEffect)((()=>{M()}),[]);const M=async()=>{d("fetch");const[e,t]=await F(y+1),a=e.filter((e=>!e.is_operator)).map((e=>({value:e.username,key:e.id})));n((e=>[...e,...a]))},Q=async()=>{d("fetch");const[e,t]=await b(y+1);r(e.results),h(t),d(!1)},Y=async()=>{const e={skill_name:f.skill_name,test_performance_criteria:[f.l1_exam,f.l2_exam,f.l3_exam],duration_between_two_tests:[f.l1_duration,f.l2_duration,f.l3_duration],floor_performance_criteria:[parseInt(f.l1_floor),parseInt(f.l2_floor),parseInt(f.l3_floor)],no_of_performance_entries:[parseInt(f.l1_performance),parseInt(f.l2_performance),parseInt(f.l3_performance)]};d("fetch");await N(e,U);await Q(),d(!1)};const q=[{id:1,title:"Skill Name",render:e=>e.skill_name},{id:112,title:"No. of Enteries",render:e=>e.no_of_performance_entries.length},{id:6,title:"Actions",render:e=>(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(s.A,{flexDirection:"row",sx:{gap:1},children:[(0,B.jsxs)(Ce.A,{title:"add supervisor",children:[" ",(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{P(!0),m("addSuper"),L(e.id)},children:(0,B.jsx)(ke.A,{color:"primary",fontSize:"small"})})]}),(0,B.jsx)(Ce.A,{title:"edit skill",children:(0,B.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{P(!0),m("add"),z(e),S({...f,skill_name:e.skill_name,l1_duration:e.duration_between_two_tests[0],l2_duration:e.duration_between_two_tests[1],l3_duration:e.duration_between_two_tests[2],l1_exam:e.test_performance_criteria[0],l2_exam:e.test_performance_criteria[1],l3_exam:e.test_performance_criteria[2],l1_floor:e.floor_performance_criteria[0],l2_floor:e.floor_performance_criteria[1],l3_floor:e.floor_performance_criteria[2],l1_performance:e.no_of_performance_entries[0],l2_performance:e.no_of_performance_entries[1],l3_performance:e.no_of_performance_entries[2]}),L(e.id)},children:(0,B.jsx)(te.A,{color:"primary",fontSize:"small"})})})]})})}];return(0,B.jsxs)("div",{className:"mx-3 my-2 fw-500",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsxs)(i.A,{className:"mt-2 fw-500",children:["Skill's List",(0,B.jsxs)("span",{className:"fw-500 ml-1 ",children:["(",l.length,")"]})]}),(0,B.jsx)(s.A,{justifyContent:"flex-end",direction:"row",sx:{mb:1},children:(0,B.jsx)(Z.A,{onClick:()=>{m("add"),S({})},children:"Add New Skill"})})]}),(0,B.jsx)(G,{columns:q,rows:l,rowsPerPage:10,loading:"fetch"===c,titleCellClasses:"c-gray fw-700",page:y,setPage:w,paginator:!0,serialize:!0,total:u}),(0,B.jsx)(Za,{selectSkill:H,open:"add"===p,onClose:()=>{m(!1),P(!1)},data:f,setData:S,onSubmit:Y,loading:"add"===c,edit:O}),(0,B.jsx)($a,{open:"addSuper"===p,onClose:()=>{m(!1),P(!1)},data:f,setData:S,onSubmit:async function(){const e={add:{...f}.supervisor};await k(U,e),m(!1),await Q()},loading:"add"===c,user:a}),(0,B.jsx)(Ka,{open:"Report"===p,onClose:()=>m(!1),onSubmit:Y}),(0,B.jsx)(Se,{onClose:()=>m(!1),open:"csvUser"===p,onSubmit:async()=>{x.map((async t=>{if("Users"===e){if(""===t.email)return;await C(t)}else{if(""===t.employee_id)return;await T(t)}})),m(!1),await Q(y=1)},file:A,setFile:j,setCsvData:v,tab:e})]})};var tn=a(7332);const an=()=>{const e=(0,I.zy)(),[t,a]=((0,I.Zp)(),e.state,(0,g.useState)("List")),[n,l]=(0,g.useState)([]),[i,o]=(0,g.useState)(),[r,c]=(0,g.useState)(0),[d,u]=(0,g.useState)(!1),[h,p]=(0,g.useState)("testDetail"),[m,x]=(0,g.useState)(0),[v,y]=(0,g.useState)({name:"",metadata:{}}),{question_list:w,skill_list:A,create:j,update:f,remove:S}=Oa(),[b,C]=(0,g.useState)(null),[N,E]=(0,g.useState)([]),[k,T]=(0,g.useState)(new Map),[D,R]=(0,g.useState)([]);(0,g.useEffect)((()=>{P()}),[]),(0,g.useEffect)((()=>{O()}),[t]);const O=async()=>{o("fetch");const[e,t]=await w(m+1);R(e),c(t),o(!1)},P=async()=>{o("fetch");const[e]=await A(m+1),t=e.results.map((e=>({value:e.skill_name,key:e.id})));l((e=>[...e,...t])),o(!1)},U=[{title:"Test Type",placeholder:"Select",type:Y.wN.SELECT,name:"tranning_type",validator:Y.wY.REQUIRED,keyValues:[{value:"Induction Training",key:"Induction Training"},{value:"Skill Test",key:"Skill Test"},{value:"Tranning Test",key:"Tranning Test"}]},"Skill Test"===v.tranning_type&&{title:"Skill",placeholder:"Select Skill",type:Y.wN.SELECT,name:"skill",validator:Y.wY.REQUIRED,keyValues:n},"Skill Test"===v.tranning_type&&{title:"Tranning Level",placeholder:"Select Test Level",type:Y.wN.SELECT,name:"level",validator:Y.wY.REQUIRED,keyValues:[{value:"Level 1",key:1},{value:"Level 2",key:2},{value:"Level 3",key:3}]}],L=[{id:1,title:"Question",render:e=>e.question_text},{id:2,title:"Skill",render:e=>e.skill},{id:3,title:"Skill Level",render:e=>e.skill_level?"Level "+e.skill_level:"-"},{id:33,title:"Induction Question",render:e=>!0===e.induction_question?"True":"False"},{id:4,title:"Compulsory",render:e=>!0===e.compulsory?"True":"False"},{id:55,title:"Status",render:e=>(0,B.jsx)(tn.A,{color:!0===e.status?"success":"error"})}];return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsx)("div",{className:"flex items-center justify-between",children:(0,B.jsx)(s.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,B.jsx)("h1",{className:"mt-4",children:"Question Bank"})})}),(0,B.jsx)(ce.A,{value:t,onChange:(e,t)=>{a(t),x(0)},className:"mb-2 fw-500",children:["List","Upload"].map(((e,t)=>(0,B.jsx)(de.A,{label:e,className:"fw-500",value:e},t)))}),"Upload"===t&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(le.A,{data:v,errors:k,onChange:e=>{const{name:t,value:a}=e.target;T((e=>(e.delete(t),e))),y((e=>({...e,[t]:a})))},schema:U}),(0,B.jsx)(s.A,{sx:{mt:2,flexDirection:"row",justifyContent:"flex-end"},children:(0,B.jsx)(Z.A,{bordered:!0,onClick:()=>p("csvUser"),children:"upload CSV file"})})]}),"List"===t&&(0,B.jsx)(G,{columns:L,rows:D,rowsPerPage:10,loading:"fetch"===i,titleCellClasses:"c-gray fw-700",page:m,setPage:x,serialize:!0,total:r}),(0,B.jsx)(Se,{tab:"question",onClose:()=>p(!1),open:"csvUser"===h,onSubmit:async function(){o("fetch"),N.slice(1).forEach((async e=>{const t=e[0],a=e[1],n=e[e.length-1],l=new Set;e.slice(2).forEach((e=>{""!==e&&l.add(e)}));const s=Array.from(l);s.pop();const i={compulsory:"TRUE"===t,question_text:a,question_options:s,correct_answer:parseInt(n),skill:v.skill,skill_level:v.level,induction_question:"Induction Training"===v.tranning_type};await j(i)})),p(!1),o(!1),_.oR.success("Question are uploaded in question bank."),await O(),a("List")},file:b,setFile:C,setCsvData:E})]})};function nn(e){let{title:t,chartColors:a,chart:n,...l}=e;const{series:i,options:o}=n,r=i.map((e=>e.value)),c={chart:{width:200,type:"pie"},dataLabels:{enabled:!1},legend:{show:!1},tooltip:{enabled:!1},colors:a,responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]};return(0,B.jsx)(s.A,{sx:{},dir:"ltr",children:(0,B.jsx)(dt.A,{type:"pie",series:r,options:c})})}const ln=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new W.Ay,n=await a.get("training/".concat(e,"/skill-matrix/"),{},t,q.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),null===n||void 0===n?void 0:n.data):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const n=new W.Ay,l=await n.post("".concat(V.H.ASSET,"/").concat(a,"/").concat(V.H.PLANTS,"/"),e,t,(e=>(0,q.So)(e,null,"Plant created successfully!")));return null===l||void 0===l?void 0:l.data},update:async e=>{const a={name:e.name,metadata:e.metadata},n=new W.Ay,l=await n.put("".concat(V.H.ASSET,"/").concat(V.H.PLANT,"/").concat(e.id,"/"),a,t,(e=>(0,q.So)(e,null,"Plant Updated successfully!")));return null===l||void 0===l?void 0:l.data},remove:async e=>{const a=new W.Ay,n=await a.delete("".concat(V.H.ASSET,"/").concat(V.H.PLANT,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Plant deleted successfully!")));return null===n||void 0===n?void 0:n.data},postPerformance:async e=>{const a=new W.Ay,n=await a.post("performance-record/".concat(e.operator,"/"),{skill:e.skill,skill_level:e.skill_level},t,(e=>(0,q.So)(e,null)));return null===n||void 0===n?void 0:n.data},getPerformanceSkill:async e=>{const a=new W.Ay,n=await a.get("training/update-skill/".concat(e.operator,"/"),{},t,(e=>(0,q.So)(e,null)));return null===n||void 0===n?void 0:n.data},performanceRecord:async e=>{const a=new W.Ay,n=await a.post("training/".concat(e.operator,"/performance-record/"),{skill:e.skill,skill_level:e.skill_level},t,(e=>(0,q.So)(e,null)));return null===n||void 0===n?void 0:n.data},putPerformanceRecord:async(e,a)=>{const n=new W.Ay,l=await n.put("training/performance-record/".concat(e,"/"),a,t,(e=>(0,q.So)(e,null,"Performance uploaded.")));return null===l||void 0===l?void 0:l.data},performanceList:async e=>{const a=e.replace(/-/g,""),n=new W.Ay,l=await n.get("training/date-wise-performance-record/".concat(a,"/"),{},t,q.So);return null!==l&&void 0!==l&&l.data?(console.log("res  ",l.data),null===l||void 0===l?void 0:l.data):[[],0]},getPerformanceId:async e=>{const a=new W.Ay,n=await a.get("training/".concat(e.operator,"/performance-record/"),{},t,(e=>(0,q.So)(e,null)));return null===n||void 0===n?void 0:n.data}}},sn=()=>{const e=(0,I.zy)(),[t,a]=((0,I.Zp)(),e.state,(0,g.useState)([])),[n,l]=(0,g.useState)(),[o,r]=(0,g.useState)(0),[c,d]=(0,g.useState)(!1),[u,h]=(0,g.useState)("testDetail"),[p,m]=(0,g.useState)(0),[x,v]=(0,g.useState)({name:"",tranning_type:"",metadata:{},skill:""}),{list:y,question_list:w,test_list:A,assignExam:j,createTest:f,update:S,remove:b,addQuestion:C}=ln(),{list:N}=ne(),{list:E}=Te(),[k,_]=(0,g.useState)(new Map),[O,F]=(0,g.useState)([]),[H,z]=(0,g.useState)([]),[M,G]=(0,g.useState)("");(0,g.useEffect)((()=>{W(),q()}),[]);const q=async()=>{const[e,t]=await N(),a=e.filter((e=>e.is_operator)),n=await Promise.all(a.map((e=>y(p+1,e.id))));O.map((e=>{n.map((t=>{console.log("newOptr----item2",t),e.id===t.id&&console.log("match skill",e.id)}))})),z((e=>[...e,...n]))},W=async()=>{const[e]=await E(p+1);console.log("fetchSkill-----------",e.results),F(e.results)};return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsx)("div",{className:"flex items-center justify-between",children:(0,B.jsx)(s.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,B.jsx)("h1",{className:"mt-4",children:"Skill Matrix"})})}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:2},children:[(0,B.jsxs)(s.A,{sx:{width:120},children:[(0,B.jsx)(nn,{chartColors:["#AA4A44",Y.lm.GRAY,Y.lm.GRAY,Y.lm.GRAY],chart:{series:[{value:25},{value:25},{value:25},{value:25}]}}),(0,B.jsx)(i.A,{sx:{fontSize:12},textAlign:"center",children:"Induction"})]}),(0,B.jsxs)(s.A,{sx:{width:120},children:[(0,B.jsx)(nn,{chartColors:["#AA4A44","#008FFB",Y.lm.GRAY,Y.lm.GRAY],chart:{series:[{value:25},{value:25},{value:25},{value:25}]}}),(0,B.jsx)(i.A,{sx:{fontSize:12},textAlign:"center",children:"Level 1"})]}),(0,B.jsxs)(s.A,{sx:{width:120},children:[(0,B.jsx)(nn,{chartColors:["#AA4A44","#008FFB","#00E396",Y.lm.GRAY],chart:{series:[{value:25},{value:25},{value:25},{value:25}]}}),(0,B.jsx)(i.A,{sx:{fontSize:12},textAlign:"center",children:"Level 2"})]}),(0,B.jsxs)(s.A,{sx:{width:120},children:[(0,B.jsx)(nn,{chartColors:["#AA4A44","#008FFB","#00E396","#775DD0"],chart:{series:[{value:25},{value:25},{value:25},{value:25}]}}),(0,B.jsx)(i.A,{sx:{fontSize:12},textAlign:"center",children:"Level 3"})]})]}),(0,B.jsx)(s.A,{sx:{py:1},children:(0,B.jsx)(Q.A,{placeholder:"Search By Aadhar Number"})}),(0,B.jsx)(P.A,{children:(0,B.jsxs)(T.A,{children:[(0,B.jsx)(U.A,{sx:{backgroundColor:Y.lm.BG_GRAY},children:(0,B.jsxs)(L.A,{children:[(0,B.jsx)(R.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:"S No."}),(0,B.jsx)(R.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:"Aadhar"}),O.map((e=>(0,B.jsx)(R.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black",pl:5},children:e.skill_name})))]})}),(0,B.jsx)(s.A,{sx:{p:.2}}),(0,B.jsx)(D.A,{children:H.map(((e,t)=>(0,B.jsx)(V,{row:e,arr:O,index:t})))})]})})]});function V(e){let{row:t,arr:a,index:n}=e;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(s.A,{sx:{p:.3}}),(0,B.jsxs)(L.A,{sx:{backgroundColor:Y.lm.LG_GRAY},children:[(0,B.jsx)(R.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:n+1}),(0,B.jsx)(R.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:t.aadhar}),a.map(((e,a)=>{let n=["#AA4A44",Y.lm.GRAY,Y.lm.GRAY,Y.lm.GRAY],l=["#AA4A44","#008FFB",Y.lm.GRAY,Y.lm.GRAY],i=["#AA4A44","#008FFB","#00E396",Y.lm.GRAY],o=[Y.lm.GRAY,Y.lm.GRAY,Y.lm.GRAY,Y.lm.GRAY];return(0,B.jsx)(R.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black",p:0,px:1},children:(0,B.jsx)(s.A,{sx:{width:120},children:(0,B.jsx)(nn,{chartColors:0===t[e.id]?n:1===t[e.id]?l:2===t[e.id]?i:3===t[e.id]?["#AA4A44","#008FFB","#00E396","#775DD0"]:o,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}})})})}))]},t._id)]})}};a(7330);const on=()=>{const e=(0,I.zy)(),[t,a]=((0,I.Zp)(),(0,y.wA)(),e.state,(0,y.d4)((e=>e)),(0,g.useState)([])),[n,l]=(0,g.useState)(),[i,o]=(0,g.useState)(0),[r,c]=(0,g.useState)(!1),[d,u]=(0,g.useState)("testDetail"),[h,p]=(0,g.useState)(0),[m,x]=(0,g.useState)({}),{question_list:v,skill_list:w,test_list:A,assignExam:j,induction_question:f,createTest:S,update:b,remove:C,addQuestion:N,updateTest:E}=Oa(),{list:k,listByAadhar2:_}=ne(),[T,D]=(0,g.useState)(null),[R,O]=(0,g.useState)([]),[P,U]=(0,g.useState)(new Map),[L,F]=(0,g.useState)([]),[H,z]=(0,g.useState)([]),[M,Q]=(0,g.useState)([]),[G,q]=(0,g.useState)([]),W=[{title:"Operator",placeholder:"Select Operator",type:Y.wN.MASTER,name:"operator",validator:Y.wY.REQUIRED,fetch:[_],noSearch:!0},{title:"Test",placeholder:"Select test",type:Y.wN.SELECT,name:"test",validator:Y.wY.REQUIRED,keyValues:G}];(0,g.useEffect)((()=>{J(),X(),V()}),[]);const V=()=>{console.log("listByAadhar---")},J=async()=>{const[e,t]=await A(),a=e.map((e=>({value:"".concat(e.test_name,"_").concat(e.skill,"_").concat(e.skill_level),key:e.id})));q(a)},X=async()=>{const[e,t]=await k(h+1),n=e.filter((e=>e.is_operator)).map((e=>({value:e.username,key:e.id})));a((e=>[...e,...n]))};return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsx)("div",{className:"flex items-center justify-between",children:(0,B.jsx)(s.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,B.jsx)("h1",{className:"mt-4",children:"Testing Portal"})})}),(0,B.jsx)(oe.Ay,{display:"grid",gap:1,mb:1,gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:(0,B.jsx)(le.A,{data:m,errors:P,onChange:e=>{const{name:t,value:a}=e.target;U((e=>(e.delete(t),e))),x((e=>({...e,[t]:a})))},schema:W})}),(0,B.jsx)(s.A,{sx:{alignItems:"flex-end"},children:(0,B.jsx)(Z.A,{onClick:async()=>{let e=await j(m);console.log("response----",e),e&&await async function(e){localStorage.setItem("draweWidth",0);const t={key1:e.id},a=new URLSearchParams(t).toString(),n="/test?".concat(a);window.open(n,"_blank","rel=noopener noreferrer")}(e),u(!1),x({})},children:"Create"})})]})},rn=()=>{const{token:e}=(0,y.d4)((e=>e[J.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":W.yw.APPLICATION_JSON};return{list:async function(){const e=new W.Ay,a=await e.get("".concat(V.H.TRAINING,"/").concat(V.H.TRAININGS,"/"),{},t,q.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new W.Ay,n=await a.post("".concat(V.H.TRAINING,"/").concat(V.H.TRAININGS,"/"),e,t,(e=>(0,q.So)(e,null,"Created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},n=new W.Ay,l=await n.put("".concat(V.H.ASSET,"/").concat(V.H.LINE,"/").concat(e.id,"/"),a,t,(e=>(0,q.So)(e,null,"Line Updated successfully!")));return null===l||void 0===l?void 0:l.data},remove:async e=>{const a=new W.Ay,n=await a.delete("".concat(V.H.ASSET,"/").concat(V.H.LINE,"/").concat(e,"/"),t,(e=>(0,q.So)(e,null,"Line deleted successfully!")));return null===n||void 0===n?void 0:n.data}}},cn=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,loading:o,edit:r,users:c}=e;const{list:d,groupUser:u}=Bt(),[h,p]=(0,g.useState)([]);(0,g.useEffect)((()=>{y()}),[]);const m=[{title:"Training Name",placeholder:"Enter Training Name",type:Y.wN.INPUT,name:"training_name",validator:Y.wY.REQUIRED},{title:"Training Type",placeholder:"Enter Training Type",type:Y.wN.INPUT,name:"training_type",validator:Y.wY.REQUIRED},{title:"Training Description",placeholder:"Enter Training Description",type:Y.wN.INPUT,name:"training_description"},{title:"Trainer",placeholder:"Enter trainer Name",type:Y.wN.INPUT,name:"trainer"},{title:"Training Admin",placeholder:"Enter Training admin",type:Y.wN.SELECT,name:"training_admin",validator:Y.wY.REQUIRED,keyValues:c,multi:!0,height:"auto"},{title:"Groups",placeholder:"Select group",type:Y.wN.SELECT,name:"group",keyValues:h,multi:!0,height:"auto"},{title:"Trainees",placeholder:"Select Trainees",type:Y.wN.SELECT,name:"trainees",keyValues:c,multi:!0,height:"auto"},{title:"Start Date",placeholder:"Select Start Date",type:Y.wN.DATE,name:"start_date",validator:Y.wY.REQUIRED},{title:"End Date",placeholder:"Select End Date",type:Y.wN.DATE,name:"end_date"},{title:"Start Time",placeholder:"Select start Time",type:Y.wN.TIME,name:"start_time",validator:Y.wY.REQUIRED},{title:"End Time",placeholder:"Select End Time",type:Y.wN.TIME,name:"end_time"},{title:"Test Required at End of Training",type:Y.wN.RADIO,name:"test_required",validator:Y.wY.REQUIRED,keyValues:[{value:"yes",label:"Yes"},{value:"no",label:"No"}]},{title:"Feedback at End of Training",type:Y.wN.RADIO,name:"feedback_required",validator:Y.wY.REQUIRED,keyValues:[{value:"yes",label:"Yes"},{value:"no",label:"No"}]},"yes"===n.feedback_required&&{title:"Feedback Link",placeholder:"Enter Feedback Link",type:Y.wN.INPUT,name:"feedback_link",validator:Y.wY.REQUIRED}],[x,v]=(0,g.useState)(new Map),y=async()=>{const[e]=await d();console.log("fetchGroups------\x3e>>>",e);const t=e.map((e=>({value:e.name,key:e.id})));p((e=>[...e,...t]))};return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(oe.Ay,{display:"grid",gap:1,sx:{},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:(0,B.jsx)(le.A,{data:n,errors:x,onChange:e=>{console.log(e.target);const{name:t,value:a}=e.target;v((e=>(e.delete(t),e))),l((e=>({...e,[t]:a})))},schema:m})}),(0,B.jsx)(s.A,{alignItems:"flex-end",mb:1,children:(0,B.jsx)(Z.A,{onClick:async()=>{const e=(0,se.bG)(m,n);v(e),e.size||await i()},loading:o,children:"Create"})})]})},dn=()=>{const e=(0,I.zy)(),t=(0,I.Zp)(),a=e.state,[n,l]=(0,g.useState)([]),[o,r]=(0,g.useState)([]),[c,d]=(0,g.useState)(),[u,h]=(0,g.useState)(0),[p,m]=(0,g.useState)(!1),[x,v]=(0,g.useState)(!1),[y,w]=(0,g.useState)(0),[A,j]=(0,g.useState)({feedback_required:"no",test_required:"no"}),{list:f,create:S,update:b,remove:C}=rn(),{groupUser:N}=Bt(),{list:E}=ne();(0,g.useEffect)((()=>{_(),k()}),[y]);const k=async()=>{const[e]=await f();r(e)},_=async()=>{const[e,t]=await E(y+1),a=e.map((e=>({value:e.username,key:e.id})));l((e=>[...e,...a]))},T=[{id:1,title:"Training Name",render:e=>(0,B.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},children:e.training_name})},{id:2,title:"Training Type",render:e=>e.training_type},{id:22,title:"Trainer",render:e=>e.trainer},{id:23,title:"Start Date",render:e=>e.start_date},{id:24,title:"End Date",render:e=>e.end_date},{id:32,title:"Details",render:e=>(0,B.jsx)(Le,{icon:(0,B.jsx)(Oe.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})}];return(0,B.jsxs)("div",{className:"mx-4",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsx)(s.A,{sx:{flexDirection:"row",alignItems:"center"},children:"add"===x?(0,B.jsx)("h1",{className:"",children:"Plan Training"}):(0,B.jsxs)("h1",{className:"",children:["Plan Training",(0,B.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",o.length,")"]})]})}),"add"!==x&&(0,B.jsx)(Z.A,{onClick:()=>v("add"),children:"Add Training"})]}),"add"!==x?(0,B.jsx)(G,{columns:T,rows:o,rowsPerPage:5,loading:"fetch"===c,titleCellClasses:"c-gray fw-700",page:y,setPage:w,paginator:!0,serialize:!0,total:u,trainings:!0}):(0,B.jsx)(cn,{users:n,open:"add"===x,onClose:()=>{v(!1),m(!1)},data:A,edit:p,setData:j,onSubmit:async()=>{var e,n=[];if((null===(e=A.group)||void 0===e?void 0:e.length)>0){n=(await Promise.all(A.group.map((e=>N(e))))).map((e=>e.users.map((e=>e.id)))).flat()}const l={training_name:A.training_name,training_type:A.training_type,training_description:A.training_description,trainer:A.trainer,training_admin:A.training_admin,trainees:[...A.trainees,...n],start_date:A.start_date,end_date:A.end_date,start_time:A.start_time,end_time:A.end_time,feedback_link:A.feedback_link};d("fetch");let s=await S(l,a);console.log("planning createRes----",s),j({}),v(!1),"yes"===A.test_required?t("/test-upload",{state:{id:s.id,training_admin:l.training_admin,trainees:l.trainees}}):await k(),d(!1),m(!1)}})]})},un=e=>{let{open:t,onClose:a,data:n,setData:l,onSubmit:i,onSubmit2:o,loading:r,setSelectedQuestions:c,skills:d,users:u,testList:h}=e;const[p,m]=(0,g.useState)(new Map),[x,v]=(0,g.useState)(0),{getPerformanceSkill:y,getPerformanceId:w}=ln(),A=[0===x&&{title:"Operators",placeholder:"Select operator",type:Y.wN.SELECT,name:"operator",validator:Y.wY.REQUIRED,keyValues:u},0===x&&{title:"Skill",placeholder:"Select Skill",type:Y.wN.INPUT,name:"skill",disabled:!0},0===x&&{title:"Skill Level",placeholder:"Select skill level",type:Y.wN.INPUT,name:"skill_level",disabled:!0},1===x&&{title:"Date",type:Y.wN.DATE,name:"plan_date",validator:Y.wY.REQUIRED},1===x&&{title:"Plan",placeholder:"",type:Y.wN.INPUT,name:"plan",inputType:"number",validator:Y.wY.REQUIRED},1===x&&{title:"Actual",placeholder:"",type:Y.wN.INPUT,inputType:"number",name:"actual",validator:Y.wY.REQUIRED}];return(0,B.jsxs)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,B.jsx)("h3",{className:"opacity-80",children:"Add Performance"}),(0,B.jsx)(le.A,{data:n,errors:p,onChange:e=>{const{name:t,value:a}=e.target;m((e=>(e.delete(t),e))),l((e=>({...e,[t]:a}))),"operator"===t&&(console.log("operator id ",a),(async e=>{let t=e,a={operator:e},s=await y(a),i=await w(a);console.log("getPerformanceRecord-----\x3e>>>",i[0].id),s&&(3===s.skill_level?l({...n,skill_level:s.skill_level,skill:s.skill,operator:t,skill_id:i[0].id}):l({...n,skill_level:s.skill_level+1,skill:s.skill,operator:t,skill_id:i[0].id}))})(a))},schema:A}),(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,B.jsx)(Z.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:async()=>{if(0!==x)if(1!==x);else{const e=(0,se.bG)(A,n);if(m(e),e.size)return;await o()}else{const e=(0,se.bG)(A,n);if(m(e),e.size)return;v((e=>e+1))}},loading:r,children:"Next"})]})]})},hn=()=>{const e=(0,I.zy)(),[t,a]=((0,I.Zp)(),e.state,(0,g.useState)([])),[n,l]=(0,g.useState)(),[i,o]=(0,g.useState)(0),[r,c]=(0,g.useState)(!1),[d,u]=(0,g.useState)("testDetail"),[h,p]=(0,g.useState)(0),[m,x]=(0,g.useState)({operator:"",plan_date:(new Date).toISOString().split("T")[0]}),{putPerformanceRecord:v,performanceList:y,createTest:w,update:A,remove:j,performanceRecord:f,getPerformanceRecord:S,postPerformance:b}=ln(),{list:C}=ne(),{list:N}=Te(),[E,k]=(0,g.useState)(new Map),[_,T]=(0,g.useState)([]),[D,R]=(0,g.useState)([]),[O,P]=(0,g.useState)([]),[U,L]=(0,g.useState)([]),[F,H]=(0,g.useState)(""),[z,M]=(0,g.useState)((new Date).toISOString().split("T")[0]);(0,g.useEffect)((()=>{q(),Y()}),[]),(0,g.useEffect)((()=>{Q()}),[z]);const Q=async()=>{const e=await y(z);console.log("res performance list",e.list),P(e.list)},Y=async()=>{const[e,t]=await C(),n=e.filter((e=>e.is_operator)).map((e=>({value:e.username,key:e.id})));a((e=>[...e,...n]))},q=async()=>{const[e]=await N(h+1),t=e.results.map((e=>({value:e.skill_name,key:e.id})));T((e=>[...e,...t]))};return(0,B.jsxs)("div",{className:"mx-3 my-2",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between",children:[(0,B.jsx)(s.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,B.jsx)("h1",{className:"mt-4",children:"Performance"})}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:1},children:[(0,B.jsx)(s.A,{children:(0,B.jsx)(mt.A,{value:z,onChange:e=>M(e.target.value)})}),(0,B.jsx)(Z.A,{width:"fit-content",onClick:()=>u("addReport"),children:"Add Performance"})]})]}),(0,B.jsx)(G,{columns:[{id:1,title:"Operator Aadhar",render:e=>e.aadhar_number},{id:13,title:"Skill",render:e=>e.skill},{id:12,title:"Skill Level",render:e=>e.skill_level},{id:2,title:"Plan",render:e=>e.plan},{id:3,title:"Actual",render:e=>e.actual}],rows:O,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",serialize:!0,total:i}),(0,B.jsx)(un,{open:"addReport"===d,onClose:()=>{u(!1)},users:t,skills:_,testList:D,data:m,setData:x,onSubmit2:async()=>{var e=m.plan_date.replace(/-/g,"");const t={new_entry:{[e]:{plan:m.plan,actual:m.actual}}};await v(m.skill_id,t),x({}),u(!1),x({...m,plan_date:(new Date).toISOString().split("T")[0]}),Q()}})]})};var pn=a(5475),mn=a(8625);const xn={capsule:"capsule_capsule__e9nSK"};function gn(e){let{capsuleText:t}=e;var a;switch(t){case"PLAN":default:a="#fa7474";break;case"ISSUING":a="#ffd6b0";break;case"RUNNING":a="#e9efc5"}return(0,B.jsx)("div",{className:xn.capsule,style:{backgroundColor:a},children:t})}const vn=a.p+"static/media/action-icon.7ea474ec817bbcbc0bcf492a497a0fdd.svg";const yn=a.p+"static/media/cross-icon.85e1f4ddd2a1c7249092ed4d0985792a.svg",wn=e=>{let{open:t,onClose:a,data:n={},setData:l,onSubmit:s,handleAdd2:i,loading:o,tab:r}=e;const c=Object.entries(n).filter((e=>{let[t,a]=e;return"id"!==t&&null!=a}));return console.log("order details data",n),(0,B.jsx)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 py-4",width:"81vw",hideCloseIcon:yn,crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:(0,B.jsxs)("div",{className:"orderDetailsContainer",children:[(0,B.jsx)("div",{className:"leftPart",children:(0,B.jsx)("ul",{className:"orderDetailKeyList",children:c.map((e=>{let[t]=e;return(0,B.jsx)("li",{children:(a=t,a.charAt(0).toUpperCase()+a.slice(1))},t);var a}))})}),(0,B.jsx)("div",{className:"rightPart",children:(0,B.jsx)("ul",{className:"orderDetailValueList",children:c.map((e=>{let[t,a]=e;return(0,B.jsx)("li",{children:a},t)}))})})]})})},An=()=>{const[e,t]=(0,g.useState)(!1),[a,n]=(0,g.useState)(null),{token:l}=(0,y.d4)((e=>e[J.X.AUTH])),s={Authorization:"Bearer ".concat(l),"Content-Type":W.yw.APPLICATION_JSON},i=new W.Ay,o=(0,g.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,l=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0,d=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,p=arguments.length>8?arguments[8]:void 0,m=arguments.length>9?arguments[9]:void 0,x=arguments.length>10?arguments[10]:void 0,g=arguments.length>11?arguments[11]:void 0,v="".concat(V.H.ORDERS,"/all/?page=").concat(e);l||o||r||c||d||u?v+="&sort_by=":!1!==l&&!1!==o&&!1!==r&&!1!==c&&!1!==d&&!1!==u||(v+="&sort_by="),h.forEach((e=>{switch(e){case"fg_code":switch(l){case!1:console.log("Code is false"),v+=v.endsWith("&sort_by=")?"-fg_code":",-fg_code";break;case!0:console.log("Code is true"),v+=v.endsWith("&sort_by=")?"fg_code":",fg_code";break;default:console.log("Code is an unexpected value")}break;case"order_type":switch(o){case!1:console.log("Order type is false"),v+=v.endsWith("&sort_by=")?"-order_type":",-order_type";break;case!0:console.log("Order type is true"),v+=v.endsWith("&sort_by=")?"order_type":",order_type";break;default:console.log("Order type is an unexpected value")}break;case"status":switch(r){case!1:console.log("Status is false"),v+=v.endsWith("&sort_by=")?"-status":",-status";break;case!0:console.log("Status is true"),v+=v.endsWith("&sort_by=")?"status":",status";break;default:console.log("Status is an unexpected value")}break;case"order_id":switch(c){case!1:console.log("Order ID is false"),v+=v.endsWith("&sort_by=")?"-order_id":",-order_id";break;case!0:console.log("Order ID is true"),v+=v.endsWith("&sort_by=")?"order_id":",order_id";break;default:console.log("Order ID is an unexpected value")}break;case"name":switch(d){case!1:console.log("Name is false"),v+=v.endsWith("&sort_by=")?"-name":",-name";break;case!0:console.log("Name is true"),v+=v.endsWith("&sort_by=")?"name":",name";break;default:console.log("Name is an unexpected value")}break;case"quantity":switch(u){case!1:console.log("Quantity is false"),v+=v.endsWith("&sort_by=")?"-quantity":",-quantity";break;case!0:console.log("Quantity is true"),v+=v.endsWith("&sort_by=")?"quantity":",quantity";break;default:console.log("Quantity is an unexpected value")}break;default:console.log("Unknown column ID:",e)}})),p&&(v+="&order_id=",v+=p),m&&(v+="&fg_code=",v+=m),x&&(v+="&type=",v+=x),g&&(v+="&status=",v+=g),t(!0),n(null);try{return(await i.get(v,{},s)).data}catch(a){n(a.message||"Error in fetchOrders:")}finally{t(!1)}}),[i,s]),r=(0,g.useCallback)((async()=>{const e="".concat(V.H.ORDERS,"/order-matrix-view/");t(!0),n(null);try{return(await i.get(e,{},s)).data}catch(a){n(a.message||"Error in fetchOrders:")}finally{t(!1)}}),[i,s]),c=(0,g.useCallback)((async e=>{const n="".concat(V.H.ORDERS,"/order-details/").concat(e,"/");try{t(!0);return(await i.get(n,{},s)).data}catch(a){console.error(a.message||"Error in fetching orders by id")}finally{t(!1)}}),[i,s]),d=(0,g.useCallback)((async e=>{const n="".concat(V.H.ORDERS,"/material-on-hold/").concat(e,"/");try{t(!0);return(await i.get(n,{},s)).data}catch(a){console.error(a.message||"Error in getting order on hold quantity")}finally{t(!1)}}),[i,s]),u=(0,g.useCallback)((async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l="".concat(V.H.ORDERS,"/bom-submit/").concat(e,"/");try{t(!0);return(await i.post(l,n,s)).data}catch(a){console.error(a.message||"Error in submitting BOM")}finally{t(!1)}}),[i,s]),h=(0,g.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const l="".concat(V.H.ORDERS,"/material-failure-reasons/"),o={reason_name:e,resolution_date_required:n};try{t(!0);return(await i.post(l,o,s)).data}catch(a){console.error(a.message||"Error in getting Failure Reasons")}finally{t(!1)}}),[i,s]);return{loading:e,error:a,fetchOrders:o,fetchOrdersMatrixView:r,fetchOrdersById:c,getOrderHoldQuantity:d,submitBOM:u,postFailureReason:h}},jn=()=>{const[e,t]=(0,g.useState)(!1),[a,n]=(0,g.useState)(null),{token:l}=(0,y.d4)((e=>e[J.X.AUTH])),s={Authorization:"Bearer ".concat(l),"Content-Type":W.yw.APPLICATION_JSON},i=new W.Ay,o=(0,g.useCallback)((async e=>{const n="".concat(V.H.ORDERS,"/materials-required/").concat(e,"/");try{t(!0);return(await i.get(n,{},s)).data}catch(a){console.error(a.message||"Error in fetching orders by id")}finally{t(!1)}}),[i,s]),r=(0,g.useCallback)((async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l="".concat(V.H.ORDERS,"/material-on-hold/").concat(e,"/");try{t(!0);return(await i.post(l,n,s)).data}catch(a){console.error(a.message||"Error in setting order on hold quantity")}finally{t(!1)}}),[i,s]),c=(0,g.useCallback)((async(e,n)=>{const l="".concat(V.H.ORDERS,"/update-state/").concat(e,"/"),o={state:n};try{t(!0);return(await i.put(l,o,s)).data}catch(a){console.error(a.message||"Error in submitting BOM")}finally{t(!1)}}),[i,s]),d=(0,g.useCallback)((async(e,n,l,o,r,c)=>{const d="".concat(V.H.ORDERS,"/label-generator/"),u={material_code:e,grn_number:n,grn_date:l,unit:o,qty1:r,qty2:c};try{t(!0);return(await i.post(d,u,s)).data}catch(a){console.error(a.message||"Error in submitting BOM")}finally{t(!1)}}),[i,s]),u=(0,g.useCallback)((async()=>{const e="".concat(V.H.ORDERS,"/material-failure-reasons/");try{t(!0);return(await i.get(e,{},s)).data}catch(a){console.error(a.message||"Error in getting Failure Reasons")}finally{t(!1)}}),[i,s]),h=(0,g.useCallback)((async function(e,n,l){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"n/a",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"Fake comment";const d="".concat(V.H.ORDERS,"/material-failure-entry/").concat(e,"/"),u={material_code:n,failure_reason_id:l,comments:c,resolution_date:r,assigned_user:o};try{t(!0);return(await i.post(d,u,s)).data}catch(a){console.error(a.message||"Error in submitting Failure Reason")}finally{t(!1)}}),[i,s]),p=(0,g.useCallback)((async(e,n)=>{const l="".concat(V.H.AUTH,"/supervisor-authentication/"),o={username:e,password:n};try{t(!0);return(await i.post(l,o,s)).data}catch(a){console.error(a.message||"Error in supervisor login")}finally{t(!1)}}),[i,s]),m=(0,g.useCallback)((async(e,n,l,o,r,c)=>{const d="".concat(V.H.ORDERS,"/stock-transfer/"),u={material_code1:e,material_code2:n,quantity:l,grn_number:o,unit:r,grn_date:c};try{t(!0);return(await i.post(d,u,s)).data}catch(a){console.error(a.message||"Error in Stock Transfer")}finally{t(!1)}}),[i,s]),x=(0,g.useCallback)((async e=>{const n="".concat(V.H.ORDERS,"/kitting-qr/").concat(e,"/");try{t(!0);return(await i.get(n,{},s)).data}catch(a){console.error(a.message||"Error in getting Kitting Label")}finally{t(!1)}}),[i,s]),v=(0,g.useCallback)((async e=>{const n={labelData:e};try{t(!0);return(await i.post_local("print-labels/",n,s)).data}catch(a){console.error(a.message||"Error in Printing Labels")}finally{t(!1)}}),[i,s]);return{loading:e,error:a,fetchMaterialsRequired:o,setOrderHoldQuantity:r,updateOrderState:c,generateLabels:d,getFailureReasons:u,submitFailureReason:h,supervisorLogin:p,stockTransfer:m,getKittingLabel:x,printLabels:v}},fn=e=>{let{setLocalUI:t,data:a={},noStepFn:n=(()=>{}),nextStepFn:l=(()=>{})}=e;const{fetchOrdersById:s,error:i,loading:o}=An();console.log("FulfilledOrderActionModal data",a);const[r,c]=(0,g.useState)(null);return(0,g.useEffect)((()=>{a&&a.orderId&&s(a.orderId).then((e=>{console.log("setSelectedOrderDetails data",e),c(e)}))}),[a]),(0,B.jsxs)("div",{className:"action_modal__container",children:[(0,B.jsx)("div",{children:(0,B.jsx)(La.A,{sx:{fontSize:"6rem",color:"#86D56A"}})}),(0,B.jsxs)("p",{children:["Material Planning for Order ",(0,B.jsx)("strong",{children:null===r||void 0===r?void 0:r.name})," is successfully done."]}),(0,B.jsxs)("p",{children:["Order ",(0,B.jsx)("strong",{children:null===r||void 0===r?void 0:r.order_id})," is in Processing Stage now."]}),(0,B.jsxs)("p",{children:["Do you want to move it to ",(0,B.jsx)("em",{children:"Running Stage"}),"?"]}),(0,B.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,B.jsx)(Z.A,{onClick:n,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"No"}),(0,B.jsx)(Z.A,{onClick:l,color:"green",width:"8rem",height:"2.5rem",children:"Yes"})]})]})},Sn=e=>{let{setLocalUI:t,data:a={},noStepFn:n=(()=>{}),nextStepFn:l=(()=>{}),isPartialFulfilledOrderActionModalEditBtnEnabled:s=!1}=e;const{fetchOrdersById:i,error:o,loading:r}=An();console.log("PartialFulfilledOrderActionModal data",a);const[c,d]=(0,g.useState)(null);return(0,g.useEffect)((()=>{a&&a.orderId&&i(a.orderId).then((e=>{console.log("setSelectedOrderDetails data",e),d(e)}))}),[a]),(0,B.jsxs)("div",{className:"action_modal__container",children:[(0,B.jsx)("div",{children:(0,B.jsx)(La.A,{sx:{fontSize:"6rem",color:"#86D56A"}})}),(0,B.jsxs)("p",{children:["Do you want to Edit",s&&(0,B.jsx)("span",{children:" or Run"})]}),(0,B.jsxs)("span",{children:["Order ",null===c||void 0===c?void 0:c.order_id," ",(0,B.jsx)("strong",{children:null===c||void 0===c?void 0:c.name})," "]}),(0,B.jsx)("br",{}),(0,B.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,B.jsx)(Z.A,{onClick:n,white:!!s,color:s?"":"green",width:"8rem",height:"2.5rem",bordered:!!s,customStyle:s?{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"}:{},children:"Edit"}),s&&(0,B.jsx)(Z.A,{onClick:l,color:"green",width:"8rem",height:"2.5rem",children:"Run"})]})]})},bn=[{color:"var(--primary-color)",title:"Plan",value:38},{color:"var(--secondary-color)",title:"Issuing",value:14},{color:"var(--tertiary-color)",title:"Running",value:2}];const Cn=e=>{let{color:t,title:a,value:n}=e;return(0,B.jsxs)("div",{className:"overview-metrics-box",style:{backgroundColor:t},children:[(0,B.jsx)("p",{children:a}),(0,B.jsx)("p",{children:n})]})},Nn=function(){const e=(0,I.Zp)(),[t]=(0,pn.ok)(),[a,n]=(0,g.useState)(!0),[l,s]=(0,g.useState)({pageLoading:!0,isFulfilledOrderActionModalOpen:!1,isPartialFulfilledOrderActionModalOpen:!1,selectedOrderId:null,selectedOrderOrderId:null,selectedOrderName:null,selectedOrderStatus:null,userActionStatus:null,selectedOrderType:null,selectedHoldingOrderMaterialsQty:null,isPartialFulfilledOrderActionModalEditBtnEnabled:null}),[i,r]=(0,g.useState)([]),[c,d]=(0,g.useState)([]),{fetchOrders:u,fetchOrdersMatrixView:h,fetchOrdersById:p,getOrderHoldQuantity:m,submitBOM:x,error:v,loading:y}=An(),{updateOrderState:w}=jn(),[A,j]=(0,g.useState)(0),[f,S]=(0,g.useState)(!1),[b,C]=(0,g.useState)({}),[N,E]=(0,g.useState)(1),[k,_]=(0,g.useState)(null),[T,D]=(0,g.useState)(null),[R,O]=(0,g.useState)(5),[P,U]=(0,g.useState)(null),[L,F]=(0,g.useState)(null),[H,M]=(0,g.useState)(!1),[Q,q]=(0,g.useState)({specification:{},location:{}}),[W,V]=(0,g.useState)(bn),[J,X]=(0,g.useState)(null),[$,ee]=(0,g.useState)(null),[te,ae]=(0,g.useState)(null),[ne,le]=(0,g.useState)(null),[se,ie]=(0,g.useState)(!0),[oe,re]=(0,g.useState)(null),[ce,de]=(0,g.useState)(null),[ue,he]=(0,g.useState)(["order_id"]),[pe,me]=(0,g.useState)(null),[xe,ge]=(0,g.useState)(null),[ve,ye]=(0,g.useState)(null),[we,Ae]=(0,g.useState)(null);(0,g.useEffect)((()=>{u(N,$,te,ne,se,oe,ce,ue,pe,xe,ve,we).then((e=>{d(e.results),_(e.count);const t=Math.ceil(e.count/R);D(t),ke(N),e.previous?U(!0):U(!1),e.next?F(!0):F(!1)}))}),[N,$,te,ne,se,oe,ce,pe,xe,ve,we]);const je=t=>{switch(t.status){case Y.ht.PLAN:e("/material-planner-plan?orderId=".concat(t.id,"&orderStatus=").concat(t.status,"&orderType=").concat(t.order_type,"&orderOrderId=").concat(t.order_id));break;case Y.ht.ISSUING:console.log("orderData.order_type",t.order_type),s((e=>({...e,isPartialFulfilledOrderActionModalOpen:!0,selectedOrderOrderId:t.order_id,selectedOrderStatus:t.status,selectedOrderId:t.id,selectedOrderType:t.order_type,isPartialFulfilledOrderActionModalEditBtnEnabled:"ASSEMBLY"!==t.order_type})));break;case Y.ht.RUNNING:s((e=>({...e,selectedOrderOrderId:t.order_id,selectedOrderStatus:t.status,selectedOrderId:t.id,selectedOrderType:t.order_type,isPartialFulfilledOrderActionModalEditBtnEnabled:!1}))),Ne(t.id,t.status,t.order_type,t.order_id)}},fe=t.get("orderId"),Se=t.get("status"),be=t.get("orderStatus"),Ce=()=>{h().then((e=>{const t=W.map((t=>({...t,value:e[t.title.toLowerCase()]})));V(t),X((new Date).toLocaleString())}))};(0,g.useEffect)((()=>{Ce();const e=t.get("orderId"),a=t.get("status"),n=t.get("orderStatus");e&&a&&n?(s((t=>{let l={...t};return a.toLowerCase()===Y.eN.SCANNED&&(console.log("paramStatus.toLowerCase() === USER_ACTIONS.SCANNED"),l.isFulfilledOrderActionModalOpen=!0,l.selectedOrderId=e,l.selectedOrderStatus=n,l.userActionStatus=a),l.pageLoading=!1,l})),p(e).then((e=>{if(console.log("fetchOrdersById",l.selectedOrderId,"data",e),e){const t=e.name||"",a=e.order_id||"";s((e=>({...e,selectedOrderOrderId:a,selectedOrderName:t})))}}))):s((e=>({...e,pageLoading:!1})))}),[fe,Se,be]);const Ne=(t,a,n,l)=>{e("/material-planner-plan/scanning?orderId=".concat(t,"&orderStatus=").concat(a,"&orderType=").concat(n,"&orderOrderId=").concat(l))},[Ee,ke]=(0,g.useState)(N);return l.pageLoading?(0,B.jsx)("div",{className:"mx-3 my-2",style:{display:"grid",placeItems:"center"},children:(0,B.jsx)(z.A,{green:!0})}):(0,B.jsxs)("div",{className:"mx-3 my-2 material-planner-layout",children:[(0,B.jsxs)("div",{className:"material-planner-layout-header",children:[(0,B.jsx)("div",{className:"overview-heading",children:"Overview"}),(0,B.jsxs)("div",{className:"overview-metrics-container",children:[W.map((e=>(0,B.jsx)(Cn,{color:e.color,title:e.title,value:e.value}))),(0,B.jsxs)("div",{className:"overview-last-refresh",children:[(0,B.jsxs)("div",{className:"leftPart",children:[(0,B.jsx)("div",{children:"Last refresh"}),(0,B.jsx)("div",{children:J})]}),(0,B.jsx)("div",{className:"rightPart",children:(0,B.jsx)(o.A,{onClick:Ce,children:(0,B.jsx)(mn.A,{})})})]})]})]}),(0,B.jsxs)("div",{className:"material-planner-layout-body",children:[(0,B.jsx)(G,{edit:H,columns:[{id:"order_id",title:"Order ID ".concat(!0===se?"\u2191":!1===se?"\u2193":"\u2191\u2193"),render:e=>(0,B.jsx)("span",{onClick:()=>(async e=>{S(!0);try{const t=await p(e);C(t)}catch(xt){console.error("Error in fetchOrderDetails:",xt)}})(e.id),style:{cursor:"pointer",color:"blue"},children:e.order_id})},{id:"name",title:"Name ".concat(!0===oe?"\u2191":!1===oe?"\u2193":"\u2191\u2193"),render:e=>e.name},{id:"quantity",title:"Qty",title:"Qty ".concat(!0===ce?"\u2191":!1===ce?"\u2193":"\u2191\u2193"),render:e=>e.quantity},{id:"fg_code",title:"Code ".concat(!0===$?"\u2191":!1===$?"\u2193":"\u2191\u2193"),render:e=>e.fg_code},{id:5,title:"Description",render:e=>e.fg_description},{id:"order_type",title:"Order type ".concat(!0===te?"\u2191":!1===te?"\u2193":"\u2191\u2193"),render:e=>e.order_type},{id:"status",title:"Status ".concat(!0===ne?"\u2191":!1===ne?"\u2193":"\u2191\u2193"),render:e=>(0,B.jsx)(gn,{capsuleText:e.status})},{id:9,title:"Action",render:e=>(0,B.jsx)("img",{src:vn,style:{width:"2.78vw",height:"2.78vw",cursor:"pointer"},alt:"Action Icon",onClick:()=>je(e)})}],onTableHeadCellClick:e=>{(e=>{switch(e){case"fg_code":ee((t=>{switch(t){case null:return console.log("a is null"),he((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),he((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("code case");break;case"order_type":ae((t=>{switch(t){case null:return console.log("a is null"),he((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),he((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("order type case");break;case"status":le((t=>{switch(t){case null:return console.log("a is null"),he((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),he((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("status case");break;case"order_id":ie((t=>{switch(t){case null:return console.log("a is null"),he((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),he((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("order id case");break;case"name":re((t=>{switch(t){case null:return console.log("a is null"),he((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),he((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("order id case");break;case"quantity":de((t=>{switch(t){case null:return console.log("a is null"),he((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),he((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("order id case");break;default:console.log(e,"clicked")}})(e)},rows:c,rowsPerPage:R,loading:y,titleCellClasses:"c-gray fw-700",page:N-1,serialize:!0,total:k,handleOrderIdFilterInput:e=>{(e=>{console.log("handleOrderIdFilterInput",e),me(e)})(e)},handleFgCodeFilterInput:e=>{(e=>{console.log("handleFgCodeFilterInput",e),ge(e)})(e)},handleOrderTypeFilterInput:e=>{(e=>{console.log("handleOrderTypeFilterInput",e),ye(e)})(e)},handleOrderStatusFilterInput:e=>{(e=>{console.log("handleOrderStatusFilterInput",e),Ae(e)})(e)}}),(0,B.jsxs)("div",{className:"pagination-controls",children:[(0,B.jsx)(Z.A,{onClick:()=>{E(N-1),console.log("prev page")},white:!0,width:"auto",height:"auto",bordered:!0,disabled:!P,customStyle:{border:"1px solid #3E3E3E",backgroundColor:P?"#FFFFFF":"#CCCCCC",color:P?"#000000":"#999999",cursor:P?"pointer":"not-allowed"},children:"Prev"}),(0,B.jsxs)("div",{className:"page-details",children:[(0,B.jsx)("div",{children:"Page"})," ",(0,B.jsx)("input",{type:"number",value:Ee,onChange:e=>{const t=e.target.value;/^\d*$/.test(t)&&ke(t)},onBlur:()=>{const e=Math.ceil(Ee);!isNaN(e)&&e>0&&e<=T?E(e):ke(N)},className:"page-number-input"}),(0,B.jsx)("div",{children:"of "}),(0,B.jsx)("div",{children:(0,B.jsx)("strong",{children:T})})]}),(0,B.jsx)(Z.A,{onClick:()=>{E(N+1),console.log("next page")},color:"green",width:"auto",height:"auto",disabled:!L,customStyle:{backgroundColor:L?"#27ae60":"#CCCCCC",color:L?"#FFFFFF":"#999999",cursor:L?"pointer":"not-allowed"},children:"Next"})]})]}),f&&(0,B.jsx)(wn,{open:f,onClose:()=>S(!1),data:b}),l.isFulfilledOrderActionModalOpen&&(0,B.jsx)(K.A,{open:l.isFulfilledOrderActionModalOpen,onClose:()=>s({isFulfilledOrderActionModalOpen:!1}),width:"80vw",top:"10vh",hideCloseIcon:yn,wrapperClasses:"px-5 py-4",crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:(0,B.jsx)(fn,{data:{orderId:l.selectedOrderId,status:l.selectedOrderStatus},noStepFn:()=>{const t=[...i],a=i.findIndex((e=>e.order_id===l.selectedOrderId));-1!==a&&l.userActionStatus===Y.eN.SCANNED&&(t[a].status=Y.ht.ISSUING),r(t),s({...l,isFulfilledOrderActionModalOpen:!1}),e("/material-planner/")},nextStepFn:()=>{const a=t.get("orderId");m(l.selectedOrderId).then((t=>{s((e=>({...e,selectedHoldingOrderMaterialsQty:t}))),console.log("getOrderHoldQuantity data",t),console.log("selectedHoldingOrderMaterialsQty",l.selectedHoldingOrderMaterialsQty),x(l.selectedOrderId,{material_issue:t}).then((t=>{console.log("submit BOM data",t),w(a,Y.ht.RUNNING).then((e=>{Ce()}));const n=c.map((e=>({...e}))),i=c.findIndex((e=>e.id===a));-1!==i&&(n[i].status=Y.ht.RUNNING),d(n),s({...l,isFulfilledOrderActionModalOpen:!1}),e("/material-planner/")}))}))}})}),l.isPartialFulfilledOrderActionModalOpen&&(0,B.jsx)(K.A,{open:l.isPartialFulfilledOrderActionModalOpen,onClose:()=>s({isPartialFulfilledOrderActionModalOpen:!1}),width:"50vw",top:"20vh",hideCloseIcon:yn,wrapperClasses:"px-5 py-4",crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:(0,B.jsx)(Sn,{data:{orderId:l.selectedOrderId,status:l.selectedOrderStatus},noStepFn:()=>{s({...l,isPartialFulfilledOrderActionModalOpen:!1}),e("/material-planner/"),e("/material-planner-plan/scanning?orderId=".concat(l.selectedOrderId,"&orderStatus=").concat(l.selectedOrderStatus,"&orderType=").concat(l.selectedOrderType,"&orderOrderId=").concat(l.selectedOrderOrderId))},nextStepFn:()=>{const e=l.selectedOrderId;m(l.selectedOrderId).then((t=>{s((e=>({...e,selectedHoldingOrderMaterialsQty:t}))),console.log("getOrderHoldQuantity data",t),console.log("selectedHoldingOrderMaterialsQty",l.selectedHoldingOrderMaterialsQty),x(l.selectedOrderId,{material_issue:t}).then((t=>{console.log("submit BOM data",t),w(e,Y.ht.RUNNING).then((e=>{Ce()}));const a=c.map((e=>({...e}))),n=c.findIndex((t=>t.id===e));-1!==n&&(a[n].status=Y.ht.RUNNING),d(a),s({...l,isPartialFulfilledOrderActionModalOpen:!1}),Ce()}))}))},isPartialFulfilledOrderActionModalEditBtnEnabled:l.isPartialFulfilledOrderActionModalEditBtnEnabled})})]})},En=e=>{let{open:t,onClose:a,failureReasonText:n="",isResolutionDateRequired:l=null,nextStepFn:s=(()=>{}),setData:i,onSubmit:o,handleAdd2:r,loading:c,tab:d}=e;return console.log("FailureReasonSuccessModal isResolutionDateRequired",l),(0,B.jsx)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 py-4",width:"81vw",hideCloseIcon:yn,crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:(0,B.jsxs)("div",{className:"failure-submit-success-message",children:[(0,B.jsx)("p",{children:(0,B.jsx)("strong",{children:"Success!"})}),(0,B.jsxs)("p",{children:["Failure Reason ",(0,B.jsx)("strong",{children:n})," with Resolution Date required"," ",(0,B.jsx)("strong",{children:l?"true":"false"})," is submitted successfully."]}),(0,B.jsx)(Z.A,{onClick:s,color:"blue",customStyle:{borderRadius:"0.5vw",border:"1px solid grey",padding:"0.7vw",marginBottom:"1rem",marginTop:"1rem",fontSize:"1rem"},children:"OK"})]})})},kn=e=>{let{open:t,onClose:a,failureReasonText:n="",setFailureReasonText:l=(()=>{}),isResolutionDateRequired:s=null,setIsResolutionDateRequired:i=(()=>{}),handleSubmit:o=(()=>{})}=e;return(0,B.jsx)(K.A,{open:t,onClose:a,wrapperClasses:"px-5 py-4",width:"81vw",hideCloseIcon:yn,crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:(0,B.jsxs)("div",{className:"failure-submit-success-message",children:[(0,B.jsx)("p",{children:(0,B.jsx)("strong",{children:"Add Issue"})}),(0,B.jsxs)("form",{action:"",method:"post",className:"failure-reason-form",children:[(0,B.jsx)("div",{className:"failureReason-input-text-container",children:(0,B.jsxs)("label",{htmlFor:"failureReason",children:[(0,B.jsx)("div",{className:"label-text",children:"Reason name"}),(0,B.jsx)("input",{type:"text",name:"failureReason",placeholder:"Write failure reason here",value:n,onChange:e=>{console.log("Updated value: ".concat(e.target.value)),l(e.target.value)},style:{borderRadius:"0.5vw",border:"1px solid grey",padding:"0.75vw",marginBottom:"1rem",fontSize:"1rem"}})]})}),(0,B.jsxs)("div",{className:"checkbox-items-container",children:[(0,B.jsx)("div",{className:"resolution-date-label",children:"Resolution Date required?"}),(0,B.jsx)("div",{children:(0,B.jsxs)("label",{className:"checkbox-item-container",children:["Yes",(0,B.jsx)("input",{type:"checkbox",name:"isResolutionDateRequiredYes",checked:!0===s,onChange:e=>{console.log("Yes checkbox updated: ".concat(e.target.checked)),i(!!e.target.checked||!1===s&&null)}})]})}),(0,B.jsx)("div",{children:(0,B.jsxs)("label",{className:"checkbox-item-container",children:["No",(0,B.jsx)("input",{type:"checkbox",name:"isResolutionDateRequiredNo",checked:!1===s,onChange:e=>{console.log("No checkbox updated: ".concat(e.target.checked)),i(!e.target.checked&&(!0!==s||null))}})]})})]}),(0,B.jsx)("div",{className:"submit-btn-container",children:(0,B.jsx)(Z.A,{onClick:o,color:"green",customStyle:{borderRadius:"0.5vw",border:"1px solid grey",padding:"0.7vw",marginBottom:"1rem",fontSize:"1rem"},disabled:!n||null===s,children:"Submit"})})]})]})})};const In=function(){const{postFailureReason:e,error:t,loading:a}=An(),{getFailureReasons:n}=jn(),[l,s]=(0,g.useState)(null),[i,o]=(0,g.useState)(null),[r,c]=(0,g.useState)(!1),[d,u]=(0,g.useState)(null),[h,p]=(0,g.useState)(null),[m,x]=(0,g.useState)(!1);return(0,g.useEffect)((()=>{n().then((e=>{s(e),o(Object.values(e))}))}),[m]),(0,B.jsxs)("div",{className:"mx-3 my-2 mp-instruction-layout",children:[(0,B.jsx)("div",{className:"mp-instruction-header",children:(0,B.jsxs)("p",{className:"issues-header",children:[(0,B.jsx)("strong",{children:"Issues:"}),(0,B.jsx)("div",{className:"add-issue-btn",children:!r&&(0,B.jsx)(Z.A,{onClick:()=>{c(!0)},color:"gray",customStyle:{borderRadius:"0.25rem",border:"1px solid #D9D9D9",padding:"0.7vw",fontSize:"1rem",color:"black"},children:"+ ADD ISSUE"})})]})}),(0,B.jsx)("div",{className:"material-planner-layout-body",children:(0,B.jsx)(G,{columns:[{id:"reason_name",title:"Reason name",render:e=>(0,B.jsx)("span",{children:e.name})},{id:"resolution_date_required",title:"Resolution Date Required",render:e=>(0,B.jsx)("span",{children:e.resolution_date_required?"Yes":"No"})}],rows:i,titleCellClasses:"c-gray fw-700"})}),r&&(0,B.jsx)(kn,{open:r,onClose:()=>{c(!1)},failureReasonText:d,setFailureReasonText:u,isResolutionDateRequired:h,setIsResolutionDateRequired:p,handleSubmit:()=>{e(d,h).then((e=>{console.log("postFailureReason data",e),e&&"OK"===e.message&&(x(!0),c(!1))})).catch((e=>{console.error("postFailureReason error",e)}))}}),m&&(0,B.jsx)(En,{open:m,onClose:()=>{x(!1),u("")},failureReasonText:d,isResolutionDateRequired:h,nextStepFn:()=>{x(!1)}})]})};var _n=a(1707);const Tn=e=>{let{label:t,path:a,isLast:n}=e;return n?(0,B.jsx)("span",{className:"breadcrumb-item current",children:t}):(0,B.jsx)(pn.N_,{to:a,className:"breadcrumb-item",children:t})},Dn=()=>{const e=(0,I.zy)(),[t,a]=(0,g.useState)([]),[n]=(0,pn.ok)();return(0,g.useEffect)((()=>{if(e){const t=e.pathname.split("/"),l=[];t.forEach(((e,t)=>{switch(e){case"material-planner-plan":l.push({label:"Home",path:"/material-planner"}),l.push({label:"Order ID",path:""});break;case"plan":l.push({label:"Plan",path:"/material-planner/plan"})}})),l.push({label:n.get("orderOrderId"),path:""}),a(l)}}),[e]),(0,B.jsx)("nav",{"aria-label":"Breadcrumb",children:(0,B.jsx)("ol",{className:"breadcrumb-container",children:t.map(((e,a)=>(0,B.jsxs)("li",{children:[(0,B.jsx)(Tn,{label:e.label,path:e.path,isLast:a===t.length-1}),a<t.length-1&&(0,B.jsx)("span",{className:"breadcrumb-separator",children:(0,B.jsx)(_n.A,{})})]},e.path)))})})};const Rn=function(){const e=(0,I.Zp)(),[t]=(0,pn.ok)(),[a,n]=(0,g.useState)([]),{fetchBOM:l,error:s,loading:i}=(()=>{const[e,t]=(0,g.useState)(!1),[a,n]=(0,g.useState)(null),{token:l}=(0,y.d4)((e=>e[J.X.AUTH])),s={Authorization:"Bearer ".concat(l),"Content-Type":W.yw.APPLICATION_JSON},i=new W.Ay,o=(0,g.useCallback)((async e=>{const n="".concat(V.H.ORDERS,"/order-bom/").concat(e,"/");try{return t(!0),(await i.get(n,{},s)).data}catch(a){console.error(a.message||"Error in fetching BOM by id")}finally{t(!1)}}),[i,s]);return{loading:e,error:a,fetchBOM:o}})(),[o,r]=(0,g.useState)(),[c,d]=(0,g.useState)(0),[u,h]=(0,g.useState)(0),[p,m]=(0,g.useState)(!1),[x,v]=(0,g.useState)({});return(0,g.useEffect)((()=>{t.get("orderId")&&l(t.get("orderId")).then((e=>n(e.items)))}),[]),(0,B.jsxs)("div",{className:"mx-3 my-2 mp-instruction-layout",children:[(0,B.jsxs)("div",{className:"mp-instruction-header",children:[(0,B.jsx)(Dn,{}),(0,B.jsx)("p",{className:"instruction-text",children:"Please follow the instruction to complete the Material Planning for this Order ID"})]}),(0,B.jsx)("div",{className:"instruction-layout-body",children:(0,B.jsx)(G,{edit:p,columns:[{id:1,title:"Material Code",render:e=>e.material_code},{id:2,title:"Material Name",render:e=>e.material_name},{id:3,title:"Qty",render:e=>e.quantity}],rows:a,rowsPerPage:5,loading:"fetch"===o,titleCellClasses:"c-gray fw-700",page:u,setPage:h,paginator:!0,serialize:!0,total:c})}),(0,B.jsxs)("div",{className:"material-planner-layout-footer",children:[(0,B.jsx)(Z.A,{onClick:()=>e("/material-planner"),white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"Back"}),(0,B.jsx)(Z.A,{onClick:async()=>{console.log("submit");e("/material-planner-plan/scanning?orderId=".concat(t.get("orderId"),"&orderStatus=").concat(t.get("orderStatus"),"&orderType=").concat(t.get("orderType"),"&orderOrderId=").concat(t.get("orderOrderId")))},color:"green",width:"8rem",height:"2.5rem",children:"Plan"})]})]})};a(3245);const On=e=>{let{kitting:t=!1,payload:a}=e;const[n,l]=(0,g.useState)(!1),[s,i]=(0,g.useState)(null);(0,g.useEffect)((()=>{o(),console.log("payload",a)}),[]);const o=async()=>{try{const e=(await navigator.usb.getDevices()).filter((e=>4611===e.vendorId));if(e.length>0){const t=e[0];console.log("Auto-connecting to device:",t),await t.open(),null===t.configuration&&await t.selectConfiguration(1),await t.claimInterface(0),i(t),l(!0),console.log("Auto-connected to printer:",t)}else _.oR.error("No previously printer devices found."),console.log("No previously connected devices found.")}catch(xt){console.error("Error during auto-connect:",xt),_.oR.error("Error during auto-connect:",xt)}},r=async e=>{if(s)try{const t=(new TextEncoder).encode(e);await s.transferOut(1,t),console.log("Command sent:",e)}catch(xt){_.oR.error("Error sending command to printer:",xt),console.error("Error sending command to printer:",xt)}else console.log("No printer connected.")};return(0,B.jsx)("div",{children:n?(0,B.jsxs)("div",{children:[(0,B.jsxs)("p",{children:["Printer connected: ",(null===s||void 0===s?void 0:s.productName)||"TSC Printer"]}),(0,B.jsx)(Z.A,{color:"light_green",onClick:()=>{if(!0===t){const e='\n            SIZE 3:2\n            GAP 0,0\n            DIRECTION 1\n            CLS\n            FONT 0,0,1,0,0,""\n            TEXT 110,30,"4",0,1,1,"Dhoot Transmission"\n            TEXT 70,100,"2",0,1,1,"FG CODE : '.concat(a[0].Fg_Code,'"\n            TEXT 70,150,"2",0,1,1,"ORDER No : ').concat(a[0].Order_no,'"\n            TEXT 70,200,"2",0,1,1,"QUANTITY: ').concat(a[0].Quantity,'"\n            QRCODE 420,200,M,4,A,0,M2,"').concat(a[0].QR_DATA,'"\n            PRINT 1,1\n            ');r(e),console.log("kitting Payload".kitting)}else a.map((e=>{const t='\n                SIZE 3:2\n                GAP 0,0\n                DIRECTION 1\n                CLS\n                FONT 0,0,1,0,0,""\n                TEXT 110,30,"4",0,1,1,"Dhoot Transmission"\n                TEXT 70,100,"2",0,1,1,"Part No : '.concat(e.material_code,'"\n                TEXT 70,150,"2",0,1,1,"GRN No : ').concat(e.grn_number,'"\n                TEXT 70,200,"2",0,1,1,"GRN Date : ').concat(Ee()(e.grn_date).format("ll"),'"\n                TEXT 70,250,"2",0,1,1,"QUANTITY : ').concat(e.quantity,'"\n                QRCODE 420,200,M,4,A,0,M2,"').concat(e.QR_DATA,'"\n                PRINT 1,1\n                ');r(t),console.log("packetBreaking Payload".packetBreaking)}))},children:"Print Label"})]}):(0,B.jsx)(Z.A,{color:"light_green",onClick:async()=>{try{const e=await navigator.usb.requestDevice({filters:[{vendorId:4611}]});await e.open(),null===e.configuration&&await e.selectConfiguration(1),console.log("Available interfaces:",e.configuration.interfaces),await e.claimInterface(0),console.log("claimInterface"),i(e),l(!0),_.oR.success("Printer connected"),console.log("Printer connected manually:",e)}catch(xt){console.error("Failed to connect to printer manually:",xt),_.oR.error("Failed to connect to printer manually:",xt)}},children:"Connect to Printer"})})},Pn=e=>{let{qty1:t=0,qty2:a=0,label1:n="",label2:l="",noStepFn:s=(()=>{}),nextStepFn:i=(()=>{})}=e;(0,g.useRef)();const[o,r]=(0,g.useState)(null);return(0,g.useEffect)((()=>{const[e,t,a,s,i]=n.split("#"),[o,c,d,u,h]=l.split("#"),p=[{head:"Dhoot Transmission",material_code:e,quantity:t,unit:a,grn_number:s,grn_date:i,QR_DATA:n},{head:"Dhoot Transmission",material_code:o,quantity:c,unit:d,grn_number:u,grn_date:h,QR_DATA:l}];console.log("transformedKittingLabelDataArray",p),r(p)}),[]),(0,B.jsxs)("div",{className:"action_modal__container",children:[(0,B.jsx)("div",{children:(0,B.jsx)("img",{src:"/error_outline.svg",alt:"icon"})}),(0,B.jsx)("span",{children:"Please break the packet into 2 parts: "}),(0,B.jsxs)("span",{children:["First one with ",(0,B.jsx)("strong",{children:t})," units, and second one with"," ",(0,B.jsx)("strong",{children:a})," units."," "]}),(0,B.jsxs)("span",{children:["Then, please paste label: ",(0,B.jsx)("strong",{children:n})," on the first packet,"]}),(0,B.jsxs)("span",{children:["and label: ",(0,B.jsx)("strong",{children:l})," on the second packet."," "]}),(0,B.jsx)(On,{kitting:!1,payload:o}),(0,B.jsx)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:(0,B.jsx)(Z.A,{onClick:i,color:"green",width:"16rem",height:"2.5rem",children:"I have pasted new labels"})})]})},Un=e=>{let{orderId:t=null,getKittingLabel:a=(()=>{}),noStepFn:n=(()=>{}),nextStepFn:l=(()=>{})}=e;(0,g.useRef)();const[s,i]=(0,g.useState)(null);return(0,g.useEffect)((()=>{a(t).then((e=>{console.log("getKittingLabel data",e);const t=[{head:"Dhoot Transmission",Fg_Code:e.fg_code,Order_no:e.order_no.toString(),Quantity:e.quantity.toString(),QR_DATA:e.label}];console.log("transformedKittingLabelDataArray",t),i(t)}))}),[]),(0,B.jsxs)("div",{className:"action_modal__container",children:[(0,B.jsx)("div",{children:(0,B.jsx)("img",{src:"/error_outline.svg",alt:"icon"})}),(0,B.jsxs)("div",{style:{marginBottom:"5vw"},children:[(0,B.jsx)("strong",{children:"Do you want to print kitting Label for this order?"})," "]}),(0,B.jsx)(On,{kitting:!0,payload:s}),(0,B.jsx)("div",{style:{gap:"2.5rem",display:"flex",flexDirection:"row"},children:(0,B.jsx)(Z.A,{onClick:n,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"No"})})]})},Ln=e=>{let{onClose:t,onScan:a,noStepFn:n,nextStepFn:l}=e;const[s,i]=(0,g.useState)(null),{getFailureReasons:o}=jn(),[r,c]=(0,g.useState)(null);return(0,g.useEffect)((()=>{o().then((e=>{console.log("getFailureReasons data",e),i(e)}))}),[]),(0,B.jsx)("div",{className:"action_modal__container",children:(0,B.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem",display:"flex",flexDirection:"column"},children:[(0,B.jsxs)("form",{style:{gap:"1rem",display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%"},children:[(0,B.jsx)("p",{style:{margin:"0",alignSelf:"center",fontWeight:"600"},children:"Partially Fulfilled Order Detected"}),(0,B.jsx)("p",{style:{margin:"0",alignSelf:"center",fontSize:"0.85rem"},children:"Please select the method to replenish and proceed as per guidelines"})," ",s&&Object.entries(s).map((e=>{let[t,a]=e;return(0,B.jsxs)("div",{children:[" ",(0,B.jsxs)("label",{children:[" ",(0,B.jsx)("input",{type:"checkbox",value:t,checked:r===t,onChange:()=>(e=>{c(e)})(t)})," ",a.name," "]})," "]},t)}))," "]}),(0,B.jsxs)("div",{style:{gap:"2.5rem",display:"flex",flexDirection:"row"},children:[(0,B.jsx)(Z.A,{onClick:n,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:()=>l(r,s[r].resolution_date_required,s[r].name),color:"green",width:"8rem",height:"2.5rem",disabled:null===r,children:"Submit"})]})]})})},Fn=e=>{let{onClose:t,onScan:a,noStepFn:n,nextStepFn:l}=e;return(0,B.jsx)("div",{className:"action_modal__container",children:(0,B.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"1rem",display:"flex",flexDirection:"column"},children:[(0,B.jsx)("p",{children:"Failure Reason has been submitted successfully!"}),(0,B.jsx)("p",{children:"An email has also been sent to the supervisor regarding this."}),(0,B.jsx)(Z.A,{onClick:l,color:"green",width:"8rem",height:"2.5rem",children:"OK"})]})})},Hn=e=>{let{noStepFn:t,nextStepFn:a}=e;const[n,l]=(0,g.useState)({username:"",password:""}),s=e=>{const{name:t,value:a}=e.target;l({...n,[t]:a})},i=e=>{e.preventDefault(),a(n.username,n.password)};return(0,B.jsx)("div",{className:"action_modal__container",children:(0,B.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem",display:"flex",flexDirection:"column"},children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("p",{children:"Supervisor Login is required to proceed further."}),(0,B.jsx)("p",{style:{display:"flex",justifyContent:"center"},children:(0,B.jsx)("strong",{children:"Please Login."})})]}),(0,B.jsxs)("form",{onSubmit:i,style:{gap:"2.5rem",display:"flex",flexDirection:"column"},children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("label",{htmlFor:"username",style:{marginRight:"0.5rem"},children:"Username:"}),(0,B.jsx)("input",{type:"text",id:"username",name:"username",value:n.username,onChange:s,required:!0})]}),(0,B.jsxs)("div",{children:[(0,B.jsx)("label",{htmlFor:"password",style:{marginRight:"0.5rem"},children:"Password:"}),(0,B.jsx)("input",{type:"password",id:"password",name:"password",value:n.password,onChange:s,required:!0})]}),(0,B.jsxs)("div",{style:{gap:"2.5rem",display:"flex"},children:[(0,B.jsx)(Z.A,{onClick:t,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:i,color:"green",width:"8rem",height:"2.5rem",disabled:!n.username||!n.password,children:"Submit"})]})]})]})})},zn=e=>{let{onClose:t,onScan:a,noStepFn:n,nextStepFn:l}=e;return(0,B.jsx)("div",{className:"action_modal__container",children:(0,B.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:".5rem",display:"flex",flexDirection:"column"},children:[(0,B.jsx)("p",{children:"Thank you for your input."}),(0,B.jsxs)("p",{style:{textAlign:"center"},children:["Please close this modal and click ",(0,B.jsx)("strong",{children:"Submit"})," button at the bottom of page to issue the materials for this order."]}),(0,B.jsx)(Z.A,{onClick:l,color:"green",width:"8rem",height:"2.5rem",children:"Close"})]})})},Mn=e=>{let{onClose:t,onScan:a,noStepFn:n,nextStepFn:l,message:s}=e;return(0,B.jsx)("div",{className:"action_modal__container",children:(0,B.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:".5rem",display:"flex",flexDirection:"column"},children:[(0,B.jsx)("p",{style:{textAlign:"center"},children:s}),(0,B.jsx)(Z.A,{onClick:l,color:"blue",width:"8rem",height:"2.5rem",children:"OK"})]})})},Qn=e=>{let{onClose:t,onScan:a,noStepFn:n,nextStepFn:l}=e;const[s,i]=(0,g.useState)(null),o=(0,g.useRef)(null);(0,g.useEffect)((()=>{o.current.focus()}),[]);return(0,B.jsxs)("div",{className:"action_modal__container",children:[(0,B.jsx)("p",{style:{fontWeight:"600",fontSize:"1.2rem"},children:"Stock Transfer"}),(0,B.jsx)("p",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Please scan the barcode of the substitute material to proceed."}),(0,B.jsx)("div",{children:(0,B.jsx)("input",{ref:o,type:"text",onKeyPress:e=>{"Enter"===e.key&&(console.log("Scanned Barcode:",e.target.value),i(e.target.value),a(e.target.value),e.target.value="")},style:{width:"100%",padding:"10px",fontSize:"16px"},placeholder:"Scan or type available barcode here"})}),s&&(0,B.jsxs)("p",{children:["Scanned: ",s]}),(0,B.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,B.jsx)(Z.A,{onClick:n,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:l,color:"green",width:"8rem",height:"2.5rem",disabled:null===s,children:"Submit"})]})]})},Yn=e=>{let{onClose:t,onScan:a,noStepFn:n,nextStepFn:l,materialCodes:s}=e;console.log("materialCodes",s);const[i,o]=(0,g.useState)("");return(0,B.jsxs)("div",{className:"action_modal__container",children:[(0,B.jsx)("p",{style:{fontWeight:"600",fontSize:"1.2rem"},children:"Stock Transfer"}),(0,B.jsx)("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Please select the material to substitute (stock transfer)."}),(0,B.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignContent:"start",width:"100%",gap:"1vw"},children:[s.map(((e,t)=>(0,B.jsxs)("div",{style:{display:"flex",gap:"1vw",alignItems:"baseline"},children:[(0,B.jsx)("input",{type:"radio",id:"material-".concat(t),name:"materialCode",value:e,checked:i===e,onChange:()=>(e=>{o(e)})(e)}),(0,B.jsx)("label",{htmlFor:"material-".concat(t),children:e})]},t))),(0,B.jsx)("div",{})]}),(0,B.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,B.jsx)(Z.A,{onClick:n,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:()=>{l(i)},color:"green",width:"8rem",height:"2.5rem",children:"Submit"})]})]})},Bn=e=>{let{onClose:t,onScan:a,noStepFn:n,nextStepFn:l,materialCodes:s}=e;console.log("materialCodes",s);const[i,o]=(0,g.useState)(null);return(0,B.jsxs)("div",{className:"action_modal__container",children:[(0,B.jsx)("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Please select the reference material"}),(0,B.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignContent:"start",width:"100%",gap:"1vw"},children:[s&&s.map(((e,t)=>(0,B.jsxs)("div",{style:{display:"flex",gap:"1vw",alignItems:"baseline"},children:[(0,B.jsx)("input",{type:"radio",id:"material-".concat(t),name:"materialCode",value:e,checked:i===e,onChange:()=>(e=>{o(e)})(e)}),(0,B.jsx)("label",{htmlFor:"material-".concat(t),children:e})]},t))),(0,B.jsx)("div",{})]}),(0,B.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,B.jsx)(Z.A,{onClick:n,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:()=>{l(i)},color:"green",width:"8rem",height:"2.5rem",disabled:null===i,children:"Submit"})]})]})},Gn=e=>{let{onClose:t,onScan:a,noStepFn:n,nextStepFn:l}=e;const[s,i]=(0,g.useState)(null),o=(new Date).toISOString().split("T")[0];return(0,B.jsxs)("div",{className:"action_modal__container",children:[(0,B.jsx)("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Please input the resolution date"}),(0,B.jsx)("input",{type:"date",value:s,onChange:e=>{i(e.target.value)},min:o,style:{margin:"1rem 0",padding:"0.5rem",fontSize:"1rem"}}),(0,B.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,B.jsx)(Z.A,{onClick:n,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"Cancel"}),(0,B.jsx)(Z.A,{onClick:()=>{l(s)},color:"green",width:"8rem",height:"2.5rem",disabled:null===s,children:"Submit"})]})]})},qn=e=>{let{onClose:t,onScan:a,noStepFn:n,nextStepFn:l,newLabel:s}=e;(0,g.useRef)();const[i,o]=(0,g.useState)(null);return(0,g.useEffect)((()=>{const[e,t,a,n,l]=s.split("#"),i=[{head:"Dhoot Transmission",material_code:e,quantity:t,unit:a,grn_number:n,grn_date:l,QR_DATA:s}];console.log("transformedKittingLabelDataArray",i),o(i)}),[]),(0,B.jsx)("div",{className:"action_modal__container",children:(0,B.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"1rem",display:"flex",flexDirection:"column"},children:[(0,B.jsx)("p",{children:"Stock Transfer Success!"}),(0,B.jsx)("p",{children:"Please paste the following new label on the scanned packet."}),(0,B.jsx)("p",{children:(0,B.jsx)("strong",{children:s})}),(0,B.jsx)(On,{kitting:!1,payload:i}),(0,B.jsx)(Z.A,{onClick:l,color:"blue",width:"8rem",height:"2.5rem",children:"OK"})]})})};const Wn=function(e){let{orderId:t}=e;const a=(0,I.Zp)(),[n,l]=(0,pn.ok)(),[s,i]=(0,g.useState)({submitLoading:!1,submitDisabled:!0}),[o,r]=(0,g.useState)(!0),[c,d]=(0,g.useState)(!0),[u,h]=(0,g.useState)(!1),[p,m]=(0,g.useState)([]),{fetchMaterialsRequired:x,setOrderHoldQuantity:v,updateOrderState:w,generateLabels:A,submitFailureReason:j,supervisorLogin:f,stockTransfer:S,getKittingLabel:b,printLabels:C,error:N,loading:E}=jn(),{verifyMaterial:k,error:_,loading:T}=(()=>{const[e,t]=(0,g.useState)(!1),[a,n]=(0,g.useState)(null),{token:l}=(0,y.d4)((e=>e[J.X.AUTH])),s={Authorization:"Bearer ".concat(l),"Content-Type":W.yw.APPLICATION_JSON},i=new W.Ay,o=(0,g.useCallback)((async(e,n,l,o)=>{const r="".concat(V.H.ORDERS,"/material-verifier/").concat(e,"/"),c={material_code:n,grn_number:l,quantity:o};try{return t(!0),(await i.post(r,c,s)).data}catch(a){console.error(a.message||"Error in verifying material")}finally{t(!1)}}),[i,s]);return{loading:e,error:a,verifyMaterial:o}})(),[D,R]=(0,g.useState)({}),[O,P]=(0,g.useState)(),[U,L]=(0,g.useState)(0),[F,H]=(0,g.useState)(0),[z,M]=(0,g.useState)(!1),[Q,Y]=(0,g.useState)(!1),[q,X]=(0,g.useState)(!1),[$,ee]=(0,g.useState)(""),[te,ae]=(0,g.useState)(""),[ne,le]=(0,g.useState)({material_on_hold:{}}),{getOrderHoldQuantity:se,submitBOM:ie}=An(),[oe,re]=(0,g.useState)(!1),[ce,de]=(0,g.useState)(null),[ue,he]=(0,g.useState)(null),[pe,me]=(0,g.useState)(!1),[xe,ge]=(0,g.useState)(!1),[ve,ye]=(0,g.useState)(!1),[we,Ae]=(0,g.useState)(!1),[je,fe]=(0,g.useState)(""),[Se,be]=(0,g.useState)(!1),[Ce,Ne]=(0,g.useState)(!1),[Ee,ke]=(0,g.useState)(null),[Ie,_e]=(0,g.useState)(!1),[Te,De]=(0,g.useState)(!1),[Re,Oe]=(0,g.useState)(!1),[Pe,Ue]=(0,g.useState)(!1),[Le,Fe]=(0,g.useState)(!1),[He,ze]=(0,g.useState)(null),[Me,Qe]=(0,g.useState)(""),[Ye,Be]=(0,g.useState)(null),[Ge,qe]=(0,g.useState)([]),[We,Ve]=(0,g.useState)(null),[Je,Xe]=(0,g.useState)(null),[Ze,Ke]=(0,g.useState)(null),[$e,et]=(0,g.useState)(null),tt=(0,g.useRef)(null),at=[{id:1,title:"Material",render:e=>e.material_name},{id:2,title:"Location",render:e=>e.location},{id:3,title:"Required Qty",render:e=>e.required},{id:4,title:"Collected Qty",render:e=>(0,B.jsx)("div",{children:(0,B.jsxs)("span",{children:[e.collected," ",""]})})},{id:5,title:"-",render:e=>(0,B.jsx)(nt,{rowData:e})}],nt=e=>{let{rowData:t}=e},lt=e=>{const t=e.every((e=>e.required===e.collected));return console.log("allCollected",t),t},st=e=>{const t=e.filter((e=>e.required>e.collected));return t.length>0?t.map((e=>e.material_code)):[]},it=e=>{ee(e)},ot=(e,t,a)=>{le((s=>{const i=JSON.parse(JSON.stringify(ne));i.material_on_hold[e]?i.material_on_hold[e]=[...i.material_on_hold[e],{grn_number:t,quantity:a}]:i.material_on_hold[e]=[{grn_number:t,quantity:a}],console.log("newState",i);const o=n.get("orderId");return v(o,i).then((e=>{console.log("setOrderHoldQuantity data",e),w(o,"ISSUING").then((e=>{console.log("updateOrderState data",e),n.set("orderStatus","ISSUING"),l(n)}))})),i}))};return(0,g.useEffect)((()=>{n.get("orderId")&&x(n.get("orderId")).then((e=>{if("RUNNING"!==n.get("orderStatus")&&tt.current.focus(),"PLAN"===n.get("orderStatus")){const t=e.items.map((e=>({...e,collected:0})));m(t)}if("ISSUING"===n.get("orderStatus")||"RUNNING"===n.get("orderStatus")){const t=e.items;se(n.get("orderId")).then((e=>{console.log("getOrderHoldQuantity data",e),le({material_on_hold:e});const a=((e,t)=>t.map((t=>{const a=t.material_code;let n=0;return e[a]&&(n=e[a].reduce(((e,t)=>e+t.quantity),0)),{...t,collected:n}})))(e,t);console.log("newTableData",a),m(a)}))}"RUNNING"===n.get("orderStatus")&&(r(!1),d(!1),h(!0))}))}),[]),(0,g.useEffect)((()=>{$&&(e=>{const[t,a,l,s,i]=e.split("#"),o=parseFloat(a),r=n.get("orderType"),c=p.find((e=>e.material_code===t)),d=c.required-c.collected;if("ASSEMBLY"==r){if(0===d)return fe("Item already collected in full required quantity. Please scan a different item or submit the order."),void Ae(!0);if(d&&o>d){const e=o-d;return void A(t,s,i,l,d,e).then((t=>{X(!1),t&&(R({qty1:d,qty2:e,label1:t.label1,label2:t.label2}),M(!0))}))}}k(n.get("orderId"),t,s,o).then((e=>{if("OK"===e.message){if("ASSEMBLY"==r&&o<=d&&(m((e=>e.map((e=>e.material_code===t?{...e,collected:e.collected+o}:e)))),ot(t,s,o),X(!1)),"ACC"===r||"LPC"===r){const e=p.map((e=>e.material_code===t?{...e,collected:e.collected+o}:e));m(e),ot(t,s,o),console.log("issuedMaterialQty before setOrderHoldQuantity on scan QR code",ne),X(!1)}}else fe("Incorrect bar code. Please try again with different bar code."),Ae(!0)})).catch((e=>{console.error("Error during verification:",e)})),ee(null)})($)}),[$]),(0,B.jsxs)("div",{className:"mx-3 my-2 mp-instruction-layout",children:[(0,B.jsx)("div",{className:"mp-instruction-header",children:c&&(0,B.jsxs)("div",{style:{display:"flex",alignItems:"center",position:"fixed",top:"60px",left:"200px",marginLeft:"1rem",width:"60vw",height:"3rem",backgroundColor:"white",padding:"10px",zIndex:1e3},children:[(0,B.jsx)("p",{className:"instruction-text",style:{marginRight:"10px"},children:"Please Scan the Barcode or enter Qty"}),(0,B.jsx)("input",{ref:tt,type:"text",onKeyPress:e=>{"Enter"===e.key&&(console.log("Scanned Barcode:",e.target.value),Qe(e.target.value),it(e.target.value),e.target.value="")},style:{width:"100%",padding:"10px",fontSize:"16px"},placeholder:"Click here and Scan or Type barcode here"})]})}),(0,B.jsxs)("div",{className:"instruction-layout-body",children:[(0,B.jsx)(Dn,{}),(0,B.jsx)(G,{columns:at,rows:p,rowsPerPage:5,loading:"fetch"===O,titleCellClasses:"c-gray fw-700",page:F,setPage:H,paginator:!0,serialize:!0,total:U})]}),(0,B.jsxs)("div",{className:"material-planner-layout-footer",children:[(0,B.jsx)(Z.A,{onClick:async()=>{const e=n.get("orderId"),t=n.get("orderType");try{if("ASSEMBLY"===t&&!Se){console.log("tableData",p);if(!lt(p))return void re(!0)}w(e,"RUNNING").then((n=>{console.log("updateOrderState data",n),ie(e,{material_issue:ne.material_on_hold}).then((e=>{console.log("submit BOM data",e),"ASSEMBLY"!==t?a("/material-planner/"):Y(!0)}))}))}catch(xt){console.error(xt.message),fe(xt.message),Ae(!0)}},disabled:!o,color:"green",width:"8rem",height:"2.5rem",loading:s.submitLoading,customStyle:{backgroundColor:"#86D56A"},children:"Submit"}),u&&(0,B.jsx)(Z.A,{onClick:()=>{const e=document.createElement("table"),t=document.createElement("tr");["S.no","Material Code","Quantity","GRN Number"].forEach((e=>{const a=document.createElement("th");a.textContent=e,t.appendChild(a)})),e.appendChild(t);let a=1;for(const l in ne.material_on_hold)ne.material_on_hold[l].forEach((t=>{const n=document.createElement("tr"),s=document.createElement("td");s.textContent=a++,n.appendChild(s);const i=document.createElement("td");i.textContent=l,n.appendChild(i);const o=document.createElement("td");o.textContent=t.quantity,n.appendChild(o);const r=document.createElement("td");r.textContent=t.grn_number,n.appendChild(r),e.appendChild(n)}));const n=window.open("","_blank");n.document.write("<html><head><title>Print Table</title><style>table { width: 100%; border-collapse: collapse; }th, td { border: 1px solid #dddddd; text-align: center; padding: 8px; }th { background-color: #f2f2f2; }tr:nth-child(even) { background-color: #f9f9f9; }tr:nth-child(odd) { background-color: #ffffff; }</style></head><body>"),n.document.write(e.outerHTML),n.document.write("</body></html>"),n.document.close(),n.print()},color:"green",width:"10rem",height:"2.5rem",loading:s.submitLoading,children:"Print Hold Quantity"})]}),z&&(0,B.jsx)(K.A,{open:z,onClose:()=>M(!1),width:"75vw",top:"5vh",hideCloseIcon:yn,children:(0,B.jsx)(Pn,{qty1:D.qty1,qty2:D.qty2,label1:D.label1,label2:D.label2,noStepFn:()=>{M(!1)},nextStepFn:()=>{M(!1)}})}),Q&&(0,B.jsx)(K.A,{open:Q,onClose:()=>Y(!1),width:"75vw",top:"5vh",hideCloseIcon:yn,children:(0,B.jsx)(Un,{orderId:n.get("orderId"),getKittingLabel:b,noStepFn:()=>{console.log("handleKittingQRPrintModalDenial"),Y(!1),a("/material-planner/")},nextStepFn:()=>{console.log("handleKittingQRPrintModalSubmit");const e=n.get("orderId");b(e).then((e=>{console.log("getKittingLabel data",e);const t=[{head:"Dhoot Transmission",Fg_Code:e.fg_code,Order_no:e.order_no.toString(),Quantity:e.quantity.toString(),QR_DATA:e.label}];console.log("transformedKittingLabelDataArray",t),C(t).then((e=>{console.log("printLabels data",e),Y(!1),a("/material-planner/")}))}))}})}),oe&&(0,B.jsxs)(K.A,{open:oe,onClose:()=>re(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,B.jsx)(Ln,{noStepFn:()=>{re(!1)},nextStepFn:(e,t,a)=>{if(de(t),a&&Ke(a),e&&"Stock Transfer"===a){re(!1),Xe(e),ae(null);const t=st(p).filter((e=>!Ge.includes(e)));return Be(t),void De(!0)}if(e){const t=st(p).filter((e=>!Ge.includes(e)));Be(t),Xe(e),re(!1),Oe(!0)}}})," "]}),Te&&(0,B.jsxs)(K.A,{open:Te,onClose:()=>De(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,B.jsx)(Yn,{noStepFn:()=>{console.log("handleStockTransferMaterialSelectionModalDenial"),De(!1)},nextStepFn:e=>{if(Ve(e),et(e),De(!1),Ce){if(Ce){const e=n.get("orderId");j(e,$e,Je,Ee,ue).then((e=>{e&&_e(!0)})).catch((e=>{ge(!1),re(!0)}))}}else ge(!0)},materialCodes:Ye})," "]}),Re&&(0,B.jsxs)(K.A,{open:Re,onClose:()=>Oe(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,B.jsx)(Bn,{noStepFn:()=>{console.log("handleFailureReasonMaterialSelectionModalDenial"),Oe(!1)},nextStepFn:e=>{if(et(e),ce)ce&&(Oe(!1),Ue(!0));else if(Oe(!1),Ce){if(Ce){const e=n.get("orderId");j(e,$e,Je,Ee).then((e=>{e&&("Stock Transfer"!==Ze?(qe((e=>{if(!e.includes($e)){const t=[...e,$e];return Ye.every((e=>t.includes(e)))&&be(!0),t}return e})),Ge.length===Ye.length?ye(!0):re(!0)):"Stock Transfer"===Ze&&_e(!0))})).catch((e=>{ge(!1),re(!0)}))}}else ge(!0)},materialCodes:Ye})," "]}),Pe&&(0,B.jsxs)(K.A,{open:Pe,onClose:()=>Ue(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,B.jsx)(Gn,{noStepFn:()=>{console.log("handleFailureReasonResolutionDateInputModalDenial"),Ue(!1)},nextStepFn:e=>{if(he(e),Ue(!1),Ce){if(Ce){const t=n.get("orderId");j(t,$e,Je,Ee,e).then((e=>{e&&("Stock Transfer"!==Ze?(qe((e=>{if(!e.includes($e)){const t=[...e,$e];return Ye.every((e=>t.includes(e)))&&be(!0),t}return e})),Ge.length===Ye.length?ye(!0):re(!0)):"Stock Transfer"===Ze&&_e(!0))})).catch((e=>{ge(!1),re(!0)}))}}else ge(!0)}})," "]}),pe&&(0,B.jsxs)(K.A,{open:pe,onClose:()=>me(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,B.jsx)(Fn,{nextStepFn:()=>{console.log("handleFailureReasonSubmittedModalSubmit"),me(!1),ge(!0)}})," "]}),xe&&(0,B.jsxs)(K.A,{open:xe,onClose:()=>ge(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,B.jsx)(Hn,{noStepFn:()=>{ge(!1)},nextStepFn:(e,t)=>{f(e,t).then((t=>{if(t&&"Authentication successful"===t.message){ge(!1),Ne(!0),ke(e);const t=n.get("orderId");j(t,$e,Je,e,ue).then((e=>{e&&(ge(!1),"Stock Transfer"!==Ze?(qe((e=>{const t=[...e,$e];return Ye.every((e=>t.includes(e)))&&be(!0),t})),Ge.length===Ye.length?ye(!0):re(!0)):"Stock Transfer"===Ze&&_e(!0))})).catch((e=>{ge(!1),re(!0)}))}}))}})," "]}),we&&(0,B.jsxs)(K.A,{open:we,onClose:()=>Ae(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,B.jsx)(Mn,{nextStepFn:()=>{Ae(!1)},message:je})," "]}),ve&&(0,B.jsxs)(K.A,{open:ve,onClose:()=>ye(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,B.jsx)(zn,{nextStepFn:()=>{ye(!1)}})," "]}),Ie&&(0,B.jsxs)(K.A,{open:Ie,onClose:()=>_e(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,B.jsx)(Qn,{onScan:e=>{e&&ae(e)},noStepFn:()=>{console.log("handleStockTransferScannerModalDenial"),_e(!1)},nextStepFn:()=>{if(te){const[e,t,a,n,l]=te.split("#"),s=parseFloat(t);S(We,e,s,n,a,l).then((e=>{e&&(ae(e.label),_e(!1),Fe(!0))}))}}})," "]}),Le&&(0,B.jsxs)(K.A,{open:Le,onClose:()=>Fe(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,B.jsx)(qn,{nextStepFn:()=>{console.log("handleNewStockTransferLabelDisplayModalSubmit"),Fe(!1),ze(!0)},newLabel:te})," "]})]})},Vn=()=>{var e,t;const a=(0,y.wA)(),[n,l]=(0,g.useState)(!1),s=(0,y.d4)((e=>e[J.X.AUTH])),i=null===s||void 0===s||null===(e=s.user)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.role,o=[{path:"/report",element:(0,B.jsx)(hn,{})},{path:"/TestDetail",element:(0,B.jsx)(Ua,{})},{path:"/plan-training",element:(0,B.jsx)(dn,{})},{path:"/test-portal",element:(0,B.jsx)(on,{})},{path:"/skill-matrix",element:(0,B.jsx)(sn,{})},{path:"/live-view",element:(0,B.jsx)($t,{})},{path:"/test",element:(0,B.jsx)(Ga,{})},{path:"/test-upload",element:(0,B.jsx)(Xa,{})},{path:"/skill-page",element:(0,B.jsx)(en,{})},{path:"/question-bank",element:(0,B.jsx)(an,{})},{path:"/machine-view",element:(0,B.jsx)(_a,{})},{path:"/operator-portal",element:(0,B.jsx)(Ra,{})},{path:"/timelinebar",element:(0,B.jsx)(ea,{})},{path:"/Dashboardd",element:(0,B.jsx)(pt,{})},{path:"/error",element:(0,B.jsx)(xt,{})},{path:"/users",element:i===Y.z7.ADMINISTRATOR?(0,B.jsx)(De,{}):(0,B.jsx)(xt,{})},{path:"/tenants",element:i===Y.z7.SUPERADMIN?(0,B.jsx)(ae,{}):(0,B.jsx)(xt,{})},{path:"/store-master",element:i===Y.z7.ADMINISTRATOR?(0,B.jsx)(We,{}):(0,B.jsx)(xt,{})},{path:"/downtime-master",element:i===Y.z7.ADMINISTRATOR?(0,B.jsx)(aa,{}):(0,B.jsx)(xt,{})},{path:"/model-master",element:i===Y.z7.ADMINISTRATOR?(0,B.jsx)(la,{}):(0,B.jsx)(xt,{})},{path:"/parts-rejection",element:i===Y.z7.ADMINISTRATOR?(0,B.jsx)(ia,{}):(0,B.jsx)(xt,{})},{path:"/shift-master",element:i===Y.z7.ADMINISTRATOR?(0,B.jsx)(ca,{}):(0,B.jsx)(xt,{})},{path:"/notification",element:i===Y.z7.ADMINISTRATOR?(0,B.jsx)(da,{}):(0,B.jsx)(xt,{})},{path:"/consumable",element:i===Y.z7.ADMINISTRATOR?(0,B.jsx)(ha,{}):(0,B.jsx)(xt,{})},{path:"/profile",element:i===Y.z7.ADMINISTRATOR?(0,B.jsx)(xa,{}):(0,B.jsx)(xt,{})},{path:"/store-inbound",element:(0,B.jsx)(at,{})},{path:"/store-outbound",element:(0,B.jsx)(lt,{})},{path:"/store-outbound-history",element:(0,B.jsx)(st,{})},{path:"/settings",element:(0,B.jsx)("h1",{children:"Settings"})},{path:"/logout",element:(0,B.jsx)("h1",{children:"Log"})},{path:"/order",element:(0,B.jsx)(it,{})},{path:"/machinepage",element:(0,B.jsx)(Ct,{})},{path:"/companypage",element:i===Y.z7.ADMINISTRATOR?(0,B.jsx)(kt,{}):(0,B.jsx)(xt,{})},{path:"/plantpage",element:i===Y.z7.ADMINISTRATOR?(0,B.jsx)(Dt,{}):(0,B.jsx)(xt,{})},{path:"/divisionpage",element:i===Y.z7.ADMINISTRATOR?(0,B.jsx)(Pt,{}):(0,B.jsx)(xt,{})},{path:"/line",element:i===Y.z7.ADMINISTRATOR?(0,B.jsx)(Ft,{}):(0,B.jsx)(xt,{})},{path:"/asset",element:i===Y.z7.ADMINISTRATOR?(0,B.jsx)(Mt,{}):(0,B.jsx)(xt,{})},{path:"/group",element:i===Y.z7.ADMINISTRATOR?(0,B.jsx)(Jt,{}):(0,B.jsx)(xt,{})},{path:"/tenant-Users",element:i===Y.z7.SUPERADMIN?(0,B.jsx)(Kt,{}):(0,B.jsx)(xt,{})},{path:"/running-order",element:(0,B.jsx)(ja,{})},{path:"/plan",element:(0,B.jsx)(Ca,{})},{path:"/plan-overview",element:(0,B.jsx)(Ia,{})},{path:"/material-planner",element:(0,B.jsx)(Nn,{})},{path:"/material-planner/addfailureReasonPage",element:(0,B.jsx)(In,{})},{path:"/material-planner-plan",element:(0,B.jsx)(Rn,{})},{path:"/material-planner-plan/scanning",element:(0,B.jsx)(Wn,{})}];return(0,g.useEffect)((()=>{(0,q.A)(a,s),l(!0)}),[]),n?(0,B.jsx)(I.BV,{children:o.map((e=>{let{path:t,element:a}=e;return(0,B.jsx)(I.qh,{element:a,path:t},t)}))}):null};var Jn=a(8089),Xn=a(3529),Zn=a(5453),Kn=a(5722),$n=a(4444),el=a(8323),tl=a(2177),al=a(3235),nl=a(122);const ll=a.p+"static/media/dark-logo.677aa26ee5654972221a.png",sl=a.p+"static/media/dhoot.62da4ddc06b8ec08d5f2.png",il=parseInt(localStorage.getItem("draweWidth")),ol=(0,k.A)(n.Ay,{shouldForwardProp:e=>"open"!==e})((e=>{let{open:t}=e;return{width:il,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...t&&{width:il,overflowX:"hidden","& .MuiDrawer-paper":{width:il,overflowX:"hidden"}},...!t&&{overflowX:"hidden",width:"50px","& .MuiDrawer-paper":{overflowX:"hidden",width:"50px"}}}})),rl={title:"Users",icon:w.A,path:"/users"},cl={title:"Tenants",icon:b.A,path:"/tenants"},dl=(C.A,E.A,A.A,Xn.A,Zn.A,Kn.A,$n.A,el.A,tl.A,tl.A,j.A,A.A,A.A,A.A,[{title:"Store Issue",icon:N.A,path:"/material-planner"},{title:"Failure Reasons",icon:N.A,path:"material-planner/addfailureReasonPage"}]),ul=()=>{const[e,t]=(0,g.useState)([]),a=((0,y.d4)((e=>e[J.X.AUTH])),(0,y.d4)((e=>{var t;return null===(t=e[J.X.AUTH].user)||void 0===t?void 0:t.data}))),{logout:n,profile2:w}=(0,Jn.A)(),[A,j]=(0,g.useState)(!0),b=(0,I.Zp)(),{pathname:C}=(0,I.zy)(),[N,E]=(0,g.useState)(null),k=Boolean(N);(0,g.useEffect)((()=>{localStorage.setItem("draweWidth",200);const e=[];console.log("redux user",a),(null===a||void 0===a?void 0:a.role)===Y.z7.SUPERADMIN||localStorage.getItem("role")===Y.z7.SUPERADMIN?(e.push(cl,...dl),t(e)):(null===a||void 0===a?void 0:a.role)===Y.z7.ADMINISTRATOR||localStorage.getItem("role")===Y.z7.ADMINISTRATOR?(e.push(rl,...dl),t(e)):t(dl),localStorage.getItem("t_token")||(console.log("islogin",a),b("/login",{replace:!0}))}),[]);const _=()=>{E(null)};return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(l.A,{variant:"outlined",sx:{zIndex:e=>e.zIndex.drawer+1,width:"100%",position:"fixed",backgroundColor:Y.lm.WHITE},children:(0,B.jsxs)(s.A,{sx:{flexDirection:"row",px:1,py:.5,justifyContent:"space-between"},children:[(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:2,alignItems:"center"},children:[(0,B.jsx)("img",{src:ll,width:"80px",height:"43px",style:{objectFit:"contain"}}),(0,B.jsx)("img",{src:sl,width:"100px",height:"33px",style:{objectFit:"contain"}})]}),(0,B.jsxs)(s.A,{sx:{flexDirection:"row",gap:2,justifyContent:"flex-end",alignItems:"center"},children:[(0,B.jsxs)(i.A,{className:"fw-14",sx:{width:"100%",pr:2,mt:1,color:Y.lm.TEXT_GRAY},children:["Welcome ",null===a||void 0===a?void 0:a.name]}),(0,B.jsx)(s.A,{children:(0,B.jsx)(o.A,{children:(0,B.jsx)(nl.A,{fontSize:"large"})})}),(0,B.jsx)(r.A,{sx:{maxWidth:"calc(100vw - ".concat(A?180:50,"px)")},disableGutters:!0,className:"h-50 minh-50",children:(0,B.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,B.jsx)(o.A,{id:"basic-button","aria-controls":k?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":k?"true":void 0,onClick:e=>{console.log("popup",e.currentTarget),E(e.currentTarget)},children:(0,B.jsx)(al.A,{fontSize:"large"})}),(0,B.jsxs)(c.A,{id:"basic-menu",anchorEl:N,open:k,onClose:_,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,B.jsxs)(d.A,{sx:{py:0},onClick:()=>{_()},children:[(0,B.jsx)(u.A,{children:(0,B.jsx)(tl.A,{fontSize:"small"})}),(0,B.jsx)(h.A,{children:null===a||void 0===a?void 0:a.name})]}),(0,B.jsx)(v.A,{}),(0,B.jsxs)(d.A,{sx:{py:0},onClick:()=>{_()},children:[(0,B.jsx)(u.A,{children:(0,B.jsx)(S.A,{fontSize:"small"})}),(0,B.jsx)(h.A,{children:null===a||void 0===a?void 0:a.email})]}),(0,B.jsx)(v.A,{}),(0,B.jsxs)(d.A,{sx:{py:0},onClick:()=>{_()},children:[(0,B.jsx)(u.A,{children:(0,B.jsx)(tl.A,{fontSize:"small"})}),(0,B.jsx)(h.A,{children:null===a||void 0===a?void 0:a.role})]}),(0,B.jsx)(v.A,{}),(0,B.jsxs)(d.A,{sx:{py:0},onClick:()=>{_(),n()},children:[(0,B.jsx)(u.A,{children:(0,B.jsx)(f.A,{fontSize:"small"})}),(0,B.jsx)(h.A,{children:"Logout"})]})]})]})})]})]})}),(0,B.jsx)(ol,{open:A,variant:"permanent",onClose:()=>j((e=>!e)),sx:{},children:(0,B.jsx)(p.A,{sx:{width:il,backgroundColor:Y.lm.BG_GRAY,mt:7},role:"presentation",children:(0,B.jsx)(m.A,{dense:!0,children:e.map((e=>{let{title:t,path:a,icon:n}=e;return(0,B.jsx)(x.Ay,{sx:{ml:1},button:!0,onClick:()=>b(a),children:(0,B.jsx)(h.A,{sx:{"& .MuiListItemText-primary":{fontSize:"16px",fontWeight:"".concat(C===a?"700":"500")}},primary:t,className:"".concat("fw-700")})},a)}))})})}),(0,B.jsx)(p.A,{sx:{mt:8,position:"relative",left:A?il:"50px",overflow:"hidden"},children:(0,B.jsx)(p.A,{sx:{maxWidth:"calc(100vw - ".concat(A?il:50,"px)")},children:(0,B.jsx)(Vn,{})})})]})}}}]);
//# sourceMappingURL=230.420fd184.chunk.js.map