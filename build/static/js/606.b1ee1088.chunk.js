"use strict";(self.webpackChunktraceability=self.webpackChunktraceability||[]).push([[606],{991:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Vt});var a=s(4109),n=s(2314),l=s(9216),i=s(5865),r=s(7392),o=s(5263),c=s(378),d=s(2143),u=s(2050),p=s(8734),m=s(6446),x=s(5721),h=s(1322),A=s(5043),w=s(9336),g=s(3003),y=s(9237),f=s(9193),j=s(8635),v=s(9906),S=s(7402),C=s(5903),k=s(3216),_=s(1036),b=s(1806),T=s(3460),N=s(9652),E=s(7502),R=s(9650),I=s(4882),P=s(8076),D=s(207),U=s(9090),L=s(7355),O=s(8057),G=s(8426),z=s(6467),H=s(579);const Y=e=>{let{rows:t=[],columns:s=[],minWidth:a=650,tableClasses:n="",titleCellClasses:i="",rowClassesMethod:r=(()=>{}),rowClasses:o="",rowCellClasses:c="",rowsPerPage:d=10,paginator:u=!1,loading:p,dense:m,hideBorder:x=!1,onRowClick:h=Function.prototype,serialize:A=!1,page:w=0,setPage:g=Function.prototype,total:y,headColor:f,headLabelColor:j,tableBodyColor:v}=e;return(0,H.jsx)(R.A,{children:(0,H.jsxs)(b.A,{sx:{minWidth:a},className:"".concat(n),size:m&&"small",children:[(0,H.jsx)(I.A,{sx:{backgroundColor:f||z.lm.BG_GRAY},children:(0,H.jsxs)(P.A,{children:[A&&(0,H.jsx)(N.A,{className:"".concat(i," text-nowrap h3"),sx:{color:j||"black"},children:"S No."}),s.map(((e,t)=>(0,H.jsx)(N.A,{style:{width:e.width&&e.width,color:j||"black"},className:"".concat(i," text-nowrap"),children:e.title},t)))]})}),(0,H.jsx)(l.A,{sx:{p:.3}}),(0,H.jsx)(T.A,{children:p?(0,H.jsx)(P.A,{children:(0,H.jsx)(N.A,{colSpan:12,className:"flex h-300 text-center",children:(0,H.jsx)(L.A,{big:!0,blue:!0})})}):t&&t.length?t.map(((e,t)=>(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(P.A,{sx:{backgroundColor:v||z.lm.LG_GRAY,["& .".concat(E.A.root)]:{borderBottom:x?"none":"true",mt:10},...r(t,e)},className:"".concat(o),onClick:()=>h(e.id),children:[A&&(0,H.jsx)(N.A,{sx:{color:"black"},className:"".concat(c," fw-500 "),align:"left",children:t+1}),s.map(((t,s)=>(0,H.jsx)(N.A,{sx:{width:t.width&&t.width,color:"black"},className:"".concat(c," fw-500"),align:"left",children:t.render(e)},s)))]},t),(0,H.jsx)(l.A,{sx:{p:.3}})]}))):(0,H.jsx)(P.A,{children:(0,H.jsxs)(N.A,{colSpan:12,className:"text-center h-300 flex items-center opacity-60 w-full",children:[(0,H.jsx)("img",{src:O,alt:"leaf",height:100,className:"w-full object-contain"}),(0,H.jsx)("p",{className:"text-center",children:"No Records found!"})]})})}),u&&(0,H.jsx)(D.A,{children:(0,H.jsx)(P.A,{children:(0,H.jsx)(U.A,{rowsPerPageOptions:[],count:y||t.length,rowsPerPage:d,onPageChange:(e,t)=>g(t),page:w})})})]})})};var M=s(1136),Q=s(9687),q=s(2359),F=s(8016);const W=()=>{const{token:e}=(0,g.d4)((e=>e[F.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){const e=new Q.Ay,s=await e.get("".concat(q.H.USERS,"/"),{},t,M.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=new Q.Ay,a=await s.post("".concat(q.H.USERS,"/"),e,t,(e=>(0,M.So)(e,null,"User created successfully!")));return null===a||void 0===a?void 0:a.data},userProfile:async e=>{const s=new Q.Ay,a=await s.get("".concat(q.H.USER,"-").concat(q.H.PROFILE,"/").concat(e,"/"),{},t,M.So);return null!==a&&void 0!==a&&a.data?null===a||void 0===a?void 0:a.data:[[],0]},updateProfile:async(e,s)=>{const a=new Q.Ay,n=await a.put("".concat(q.H.USER,"-").concat(q.H.PROFILE,"/").concat(e,"/"),s,t,(e=>(0,M.So)(e,null,"User Updated successfully!")));return null===n||void 0===n?void 0:n.data},update:async(e,s)=>{const a=new Q.Ay,n=await a.put("".concat(q.H.USER,"/").concat(e,"/"),s,t,(e=>(0,M.So)(e,null,"User Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{if(!e)return;const s=new Q.Ay,a=await s.delete("".concat(q.H.USER,"/").concat(e,"/"),t,(e=>(0,M.So)(e,null,"User deleted successfully!")));return null===a||void 0===a?void 0:a.data},opratorList:async function(){var e;const s=new Q.Ay,a=await s.get("".concat(q.H.OPERATORS,"/"),{},t,M.So);return(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.results.length)>0?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data.results,a.data.count]):[[],0]},createOperator:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=new Q.Ay,a=await s.post("".concat(q.H.OPERATORS,"/"),e,t,(e=>(0,M.So)(e,null,"User created successfully!")));return null===a||void 0===a?void 0:a.data},updateOperator:async(e,s)=>{const a=new Q.Ay,n=await a.put("".concat(q.H.OPERATOR,"/").concat(e,"/"),s,t,(e=>(0,M.So)(e,null,"Operator Updated successfully!")));return null===n||void 0===n?void 0:n.data},removeOperator:async e=>{if(!e)return;const s=new Q.Ay,a=await s.delete("".concat(q.H.OPERATOR,"/").concat(e,"/"),t,(e=>(0,M.So)(e,null,"Operator deleted successfully!")));return null===a||void 0===a?void 0:a.data},listByUserName:async e=>{const s={username:e},a=new Q.Ay,n=await a.post("search-by-username/",s,t,(e=>(0,M.So)(e,null)));return null!==n&&void 0!==n&&n.data?null===n||void 0===n?void 0:n.data:[[]]},listByAadhar:async e=>{const s={aadhar_number:e},a=new Q.Ay,n=await a.post("search-by-aadhar/",s,t,(e=>(0,M.So)(e,null)));return null!==n&&void 0!==n&&n.data?null===n||void 0===n?void 0:n.data:[[]]},listByAadhar2:async e=>{const s=new Q.Ay,a=await s.get("".concat(q.H.USERS,"/"),{},t,M.So);if(null!==a&&void 0!==a&&a.data){return a.data.filter((e=>e.is_operator)).map((e=>({value:e.username,key:e.id})))}return[[],0]},updateOpSkill:async(e,s)=>{const a=new Q.Ay,n=await a.post("training/update-skill/".concat(e,"/"),s,t,(e=>(0,M.So)(e,null,"Skill Updated successfully!")));return null===n||void 0===n?void 0:n.data},createByCsv:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=new Q.Ay,a=await s.post("".concat(q.H.USERS,"/"),e,t,(e=>(0,M.So)(e,null)));return null===a||void 0===a?void 0:a.data},updateProfileCSV:async(e,s)=>{const a=new Q.Ay,n=await a.put("".concat(q.H.USER,"-").concat(q.H.PROFILE,"/").concat(e,"/"),s,t,(e=>(0,M.So)(e,null)));return null===n||void 0===n?void 0:n.data}}};var B=s(9145),X=s(7810),V=s(2895),Z=s(8595);const J=e=>{let{open:t,onClose:s,data:a,setData:n,onSubmit:i,handleAdd2:r,loading:o,tab:c}=e;const d=[{title:"User Name",placeholder:"Enter User Name",type:z.wN.INPUT,name:"username",validator:z.wY.REQUIRED},{title:"Email",placeholder:"Enter Email",type:z.wN.INPUT,name:"email",validator:z.wY.EMAIL},{title:"Full Name",placeholder:"Enter Full Name",type:z.wN.INPUT,name:"fullname"}],u=[{title:"Aadhar Number",placeholder:"Aadhar Number",type:z.wN.INPUT,name:"aadhar_no",inputType:"number",validator:z.wY.REQUIRED&&z.wY.AADHAR},{title:"Full Name",placeholder:"Enter Full Name",type:z.wN.INPUT,name:"fullname"}],p=[{title:"Phone Number",placeholder:"Phone Number",type:z.wN.INPUT,name:"phone_number",inputType:"number",validator:z.wY.PHONE},{title:"Employee Id",placeholder:"employee_id",type:z.wN.INPUT,name:"employee_id"},"Users"===c&&{title:"Aadhar Number",placeholder:"Aadhar Number",type:z.wN.INPUT,name:"aadhar_number",inputType:"number",validator:z.wY.AADHAR},{title:"Employee Type",placeholder:"Employee Type",type:z.wN.INPUT,name:"employee_type"},{title:"Date of Joining",placeholder:"date_of_joining",type:z.wN.DATE,name:"date_of_joining"}],[m,x]=(0,A.useState)(new Map),[h,w]=(0,A.useState)(0);return(0,H.jsxs)(X.A,{open:t,onClose:s,width:"min(700px,90vw)",wrapperClasses:"px-5",children:[(0,H.jsxs)("h3",{className:"opacity-80",children:["ADD ",c]}),(0,H.jsx)(V.A,{data:a,errors:m,onChange:e=>{const{name:t,value:s}=e.target;x((e=>(e.delete(t),e))),n((e=>({...e,[t]:s})))},schema:0===h?"Users"===c?d:u:p}),(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,H.jsx)(B.A,{bordered:!0,gray:!0,onClick:s,children:"Cancel"}),(0,H.jsx)(B.A,{onClick:async()=>{if(0===h){const e=(0,Z.bG)("Users"===c?d:u,a);if(console.log("_errors",e),x(e),e.size)return;return await i(),void w((e=>e+1))}if(1===h){const e=(0,Z.bG)(p,a);if(x(e),e.size)return;return await r(),void w(0)}},loading:o,children:"Next"})]})]})};var K=s(8903);const $=e=>{let{open:t,onClose:s,data:a,setData:n,onSubmit:r,loading:o,tab:c}=e;return(0,H.jsxs)(X.A,{open:t,onClose:s,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,H.jsx)("h3",{className:"opacity-80",children:"ADD REPORT"}),(0,H.jsxs)(K.Ay,{display:"grid",sx:{pt:1,gap:1},gridTemplateColumns:{sm:"repeat(4, 1fr)",xs:"repeat(4, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontWeight:"bold"},children:"S no"}),(0,H.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Item Name"}),(0,H.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Plan"}),(0,H.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Actual"}),[{itemName:"item 1",plan:1e3},{itemName:"item 2",plan:800},{itemName:"item 3",plan:1e3}].map(((e,t)=>(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(i.A,{children:t+1}),(0,H.jsx)(i.A,{sx:{textTransform:"capitalize"},children:e.itemName}),(0,H.jsx)(i.A,{children:e.plan}),(0,H.jsx)("input",{type:"text"})]})))]}),(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,H.jsx)(B.A,{bordered:!0,gray:!0,onClick:s,children:"Cancel"}),(0,H.jsx)(B.A,{onClick:r,loading:o,children:"Create"})]})]})};var ee=s(8939),te=s(4056),se=s(3768),ae=s(3159),ne=s(3845);const le=e=>{let{title:t="N/A",color:s}=e;return t?(0,H.jsx)(ne.A,{label:t,variant:"filled",sx:{backgroundColor:s||"#C1FFB6",fontSize:"10px","& .MuiChip-label":{fontSize:"13px"}},size:"small"}):(0,H.jsx)("p",{className:"c-gray fs-12 ml-1",children:"N/A"})};var ie=s(3374),re=s(3875),oe=s(4973),ce=s(5766),de=s.n(ce);const ue=s.p+"static/media/SampleSheet.2da2e90959e1d87dfed0.csv",pe=s.p+"static/media/userCsv.418d2ad887b470847e45.csv",me=s.p+"static/media/operatorCsv.85d82e3f977b5241cc03.csv",xe=s.p+"static/media/mcq.5b1c6a93631799f90371.csv",he=(0,C.A)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),Ae=e=>{let{file:t,setFile:s,loading:a,open:n,onClose:i,onSubmit:r,setCsvData:o,tab:c}=e;const[d,u]=(0,A.useState)(!1);return(0,H.jsxs)(X.A,{open:n,onClose:i,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,H.jsx)("h3",{className:"opacity-80",children:"UPLOAD CSV"}),(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",my:3,children:[(0,H.jsx)("p",{className:"c-gray",children:"Need assistance?"}),(0,H.jsx)(B.A,{bordered:!0,color:"orange",height:"30px",onClick:()=>{window.open("Users"===c?pe:"Operators"===c?me:"question"===c?xe:ue,"_blank")},children:"Download sample CSV"})]}),(0,H.jsxs)(m.A,{className:"h-400 w-full rounded-10 flex flex-col items-center justify-center",sx:{border:"2px dotted ".concat(z.lm.GRAY)},children:[(0,H.jsx)(ie.A,{fontSize:"large",color:"disabled"}),(0,H.jsx)("h3",{className:"opacity-80",children:"Drop your file here to upload"}),!!t&&(0,H.jsxs)("p",{className:"".concat(d?"c-red":"c-primary"," flex items-center"),children:[(0,H.jsx)(re.A,{fontSize:"small"})," ",null===t||void 0===t?void 0:t.name]}),(0,H.jsxs)(B.A,{onClick:e=>document.getElementById("file").click(),children:[(0,H.jsx)(oe.A,{})," Upload File"]}),(0,H.jsx)(he,{type:"file",id:"file",onChange:async e=>{var t,a;const n=e.target.files[0];console.log("file-----",n),n&&(null!==n&&void 0!==n&&null!==(t=n.type)&&void 0!==t&&null!==(a=t.toLowerCase())&&void 0!==a&&a.includes("csv")?(u(!1),de().parse(n,{header:!1,complete:function(e){console.log("csv res-----------",null===e||void 0===e?void 0:e.data),o(null===e||void 0===e?void 0:e.data)}}),s(n)):u("The selected file is not a csv file!"))}})]}),!!d&&(0,H.jsx)("p",{className:"fw-500 c-red text-center",children:d}),(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",my:2,children:[(0,H.jsx)(B.A,{bordered:!0,gray:!0,onClick:i,children:"Cancel"}),(0,H.jsx)(B.A,{disabled:d||!t,onClick:r,loading:a,children:"Create"})]})]})};var we=s(630),ge=s(7739),ye=s(6178),fe=s.n(ye),je=s(7201);const ve=e=>{let{open:t,onClose:s,data:a,setData:n,onSubmit:i,loading:r,users:o,skill:c,edit:d}=e;const[u,p]=(0,A.useState)(new Map),m=[{title:"Supervisor",placeholder:"Select Supervisor",type:z.wN.SELECT,name:"supervisor",validator:z.wY.REQUIRED,keyValues:o},{title:"Skill",placeholder:"Select Skill",type:z.wN.SELECT,name:"skill",validator:z.wY.REQUIRED,keyValues:c}];return(0,H.jsxs)(X.A,{open:t,onClose:s,width:"min(700px,90vw)",wrapperClasses:"px-5",children:[(0,H.jsxs)("h3",{className:"opacity-80",children:[d?"Edit":"Add"," Supervisor"]}),(0,H.jsx)(V.A,{data:a,errors:u,onChange:e=>{const{name:t,value:s}=e.target;p((e=>(e.delete(t),e))),n((e=>({...e,[t]:s})))},schema:m}),(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,H.jsx)(B.A,{bordered:!0,gray:!0,onClick:s,children:"Cancel"}),(0,H.jsx)(B.A,{onClick:async()=>{const e=(0,Z.bG)(m,a);p(e),e.size||await i()},loading:r,children:"Submit"})]})]})},Se=e=>{let{open:t,onClose:s,data:a,setData:n,onSubmit:i,loading:r,users:o,testList:c}=e;const[d,u]=(0,A.useState)(new Map),[p,m]=(0,A.useState)(0),[x,h]=(0,A.useState)([]),w=[{title:"Skill",placeholder:"Select Skill",type:z.wN.SELECT,name:"skill",validator:z.wY.REQUIRED,keyValues:o}];return(0,H.jsxs)(X.A,{open:t,onClose:s,width:"min(700px,90vw)",wrapperClasses:"px-5",children:[(0,H.jsx)("h3",{className:"opacity-80",children:"Add Skill"}),(0,H.jsx)(V.A,{data:a,errors:d,onChange:e=>{const{name:t,value:s}=e.target;u((e=>(e.delete(t),e))),n((e=>({...e,[t]:s})))},schema:w}),(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,H.jsx)(B.A,{bordered:!0,gray:!0,onClick:s,children:"Cancel"}),(0,H.jsx)(B.A,{onClick:async()=>{const e=(0,Z.bG)(w,a);u(e),e.size||await i()},loading:r,children:"Submit"})]})]})},Ce=()=>{const{token:e}=(0,g.d4)((e=>e[F.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const s=new Q.Ay,a=await s.get("training/skills/?page=".concat(e,"&page_size=",10),{},t,M.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=new Q.Ay,a=await s.post("training/skills/",e,t,(e=>(0,M.So)(e,null,"Skill created successfully!")));return null===a||void 0===a?void 0:a.data},updateProfile:async(e,s)=>{const a=new Q.Ay,n=await a.put("".concat(q.H.USER,"-").concat(q.H.PROFILE,"/").concat(e,"/"),s,t,(e=>(0,M.So)(e,null,"User Updated successfully!")));return null===n||void 0===n?void 0:n.data},update:async(e,s)=>{const a=new Q.Ay,n=await a.put("".concat(q.H.USER,"/").concat(e,"/"),s,t,(e=>(0,M.So)(e,null,"User Updated successfully!")));return null===n||void 0===n?void 0:n.data},addSupervisor:async(e,s)=>{const a=new Q.Ay,n=await a.put("training/skill/".concat(e,"/"),s,t,(e=>(0,M.So)(e,null,"Supervisor Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{if(!e)return;const s=new Q.Ay,a=await s.delete("training/skills/".concat(e,"/"),t,(e=>(0,M.So)(e,null,"Skill deleted successfully!")));return null===a||void 0===a?void 0:a.data},opratorList:async function(){var e;const s=new Q.Ay,a=await s.get("".concat(q.H.OPERATORS,"/"),{},t,M.So);return(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.results.length)>0?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data.results,a.data.count]):[[],0]},createOperator:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=new Q.Ay,a=await s.post("".concat(q.H.OPERATORS,"/"),e,t,(e=>(0,M.So)(e,null,"User created successfully!")));return null===a||void 0===a?void 0:a.data},updateOperator:async(e,s)=>{const a=new Q.Ay,n=await a.put("".concat(q.H.OPERATOR,"/").concat(e,"/"),s,t,(e=>(0,M.So)(e,null,"Operator Updated successfully!")));return null===n||void 0===n?void 0:n.data},removeOperator:async e=>{if(!e)return;const s=new Q.Ay,a=await s.delete("".concat(q.H.OPERATOR,"/").concat(e,"/"),t,(e=>(0,M.So)(e,null,"Operator deleted successfully!")));return null===a||void 0===a?void 0:a.data},updateSkill:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const a=new Q.Ay,n=await a.put("training/skill/".concat(s,"/"),e,t,(e=>(0,M.So)(e,null,"Skill created successfully!")));return null===n||void 0===n?void 0:n.data}}},ke=()=>{const[e,t]=(0,A.useState)("Users"),[s,a]=(0,A.useState)([]),[n,o]=(0,A.useState)([]),[c,d]=(0,A.useState)(),[u,p]=(0,A.useState)(0),[m,x]=(0,A.useState)(!1),[h,w]=(0,A.useState)([]),[g,y]=(0,A.useState)(0),[f,j]=(0,A.useState)(null),[v,S]=(0,A.useState)({}),[C,k]=(0,A.useState)([]),[_,b]=(0,A.useState)(""),[T,N]=(0,A.useState)([]),[E,R]=(0,A.useState)(""),[I,P]=(0,A.useState)(""),[D,U]=(0,A.useState)(!1),{list:L,create:O,updateProfile:z,update:M,userProfile:Q,remove:q,listByUserName:F,listByAadhar:X,updateOpSkill:V,createByCsv:Z,updateProfileCSV:K}=W(),{list:ne}=Ce();(0,A.useEffect)((()=>{a([]),re()}),[g,e]),(0,A.useEffect)((()=>{ie()}),[]);const ie=async()=>{const[e]=await ne(g+1),t=e.results.map((e=>({value:e.skill_name,key:e.id})));k((e=>[...e,...t]))},re=async()=>{d("fetch");try{const[e,t]=await L(g+1),s=e.filter((e=>e.is_operator)),n=e.filter((e=>!e.is_operator)),l=e.filter((e=>!e.is_operator&&!0===e.status)).map((e=>({value:e.username,key:e.id})));N(l),a(n),p(t);const i=await Promise.all(s.map((e=>Q(e.id))));o(i)}catch(_e){console.error("Error fetching users:",_e)}finally{d(!1)}},oe=async()=>{const t={...v};localStorage.setItem("op_ad_no",v.aadhar_no),t.is_operator="Users"!==e,t.status=!1,"Operators"===e&&(t.username="op_".concat(v.aadhar_no)),console.log("id response--------",t),d("fetch");const s=await O(t);b(s.id),S({}),d(!1)},ce=async(t,s,a)=>{d("fetch");const n={is_admin:!0!==s},l={status:!0!==s};"Users"===e?await M(t,"status"===a?l:n):M(t,"status"===a?l:n),await re(),d(!1)},de=[{id:1,title:"Email",render:e=>e.email},{id:2,title:"User Name",render:e=>e.username},{id:3,title:"Full Name",render:e=>e.fullname},{id:5,title:"Role",render:e=>(0,H.jsx)(le,{title:e.is_admin?"admin":"Na"})},{id:6,title:"Actions",render:t=>(0,H.jsx)(H.Fragment,{children:(0,H.jsxs)(l.A,{flexDirection:"row",sx:{gap:1},children:[(0,H.jsx)(B.A,{width:"10%",color:t.status?"green":"red",onClick:()=>ce(null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.status,"status"),children:t.status?"Active":"Inactive"}),(0,H.jsx)(r.A,{sx:{height:25,width:25},onClick:()=>(async e=>{d("fetch"),await q(e),await re(),d(!1)})(null===t||void 0===t?void 0:t.id),children:(0,H.jsx)(se.A,{color:"error",fontSize:"small"})}),"Users"===e&&!1===(null===t||void 0===t?void 0:t.is_admin)?(0,H.jsx)(ge.A,{title:"Make Admin",children:(0,H.jsx)(r.A,{sx:{height:25,width:25},onClick:()=>ce(null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.is_admin,"delete"),children:(0,H.jsx)(we.A,{color:t.is_admin?"error":"success",fontSize:"small"})})}):null]})})}],ue=[{id:4,title:"Aadhar Number",render:e=>e.aadhar_number},{id:1,title:"Date of Joining",render:e=>fe()(e.date_of_joining).format("ll")},{id:11,title:"Supervisor",render:t=>{var s;return(0,H.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center"},children:[t.passed_induction&&(0,H.jsx)(i.A,{children:null===(s=t.supervisor)||void 0===s?void 0:s.username}),"Users"!==e&&(t.passed_induction?(0,H.jsx)(ge.A,{title:t.supervisor?"Edit Supervisor":"Add Supervisor",children:(0,H.jsx)(r.A,{sx:{height:25,width:25},onClick:()=>{t.supervisor?U(!0):U(!1),b(t.id),P(t.user.id),x("addSupervisor")},children:t.supervisor?(0,H.jsx)(ae.A,{fontSize:"small",color:"primary"}):(0,H.jsx)(je.A,{})})}):(0,H.jsx)(i.A,{children:"Induction not passed"}))]})}},{id:6,title:"Actions",render:t=>(0,H.jsx)(H.Fragment,{children:(0,H.jsxs)(l.A,{flexDirection:"row",sx:{gap:1,alignItems:"center"},children:[(0,H.jsx)(B.A,{width:"10%",color:t.user.status?"green":"red",onClick:()=>ce(null===t||void 0===t?void 0:t.user.id,null===t||void 0===t?void 0:t.user.status,"status"),children:!0===t.user.status?"Active":"Inactive"}),"Users"===e&&!1===(null===t||void 0===t?void 0:t.is_admin)?(0,H.jsx)(ge.A,{title:"Make Admin",children:(0,H.jsx)(r.A,{sx:{height:25,width:25},onClick:()=>ce(null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.is_admin,"delete"),children:(0,H.jsx)(we.A,{color:t.is_admin?"error":"success"})})}):null]})})}],pe=async()=>{d("fetch");const e={skill:v.skill,supervisor:v.supervisor};V(I,e),x(!1),await re(),d(!1)};return(0,H.jsxs)("div",{className:"mx-3 my-2 fw-500",children:[(0,H.jsx)(ee.A,{value:e,onChange:(e,s)=>{t(s),y(0),R("")},className:"mb-2 fw-500",children:["Users","Operators"].map(((e,t)=>(0,H.jsx)(te.A,{label:e,className:"fw-500",value:e})))}),(0,H.jsxs)("div",{className:"flex items-center justify-between",children:[(0,H.jsx)(l.A,{children:(0,H.jsx)(G.A,{height:"37px",value:E,placeholder:"Users"===e?"Search By username":"Search by Aadhar Number",onChange:t=>{R(t.target.value),""===t.target.value&&re(),"Users"===e?(async e=>{d("fetch");const[t]=await F(e);void 0!==t&&a([t]),d(!1)})(t.target.value):(async e=>{const[t,s]=await X(e);void 0!==t&&o([t])})(t.target.value)}})}),(0,H.jsxs)(l.A,{justifyContent:"flex-end",direction:"row",sx:{mb:1},children:[(0,H.jsx)(B.A,{onClick:()=>x("csvUser"),bordered:!0,classes:"mr-1",children:"Upload CSV"}),(0,H.jsxs)(B.A,{onClick:()=>x("add"),children:["Create ",e]})]})]}),(0,H.jsx)(Y,{columns:"Users"===e?de:ue,rows:"Users"===e?s:n,rowsPerPage:10,loading:"fetch"===c,titleCellClasses:"c-gray fw-700",page:g,setPage:y,paginator:!0,serialize:!0,total:u}),(0,H.jsx)(J,{open:"add"===m,onClose:()=>x(!1),data:v,setData:S,onSubmit:oe,loading:"add"===c,tab:e,handleAdd2:async()=>{const t={...v};"Operators"===e&&(t.aadhar_number=localStorage.getItem("op_ad_no")),t.is_operator="Users"!==e,t.status=!1,d("fetch");let s=await Q(_);await z(s.id,t),x(!1),await re(),d(!1)}}),(0,H.jsx)($,{open:"Report"===m,onClose:()=>x(!1),onSubmit:oe}),(0,H.jsx)(ve,{data:v,setData:S,open:"addSupervisor"===m,onClose:()=>x(!1),onSubmit:async()=>{d("fetch");const e={add_supervisor:v.supervisor};z(_,e),pe(),x(!1),d(!1)},users:T,skill:C,edit:D}),(0,H.jsx)(Se,{data:v,setData:S,open:"addSkill"===m,onClose:()=>x(!1),onSubmit:pe,users:C}),(0,H.jsx)(Ae,{onClose:()=>x(!1),open:"csvUser"===m,onSubmit:async()=>{const t=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;h.slice(1).map((async s=>{if("Users"===e){if(""!==s[0]&&t.test(s[2])){const e={username:s[0],fullname:s[1],email:s[2],status:!1},t=await Z(e),a=null===t||void 0===t?void 0:t.id,n={phone_number:s[3],aadhar_number:s[4],employee_id:s[5],employee_type:s[6],date_of_joining:s[7],status:!1};let l=await Q(a);await K(l.id,n)}await re()}else if("Operators"===e){if(""!==s[2]&&""!==s[0]&&12===s[2].length){console.log("operator item",s);const e={aadhar_number:s[2],username:"op_"+s[2],fullname:s[0],is_operator:!0},t=await Z(e),a=null===t||void 0===t?void 0:t.id,n={aadhar_number:s[2],is_operator:!0,phone_number:s[1],employee_id:s[3],employee_type:s[4],date_of_joining:s[5]};let l=await Q(a);await K(l.id,n)}await re()}})),x(!1)},file:f,setFile:j,setCsvData:w,tab:e})]})},_e=()=>{const[e,t]=(0,A.useState)(0),[s,a]=(0,A.useState)(""),[n,r]=(0,A.useState)(""),[o,c]=(0,A.useState)({company:"",location:"",division:"",line:""});return(0,H.jsx)(l.A,{children:(0,H.jsx)(i.A,{variant:"h1",children:"404"})})},be=()=>{const{token:e}=(0,g.d4)((e=>e[F.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){const e=new Q.Ay,s=await e.get("".concat(q.H.ASSET,"/").concat(q.H.GROUPS,"/"),{},t,M.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=new Q.Ay,a=await s.post("".concat(q.H.ASSET,"/").concat(q.H.GROUPS,"/"),e,t,(e=>(0,M.So)(e,null,"Group created successfully!")));return null===a||void 0===a?void 0:a.data},update:async e=>{const s={name:e.name,metadata:e.metadata},a=new Q.Ay,n=await a.put("".concat(q.H.ASSET,"/").concat(q.H.GROUP,"/").concat(e.id,"/"),s,t,(e=>(0,M.So)(e,null,"Group Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const s=new Q.Ay,a=await s.delete("".concat(q.H.ASSET,"/").concat(q.H.GROUP,"/").concat(e,"/"),t,(e=>(0,M.So)(e,null,"Group deleted successfully!")));return null===a||void 0===a?void 0:a.data},allAssets:async function(){const e=new Q.Ay,s=await e.get("".concat(q.H.ASSET,"/").concat(q.H.ALLASSETS,"/"),{},t);return null!==s&&void 0!==s&&s.data?[null===s||void 0===s?void 0:s.data]:[[],0]},groupAsset:async e=>{const s=new Q.Ay,a=await s.get("".concat(q.H.ASSET,"/").concat(q.H.GROUP,"/").concat(e,"/"),{},t);return null===a||void 0===a?void 0:a.data},updateAssets:async(e,s)=>{const a=new Q.Ay,n=await a.put("".concat(q.H.ASSET,"/").concat(q.H.GROUP,"/").concat(s,"/"),e,t);return null===n||void 0===n?void 0:n.data}}},Te=()=>{const{token:e}=(0,g.d4)((e=>e[F.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){const e=new Q.Ay,s=await e.get("".concat(q.H.OPERATOR,"-").concat(q.H.GROUPS,"/"),{},t,M.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=new Q.Ay,a=await s.post("".concat(q.H.OPERATOR,"-").concat(q.H.GROUPS,"/"),e,t,(e=>(0,M.So)(e,null,"Group created successfully!")));return null===a||void 0===a?void 0:a.data},update:async e=>{const s={name:e.name,metadata:e.metadata},a=new Q.Ay,n=await a.put("".concat(q.H.OPERATOR,"-").concat(q.H.GROUP,"/").concat(e.id,"/"),s,t,(e=>(0,M.So)(e,null,"Group Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const s=new Q.Ay,a=await s.delete("".concat(q.H.OPERATOR,"-").concat(q.H.GROUP,"/").concat(e,"/"),t,(e=>(0,M.So)(e,null,"Group deleted successfully!")));return null===a||void 0===a?void 0:a.data},allOperator:async function(){const e=new Q.Ay,s=await e.get("".concat(q.H.OPERATORS,"/"),{},t);var a;return null!==s&&void 0!==s&&s.data?[null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.results]:[[],0]},groupOp:async e=>{const s=new Q.Ay,a=await s.get("".concat(q.H.OPERATOR,"-").concat(q.H.GROUP,"/").concat(e,"/"),{},t);return null===a||void 0===a?void 0:a.data},updateAssets:async(e,s)=>{const a=new Q.Ay,n=await a.put("".concat(q.H.OPERATOR,"-").concat(q.H.GROUP,"/").concat(s,"/"),e,t);return null===n||void 0===n?void 0:n.data}}},Ne=()=>{const{token:e}=(0,g.d4)((e=>e[F.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){const e=new Q.Ay,s=await e.get("".concat(q.H.USER,"-").concat(q.H.GROUPS,"/"),{},t,M.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=new Q.Ay,a=await s.post("".concat(q.H.USER,"-").concat(q.H.GROUPS,"/"),e,t,(e=>(0,M.So)(e,null,"Group created successfully!")));return null===a||void 0===a?void 0:a.data},update:async e=>{const s={name:e.name,metadata:e.metadata},a=new Q.Ay,n=await a.put("".concat(q.H.USER,"-").concat(q.H.GROUP,"/").concat(e.id,"/"),s,t,(e=>(0,M.So)(e,null,"Group Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const s=new Q.Ay,a=await s.delete("".concat(q.H.USER,"-").concat(q.H.GROUP,"/").concat(e,"/"),t,(e=>(0,M.So)(e,null,"Group deleted successfully!")));return null===a||void 0===a?void 0:a.data},allUser:async function(){const e=new Q.Ay,s=await e.get("".concat(q.H.USERS,"/"),{},t);return null!==s&&void 0!==s&&s.data?[null===s||void 0===s?void 0:s.data]:[[],0]},updateAssets:async(e,s)=>{const a=new Q.Ay,n=await a.put("".concat(q.H.USER,"-").concat(q.H.GROUP,"/").concat(s,"/"),e,t);return null===n||void 0===n?void 0:n.data},groupUser:async e=>{const s=new Q.Ay,a=await s.get("".concat(q.H.USER,"-").concat(q.H.GROUP,"/").concat(e,"/"),{},t);return null===a||void 0===a?void 0:a.data}}};var Ee=s(5502);const Re=e=>{let{open:t,onClose:s,data:a,setData:n,onSubmit:r,loading:o,edit:c,tab:d}=e;const{allAssets:u,groupAsset:p,updateAssets:m}=be(),{allOperator:x,groupOp:h,updateAssets:w}=Te(),{allUser:y,groupUser:f,updateAssets:j}=Ne(),[v,S]=(0,A.useState)(new Map),[C,k]=(0,A.useState)([]),[_,b]=(0,A.useState)([]),[T,N]=(0,A.useState)([]),E=(0,g.d4)((e=>{var t,s;return null===e||void 0===e||null===(t=e.SelectedId)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.id})),R=(0,g.d4)((e=>{var t,s;return null===e||void 0===e||null===(t=e.SelectedId)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.name}));(0,A.useLayoutEffect)((()=>{P()}),[""!==E]);const I=async(e,t)=>{let s=t;e.map((e=>{s.map(((t,a)=>{if(t.id===e.id){s.indexOf(t);s.splice(a,1)}}))})),k(s)},P=async()=>{if("Machines"===d){var e;const[t]=await u(),s=await p(E);I(s.assets,t),(null===(e=s.assets)||void 0===e?void 0:e.length)>0&&b(s.assets)}else if("Operators"===d){var t;const[e]=await x(),s=await h(E);I(s.operators,e),(null===(t=s.operators)||void 0===t?void 0:t.length)>0&&b(s.operators)}else if("Users"===d){var s;const[e]=await y(),t=await f(E);I(t.users,e),(null===(s=t.users)||void 0===s?void 0:s.length)>0&&b(t.users)}},D=async(e,t)=>{const s={remove:[e]},a={add:[e]};"Machines"===d?await m("add"===t?a:s,E):"Operators"===d?await w("add"===t?a:s,E):"Users"===d&&await j("add"===t?a:s,E),P()};return(0,H.jsxs)(X.A,{open:t,onClose:s,wrapperClasses:"px-5 pt-0 pb-4",width:"min(800px,90vw)",children:[(0,H.jsxs)("h3",{className:"opacity-80",style:{textTransform:"capitalize"},children:["(",R,") ",d," Management"]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:1,gap:1,height:400},children:[(0,H.jsxs)(l.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:z.lm.PRIMARY,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,H.jsxs)(i.A,{sx:{px:1},children:[d," in Group"]}),_.map(((e,t)=>(0,H.jsxs)(l.A,{sx:{flexDirection:"row",backgroundColor:z.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,H.jsxs)(i.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e.name||e.fullname||e.username]},e.name),(0,H.jsx)(Ee.A,{fontSize:"small",sx:{color:z.lm.DARK_RED,m:.2,cursor:"pointer"},onClick:()=>D(e.id,"remove")})]},t)))]}),(0,H.jsxs)(l.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:z.lm.PRIMARY,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,H.jsxs)(i.A,{sx:{px:1},children:["All ",d]}),C.map(((e,t)=>(0,H.jsxs)(l.A,{sx:{flexDirection:"row",backgroundColor:z.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,H.jsxs)(i.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e.name||e.fullname||e.username]},e.name),(0,H.jsx)(je.A,{fontSize:"small",sx:{color:z.lm.DARK_GREEN,m:.2,cursor:"pointer"},onClick:()=>D(e.id,"add")})]},t)))]})]})]})};var Ie=s(3985);const Pe=e=>{let{open:t,onClose:s,data:a,setData:n,onSubmit:i,loading:r,edit:o}=e;const c=[{title:"Group Name",placeholder:"Enter Group Name",type:z.wN.INPUT,name:"name",validator:z.wY.REQUIRED}],[d,u]=(0,A.useState)(new Map);return(0,H.jsxs)(X.A,{open:t,onClose:s,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,H.jsxs)("h3",{className:"opacity-80",children:[!0===o?"EDIT":"ADD"," NEW GROUP"]}),(0,H.jsx)(V.A,{data:a,errors:d,onChange:e=>{const{name:t,value:s}=e.target;u((e=>(e.delete(t),e))),n((e=>({...e,[t]:s})))},schema:c}),(0,H.jsx)(Ie.A,{setItemss:a.metadata,setJson:e=>n((t=>({...t,metadata:e}))),title:"Details"}),(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,H.jsx)(B.A,{bordered:!0,gray:!0,onClick:s,children:"Cancel"}),(0,H.jsx)(B.A,{onClick:i,loading:r,children:"Create"})]})]})};var De=s(9254);const Ue=e=>{var t;let{json:s={},icon:a}=e;return null!==(t=Object.values(s||{}))&&void 0!==t&&t.length?(0,H.jsx)(x.A,{dense:!0,disablePadding:!0,children:Object.entries(s).map((e=>{var t;let[s,n]=e;return(0,H.jsxs)(h.Ay,{dense:!0,disablePadding:!0,disableGutters:!0,alignItems:"center",className:"h-45",children:[(0,H.jsx)(r.A,{className:"h-25 w-25 mr-1 fs-10 c-gray",children:a}),(0,H.jsx)(p.A,{className:"capitalize",primary:null===s||void 0===s||null===(t=s.split("_"))||void 0===t?void 0:t.join(" "),secondary:n})]})}))}):(0,H.jsx)("p",{className:"c-gray fs-12 ml-1",children:"N/A"})};var Le=s(7404);const Oe=()=>{const e=(0,g.wA)(),[t,s]=((0,k.zy)(),(0,k.Zp)(),(0,A.useState)("Users")),[a,n]=(0,A.useState)([]),[o,c]=(0,A.useState)(),[d,u]=(0,A.useState)(0),[p,m]=(0,A.useState)(!1),[x,h]=(0,A.useState)(!1),[w,y]=(0,A.useState)(0),[f,j]=(0,A.useState)({name:"",metadata:{}}),{list:v,create:S,update:C,remove:_}=be(),{list:b,create:T,update:N,remove:E}=Te(),{list:R,create:I,update:P,remove:D}=Ne();(0,A.useEffect)((()=>{U()}),[w,t]);const U=async()=>{c("fetch");const[e,s]="Machines"===t?await v(w+1):await R(w+1);n(e),u(s),c(!1)},L=async()=>{const e={...f};c("fetch"),!0===p?"Machines"===t?await C(e):"Operators"===t?await N(e):await P(e):"Machines"===t?await S(e):"Operators"===t?await T(e):await I(e),j({name:"",metadata:{}}),h(!1),await U(),c(!1),m(!1)},O=[{id:1,title:"Group Name",render:t=>(0,H.jsx)(i.A,{color:"primary",sx:{cursor:"pointer",fontSize:20},onClick:()=>{e((0,Le.z)({id:t.id,name:t.name})),h("addremove")},children:t.name})},{id:3,title:"Details",render:e=>(0,H.jsx)(Ue,{icon:(0,H.jsx)(De.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})},{id:5,title:"Actions",render:e=>(0,H.jsxs)(l.A,{flexDirection:"row",children:[(0,H.jsx)(r.A,{sx:{height:25,width:25},onClick:()=>{m(!0),h("add"),j(e)},children:(0,H.jsx)(ae.A,{color:"primary",fontSize:"small"})}),(0,H.jsx)(r.A,{sx:{height:25,width:25},onClick:()=>(async e=>{c("fetch"),"Machines"===t?await _(e):"Operators"===t?await E(e):await D(e),await U(),c(!1)})(null===e||void 0===e?void 0:e.id),children:(0,H.jsx)(se.A,{color:"error",fontSize:"small"})})]})}];return(0,H.jsxs)("div",{className:"mx-3 my-2",children:[(0,H.jsxs)("div",{className:"flex items-center justify-between",children:[(0,H.jsx)(l.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,H.jsxs)("h1",{className:"mt-4",children:[t," Group's",(0,H.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",a.length,")"]})]})}),(0,H.jsxs)(B.A,{onClick:()=>h("add"),children:["Add ",t," Group"]})]}),(0,H.jsx)(Y,{columns:O,rows:a,rowsPerPage:5,loading:"fetch"===o,titleCellClasses:"c-gray fw-700",page:w,setPage:y,paginator:!0,serialize:!0,total:d}),(0,H.jsx)(Pe,{open:"add"===x,onClose:()=>{h(!1),m(!1)},data:f,edit:p,setData:j,onSubmit:L}),"addremove"===x&&(0,H.jsx)(Re,{open:"addremove"===x,onClose:()=>{h(!1)},data:f,setData:j,onSubmit:L,tab:t})]})},Ge=()=>{const{token:e}=(0,g.d4)((e=>e[F.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){const e=new Q.Ay,s=await e.get("".concat(q.H.ASSET,"/").concat(q.H.COMPANIES,"/"),{},t,M.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=new Q.Ay,a=await s.post("".concat(q.H.ASSET,"/").concat(q.H.COMPANIES,"/"),e,t,(e=>(0,M.So)(e,null,"Company created successfully!")));return null===a||void 0===a?void 0:a.data},update:async e=>{const s={name:e.name,metadata:e.metadata},a=new Q.Ay,n=await a.put("".concat(q.H.ASSET,"/").concat(q.H.COMPANY,"/").concat(e.id,"/"),s,t,(e=>(0,M.So)(e,null,"Company Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const s=new Q.Ay,a=await s.delete("".concat(q.H.ASSET,"/").concat(q.H.COMPANY,"/").concat(e,"/"),t,(e=>(0,M.So)(e,null,"Company deleted successfully!")));return null===a||void 0===a?void 0:a.data}}};var ze=s(7965),He=s(9761);const Ye=()=>{(0,k.Zp)();const[e,t]=(0,A.useState)([]),[s,a]=(0,A.useState)(),[n,o]=(0,A.useState)(0),[c,d]=(0,A.useState)(!1),[u,p]=(0,A.useState)(!1),[m,x]=(0,A.useState)(0),[h,g]=(0,A.useState)({name:"",metadata:{}}),{list:y,create:f,update:j,remove:v}=Ge();return(0,H.jsxs)("div",{className:"mx-3 my-2",children:[(0,H.jsx)("div",{className:"flex items-center justify-between",children:(0,H.jsx)("h1",{className:"mt-4",children:"Organization Profile"})}),(0,H.jsxs)(l.A,{sx:{backgroundColor:"#edf7ff"},children:[(0,H.jsx)(l.A,{sx:{backgroundColor:"#c5e3f7",height:"35vh"},children:(0,H.jsx)("img",{width:"100%",height:"100%",alt:"image industry",style:{objectFit:"cover"},src:"https://www.advsyscon.com/blog/wp-content/uploads/intelligent-process-automation-examples.jpg"})}),(0,H.jsx)(l.A,{sx:{backgroundColor:"yellow",height:"30vh",borderRadius:"50%",width:"18%",alignSelf:"center",mt:-15,overflow:"hidden"},children:(0,H.jsx)("img",{width:"100%",height:"100%",alt:"image industry",src:"https://wellgroomedgentleman.com/wp-content/uploads/2023/10/Tony_Stark_Beard_with_Quiff_Hairstyle.width-800.jpg"})}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"center",my:2},children:[(0,H.jsx)(r.A,{sx:{p:1,color:"black"},children:(0,H.jsx)(ze.A,{})}),(0,H.jsx)(r.A,{sx:{p:1,color:"black"},children:(0,H.jsx)(He.A,{})}),(0,H.jsx)(r.A,{sx:{p:1,color:"black"},children:(0,H.jsx)(S.A,{})}),(0,H.jsx)(r.A,{sx:{p:1,color:"black"},children:(0,H.jsx)(ae.A,{})})]})]}),(0,H.jsxs)(K.Ay,{display:"grid",sx:{gap:1,mt:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,H.jsxs)(l.A,{sx:{backgroundColor:"#edf7ff",p:1},children:[(0,H.jsx)(i.A,{variant:"h6",sx:{textTransform:"uppercase"},children:"Organizational Details"}),(0,H.jsx)(w.A,{}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:2,mt:1},children:[(0,H.jsx)(i.A,{children:"Organizational Name :"}),(0,H.jsx)(i.A,{children:"Dhoot Transmission"})]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:2},children:[(0,H.jsx)(i.A,{children:"Joining Code :"}),(0,H.jsx)(i.A,{children:"SNL1234"})]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:2},children:[(0,H.jsx)(i.A,{children:"Organization Type :"}),(0,H.jsx)(i.A,{children:"Dhoot Transmission"})]})]}),(0,H.jsxs)(l.A,{sx:{backgroundColor:"#edf7ff",p:1},children:[(0,H.jsx)(i.A,{variant:"h6",sx:{textTransform:"uppercase"},children:"Address Details"}),(0,H.jsx)(w.A,{}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:2,mt:1},children:[(0,H.jsx)(i.A,{children:"Address :"}),(0,H.jsx)(i.A,{children:"Hoshyarpur, Haryana 202098 "})]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:2},children:[(0,H.jsx)(i.A,{children:"City :"}),(0,H.jsx)(i.A,{children:"Hoshyarpur"})]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:2},children:[(0,H.jsx)(i.A,{children:"State :"}),(0,H.jsx)(i.A,{children:"Haryana"})]})]}),(0,H.jsxs)(l.A,{sx:{backgroundColor:"#edf7ff",p:1},children:[(0,H.jsx)(i.A,{variant:"h6",sx:{textTransform:"uppercase"},children:"General Details"}),(0,H.jsx)(w.A,{}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:2,mt:1},children:[(0,H.jsx)(i.A,{children:"GSTIN :"}),(0,H.jsx)(i.A,{children:"GSTIN202098 "})]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:2},children:[(0,H.jsx)(i.A,{children:"Module Access :"}),(0,H.jsx)(l.A,{sx:{width:"70%"},children:(0,H.jsxs)(K.Ay,{sx:{gap:1},children:[(0,H.jsx)(ne.A,{sx:{mb:.5,ml:.2},label:"Module 1"}),(0,H.jsx)(ne.A,{sx:{mb:.5,ml:.2},label:"Module 2"}),(0,H.jsx)(ne.A,{sx:{mb:.5,ml:.2},label:"Module 3"}),(0,H.jsx)(ne.A,{sx:{mb:.5,ml:.2},label:"Module 4"}),(0,H.jsx)(ne.A,{sx:{mb:.5,ml:.2},label:"Module 5"}),(0,H.jsx)(ne.A,{sx:{mb:.5,ml:.2},label:"Module 6"})]})})]})]}),(0,H.jsxs)(l.A,{sx:{backgroundColor:"#edf7ff",p:1},children:[(0,H.jsx)(i.A,{variant:"h6",sx:{textTransform:"uppercase"},children:"Additional Details"}),(0,H.jsx)(w.A,{}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:2,mt:1},children:[(0,H.jsx)(i.A,{children:"Created On :"}),(0,H.jsxs)(i.A,{children:[fe()().format("llll")," "]})]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:2},children:[(0,H.jsx)(i.A,{children:"Last Modified :"}),(0,H.jsx)(i.A,{children:fe()().format("llll")})]})]})]})]})},Me=()=>{const{token:e}=(0,g.d4)((e=>e[F.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":Q.yw.APPLICATION_JSON};return{question_list:async function(){const e=new Q.Ay,s=await e.get("training/question-bank/",{},t,M.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},skill_question_list:async function(){let e=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,a=await s.get("training/skill-questions/".concat(e,"/"),{},t,M.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},skill_list:async function(){const e=new Q.Ay,s=await e.get("training/skills/",{},t,M.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},induction_question:async function(){const e=new Q.Ay,s=await e.get("training/induction-questions/",{},t,M.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},hr_question:async function(){const e=new Q.Ay,s=await e.get("training/miscellaneous-questions/",{},t,M.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},result:async e=>{const s=new Q.Ay,a=await s.get("training/update-test-results/".concat(e,"/"),{},t,M.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},get_Test:async e=>{const s=new Q.Ay,a=await s.get("training/test-instance/".concat(e,"/"),{},t,M.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},test_list:async function(){const e=new Q.Ay,s=await e.get("training/test-masters/",{},t,M.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},createTest:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=new Q.Ay,a=await s.post("training/test-masters/",e,t,(e=>(0,M.So)(e,null)));return null===a||void 0===a?void 0:a.data},assignExam:async e=>{const s=new Q.Ay,a=await s.post("training/".concat(e.test,"/test-instance/").concat(e.operator.key,"/"),{},t,(e=>(0,M.So)(e,null,"Test Successfully Assign !")));return null===a||void 0===a?void 0:a.data},addQuestion:async(e,s)=>{const a=new Q.Ay,n=await a.put("training/test-master/".concat(e,"/"),s,t,(e=>(0,M.So)(e,null,"Test Updated Successfully!")));return null===n||void 0===n?void 0:n.data},updateTest:async(e,s)=>{const a=new Q.Ay,n=await a.put("training/test-instance/".concat(e,"/"),s,t,(e=>(0,M.So)(e,null)));return null===n||void 0===n?void 0:n.data},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=new Q.Ay,a=await s.post("training/question-bank/",e,t,(e=>(0,M.So)(e,null)));return null===a||void 0===a?void 0:a.data},updateProfile:async(e,s)=>{const a=new Q.Ay,n=await a.put("".concat(q.H.USER,"-").concat(q.H.PROFILE,"/").concat(e,"/"),s,t,(e=>(0,M.So)(e,null,"User Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{if(!e)return;const s=new Q.Ay,a=await s.delete("".concat(q.H.USER,"/").concat(e,"/"),t,(e=>(0,M.So)(e,null,"User deleted successfully!")));return null===a||void 0===a?void 0:a.data},linkPlanTestMaster:async(e,s)=>{const a=new Q.Ay,n=await a.put("training/training/".concat(e,"/"),s,t,(e=>(0,M.So)(e,null)));return null===n||void 0===n?void 0:n.data}}};var Qe=s(9413),qe=s(4605),Fe=s(1962);const We=e=>{let{open:t,onClose:s,data:a,setData:n,onStart:r,loading:o,edit:c,setModalOpen:d,testData:u}=e;return(0,H.jsx)(H.Fragment,{children:(0,H.jsxs)(m.A,{sx:{display:"flex",gap:2},children:[(0,H.jsxs)(l.A,{sx:{width:"55%"},children:[(0,H.jsx)(l.A,{sx:{backgroundColor:z.lm.LG_BG_BLUE,borderRadius:2,p:2},children:(0,H.jsx)(i.A,{className:"fw-600-16",children:(null===u||void 0===u?void 0:u.test.test_name)||"sass"})}),(0,H.jsxs)(l.A,{className:"fw-500-14",sx:{backgroundColor:z.lm.LIGHT_GRAY,mt:2,borderRadius:2,p:2},children:[(0,H.jsx)(i.A,{className:"fw-500-14",children:"You are going to start the Test, Please read carefully below Instructions"}),(0,H.jsxs)(l.A,{children:[(0,H.jsxs)(i.A,{className:"fw-500-14",children:["1.The test is designed to test your Skill - ",(null===u||void 0===u?void 0:u.test.skill)||(null===u||void 0===u?void 0:u.test.test_type)]}),(0,H.jsxs)(i.A,{className:"fw-500-14",children:["2.The time duration is ",(null===u||void 0===u?void 0:u.test.alloted_minutes)||"-"," mins."]}),(0,H.jsxs)(i.A,{className:"fw-500-14",children:["3.The test will auto close  at ",(null===u||void 0===u?void 0:u.test.alloted_minutes)||"-"," mins"]}),(0,H.jsx)(i.A,{className:"fw-500-14",children:"4.Each question is on 1 mark."}),(0,H.jsxs)(i.A,{className:"fw-500-14",children:["5.There are ",(null===u||void 0===u?void 0:u.test.maximum_questions)||"-"," Questions."]}),(0,H.jsx)(i.A,{className:"fw-500-14",children:"6.There is no negative marking "}),(0,H.jsx)(i.A,{className:"fw-500-14",children:"7.Choose only one best answer"}),(0,H.jsx)(i.A,{className:"fw-500-14",children:"8.You can go back and change your answers."}),(0,H.jsx)(i.A,{className:"fw-500-14",children:"9.Please take the test at one go."}),(0,H.jsx)(i.A,{className:"fw-500-14",children:"10.Please click submit when you are finished"})]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",mt:2},children:[(0,H.jsx)(B.A,{color:"gray",children:"Back"}),(0,H.jsx)(B.A,{color:"light_green",onClick:()=>{d("start"),r()},children:"Start"})]})]})]}),(0,H.jsx)(l.A,{sx:{width:"43%"},children:(0,H.jsxs)(l.A,{sx:{backgroundColor:z.lm.LIGHT_GRAY,borderRadius:2,p:2},children:[(0,H.jsx)(i.A,{className:"fw-600-16",children:"Sample Question 1"}),(0,H.jsx)(i.A,{sx:{mt:1},className:"fw-600-16",children:"Tick the correct answer or Answers and  Submit"}),(0,H.jsx)(i.A,{sx:{mt:1},className:"fw-500-14",children:"Question 1"}),(0,H.jsx)(i.A,{sx:{mt:1,mb:1},className:"fw-500-14",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}),[{option:"Answer 1",check:!0},{option:"Answer 2",check:!1},{option:"Answer 3",check:!1},{option:"Answer 4",check:!1}].map(((e,t,s)=>(0,H.jsx)(Qe.A,{sx:{mb:1.4},children:(0,H.jsx)(qe.A,{disabled:!0,control:(0,H.jsx)(Fe.A,{className:"fw-500-14",defaultChecked:e.check}),label:e.option})},s)))]})})]})})};var Be=s(1338);const Xe=e=>{let{open:t,onClose:s,data:a,setData:n,onSubmit:r,loading:o,edit:c}=e;return(0,H.jsx)(X.A,{open:t,onClose:s,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:(0,H.jsxs)(l.A,{sx:{justifyContent:"center",alignItems:"center",mt:4},children:[(0,H.jsx)(Be.A,{sx:{width:55,height:55},color:"primary"}),(0,H.jsx)(l.A,{sx:{justifyContent:"center",alignItems:"center",mt:2,mb:2},children:(0,H.jsx)(i.A,{sx:{fontSize:20,fontWeight:"bold"},color:"primary",children:"Done !"})})]})})};var Ve=s(1825);const Ze=e=>{let{activeQuestion:t,totalQuestions:s,setModalOpen:a,testData:n,finishTest:r}=e;(0,k.Zp)();const[o,c]=(0,A.useState)(null===n||void 0===n?void 0:n.remaining_time_in_seconds);return(0,A.useEffect)((()=>{if(o>0){const e=setTimeout((()=>{c((e=>e-1)),localStorage.setItem("time",o)}),1e3);return()=>clearTimeout(e)}o<1&&(r(),localStorage.setItem("draweWidth",180))}),[o]),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:.5,alignItems:"baseline"},children:[(0,H.jsx)(i.A,{sx:{fontWeight:500,fontSize:40},children:(0,Z.gv)(t)}),(0,H.jsxs)(i.A,{sx:{fontWeight:500,fontSize:20},children:["/",(0,Z.gv)(s)]})]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:1,alignItems:"center",mr:2},children:[(0,H.jsx)(Ve.A,{fontSize:"large"}),(0,H.jsx)(i.A,{sx:{fontWeight:500,fontSize:18},children:(0,Z.fU)(o)})]})]})};var Je=s(6240);const Ke=e=>{let{highlightAnswer:t,children:s,...a}=e;const n=(0,Je.A)();return(0,H.jsx)(m.A,{...a,sx:{fontSize:{xs:"18px",sm:"calc(18px + 2vw)",md:"calc(18px + 4vw)",lg:"16px"},color:n.palette.text.secondary,fontWeight:t?400:300,border:"1px solid ".concat(t?n.palette.primary.main:n.palette.divider),backgroundColor:t?n.palette.background.selected:n.palette.background.paper,borderRadius:"16px",marginTop:{xs:"13px",sm:"calc(10px + 6 * ((100vw - 600px) / 1320))",md:"16px"},cursor:"pointer",transition:t?"border 0.2s ease-in":"none","& input":{visibility:"hidden",margin:0}},children:s})},$e=e=>{let{onChange:t,index:s,choice:a,type:n,correct:l}=e;const r=String.fromCharCode(65+s),[o,c]=(0,A.useState)("");return(0,H.jsx)(Ke,{highlightAnswer:!0===l?"21":"",children:(0,H.jsxs)(i.A,{sx:{p:1.5,display:"flex",fontWeight:!0===l?"bold":""},onClick:()=>t(a),children:[(0,H.jsxs)(i.A,{sx:{fontWeight:!0===l?"bold":""},children:[r,"."]}),a]})},s)},et=e=>{let{question:t,code:s,image:a,type:n,choices:r=[],selectedAnswer:o,handleAnswerSelection:c,ans:d,questionNo:u}=e;return(0,H.jsxs)(l.A,{children:[(0,H.jsx)(i.A,{className:"fw-500-14",sx:{mb:1},children:null===t||void 0===t?void 0:t.question_text}),(0,H.jsx)(l.A,{children:r.map(((e,s)=>{var a;return(0,H.jsx)($e,{choice:e,index:s,onChange:e=>c(s+1,t.id),type:n,selectedAnswer:o,correct:(null===(a=d[u])||void 0===a?void 0:a.ans)-1===s},s)}))})]})},tt=()=>{var e;const t=new URLSearchParams(window.location.search).get("key1"),s=(0,k.zy)(),[a,n]=((0,k.Zp)(),s.state,(0,A.useState)([])),[r,o]=(0,A.useState)(),[c,d]=(0,A.useState)(0),[u,p]=(0,A.useState)(!1),[m,x]=(0,A.useState)("testDetail"),[h,w]=(0,A.useState)(0),[g,y]=(0,A.useState)({name:"",metadata:{}}),{get_Test:f,updateTest:j,result:v}=Me(),[S,C]=(0,A.useState)([]),[b,T]=(0,A.useState)(0),[N,E]=(0,A.useState)([]),[R,I]=(0,A.useState)(null),[P,D]=(0,A.useState)([]),[U,L]=(0,A.useState)(),[O,G]=(0,A.useState)([]);(0,A.useEffect)((()=>{z()}),[]);const z=async()=>{o("fetch");const[e,s]=await f(t);L(e);const a=e.questions_list.map((e=>({question:e.id,ans:""})));E((e=>[...e,...a]));const n=N.map((e=>({[e.question]:0})));G((e=>[...e,...n])),d(s),o(!1)};function Y(e){"pre"===e&&b>=1&&T((e=>e-1)),"next"===e&&b+1<U.questions_list.length&&T((e=>e+1))}function M(){localStorage.setItem("draweWidth",180),window.opener=null,window.open("","_self"),window.close()}return(0,H.jsxs)("div",{className:"mx-3 my-2",children:[(0,H.jsx)("div",{className:"flex items-center justify-between",children:(0,H.jsx)(l.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,H.jsx)("h1",{className:"mt-4",children:"Test"})})}),"start"===m&&(0,H.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",p:1},children:[(0,H.jsxs)(l.A,{sx:{width:"78%"},children:[(0,H.jsx)(Ze,{finishTest:async function(){try{let e={completed:!0,remaining_time_in_seconds:0};await j(t,e);const s=await v(t);console.log("Upload result",s),x("timeUps"),setTimeout((()=>{M()}),3e3)}catch(_e){console.error("Error in the timer flow:",_e),_.oR.error(_e)}},activeQuestion:b+1,totalQuestions:U.questions_list.length,setModalOpen:x,testData:U}),(0,H.jsx)(et,{question:U.questions_list[b],choices:null===(e=U.questions_list[b])||void 0===e?void 0:e.question_options,type:"MAQs",handleAnswerSelection:(e,s)=>{!async function(e,s){let a=localStorage.getItem("time"),n={answers:{[s]:e},remaining_time_in_seconds:a};await j(t,n)}(e,s),E((t=>{const a=t.findIndex((e=>e.question===s));if(-1!==a){const n=[...t];return n[a]={question:s,ans:e},n}return[...t,{question:s,ans:e}]}))},ans:N,questionNo:b}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",mt:3},children:[(0,H.jsx)(B.A,{onClick:()=>Y("pre"),children:"Previous"}),b===U.questions_list.length-1?(0,H.jsx)(B.A,{onClick:()=>async function(e){localStorage.setItem("time",0),await j(t,{completed:!0}),await v(t),x("timeUps"),setTimeout((()=>{M()}),3e3)}(),children:"Submit"}):(0,H.jsx)(B.A,{onClick:()=>Y("next"),children:"Next"})]})]}),(0,H.jsxs)(l.A,{sx:{width:"18%",boxShadow:3,p:1,py:2,borderRadius:2,justifyContent:"space-between"},children:[(0,H.jsx)(K.Ay,{display:"grid",gap:1,gridTemplateColumns:{sm:"repeat(5, 1fr)",xs:"repeat(5, 1fr)"},children:N.map(((e,t)=>(0,H.jsx)(l.A,{sx:{backgroundColor:e.ans?"#86D56A":"#3E3E3E",justifyContent:"center",alignItems:"center",borderRadius:1,width:22,height:22,cursor:"pointer"},onClick:()=>T(t),children:(0,H.jsx)(i.A,{style:{fontSize:"12px",fontWeight:"bold"},sx:{color:e.ans?"black":"white",textAlign:"center"},children:t+1})},t)))}),(0,H.jsxs)(l.A,{sx:{},children:[(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:1},children:[(0,H.jsx)(l.A,{sx:{backgroundColor:"#86D56A",justifyContent:"center",alignItems:"center",borderRadius:1,width:22,height:22}}),(0,H.jsx)(i.A,{sx:{mb:1,fontWeight:"bold"},children:"Answered"})]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:1},children:[(0,H.jsx)(l.A,{sx:{backgroundColor:"#3E3E3E",justifyContent:"center",alignItems:"center",borderRadius:1,width:22,height:22}}),(0,H.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Not Answered"})]})]})]})]}),"testDetail"===m&&(0,H.jsx)(We,{testData:U,setModalOpen:x,onStart:async()=>{await j(t,{started:!0})}}),(0,H.jsx)(Xe,{open:"timeUps"===m,onClose:()=>x(!1)}),(0,H.jsx)(Ae,{onClose:()=>x(!1),open:"csvUser"===m,onSubmit:function(){const e=[];P.slice(1).forEach((t=>{const s=t[0],a=t[t.length-1],n=new Set;t.slice(1).forEach((e=>{""!==e&&n.add(e)}));const l={question:s,choices:Array.from(n),answer:a};e.push(l),console.log("Processed object",l)})),console.log("All results",e)},file:R,setFile:I,setCsvData:D})]})};var st=s(728);const at=e=>{let{open:t,onClose:s,data:a,setData:n,onSubmit:o,loading:c,tab:d,skills:u}=e;const[p,m]=(0,A.useState)(new Map),[x,h]=(0,A.useState)(0),[w,g]=(0,A.useState)([]),[y,f]=(0,A.useState)([]),[j,v]=(0,A.useState)([]),{question_list:S,skill_question_list:C,induction_question:k,hr_question:_,create:b,update:T,remove:N}=Me(),[E,R]=(0,A.useState)({skill:""}),[I,P]=(0,A.useState)([]),[D,U]=(0,A.useState)({}),[L,O]=(0,A.useState)([]),[G,M]=(0,A.useState)([]),[Q,q]=(0,A.useState)("");(0,A.useEffect)((()=>{""===E.skill&&""===E.skill||F()}),[E.skill]),(0,A.useEffect)((()=>{W(),Z()}),[]);const F=async()=>{const[e,t]=await C(1,E.skill?E.skill:a.skill);!function(e){g([]);const t=e.filter((e=>!0===e.compulsory)),s=e.filter((e=>!1===e.compulsory));console.log("compulsoryList",t.length,"List",s.length),g((e=>[...e,...s])),f((e=>[...e,...t]))}(e)},W=async()=>{const[e,t]=await k();M(e)},Z=async()=>{const[e,t]=await _();O(e)};const J=[{title:"Question Type",placeholder:"Select",type:z.wN.SELECT,name:"tranning",validator:z.wY.REQUIRED,keyValues:[{value:"Induction",key:"Induction"},{value:"Skill",key:"Skill"},{value:"HR",key:"HR"}]},"Skill"===E.tranning&&{title:"Skill",placeholder:"Select Skill",type:z.wN.SELECT,name:"skill",validator:z.wY.REQUIRED,keyValues:u}],K=[{id:122,title:"",render:e=>(0,H.jsx)(Qe.A,{children:(0,H.jsx)(qe.A,{control:(0,H.jsx)(Fe.A,{defaultChecked:e.checked,onChange:t=>((e,t)=>{const s=D[Q].findIndex((e=>e.id===t));console.log("index of sel",s),U((t=>({...t,[Q]:t[Q].map(((t,a)=>a===s?{...t,checked:e}:t))}))),v((s=>e?[...s,t]:s.filter((e=>e!==t))))})(t.target.checked,e.id)})})},e.id)},{id:1,title:"Question",render:e=>e.question_text},{id:2,title:"Compulsory",render:e=>!0===e.compulsory?"Yes":"No"},{id:3,title:"Question Level",render:e=>e.skill_level||"-"}];return(0,H.jsxs)(X.A,{open:t,onClose:s,width:"min(700px,90vw)",wrapperClasses:"px-5",children:[(0,H.jsx)("h3",{className:"opacity-80",children:"Add Questions"}),(0,H.jsx)(l.A,{sx:{gap:1,width:"60%"},children:(0,H.jsx)(V.A,{data:E,errors:p,onChange:async e=>{const{name:t,value:s}=e.target;if("skill"===t&&"Skill"!==t&&"Skill"!==s){let e=u.filter((e=>s===e.key))[0].value;q(e);const[t,a]=await C(1,s),n=t.map((e=>({...e,checked:e.compulsory})));P((t=>t.includes(e)?t:[...t,e])),U((t=>t.hasOwnProperty(e)?t:{...t,[e]:n}))}if("skill"!==t&&"Skill"!==t&&"Skill"!==s){const e=("Induction"===s?G:L).map((e=>({...e,checked:e.compulsory})));console.log("value question",s),q(s),U((t=>t.hasOwnProperty(s)?t:{...t,[s]:e})),P((e=>e.includes(s)?e:[...e,s]))}R((e=>({...E,[t]:s}))),console.log("name or value------\x3e",D)},schema:J})}),(0,H.jsx)(l.A,{sx:{flexDirection:"row",gap:2,mt:2,border:1,borderColor:z.lm.LIGHT_GRAY,borderTopLeftRadius:5,borderTopRightRadius:5,width:"fit-content"},children:I.map(((e,t)=>(0,H.jsxs)(l.A,{sx:{p:.5,flexDirection:"row",gap:1,borderRight:1,borderColor:z.lm.LIGHT_GRAY},children:[(0,H.jsx)(i.A,{onClick:()=>{q(e)},sx:{fontSize:14,color:Q===e?"black":z.lm.GRAY},children:e}),(0,H.jsx)(r.A,{sx:{height:14,width:14,cursor:"pointer"},onClick:()=>(e=>{P((t=>t.filter((t=>t!==e))));const{[e]:t,...s}=D;U(s)})(e),children:(0,H.jsx)(st.A,{color:Q===e?"black":z.lm.LG_GRAY,fontSize:"small"})})]})))}),(0,H.jsx)(l.A,{sx:{},children:(0,H.jsx)(Y,{columns:K,rows:I.length>0?D[Q]:[],rowsPerPage:10,loading:"fetch"===c,titleCellClasses:"c-gray fw-700"})}),(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,H.jsx)(B.A,{bordered:!0,gray:!0,onClick:()=>{0===x?(m(new Map),n({}),h(0),s()):h((e=>e-1))},children:"Back"}),(0,H.jsx)(B.A,{onClick:async()=>{let e=I.map((e=>D[e].filter((e=>!0===e.checked)))).flat();await o(e)},loading:c,children:1===x?"Create":"Next"})]})]})},nt=e=>{let{open:t,onClose:s,data:a,setData:n,onSubmit:i,loading:r,tab:o,setSelectedQuestions:c,skills:d,users:u,testList:p}=e;const[m,x]=(0,A.useState)(new Map),[h,w]=(0,A.useState)(0),[g,y]=(0,A.useState)([]),f=[{title:"Admins",placeholder:"Select Admins",type:z.wN.SELECT,name:"admins",validator:z.wY.REQUIRED,keyValues:u,multi:!0,height:"auto"}];return(0,H.jsxs)(X.A,{open:t,onClose:s,width:"min(700px,90vw)",wrapperClasses:"px-5",children:[(0,H.jsx)("h3",{className:"opacity-80",children:"Assign Admins"}),(0,H.jsx)(V.A,{data:a,errors:m,onChange:e=>{const{name:t,value:s}=e.target;x((e=>(e.delete(t),e))),n((e=>({...e,[t]:s})))},schema:f}),(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,H.jsx)(B.A,{bordered:!0,gray:!0,onClick:s,children:"Cancel"}),(0,H.jsx)(B.A,{onClick:async()=>{if(0!==h);else{const e=(0,Z.bG)(f,a);if(x(e),e.size)return;await i()}},loading:r,children:"Next"})]})]})},lt=e=>{let{open:t,onClose:s,data:a,setData:n,onSubmit:i,loading:r,tab:o,setSelectedQuestions:c,skills:d,users:u,testList:p}=e;const[m,x]=(0,A.useState)(new Map),[h,w]=(0,A.useState)(0),[g,y]=(0,A.useState)([]),f=[{title:"Test Type",placeholder:"Select",type:z.wN.SELECT,name:"tranning_type",validator:z.wY.REQUIRED,keyValues:[{value:"Induction Training",key:"Induction Training"},{value:"Skill Test",key:"Skill Test"},{value:"Tranning Test",key:"Tranning Test"}]},"Skill Test"===a.tranning_type&&{title:"Skill",placeholder:"Select Skill",type:z.wN.SELECT,name:"skill",validator:z.wY.REQUIRED,keyValues:d},"Skill Test"===a.tranning_type&&{title:"Test Level",placeholder:"Select Test Level",type:z.wN.SELECT,name:"level",validator:z.wY.REQUIRED,keyValues:[{value:"Level 1",key:1},{value:"Level 2",key:2},{value:"Level 3",key:3}]},{title:"Test Name",placeholder:"Select Test Level",type:z.wN.INPUT,name:"testname",validator:z.wY.REQUIRED},{title:"Max Question",placeholder:"enter number of question",type:z.wN.INPUT,inputType:"number",name:"totalQuestion",validator:z.wY.REQUIRED},"Skill Test"!==a.tranning_type&&{title:"Passing Criteria",placeholder:"enter passing criteria",type:z.wN.INPUT,name:"passing_criteria",inputType:"number",validator:z.wY.REQUIRED},{title:"Time (in min)",placeholder:"enter time in min",type:z.wN.INPUT,name:"time",inputType:"number",validator:z.wY.REQUIRED}];return(0,H.jsxs)(X.A,{open:t,onClose:s,width:"min(700px,90vw)",wrapperClasses:"px-5",children:[(0,H.jsx)("h3",{className:"opacity-80",children:"Create Test"}),(0,H.jsx)(V.A,{data:a,errors:m,onChange:e=>{const{name:t,value:s}=e.target;x((e=>(e.delete(t),e))),n((e=>({...e,[t]:s})))},schema:f}),(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,H.jsx)(B.A,{bordered:!0,gray:!0,onClick:s,children:"Cancel"}),(0,H.jsx)(B.A,{onClick:async()=>{if(0!==h);else{const e=(0,Z.bG)(f,a);if(x(e),e.size)return;await i()}},loading:r,children:"Next"})]})]})},it=()=>{const e=(0,k.zy)(),t=((0,k.Zp)(),e.state),[s,a]=(0,A.useState)([]),[n,o]=(0,A.useState)(),[c,d]=(0,A.useState)(0),[u,p]=(0,A.useState)(!1),[m,x]=(0,A.useState)("testDetail"),[h,w]=(0,A.useState)(0),[g,y]=(0,A.useState)({name:"",tranning_type:"",metadata:{},skill:""}),{question_list:f,skill_list:j,test_list:v,assignExam:S,createTest:C,update:_,linkPlanTestMaster:b,addQuestion:T}=Me(),{list:N}=W(),[E,R]=(0,A.useState)(new Map),[I,P]=(0,A.useState)([]),[D,U]=(0,A.useState)([]),[L,O]=(0,A.useState)([]),[G,z]=(0,A.useState)(""),M=[{id:1,title:"Test Name",render:e=>(0,H.jsx)(i.A,{children:e.test_name})},{id:2,title:"Test Type",render:e=>(0,H.jsx)(i.A,{children:e.test_type})},{id:3,title:"Skill",render:e=>(0,H.jsx)(i.A,{children:e.skill})},{id:4,title:"Skill Level",render:e=>(0,H.jsx)(i.A,{children:e.skill_level})},{id:5,title:"Maximum Questions",render:e=>(0,H.jsx)(i.A,{children:e.maximum_questions})},{id:6,title:"Questions in Test",render:e=>(0,H.jsx)(i.A,{children:e.questions_master.length})},{id:7,title:"Alloted Minutes",render:e=>(0,H.jsx)(i.A,{children:e.alloted_minutes})},{id:8,title:"Admins",render:e=>(0,H.jsx)(H.Fragment,{children:(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:1},children:[(0,H.jsx)(l.A,{sx:{flexDirection:"column"},children:e.admin.map((e=>(0,H.jsx)(i.A,{sx:{textTransform:"capitalize"},children:e})))}),(0,H.jsx)(ge.A,{title:"add admins",children:(0,H.jsx)(r.A,{sx:{height:25,width:25},onClick:()=>{z(e.id),x("addAssign")},children:(0,H.jsx)(je.A,{color:"primary",fontSize:"small"})})})]})})}];(0,A.useEffect)((()=>{console.log("planData----",t),x(!!t&&"createTest"),F(),Q(),q()}),[]);const Q=async()=>{const[e,t]=await v();O(e)},q=async()=>{const[e,t]=await N(h+1),s=e.filter((e=>!e.is_operator&&!0===e.status)).map((e=>({value:e.username,key:e.id})));a((e=>[...e,...s]))},F=async()=>{o("fetch");const[e]=await j(h+1),t=e.results.map((e=>({value:e.skill_name,key:e.id})));U((e=>[...e,...t])),o(!1)};return(0,H.jsxs)("div",{className:"mx-3 my-2",children:[(0,H.jsxs)("div",{className:"flex items-center justify-between",children:[(0,H.jsx)(l.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,H.jsx)("h1",{className:"mt-4",children:"Test Master"})}),(0,H.jsx)(l.A,{sx:{flexDirection:"row",gap:1},children:(0,H.jsx)(B.A,{onClick:()=>x("createTest"),children:"Create Test"})})]}),(0,H.jsx)(Y,{columns:M,rows:L,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:h,setPage:w,paginator:!0,serialize:!0,total:c}),(0,H.jsx)(lt,{open:"createTest"===m,onClose:()=>{x(!1)},onSubmit:async()=>{const e={test_name:g.testname,test_type:g.tranning_type,skill:g.skill,skill_level:parseInt(g.level),maximum_questions:parseInt(g.totalQuestion),alloted_minutes:parseInt(g.time)},t={test_name:g.testname,test_type:g.tranning_type,maximum_questions:parseInt(g.totalQuestion),passing_criteria:g.passing_criteria,alloted_minutes:parseInt(g.time)},s=await C("Skill Test"!==g.tranning_type?t:e);s.id&&(z(s.id),x("addQues"))},skills:D,data:g,setData:y}),(0,H.jsx)(at,{open:"addQues"===m,onClose:()=>{x(!1)},onSubmit:async e=>{const s=e.map((e=>e.id)),a={questions:s};await T(G,a),t&&await b(t.id,{test_master:G,training_admin:t.training_admin,trainees:t.trainees}),y({}),x(!1),await Q()},selectQuestions:I,setSelectedQuestions:P,skills:D,data:g,setData:y}),(0,H.jsx)(nt,{open:"addAssign"===m,onClose:()=>{x(!1)},onSubmit:async()=>{const e={admin:g.admins};await T(G,e),x(!1),y({}),await Q()},users:s,testList:L,data:g,setData:y})]})};var rt=s(6012);const ot=s.p+"static/media/cross-icon.85e1f4ddd2a1c7249092ed4d0985792a.svg",ct=e=>{let{open:t,onClose:s,data:a,setData:n,onSubmit:r,loading:o,tab:c,edit:d,selectSkill:u,user:p}=e;const[m,x]=(0,A.useState)(new Map),[h,w]=(0,A.useState)(0),[g,y]=(0,A.useState)(1),[f,j]=(0,A.useState)(1),v=/^[A-Za-z\s]*$/,S=e=>{const{name:t,value:s}=e.target;n((e=>({...e,[t]:s})))};return(0,H.jsxs)(X.A,{open:t,onClose:s,width:"min(700px,90vw)",hideCloseIcon:ot,wrapperClasses:"px-5",children:[(0,H.jsxs)("h3",{className:"opacity-80",children:[!0===d?"Edit":"Adding"," Skill"]}),(0,H.jsxs)("div",{style:{display:"flex",gap:5},className:"fw-16 mb-1",children:[f>1&&(0,H.jsx)(i.A,{sx:{cursor:"pointer"},onClick:()=>y(1),children:"Level 1 >"}),f>1&&(0,H.jsx)(i.A,{sx:{cursor:"pointer"},onClick:()=>y(2),children:"Level 2 >"}),f>2&&(0,H.jsx)(i.A,{sx:{cursor:"pointer"},onClick:()=>y(3),children:"Level 3"})]}),(0,H.jsxs)("div",{style:{display:"grid",gap:10},children:[1===g&&(0,H.jsxs)(K.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Enter Skill Name"}),(0,H.jsx)(G.A,{name:"skill_name",value:a.skill_name,onChange:S,disabled:!0===d,width:"500px"}),(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Add Supervisor"}),(0,H.jsx)(rt.A,{name:"supervisor_one",width:"100%",onChange:S,value:a.supervisor_one,keyValues:p,multi:!0,height:"auto"})]}),1===g&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(i.A,{sx:{textAlign:"center"},onClick:()=>console.log("supervisor",a),children:"Level 1"}),(0,H.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,H.jsxs)(K.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Add Days"}),(0,H.jsx)(G.A,{type:"number",name:"days_1",value:a.days_1,width:"500px",onChange:S})]}),(0,H.jsxs)(K.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Exam Passing Criteria"}),(0,H.jsx)(G.A,{type:"number",name:"exam_1",value:a.exam_1,onChange:S,width:"500px"})]}),(0,H.jsxs)(K.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Floor Work Criteria"}),(0,H.jsx)(G.A,{type:"number",name:"floor_1",value:a.floor_1,onChange:S,width:"500px"})]}),(0,H.jsxs)(K.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Number of Entry"}),(0,H.jsx)(G.A,{type:"number",name:"entry_1",value:a.entry_1,onChange:S,width:"500px"})]})]})]}),2===g&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(i.A,{sx:{textAlign:"center"},children:"Level 2"}),(0,H.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,H.jsxs)(K.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Add Days"}),(0,H.jsx)(G.A,{type:"number",name:"days_2",value:a.days_2,width:"500px",onChange:S})]}),(0,H.jsxs)(K.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Exam Passing Criteria"}),(0,H.jsx)(G.A,{type:"number",name:"exam_2",value:a.exam_2,onChange:S,width:"500px"})]}),(0,H.jsxs)(K.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Floor Work Criteria"}),(0,H.jsx)(G.A,{type:"number",name:"floor_2",value:a.floor_2,onChange:S,width:"500px"})]}),(0,H.jsxs)(K.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Number of Entry"}),(0,H.jsx)(G.A,{type:"number",name:"entry_2",value:a.entry_2,onChange:S,width:"500px"})]})]})]}),3===g&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(i.A,{sx:{textAlign:"center"},children:"Level 3"}),(0,H.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,H.jsxs)(K.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Add Days"}),(0,H.jsx)(G.A,{type:"number",name:"days_3",value:a.days_3,width:"500px",onChange:S})]}),(0,H.jsxs)(K.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Exam Passing Criteria"}),(0,H.jsx)(G.A,{type:"number",name:"exam_3",value:a.exam_3,onChange:S,width:"500px"})]}),(0,H.jsxs)(K.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Floor Work Criteria"}),(0,H.jsx)(G.A,{type:"number",name:"floor_3",value:a.floor_3,onChange:S,width:"500px"})]}),(0,H.jsxs)(K.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Number of Entry"}),(0,H.jsx)(G.A,{type:"number",name:"entry_3",value:a.entry_3,onChange:S,width:"500px"})]})]})]})]}),(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,px:8,children:[(0,H.jsx)(B.A,{bordered:!0,color:"light_green",disabled:3===g,onClick:()=>{console.log("data skill-----\x3e>",v.test(a.skill_name)),!0===v.test(a.skill_name)&&""!==a.skill_name&&void 0!==a.skill_name?(g<=3&&y((e=>e+1)),f<=3&&j((e=>e+1))):_.oR.warn("Enter Vaild Skill Name",a.skill_name)},children:(0,H.jsx)(i.A,{color:z.lm.TEXT_GRAY,children:!0===d?"Next":"Add Level"})}),(0,H.jsx)(B.A,{color:"light_green",disabled:3!=g,onClick:async()=>{if(""!==a.skill_name)return await r(),y(1),void j(1)},loading:o,children:(0,H.jsx)(i.A,{color:z.lm.BLACK,children:"Submit"})})]})]})},dt=e=>{let{open:t,onClose:s,data:a,setData:n,onSubmit:r,loading:o,tab:c}=e;return(0,H.jsxs)(X.A,{open:t,onClose:s,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,H.jsx)("h3",{className:"opacity-80",children:"ADD REPORT"}),(0,H.jsxs)(K.Ay,{display:"grid",sx:{pt:1,gap:1},gridTemplateColumns:{sm:"repeat(4, 1fr)",xs:"repeat(4, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontWeight:"bold"},children:"S no"}),(0,H.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Item Name"}),(0,H.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Plan"}),(0,H.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Actual"}),[{itemName:"item 1",plan:1e3},{itemName:"item 2",plan:800},{itemName:"item 3",plan:1e3}].map(((e,t)=>(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(i.A,{children:t+1}),(0,H.jsx)(i.A,{sx:{textTransform:"capitalize"},children:e.itemName}),(0,H.jsx)(i.A,{children:e.plan}),(0,H.jsx)("input",{type:"text"})]})))]}),(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,H.jsx)(B.A,{bordered:!0,gray:!0,onClick:s,children:"Cancel"}),(0,H.jsx)(B.A,{onClick:r,loading:o,children:"Create"})]})]})},ut=e=>{let{open:t,onClose:s,data:a,setData:n,onSubmit:i,loading:r,user:o}=e;const[c,d]=(0,A.useState)(new Map),u=[{title:"Supervisor",placeholder:"Select Supervisor",type:z.wN.SELECT,name:"supervisor",multi:!0,height:"auto",keyValues:o}];return(0,H.jsxs)(X.A,{open:t,onClose:s,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,H.jsx)("h3",{className:"opacity-80",children:"ADD SUPERVISOR"}),(0,H.jsx)(V.A,{data:a,errors:c,onChange:e=>{const{name:t,value:s}=e.target;d((e=>(e.delete(t),e))),n((e=>({...e,[t]:s})))},schema:u}),(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,H.jsx)(B.A,{bordered:!0,gray:!0,onClick:s,children:"Cancel"}),(0,H.jsx)(B.A,{onClick:i,loading:r,children:"Create"})]})]})},pt=()=>{const[e,t]=(0,A.useState)("Users"),[s,a]=(0,A.useState)([]),[n,o]=(0,A.useState)([]),[c,d]=(0,A.useState)(),[u,p]=(0,A.useState)(0),[m,x]=(0,A.useState)(!1),[h,w]=(0,A.useState)([]),[g,y]=(0,A.useState)(0),[f,j]=(0,A.useState)(null),[v,S]=(0,A.useState)({days_1:"",days_2:"",days_3:"",supervisor_one:"",supervisor_two:"",supervisor_three:"",exam_1:"",exam_2:"",exam_3:"",floor_1:"",floor_2:"",floor_3:"",entry_1:"",entry_2:"",entry_3:""}),{list:C,create:k,updateSkill:_,update:b,addSupervisor:T,remove:N,opratorList:E,createOperator:R,removeOperator:I,updateOperator:P}=Ce(),[D,U]=(0,A.useState)(!1),[L,O]=(0,A.useState)(""),{list:G}=W(),[M,Q]=(0,A.useState)();(0,A.useEffect)((()=>{F()}),[g,e]),(0,A.useEffect)((()=>{q()}),[]);const q=async()=>{d("fetch");const[e,t]=await G(g+1),s=e.filter((e=>!e.is_operator&&!0===e.status)).map((e=>({value:e.username,key:e.id})));a((e=>[...e,...s]))},F=async()=>{d("fetch");const[e,t]=await C(g+1);o(e.results),p(t),d(!1)},X=async()=>{const e={skill_name:v.skill_name,test_performance_criteria:[v.exam_1,v.exam_2,v.exam_3],duration_between_two_tests:[v.days_1,v.days_2,v.days_3],floor_performance_criteria:[parseInt(v.floor_1),parseInt(v.floor_2),parseInt(v.floor_3)],no_of_performance_entries:[parseInt(v.entry_1),parseInt(v.entry_2),parseInt(v.entry_3)]};if(d("fetch"),!1===D){let t=await k(e);V(t.id),console.log("add skill respose----",t)}else{await _(e,L);V(L)}};async function V(e){const t={add:{...v}.supervisor_one};await T(e,t),x(!1),S({}),await F(),d(!1)}const Z=[{id:1,title:"Skill Name",render:e=>e.skill_name},{id:2,title:"Tags",render:e=>" -"},{id:3,title:"Created On",render:e=>"-"},{id:3,title:"No. of Times Used",render:e=>"-"},{id:112,title:"No. of Enteries",render:e=>(0,H.jsx)(l.A,{sx:{flexDirection:"row",gap:.3},children:e.no_of_performance_entries.map(((t,s)=>(0,H.jsxs)(i.A,{children:[t,s<e.no_of_performance_entries.length-1&&","]})))})},{id:113,title:"Admins",render:e=>(0,H.jsx)(l.A,{sx:{flexDirection:"row",gap:.3},children:e.supervisor_list.map(((t,s)=>(0,H.jsxs)(i.A,{sx:{fontSize:14},children:[t.username,s<e.supervisor_list.length-1&&","]})))})},{id:6,title:"Actions",render:e=>(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(l.A,{flexDirection:"row",sx:{gap:1},children:(0,H.jsx)(ge.A,{title:"edit skill",children:(0,H.jsx)(r.A,{sx:{height:25,width:25},onClick:()=>{U(!0),x("add"),Q(e),S({...v,skill_name:e.skill_name,supervisor_one:e.supervisor_list.map((e=>e.id)),days_1:e.duration_between_two_tests[0],days_2:e.duration_between_two_tests[1],days_3:e.duration_between_two_tests[2],exam_1:e.test_performance_criteria[0],exam_2:e.test_performance_criteria[1],exam_3:e.test_performance_criteria[2],floor_1:e.floor_performance_criteria[0],floor_2:e.floor_performance_criteria[1],floor_3:e.floor_performance_criteria[2],entry_1:e.no_of_performance_entries[0],entry_2:e.no_of_performance_entries[1],entry_3:e.no_of_performance_entries[2]}),O(e.id)},children:(0,H.jsx)(ae.A,{color:"primary",fontSize:"small"})})})})})}];return(0,H.jsxs)("div",{className:"mx-3 my-2 fw-500",children:[(0,H.jsxs)("div",{className:"flex items-center justify-between",children:[(0,H.jsx)("h1",{className:"mt-4",children:"Skill"}),(0,H.jsx)(l.A,{justifyContent:"flex-end",direction:"row",sx:{mb:1},children:(0,H.jsx)(B.A,{color:"gray",onClick:()=>{x("add"),S({})},children:(0,H.jsx)(i.A,{color:z.lm.BLACK,children:"+ Create  Skill"})})})]}),(0,H.jsx)(Y,{columns:Z,rows:n,rowsPerPage:10,loading:"fetch"===c,titleCellClasses:"fw-700",page:g,setPage:y,serialize:!0,total:u,tableBodyColor:z.lm.WHITE}),(0,H.jsx)(ct,{selectSkill:M,open:"add"===m,onClose:()=>{x(!1),U(!1)},data:v,setData:S,onSubmit:X,loading:"add"===c,edit:D,user:s}),(0,H.jsx)(ut,{open:"addSuper"===m,onClose:()=>{x(!1),U(!1)},data:v,setData:S,onSubmit:V,loading:"add"===c,user:s}),(0,H.jsx)(dt,{open:"Report"===m,onClose:()=>x(!1),onSubmit:X}),(0,H.jsx)(Ae,{onClose:()=>x(!1),open:"csvUser"===m,onSubmit:async()=>{h.map((async t=>{if("Users"===e){if(""===t.email)return;await k(t)}else{if(""===t.employee_id)return;await R(t)}})),x(!1),await F(g=1)},file:f,setFile:j,setCsvData:w,tab:e})]})};var mt=s(7332);const xt=()=>{const e=(0,k.zy)(),[t,s]=((0,k.Zp)(),e.state,(0,A.useState)("List")),[a,n]=(0,A.useState)([]),[i,r]=(0,A.useState)([{value:"All",key:"All"},{value:"Induction",key:"Induction"},{value:"Training",key:"Training"}]),[o,c]=(0,A.useState)(),[d,u]=(0,A.useState)(0),[p,m]=(0,A.useState)(!1),[x,h]=(0,A.useState)("testDetail"),[w,g]=(0,A.useState)(0),[y,f]=(0,A.useState)({name:"",metadata:{}}),{question_list:j,skill_list:v,create:S,update:C,remove:b}=Me(),[T,N]=(0,A.useState)(null),[E,R]=(0,A.useState)([]),[I,P]=(0,A.useState)(new Map),[D,U]=(0,A.useState)([]),[L,O]=(0,A.useState)([]);(0,A.useEffect)((()=>{M()}),[]),(0,A.useEffect)((()=>{G()}),[t]);const G=async()=>{c("fetch");const[e,t]=await j(w+1);O(e),U(e),u(t),c(!1)},M=async()=>{c("fetch");const[e]=await v(w+1),t=e.results.map((e=>({value:e.skill_name,key:e.id})));n((e=>[...e,...t]));const s=e.results.map((e=>({value:e.skill_name,key:e.skill_name})));r((e=>[...e,...s])),c(!1)},Q=[{title:"Test Type",placeholder:"Select",type:z.wN.SELECT,name:"tranning_type",validator:z.wY.REQUIRED,keyValues:[{value:"Induction Training",key:"Induction Training"},{value:"Skill Test",key:"Skill Test"},{value:"Tranning Test",key:"Tranning Test"}]},"Skill Test"===y.tranning_type&&{title:"Skill",placeholder:"Select Skill",type:z.wN.SELECT,name:"skill",validator:z.wY.REQUIRED,keyValues:a},"Skill Test"===y.tranning_type&&{title:"Tranning Level",placeholder:"Select Test Level",type:z.wN.SELECT,name:"level",validator:z.wY.REQUIRED,keyValues:[{value:"Level 1",key:1},{value:"Level 2",key:2},{value:"Level 3",key:3}]}],q=[{placeholder:"Filter By Skill",type:z.wN.SELECT,name:"questionFilter",validator:z.wY.REQUIRED,keyValues:i}],F=[{id:1,title:"Question",render:e=>e.question_text},{id:2,title:"Skill",render:e=>e.skill},{id:3,title:"Skill Level",render:e=>e.skill_level?"Level "+e.skill_level:"-"},{id:33,title:"Induction Question",render:e=>!0===e.induction_question?"True":"False"},{id:4,title:"Compulsory",render:e=>!0===e.compulsory?"True":"False"},{id:55,title:"Status",render:e=>(0,H.jsx)(mt.A,{color:!0===e.status?"success":"error"})}];return(0,H.jsxs)("div",{className:"mx-3 my-2",children:[(0,H.jsx)("div",{className:"flex items-center justify-between",children:(0,H.jsx)(l.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,H.jsx)("h1",{className:"mt-4",children:"Question Bank"})})}),(0,H.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,H.jsx)(ee.A,{value:t,onChange:(e,t)=>{s(t),g(0)},className:"mb-2 fw-500",children:["List","Upload"].map(((e,t)=>(0,H.jsx)(te.A,{label:e,className:"fw-500",value:e},t)))}),"List"===t&&(0,H.jsx)(V.A,{data:y,errors:I,onChange:e=>{let t=L;const{name:s,value:a}=e.target;if(console.log("handle filter----",s,a),P((e=>(e.delete(s),e))),f((e=>({...e,[s]:a}))),"Induction"===a){let e=t.filter((e=>!0===e.induction_question));U(e.length>0?e:[])}else if("Training"===a){let e=t.filter((e=>!1===e.induction_question&&null===e.skill));U(e.length>0?e:[])}else if("Training"!==a&&"Induction"!==a&&"All"!==a&&""!==a){let e=t.filter((e=>e.skill===a));U(e.length>0?e:[])}else"All"===a&&U(L)},schema:q})]}),"Upload"===t&&(0,H.jsx)(l.A,{sx:{alignItems:"flex-start",pl:3},children:(0,H.jsxs)(l.A,{children:[(0,H.jsx)(V.A,{data:y,errors:I,onChange:e=>{const{name:t,value:s}=e.target;"tranning_type"===t&&f({...y,skill:"",level:""}),P((e=>(e.delete(t),e))),f((e=>({...e,[t]:s})))},schema:Q}),(0,H.jsx)(B.A,{bordered:!0,onClick:()=>h("csvUser"),children:"upload CSV file"})]})}),"List"===t&&(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(Y,{columns:F,rows:D,rowsPerPage:10,loading:"fetch"===o,titleCellClasses:"c-gray fw-700",page:w,setPage:g,serialize:!0,total:d})}),(0,H.jsx)(Ae,{tab:"question",onClose:()=>h(!1),open:"csvUser"===x,onSubmit:async function(){c("fetch"),E.slice(1).forEach((async e=>{const t=e[0],s=e[1],a=e[e.length-1],n=new Set;e.slice(2).forEach((e=>{""!==e&&n.add(e)}));const l=Array.from(n);l.pop();const i={compulsory:"TRUE"===t,question_text:s,question_options:l,correct_answer:parseInt(a),induction_question:"Induction Training"===y.tranning_type},r={compulsory:"TRUE"===t,question_text:s,question_options:l,correct_answer:parseInt(a),skill:y.skill,skill_level:y.level,induction_question:!1};await S("Skill Test"===y.tranning_type?r:i)})),h(!1),c(!1),_.oR.success("Question are uploaded in question bank."),s("List"),f({})},file:T,setFile:N,setCsvData:R})]})};var ht=s(3141),At=s(2019);function wt(e){let{title:t,chartColors:s,chart:a,...n}=e;const{series:i,options:r}=a,o=i.map((e=>e.value)),c={chart:{width:150,type:"pie",animations:{enabled:!0}},dataLabels:{enabled:!1},legend:{show:!1},tooltip:{enabled:!1},colors:s,responsive:[{breakpoint:480,options:{chart:{},legend:{position:"bottom"}}}]};return(0,H.jsx)(l.A,{sx:{},dir:"ltr",children:(0,H.jsx)(At.A,{type:"pie",series:o,options:c})})}const gt=()=>{const{token:e}=(0,g.d4)((e=>e[F.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,a=await s.get("training/".concat(e,"/skill-matrix/"),{},t,M.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),null===a||void 0===a?void 0:a.data):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const a=new Q.Ay,n=await a.post("".concat(q.H.ASSET,"/").concat(s,"/").concat(q.H.PLANTS,"/"),e,t,(e=>(0,M.So)(e,null,"Plant created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const s={name:e.name,metadata:e.metadata},a=new Q.Ay,n=await a.put("".concat(q.H.ASSET,"/").concat(q.H.PLANT,"/").concat(e.id,"/"),s,t,(e=>(0,M.So)(e,null,"Plant Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const s=new Q.Ay,a=await s.delete("".concat(q.H.ASSET,"/").concat(q.H.PLANT,"/").concat(e,"/"),t,(e=>(0,M.So)(e,null,"Plant deleted successfully!")));return null===a||void 0===a?void 0:a.data},postPerformance:async e=>{const s=new Q.Ay,a=await s.post("performance-record/".concat(e.operator,"/"),{skill:e.skill,skill_level:e.skill_level},t,(e=>(0,M.So)(e,null)));return null===a||void 0===a?void 0:a.data},getPerformanceSkill:async e=>{const s=new Q.Ay,a=await s.get("training/update-skill/".concat(e.operator,"/"),{},t,(e=>(0,M.So)(e,null)));return null===a||void 0===a?void 0:a.data},performanceRecord:async e=>{const s=new Q.Ay,a=await s.post("training/".concat(e.operator,"/performance-record/"),{skill:e.skill,skill_level:e.skill_level},t,(e=>(0,M.So)(e,null)));return null===a||void 0===a?void 0:a.data},putPerformanceRecord:async(e,s)=>{const a=new Q.Ay,n=await a.put("training/performance-record/".concat(e,"/"),s,t,(e=>(0,M.So)(e,null,"Performance uploaded.")));return null===n||void 0===n?void 0:n.data},performanceList:async e=>{const s=e.replace(/-/g,""),a=new Q.Ay,n=await a.get("training/date-wise-performance-record/".concat(s,"/"),{},t,M.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),null===n||void 0===n?void 0:n.data):[[],0]},getPerformanceId:async e=>{const s=new Q.Ay,a=await s.get("training/".concat(e.operator,"/performance-record/"),{},t,(e=>(0,M.So)(e,null)));return null===a||void 0===a?void 0:a.data}}};var yt=s(2204);const ft=e=>{let{row:t,skill:s}=e;return(0,A.useLayoutEffect)((()=>{console.log("PrintPage--skill----",s)}),[t]),(0,H.jsxs)("div",{className:"mx-3 my-2",children:[(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:2},children:[(0,H.jsxs)(l.A,{sx:{width:120},children:[(0,H.jsx)(wt,{chartColors:["#AA4A44",z.lm.GRAY,z.lm.GRAY,z.lm.GRAY],chart:{series:[{value:25},{value:25},{value:25},{value:25}]}}),(0,H.jsx)(i.A,{sx:{fontSize:12},textAlign:"center",children:"Induction"})]}),(0,H.jsxs)(l.A,{sx:{width:120},children:[(0,H.jsx)(wt,{chartColors:["#AA4A44","#008FFB",z.lm.GRAY,z.lm.GRAY],chart:{series:[{value:25},{value:25},{value:25},{value:25}]}}),(0,H.jsx)(i.A,{sx:{fontSize:12},textAlign:"center",children:"Level 1"})]}),(0,H.jsxs)(l.A,{sx:{width:120},children:[(0,H.jsx)(wt,{chartColors:["#AA4A44","#008FFB","#00E396",z.lm.GRAY],chart:{series:[{value:25},{value:25},{value:25},{value:25}]}}),(0,H.jsx)(i.A,{sx:{fontSize:12},textAlign:"center",children:"Level 2"})]}),(0,H.jsxs)(l.A,{sx:{width:120},children:[(0,H.jsx)(wt,{chartColors:["#AA4A44","#008FFB","#00E396","#775DD0"],chart:{series:[{value:25},{value:25},{value:25},{value:25}]}}),(0,H.jsx)(i.A,{sx:{fontSize:12},textAlign:"center",children:"Level 3"})]})]}),(0,H.jsx)(R.A,{children:(0,H.jsxs)(b.A,{children:[(0,H.jsx)(I.A,{sx:{backgroundColor:z.lm.BG_GRAY},children:(0,H.jsxs)(P.A,{children:[(0,H.jsx)(N.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:"Aadhar"}),s.map((e=>(0,H.jsx)(N.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black",pl:5},children:e.skill_name},e.id)))]})}),(0,H.jsx)(l.A,{sx:{p:.2}}),(0,H.jsx)(T.A,{children:(0,H.jsxs)(P.A,{sx:{backgroundColor:z.lm.LG_GRAY},children:[(0,H.jsx)(N.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:t.aadhar}),s.map(((e,s)=>{let a=["#AA4A44",z.lm.GRAY,z.lm.GRAY,z.lm.GRAY],n=["#AA4A44","#008FFB",z.lm.GRAY,z.lm.GRAY],i=["#AA4A44","#008FFB","#00E396",z.lm.GRAY],r=[z.lm.GRAY,z.lm.GRAY,z.lm.GRAY,z.lm.GRAY];return(0,H.jsx)(N.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black",p:0,px:1},children:(0,H.jsx)(l.A,{sx:{width:120},children:(0,H.jsx)(wt,{chartColors:0===t[e.id]?a:1===t[e.id]?n:2===t[e.id]?i:3===t[e.id]?["#AA4A44","#008FFB","#00E396","#775DD0"]:r,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}})})},e.id)}))]},t._id)})]})})]})};var jt=s(7733);const vt=()=>{const e=(0,k.zy)(),[t,s]=((0,k.Zp)(),e.state,(0,A.useState)("testDetail")),[a,n]=(0,A.useState)(0),[o,c]=(0,A.useState)({name:"",tranning_type:"",metadata:{},skill:""}),{list:d,question_list:u,test_list:p,assignExam:m,createTest:x,update:h,remove:w,addQuestion:g}=gt(),{list:y}=W(),{list:f}=Ce(),[j,v]=(0,A.useState)(new Map),[S,C]=(0,A.useState)([]),[_,E]=(0,A.useState)([]),[D,U]=(0,A.useState)([]),[L,O]=(0,A.useState)({}),[Y,M]=(0,A.useState)(!1),[Q,q]=(0,A.useState)([{value:"All",key:"123"}]),F=[{placeholder:"Filter By Skill",type:z.wN.SELECT,name:"skill_id",keyValues:Q}];(0,A.useEffect)((()=>{X(),B()}),[]);const B=async()=>{const[e,t]=await y(),s=e.filter((e=>e.is_operator)),n=await Promise.all(s.map((e=>d(a+1,e.id))));S.map((e=>{n.map((t=>{console.log("newOptr----item2",t),e.id===t.id&&console.log("match skill",e.id)}))})),E((e=>[...e,...n])),U((e=>[...e,...n])),setTimeout((()=>{console.log("newOptr----operatorProfiles",n)}),5e3)},X=async()=>{const[e]=await f(a+1);console.log("fetchSkill-----------",e.results);const t=e.results.map((e=>({value:e.skill_name,key:e.id})));q((e=>[...e,...t])),C(e.results)},Z=e=>_.filter((t=>t.aadhar.startsWith(e))),J=(0,A.useRef)(null),K=(0,ht.useReactToPrint)({content:()=>J.current,onPrintError:()=>console.log("error------"),removeAfterPrint:!0});function $(e){O(e),M(!0),setTimeout((()=>{K()}),1e3)}let ee=[z.lm.L4,z.lm.L4,z.lm.L4,z.lm.L1],te=[z.lm.L2,z.lm.L4,z.lm.L4,z.lm.L1],se=[z.lm.L2,z.lm.L3,z.lm.L4,z.lm.L1],ae=[z.lm.L2,z.lm.L3,z.lm.L5,z.lm.L1],ne=[z.lm.L4,z.lm.L4,z.lm.L4,z.lm.L4];return(0,H.jsxs)("div",{className:"mx-3 my-2",children:[(0,H.jsx)("div",{className:"flex items-center justify-between",children:(0,H.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center",width:"100%",justifyContent:"space-between"},children:[(0,H.jsx)("h1",{className:"mt-2",children:"Skill Matrix"}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",mt:-1},children:[(0,H.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,H.jsx)(l.A,{sx:{width:50},children:(0,H.jsx)(wt,{chartColors:ee,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}})}),(0,H.jsx)(i.A,{className:"fw-14",textAlign:"center",children:"Induction"})]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,H.jsx)(l.A,{sx:{width:50},children:(0,H.jsx)(wt,{chartColors:te,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}})}),(0,H.jsx)(i.A,{className:"fw-14",textAlign:"center",children:"Level 1"})]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,H.jsx)(l.A,{sx:{width:50},children:(0,H.jsx)(wt,{chartColors:se,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}})}),(0,H.jsx)(i.A,{className:"fw-14",textAlign:"center",children:"Level 2"})]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,H.jsx)(l.A,{sx:{width:50},children:(0,H.jsx)(wt,{chartColors:ae,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}})}),(0,H.jsx)(i.A,{className:"fw-14",textAlign:"center",children:"Level 3"})]})]})]})}),(0,H.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,H.jsxs)(l.A,{sx:{py:1,flexDirection:"row",gap:1},children:[(0,H.jsx)(V.A,{data:o,errors:j,onChange:e=>{let t=_;const{name:s,value:a}=e.target;if(v((e=>(e.delete(s),e))),c((e=>({...e,[s]:a}))),123===a)U(t);else{let e=t.filter((e=>e[a]>0));U(e.length>0?e:[]),console.log("name----",s,"value-----",a,"templist",e)}},schema:F}),(0,H.jsx)(G.A,{placeholder:"Search By Aadhar Number",onChange:e=>{const t=e.target.value,s=Z(t);console.log("findList----",s),U(s||[])}})]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:2,pr:4,alignItems:"center"},children:[(0,H.jsx)(yt.A,{color:z.lm.BLACK}),(0,H.jsx)(jt.A,{color:z.lm.BLACK})]})]}),(0,H.jsx)(R.A,{children:(0,H.jsxs)(b.A,{children:[(0,H.jsx)(I.A,{sx:{backgroundColor:z.lm.BG_GRAY},children:(0,H.jsxs)(P.A,{children:[(0,H.jsx)(N.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:"S No."}),(0,H.jsx)(N.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:"Operator"}),(0,H.jsx)(N.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:"Aadhar"}),S.map((e=>(0,H.jsx)(N.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black",pl:5,textAlign:"left"},children:e.skill_name}))),(0,H.jsx)(N.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:"Action"})]})}),(0,H.jsx)(l.A,{sx:{p:.2}}),(0,H.jsx)(T.A,{children:D.map(((e,t)=>(0,H.jsx)(le,{row:e,arr:S,index:t,childFun:$})))})]})}),!0===Y&&(0,H.jsx)("div",{style:{visibility:"hidden"},children:(0,H.jsx)("div",{ref:J,children:(0,H.jsx)(ft,{skill:S,row:L})})})]});function le(e){let{row:t,arr:s,index:a,childFun:n}=e;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(l.A,{sx:{p:.3}}),(0,H.jsxs)(P.A,{sx:{},children:[(0,H.jsx)(N.A,{className:"c-gray fw-500 text-nowrap h3",sx:{color:"black"},children:a+1}),(0,H.jsx)(N.A,{className:"c-gray fw-500 text-nowrap h3",sx:{color:"black"},children:t.fullname}),(0,H.jsx)(N.A,{className:"c-gray fw-500 text-nowrap h3",sx:{color:"black"},children:t.aadhar}),s.map(((e,s)=>(0,H.jsx)(N.A,{className:"",sx:{p:0},children:(0,H.jsx)(l.A,{sx:{width:70,pl:5},children:(0,H.jsx)(wt,{chartColors:0===t[e.id]?ee:1===t[e.id]?te:2===t[e.id]?se:3===t[e.id]?ae:ne,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}})})}))),(0,H.jsx)(N.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:(0,H.jsx)(ge.A,{title:"Print Skill Matrix",children:(0,H.jsx)(r.A,{sx:{height:25,width:25},onClick:()=>n(t),children:(0,H.jsx)(yt.A,{color:"primary",fontSize:"small"})})})})]},t._id)]})}};s(7330);const St=()=>{(0,k.zy)(),(0,g.d4)((e=>e));const[e,t]=(0,A.useState)([]),[s,a]=(0,A.useState)(),[n,i]=(0,A.useState)(0),[r,o]=(0,A.useState)({}),{question_list:c,skill_list:d,test_list:u,assignExam:p,induction_question:m,createTest:x,update:h,remove:w,addQuestion:y,updateTest:f}=Me(),{list:j,listByAadhar2:v}=W(),[S,C]=(0,A.useState)(null),[_,b]=(0,A.useState)(new Map),[T,N]=(0,A.useState)([]),[E,R]=(0,A.useState)([]),I=[{title:"Operator",placeholder:"Select Operator",type:z.wN.MASTER,name:"operator",validator:z.wY.REQUIRED,fetch:[v],noSearch:!0},{title:"Test",placeholder:"Select test",type:z.wN.SELECT,name:"test",validator:z.wY.REQUIRED,keyValues:E}];(0,A.useEffect)((()=>{P(),D()}),[]);const P=async()=>{const[e,t]=await u(),s=e.map((e=>({value:"".concat(e.test_name,"_").concat(e.skill,"_").concat(e.skill_level),key:e.id})));R(s)},D=async()=>{const[e,s]=await j(n+1),a=e.filter((e=>e.is_operator)).map((e=>({value:e.username,key:e.id})));t((e=>[...e,...a]))};return(0,H.jsxs)("div",{className:"mx-3 my-2",children:[(0,H.jsx)("div",{className:"flex items-center justify-between",children:(0,H.jsx)(l.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,H.jsx)("h1",{className:"mt-4",children:"Testing Portal"})})}),(0,H.jsx)(l.A,{sx:{alignItems:"flex-start",pl:3},children:(0,H.jsxs)(l.A,{children:[(0,H.jsx)(V.A,{data:r,errors:_,onChange:e=>{const{name:t,value:s}=e.target;b((e=>(e.delete(t),e))),o((e=>({...e,[t]:s})))},schema:I}),(0,H.jsx)(B.A,{Button:!0,bordered:!0,onClick:async()=>{const e=(0,Z.bG)(I,r);if(b(e),e.size)return;let t=await p(r);console.log("response----",t),t&&await async function(e){localStorage.setItem("draweWidth",0);const t={key1:e.id},s=new URLSearchParams(t).toString(),a="/test?".concat(s);window.open(a,"_blank","rel=noopener noreferrer")}(t)},children:"Create"})]})})]})},Ct=()=>{const{token:e}=(0,g.d4)((e=>e[F.X.AUTH])),t={Authorization:"Bearer ".concat(e),"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){const e=new Q.Ay,s=await e.get("".concat(q.H.TRAINING,"/").concat(q.H.TRAININGS,"/"),{},t,M.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=new Q.Ay,a=await s.post("".concat(q.H.TRAINING,"/").concat(q.H.TRAININGS,"/"),e,t,(e=>(0,M.So)(e,null,"Created successfully!")));return null===a||void 0===a?void 0:a.data},update:async e=>{const s={name:e.name,metadata:e.metadata},a=new Q.Ay,n=await a.put("".concat(q.H.ASSET,"/").concat(q.H.LINE,"/").concat(e.id,"/"),s,t,(e=>(0,M.So)(e,null,"Line Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const s=new Q.Ay,a=await s.delete("".concat(q.H.ASSET,"/").concat(q.H.LINE,"/").concat(e,"/"),t,(e=>(0,M.So)(e,null,"Line deleted successfully!")));return null===a||void 0===a?void 0:a.data}}},kt=e=>{let{open:t,onClose:s,data:a,setData:n,onSubmit:i,loading:r,edit:o,users:c}=e;const{list:d,groupUser:u}=Ne(),[p,m]=(0,A.useState)([]);(0,A.useEffect)((()=>{g()}),[]);const x=[{title:"Training Name",placeholder:"Enter Training Name",type:z.wN.INPUT,name:"training_name",validator:z.wY.REQUIRED},{title:"Training Type",placeholder:"Enter Training Type",type:z.wN.INPUT,name:"training_type",validator:z.wY.REQUIRED},{title:"Training Description",placeholder:"Enter Training Description",type:z.wN.INPUT,name:"training_description"},{title:"Trainer",placeholder:"Enter trainer Name",type:z.wN.INPUT,name:"trainer"},{title:"Training Admin",placeholder:"Enter Training admin",type:z.wN.SELECT,name:"training_admin",validator:z.wY.REQUIRED,keyValues:c,multi:!0,height:"auto"},{title:"Groups",placeholder:"Select group",type:z.wN.SELECT,name:"group",keyValues:p,multi:!0,height:"auto"},{title:"Trainees",placeholder:"Select Trainees",type:z.wN.SELECT,name:"trainees",keyValues:c,multi:!0,height:"auto"},{title:"Start Date",placeholder:"Select Start Date",type:z.wN.DATE,name:"start_date",validator:z.wY.REQUIRED},{title:"End Date",placeholder:"Select End Date",type:z.wN.DATE,name:"end_date"},{title:"Start Time",placeholder:"Select start Time",type:z.wN.TIME,name:"start_time",validator:z.wY.REQUIRED},{title:"End Time",placeholder:"Select End Time",type:z.wN.TIME,name:"end_time"},{title:"Test Required at End of Training",type:z.wN.RADIO,name:"test_required",validator:z.wY.REQUIRED,keyValues:[{value:"yes",label:"Yes"},{value:"no",label:"No"}]},{title:"Feedback at End of Training",type:z.wN.RADIO,name:"feedback_required",validator:z.wY.REQUIRED,keyValues:[{value:"yes",label:"Yes"},{value:"no",label:"No"}]},"yes"===a.feedback_required&&{title:"Feedback Link",placeholder:"Enter Feedback Link",type:z.wN.INPUT,name:"feedback_link",validator:z.wY.REQUIRED}],[h,w]=(0,A.useState)(new Map),g=async()=>{const[e]=await d();console.log("fetchGroups------\x3e>>>",e);const t=e.map((e=>({value:e.name,key:e.id})));m((e=>[...e,...t]))};return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(K.Ay,{display:"grid",gap:1,sx:{},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:(0,H.jsx)(V.A,{data:a,errors:h,onChange:e=>{console.log(e.target);const{name:t,value:s}=e.target;w((e=>(e.delete(t),e))),n((e=>({...e,[t]:s})))},schema:x})}),(0,H.jsx)(l.A,{alignItems:"flex-end",mb:1,children:(0,H.jsx)(B.A,{onClick:async()=>{const e=(0,Z.bG)(x,a);w(e),e.size||await i()},loading:r,children:"Create"})})]})},_t=()=>{const e=(0,k.zy)(),t=(0,k.Zp)(),s=e.state,[a,n]=(0,A.useState)([]),[r,o]=(0,A.useState)([]),[c,d]=(0,A.useState)(),[u,p]=(0,A.useState)(0),[m,x]=(0,A.useState)(!1),[h,w]=(0,A.useState)(!1),[g,y]=(0,A.useState)(0),[f,j]=(0,A.useState)({feedback_required:"no",test_required:"no"}),{list:v,create:S,update:C,remove:_}=Ct(),{groupUser:b}=Ne(),{list:T}=W();(0,A.useEffect)((()=>{E(),N()}),[g]);const N=async()=>{const[e]=await v();o(e)},E=async()=>{const[e,t]=await T(g+1),s=e.map((e=>({value:e.username,key:e.id})));n((e=>[...e,...s]))},R=[{id:1,title:"Training Name",render:e=>(0,H.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},children:e.training_name})},{id:2,title:"Training Type",render:e=>e.training_type},{id:22,title:"Trainer",render:e=>e.trainer},{id:23,title:"Start Date",render:e=>e.start_date},{id:24,title:"End Date",render:e=>e.end_date},{id:32,title:"Details",render:e=>(0,H.jsx)(Ue,{icon:(0,H.jsx)(De.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})}];return(0,H.jsxs)("div",{className:"mx-4",children:[(0,H.jsxs)("div",{className:"flex items-center justify-between",children:[(0,H.jsx)(l.A,{sx:{flexDirection:"row",alignItems:"center"},children:"add"===h?(0,H.jsx)("h1",{className:"",children:"Plan Training"}):(0,H.jsxs)("h1",{className:"",children:["Plan Training",(0,H.jsxs)("span",{className:"fs-30 ml-1 c-gray",children:["(",r.length,")"]})]})}),"add"!==h&&(0,H.jsx)(B.A,{onClick:()=>w("add"),children:"Add Training"})]}),"add"!==h?(0,H.jsx)(Y,{columns:R,rows:r,rowsPerPage:5,loading:"fetch"===c,titleCellClasses:"c-gray fw-700",page:g,setPage:y,paginator:!0,serialize:!0,total:u,trainings:!0}):(0,H.jsx)(kt,{users:a,open:"add"===h,onClose:()=>{w(!1),x(!1)},data:f,edit:m,setData:j,onSubmit:async()=>{var e,a=[];if((null===(e=f.group)||void 0===e?void 0:e.length)>0){a=(await Promise.all(f.group.map((e=>b(e))))).map((e=>e.users.map((e=>e.id)))).flat()}const n={training_name:f.training_name,training_type:f.training_type,training_description:f.training_description,trainer:f.trainer,training_admin:f.training_admin,trainees:[...f.trainees,...a],start_date:f.start_date,end_date:f.end_date,start_time:f.start_time,end_time:f.end_time,feedback_link:f.feedback_link};d("fetch");let l=await S(n,s);console.log("planning createRes----",l),j({}),w(!1),"yes"===f.test_required?t("/test-upload",{state:{id:l.id,training_admin:n.training_admin,trainees:n.trainees}}):await N(),d(!1),x(!1)}})]})},bt=e=>{let{open:t,onClose:s,data:a,setData:n,onSubmit:i,onSubmit2:r,loading:o,setSelectedQuestions:c,skills:d,users:u,testList:p}=e;const[m,x]=(0,A.useState)(new Map),[h,w]=(0,A.useState)(0),{getPerformanceSkill:g,getPerformanceId:y}=gt(),f=[0===h&&{title:"Operators",placeholder:"Select operator",type:z.wN.SELECT,name:"operator",validator:z.wY.REQUIRED,keyValues:u},0===h&&{title:"Skill",placeholder:"Select Skill",type:z.wN.INPUT,name:"skill",disabled:!0},0===h&&{title:"Skill Level",placeholder:"Select skill level",type:z.wN.INPUT,name:"skill_level",disabled:!0},1===h&&{title:"Date",type:z.wN.DATE,name:"plan_date",validator:z.wY.REQUIRED},1===h&&{title:"Plan",placeholder:"",type:z.wN.INPUT,name:"plan",inputType:"number",validator:z.wY.REQUIRED},1===h&&{title:"Actual",placeholder:"",type:z.wN.INPUT,inputType:"number",name:"actual",validator:z.wY.REQUIRED},1===h&&{title:"Rejected",placeholder:"",type:z.wN.INPUT,inputType:"number",name:"rejected",validator:z.wY.REQUIRED}];return(0,H.jsxs)(X.A,{open:t,onClose:s,width:"min(700px,90vw)",wrapperClasses:"px-5",children:[(0,H.jsx)("h3",{className:"opacity-80",children:"Add Performance"}),(0,H.jsx)(V.A,{data:a,errors:m,onChange:e=>{const{name:t,value:s}=e.target;x((e=>(e.delete(t),e))),n((e=>({...e,[t]:s}))),"operator"===t&&(console.log("operator id ",s),(async e=>{let t=e,s={operator:e},l=await g(s),i=await y(s);console.log("res--------------",l),console.log("resPer--------------",i),l.skill_id&&i[0].id?3===l.skill_level?n({...a,skill_level:l.skill_level,skill:l.skill,operator:t,skill_id:i[0].id}):n({...a,skill_level:l.skill_level+1,skill:l.skill,operator:t,skill_id:i[0].id}):(n({...a,skill_level:"",skill:"",operator:"",skill_id:""}),_.oR.warn("record not found"))})(s))},schema:f}),(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,H.jsx)(B.A,{bordered:!0,gray:!0,onClick:s,children:"Cancel"}),(0,H.jsx)(B.A,{onClick:async()=>{if(0!==h)if(1!==h);else{const e=(0,Z.bG)(f,a);if(x(e),e.size)return;await r()}else{const e=(0,Z.bG)(f,a);if(x(e),e.size)return;w((e=>e+1))}},loading:o,children:"Next"})]})]})};var Tt=s(1750);const Nt=()=>{const e=(0,k.zy)(),[t,s]=((0,k.Zp)(),e.state,(0,A.useState)([])),[a,n]=(0,A.useState)(),[i,r]=(0,A.useState)(0),[o,c]=(0,A.useState)(!1),[d,u]=(0,A.useState)("testDetail"),[p,m]=(0,A.useState)(0),[x,h]=(0,A.useState)({operator:"",plan_date:(new Date).toISOString().split("T")[0]}),{putPerformanceRecord:w,performanceList:g,createTest:y,update:f,remove:j,performanceRecord:v,getPerformanceRecord:S,postPerformance:C}=gt(),{list:_}=W(),{list:b}=Ce(),[T,N]=(0,A.useState)(new Map),[E,R]=(0,A.useState)([]),[I,P]=(0,A.useState)([]),[D,U]=(0,A.useState)([]),[L,O]=(0,A.useState)([]),[G,z]=(0,A.useState)(""),[M,Q]=(0,A.useState)((new Date).toISOString().split("T")[0]);(0,A.useEffect)((()=>{X(),F()}),[]),(0,A.useEffect)((()=>{q()}),[M]);const q=async()=>{const e=await g(M);console.log("res performance list",e.list),U(e.list)},F=async()=>{const[e,t]=await _(),a=e.filter((e=>e.is_operator)).map((e=>({value:e.username,key:e.id})));s((e=>[...e,...a]))},X=async()=>{const[e]=await b(p+1),t=e.results.map((e=>({value:e.skill_name,key:e.id})));R((e=>[...e,...t]))};return(0,H.jsxs)("div",{className:"mx-3 my-2",children:[(0,H.jsxs)("div",{className:"flex items-center justify-between",children:[(0,H.jsx)(l.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,H.jsx)("h1",{className:"mt-4",children:"Performance"})}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:1},children:[(0,H.jsx)(l.A,{children:(0,H.jsx)(Tt.A,{value:M,onChange:e=>Q(e.target.value)})}),(0,H.jsx)(B.A,{width:"fit-content",onClick:()=>u("addReport"),children:"Add Performance"})]})]}),(0,H.jsx)(Y,{columns:[{id:1,title:"Operator Aadhar",render:e=>e.aadhar_number},{id:13,title:"Skill",render:e=>e.skill},{id:12,title:"Skill Level",render:e=>e.skill_level},{id:2,title:"Plan",render:e=>e.plan},{id:3,title:"Actual",render:e=>e.actual}],rows:D,rowsPerPage:10,loading:"fetch"===a,titleCellClasses:"c-gray fw-700",serialize:!0,total:i}),(0,H.jsx)(bt,{open:"addReport"===d,onClose:()=>{u(!1)},users:t,skills:E,testList:I,data:x,setData:h,onSubmit2:async()=>{var e=x.plan_date.replace(/-/g,"");const t={new_entry:{[e]:{plan:x.plan,actual:x.actual}}};await w(x.skill_id,t),h({}),u(!1),h({...x,plan_date:(new Date).toISOString().split("T")[0]}),q()}})]})};var Et=s(2819);const Rt=e=>{let{open:t,onClose:s}=e;const[a,n]=(0,A.useState)(new Map);return(0,H.jsx)(X.A,{open:t,onClose:s,width:"50vw",top:"20vh",wrapperClasses:"px-5",children:(0,H.jsxs)(l.A,{sx:{justifyContent:"center",alignItems:"center",mt:4},children:[(0,H.jsx)(Be.A,{sx:{color:z.lm.LIGHT_GREEN,width:100,height:100}}),(0,H.jsxs)(i.A,{textAlign:"center",className:"fw-24",sx:{py:4},children:["You have successfully changed password.",(0,H.jsx)("br",{}),"You will be automatically logged off ",(0,H.jsx)("br",{}),"Please Login again with new password"]})]})})},It=()=>{const e=(0,k.Zp)(),[t,s]=(0,A.useState)([]),[a,n]=(0,A.useState)(),[r,o]=(0,A.useState)(0),[c,d]=(0,A.useState)(0),[u,p]=(0,A.useState)(!1),[m,x]=(0,A.useState)({name:"",metadata:{}}),{list:h,create:w,update:g,remove:y}=Ge();return(0,H.jsxs)("div",{className:"mx-3 my-2",children:[(0,H.jsx)("div",{className:"flex items-center justify-between",children:(0,H.jsx)("h1",{className:"mt-4",children:"Profile"})}),(0,H.jsxs)(K.Ay,{display:"grid",sx:{gap:1,mt:1,width:"70%"},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Name"}),(0,H.jsx)(G.A,{width:"480px",disabled:!0,gray:!0,value:"Suresh N L"}),(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Employee Code"}),(0,H.jsx)(G.A,{width:"480px",disabled:!0,value:"RQ23337"}),(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Department"}),(0,H.jsx)(G.A,{width:"480px",disabled:!0,value:"Assembly 1"})]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:1,alignItems:"center",mt:1},children:[(0,H.jsx)(i.A,{className:"fw-24",children:" Change Password"}),(0,H.jsx)(i.A,{color:z.lm.TEXT_GRAY,className:"fw-14",children:"( Password to be min 8 character long with one special character %,&, @ ,$ )"})]}),(0,H.jsxs)(K.Ay,{display:"grid",sx:{gap:1,mt:1,width:"70%"},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Current Password"}),(0,H.jsx)(G.A,{width:"480px"}),(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"New Password"}),(0,H.jsx)(G.A,{width:"458px",icon:(0,H.jsx)(Et.A,{fontSize:"small"})}),(0,H.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:z.lm.TEXT_GRAY},children:"Re-enter New Password"}),(0,H.jsx)(G.A,{width:"458px",icon:(0,H.jsx)(Et.A,{fontSize:"small"})})]}),(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:6,mb:1,px:10,children:[(0,H.jsx)(B.A,{bordered:!0,gray:!0,children:"Cancel"}),(0,H.jsx)(B.A,{color:"gray",onClick:()=>{p("confirm"),setTimeout((()=>{e("/oplogin")}),2e3)},children:(0,H.jsx)(i.A,{color:z.lm.TEXT_GRAY,children:"Confirm"})})]}),(0,H.jsx)(Rt,{open:"confirm"===u,onClose:()=>{p(!1)}})]})},Pt=e=>{let{open:t,onClose:s}=e;const[a,n]=(0,A.useState)(new Map);return(0,H.jsx)(X.A,{open:t,onClose:s,width:"50vw",top:"20vh",wrapperClasses:"px-5",children:(0,H.jsxs)(l.A,{sx:{justifyContent:"center",alignItems:"center",mt:4},children:[(0,H.jsx)(Be.A,{sx:{color:z.lm.LIGHT_GREEN,width:100,height:100}}),(0,H.jsxs)(i.A,{textAlign:"center",className:"fw-24",sx:{py:4},children:["You have successfully changed password.",(0,H.jsx)("br",{}),"You will be automatically logged off ",(0,H.jsx)("br",{}),"Please Login again with new password"]})]})})},Dt=()=>{(0,k.Zp)();const[e,t]=(0,A.useState)([]),[s,a]=(0,A.useState)(),[n,r]=(0,A.useState)(0),[o,c]=(0,A.useState)(0),[d,u]=(0,A.useState)(!1),[p,m]=(0,A.useState)({name:"",metadata:{}}),{list:x,create:h,update:w,remove:g}=Ge(),y=[{placeholder:"Select Language",type:z.wN.SELECT,name:"name",validator:z.wY.REQUIRED}],[f,j]=(0,A.useState)(new Map);return(0,H.jsxs)("div",{className:"mx-3 my-2",children:[(0,H.jsx)("div",{className:"flex items-center justify-between",children:(0,H.jsx)("h1",{className:"mt-4",children:"Change Language"})}),(0,H.jsxs)(l.A,{sx:{justifyContent:"center",alignItems:"center"},children:[(0,H.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",width:"90%"},children:[(0,H.jsx)(l.A,{sx:{width:"50%"},children:(0,H.jsx)(i.A,{sx:{fontWeight:500,fontSize:18},children:"Existing "})}),(0,H.jsx)(l.A,{sx:{width:"50%",justifyContent:"center",alignItems:"center"},children:(0,H.jsx)(i.A,{sx:{fontWeight:500,fontSize:18},children:"Selected  "})})]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",mt:1,width:"90%"},children:[(0,H.jsx)(i.A,{sx:{fontWeight:500,fontSize:16},children:"English  "}),(0,H.jsx)(l.A,{sx:{width:420},children:(0,H.jsx)(V.A,{data:p,errors:f,onChange:e=>{const{name:t,value:s}=e.target;j((e=>(e.delete(t),e))),m((e=>({...e,[t]:s})))},schema:y})})]})]}),(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:6,mb:1,px:4,children:[(0,H.jsx)(B.A,{bordered:!0,gray:!0,children:"Cancel"}),(0,H.jsx)(B.A,{color:"gray",onClick:()=>u("confirm"),children:(0,H.jsx)(i.A,{color:z.lm.TEXT_GRAY,children:"Confirm"})})]}),(0,H.jsx)(Pt,{open:"confirm"===d,onClose:()=>{u(!1)}})]})},Ut=()=>{var e,t;const s=(0,g.wA)(),[a,n]=(0,A.useState)(!1),l=(0,g.d4)((e=>e[F.X.AUTH])),i=null===l||void 0===l||null===(e=l.user)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.role,r=[{path:"/change-password",element:(0,H.jsx)(It,{})},{path:"/change-language",element:(0,H.jsx)(Dt,{})},{path:"/report",element:(0,H.jsx)(Nt,{})},{path:"/TestDetail",element:(0,H.jsx)(We,{})},{path:"/plan-training",element:(0,H.jsx)(_t,{})},{path:"/test-portal",element:(0,H.jsx)(St,{})},{path:"/skill-matrix",element:(0,H.jsx)(vt,{})},{path:"/test",element:(0,H.jsx)(tt,{})},{path:"/test-upload",element:(0,H.jsx)(it,{})},{path:"/skill-page",element:(0,H.jsx)(pt,{})},{path:"/question-bank",element:(0,H.jsx)(xt,{})},{path:"/group",element:(0,H.jsx)(Oe,{})},{path:"/error",element:(0,H.jsx)(_e,{})},{path:"/users",element:i===z.z7.ADMINISTRATOR?(0,H.jsx)(ke,{}):(0,H.jsx)(_e,{})},{path:"/profile",element:i===z.z7.ADMINISTRATOR?(0,H.jsx)(Ye,{}):(0,H.jsx)(_e,{})}];return(0,A.useEffect)((()=>{(0,M.A)(s,l),n(!0)}),[]),a?(0,H.jsx)(k.BV,{children:r.map((e=>{let{path:t,element:s}=e;return(0,H.jsx)(k.qh,{element:s,path:t},t)}))}):null};var Lt=s(8089),Ot=s(2177),Gt=s(4717),zt=s(3235),Ht=s(122),Yt=s(1006),Mt=s(5912),Qt=s(6472);const qt=parseInt(localStorage.getItem("draweWidth")),Ft=(0,C.A)(a.Ay,{shouldForwardProp:e=>"open"!==e})((e=>{let{open:t}=e;return{width:qt,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...t&&{width:qt,overflowX:"hidden","& .MuiDrawer-paper":{width:qt,overflowX:"hidden",backgroundColor:z.lm.BG_GRAY}},...!t&&{overflowX:"hidden",width:"50px","& .MuiDrawer-paper":{overflowX:"hidden",width:"50px"}}}})),Wt={title:"Users",icon:y.A,path:"/users"},Bt=(Ot.A,{title:"Groups",icon:f.A,path:"/group"}),Xt=[{title:"Skill Matrix",icon:j.A,path:"/skill-matrix"},{title:"Plan Training",icon:j.A,path:"/plan-training"},{title:"Skill Page",icon:j.A,path:"/skill-page"},{title:"Performance",icon:j.A,path:"/report"},{title:"Test Portal",icon:j.A,path:"/test-portal"},{title:"Question Bank",icon:j.A,path:"/question-bank"},{title:"Test Master",icon:j.A,path:"/test-upload"}],Vt=()=>{const[e,t]=(0,A.useState)([]),s=((0,g.d4)((e=>e[F.X.AUTH])),(0,g.d4)((e=>{var t;return null===(t=e[F.X.AUTH].user)||void 0===t?void 0:t.data}))),{logout:a,profile2:y}=(0,Lt.A)(),[f,j]=(0,A.useState)(!0),C=(0,k.Zp)(),{pathname:_}=(0,k.zy)(),[b,T]=(0,A.useState)(null),N=Boolean(b);(0,A.useEffect)((()=>{const e=[];console.log("redux user",s),(null===s||void 0===s?void 0:s.role)===z.z7.SUPERADMIN||localStorage.getItem("role")===z.z7.SUPERADMIN?(e.push(...Xt),t(e)):(null===s||void 0===s?void 0:s.role)===z.z7.ADMINISTRATOR||localStorage.getItem("role")===z.z7.ADMINISTRATOR?(e.push(Wt,Bt,...Xt),t(e)):t(Xt),localStorage.getItem("t_token")||(console.log("islogin",s),C("/select",{replace:!0}))}),[]);const E=()=>{T(null)};return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(n.A,{variant:"outlined",sx:{zIndex:e=>e.zIndex.drawer+1,width:"100%",position:"fixed",backgroundColor:z.lm.WHITE},children:(0,H.jsxs)(l.A,{sx:{flexDirection:"row",px:1,py:.5,justifyContent:"space-between"},children:[(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:2,alignItems:"center"},children:[(0,H.jsx)("img",{src:Yt,width:"80px",height:"43px",style:{objectFit:"contain"}}),(0,H.jsx)("img",{src:Mt,width:"100px",height:"33px",style:{objectFit:"contain"}})]}),(0,H.jsxs)(l.A,{sx:{flexDirection:"row",gap:2,justifyContent:"flex-end",alignItems:"center"},children:[(0,H.jsxs)(i.A,{className:"fw-14",sx:{width:"100%",pr:2,mt:1,color:z.lm.TEXT_GRAY},children:["Welcome ",null===s||void 0===s?void 0:s.name]}),(0,H.jsx)(l.A,{children:(0,H.jsx)(r.A,{children:(0,H.jsx)(Ht.A,{fontSize:"large"})})}),(0,H.jsx)(o.A,{sx:{maxWidth:"calc(100vw - ".concat(f?180:50,"px)")},disableGutters:!0,className:"h-50 minh-50",children:(0,H.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,H.jsx)(r.A,{id:"basic-button","aria-controls":N?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":N?"true":void 0,onClick:e=>{console.log("popup",e.currentTarget),T(e.currentTarget)},children:(0,H.jsx)(zt.A,{fontSize:"large"})}),(0,H.jsxs)(c.A,{id:"basic-menu",anchorEl:b,open:N,onClose:E,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,H.jsxs)(d.A,{sx:{py:0},onClick:()=>{E()},children:[(0,H.jsx)(u.A,{children:(0,H.jsx)(Ot.A,{fontSize:"small"})}),(0,H.jsx)(p.A,{children:null===s||void 0===s?void 0:s.name})]}),(0,H.jsx)(w.A,{}),(0,H.jsxs)(d.A,{sx:{py:0},onClick:()=>{E()},children:[(0,H.jsx)(u.A,{children:(0,H.jsx)(S.A,{fontSize:"small"})}),(0,H.jsx)(p.A,{children:null===s||void 0===s?void 0:s.email})]}),(0,H.jsx)(w.A,{}),(0,H.jsxs)(d.A,{sx:{py:0},onClick:()=>{E()},children:[(0,H.jsx)(u.A,{children:(0,H.jsx)(Ot.A,{fontSize:"small"})}),(0,H.jsx)(p.A,{children:null===s||void 0===s?void 0:s.role})]}),(0,H.jsx)(w.A,{}),(0,H.jsxs)(d.A,{sx:{py:0},onClick:()=>{E(),C("/change-password")},children:[(0,H.jsx)(u.A,{children:(0,H.jsx)(Gt.A,{fontSize:"small"})}),(0,H.jsx)(p.A,{children:"Change Password"})]}),(0,H.jsx)(w.A,{}),(0,H.jsxs)(d.A,{sx:{py:0},onClick:()=>{E(),C("/change-language")},children:[(0,H.jsx)(u.A,{children:(0,H.jsx)(Qt.A,{fontSize:"small"})}),(0,H.jsx)(p.A,{children:"Change Language"})]}),(0,H.jsx)(w.A,{}),(0,H.jsxs)(d.A,{sx:{py:0},onClick:()=>{E(),a()},children:[(0,H.jsx)(u.A,{children:(0,H.jsx)(v.A,{fontSize:"small"})}),(0,H.jsx)(p.A,{children:"Logout"})]})]})]})})]})]})}),(0,H.jsx)(Ft,{open:f,variant:"permanent",onClose:()=>j((e=>!e)),sx:{},children:(0,H.jsx)(m.A,{sx:{width:qt,backgroundColor:z.lm.BG_GRAY,mt:7},role:"presentation",children:(0,H.jsx)(x.A,{dense:!0,children:e.map((e=>{let{title:t,path:s,icon:a}=e;return(0,H.jsx)(h.Ay,{sx:{ml:1},button:!0,onClick:()=>C(s),children:(0,H.jsx)(p.A,{sx:{"& .MuiListItemText-primary":{fontSize:"16px",fontWeight:"".concat(_===s?"700":"500")}},primary:t,className:"".concat("fw-700")})},s)}))})})}),(0,H.jsx)(m.A,{sx:{mt:8,position:"relative",left:f?qt:"50px",overflow:"hidden"},children:(0,H.jsx)(m.A,{sx:{maxWidth:"calc(100vw - ".concat(f?qt:50,"px)")},children:(0,H.jsx)(Ut,{})})})]})}}}]);
//# sourceMappingURL=606.b1ee1088.chunk.js.map