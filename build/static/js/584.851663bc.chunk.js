"use strict";(self.webpackChunktraceability=self.webpackChunktraceability||[]).push([[584],{6255:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Yn});var s=a(4109),n=a(2314),l=a(9216),i=a(5865),r=a(5263),o=a(7392),d=a(378),c=a(2143),u=a(2050),m=a(8734),h=a(6446),p=a(5721),x=a(1322),g=a(5043),w=a(9336),y=a(3003),j=a(4117),f=a(9237),A=a(9193),v=a(8635),S=a(9906),b=a(7402),C=a(5415),_=a(5903),N=a(3216),k=a(1036),I=a(1806),E=a(3460),T=a(9652),D=a(7502),R=a(9650),P=a(4882),O=a(8076),$=a(207),L=a(9090),M=a(5974),U=a(8057),z=a(8426),F=a(6467),H=a(4978),q=a(579);const G=e=>{let{rows:t=[],columns:a=[],minWidth:s=650,tableClasses:n="",titleCellClasses:i="",rowClassesMethod:r=()=>{},rowClasses:o="",rowCellClasses:d="",rowsPerPage:c=10,paginator:u=!1,loading:m,dense:h,hideBorder:p=!1,onRowClick:x=Function.prototype,serialize:g=!1,page:w=0,setPage:y=Function.prototype,total:j,headColor:f,headLabelColor:A,tableBodyColor:v}=e;return(0,q.jsx)(R.A,{children:(0,q.jsxs)(I.A,{sx:{minWidth:s},className:`${n}`,size:h&&"small",children:[(0,q.jsx)(P.A,{sx:{backgroundColor:f||F.lm.BG_GRAY},children:(0,q.jsxs)(O.A,{children:[g&&(0,q.jsx)(T.A,{className:`${i} text-nowrap h3`,sx:{color:A||"black"},children:(0,H.t)("sno")}),a.map(((e,t)=>(0,q.jsx)(T.A,{style:{width:e.width&&e.width,color:A||"black"},className:`${i} text-nowrap`,children:e.title},t)))]})}),(0,q.jsx)(l.A,{sx:{p:.3}}),(0,q.jsx)(E.A,{children:m?(0,q.jsx)(O.A,{children:(0,q.jsx)(T.A,{sx:{alignContent:"center",alignItems:"center"},colSpan:12,className:"flex h-300 text-center",children:(0,q.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,q.jsx)(M.A,{big:!0,blue:!0})})})}):t&&t.length?t.map(((e,t)=>(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(O.A,{sx:{backgroundColor:v||F.lm.LG_GRAY,[`& .${D.A.root}`]:{borderBottom:p?"none":"true",mt:10},...r(t,e)},className:`${o}`,onClick:()=>x(e.id),children:[g&&(0,q.jsx)(T.A,{sx:{color:"black"},className:`${d} fw-500 `,align:"left",children:t+1}),a.map(((t,a)=>(0,q.jsx)(T.A,{sx:{width:t.width&&t.width,color:"black"},className:`${d} fw-500`,align:"left",children:t.render(e)},a)))]},t),(0,q.jsx)(l.A,{sx:{p:.3}})]}))):(0,q.jsx)(O.A,{children:(0,q.jsxs)(T.A,{colSpan:12,className:"text-center h-300 flex items-center opacity-60 w-full",children:[(0,q.jsx)("img",{src:U,alt:"leaf",height:100,className:"w-full object-contain"}),(0,q.jsxs)("p",{className:"text-center",children:[(0,H.t)("noRecordFound")," !"]})]})})}),u&&(0,q.jsx)($.A,{children:(0,q.jsx)(O.A,{children:(0,q.jsx)(L.A,{rowsPerPageOptions:[],count:j||t.length,rowsPerPage:c,onPageChange:(e,t)=>y(t),page:w})})})]})})};var B=a(1136),Q=a(9687),Y=a(2359),W=a(2670);const V=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{listUsers:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.get(`${Y.H.USERS}/?page=${e}&page_size=10&is_operator=${a}`,{},t,B.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},list:async function(){const e=new Q.Ay,a=await e.get(`${Y.H.USERS}/`,{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},usersAll:async e=>{const a=new Q.Ay,s=await a.get("users/?page=1&page_size=200&is_operator=0",{},t,B.So);return null!==s&&void 0!==s&&s.data?s.data.results.map((e=>({value:e.username,key:e.id}))):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post(`${Y.H.USERS}/`,e,t,(e=>(0,B.So)(e,null,"User created successfully!")));return null===s||void 0===s?void 0:s.data},userProfile:async e=>{const a=new Q.Ay,s=await a.get(`${Y.H.USER}-${Y.H.PROFILE}/${e}/`,{},t,B.So);return null!==s&&void 0!==s&&s.data?null===s||void 0===s?void 0:s.data:[[],0]},updateProfile:async(e,a)=>{const s=new Q.Ay,n=await s.put(`${Y.H.USER}-${Y.H.PROFILE}/${e}/`,a,t,(e=>(0,B.So)(e,null,"User Updated successfully!")));return null===n||void 0===n?void 0:n.data},update:async(e,a)=>{const s=new Q.Ay,n=await s.put(`${Y.H.USER}/${e}/`,a,t,(e=>(0,B.So)(e,null,"User Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{if(!e)return;const a=new Q.Ay,s=await a.delete(`${Y.H.USER}/${e}/`,t,(e=>(0,B.So)(e,null,"User deleted successfully!")));return null===s||void 0===s?void 0:s.data},opratorList:async function(){var e;const a=new Q.Ay,s=await a.get(`${Y.H.OPERATORS}/`,{},t,B.So);return(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.results.length)>0?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data.results,s.data.count]):[[],0]},createOperator:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post(`${Y.H.OPERATORS}/`,e,t,(e=>(0,B.So)(e,null,"User created successfully!")));return null===s||void 0===s?void 0:s.data},updateOperator:async(e,a)=>{const s=new Q.Ay,n=await s.put(`${Y.H.OPERATOR}/${e}/`,a,t,(e=>(0,B.So)(e,null,"Operator Updated successfully!")));return null===n||void 0===n?void 0:n.data},removeOperator:async e=>{if(!e)return;const a=new Q.Ay,s=await a.delete(`${Y.H.OPERATOR}/${e}/`,t,(e=>(0,B.So)(e,null,"Operator deleted successfully!")));return null===s||void 0===s?void 0:s.data},listByUserName:async e=>{const a={username:e},s=new Q.Ay,n=await s.post("search-by-username/?is_operator=0",a,t,(e=>(0,B.So)(e,null)));return null!==n&&void 0!==n&&n.data?null===n||void 0===n?void 0:n.data:[[]]},listByAadhar:async e=>{const a={aadhar_number:e},s=new Q.Ay,n=await s.post("search-by-aadhar/?is_operator=1",a,t,(e=>(0,B.So)(e,null)));return null!==n&&void 0!==n&&n.data?null===n||void 0===n?void 0:n.data:[[]]},listByAadhar2:async e=>{const a=new Q.Ay,s=await a.get(`${Y.H.USERS}/?is_operator=1&page=1&page_size=200`,{},t,B.So);if(null!==s&&void 0!==s&&s.data){return s.data.results.filter((e=>e.status)).map((e=>({value:e.username,key:e.id})))}return[[],0]},updateOpSkill:async(e,a)=>{const s=new Q.Ay,n=await s.post(`training/update-skill/${e}/`,a,t,(e=>(0,B.So)(e,null,"Skill Updated successfully!")));return null===n||void 0===n?void 0:n.data},createByCsv:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post(`${Y.H.USERS}/`,e,t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data},updateProfileCSV:async(e,a)=>{const s=new Q.Ay,n=await s.put(`${Y.H.USER}-${Y.H.PROFILE}/${e}/`,a,t,(e=>(0,B.So)(e,null)));return null===n||void 0===n?void 0:n.data},getNotification:async e=>{const a=new Q.Ay,s=await a.get("notifications/user-settings/",{},t,B.So);return null!==s&&void 0!==s&&s.data?s.data:[[],0]},postNotification:async e=>{console.log("notification data-----",e);const a=new Q.Ay,s=await a.put("notifications/user-settings/",e,t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data},activeOperators:async e=>{const a=new Q.Ay,s=await a.get(`${Y.H.USERS}/?is_operator=1&page=1&page_size=200`,{},t,B.So);if(null!==s&&void 0!==s&&s.data){return s.data.results.filter((e=>e.status)).map((e=>({value:e.username,key:e.id})))}return[[],0]},activeUsers:async e=>{const a=new Q.Ay,s=await a.get("users/?page=1&page_size=200&is_operator=0",{},t,B.So);if(null!==s&&void 0!==s&&s.data){return s.data.results.filter((e=>e.status)).map((e=>({value:e.username,key:e.id})))}return[[],0]}}};var X=a(949),J=a(7810),Z=a(2497),K=a(8595),ee=a(5786);const te=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,handleAdd2:o,loading:d,tab:c}=e;const{t:u,i18n:m}=(0,j.Bd)(),h=[{title:u("user_name"),placeholder:u("enterUserName"),type:F.wN.INPUT,name:"username",validator:F.wY.NAME},{title:u("email"),placeholder:u("enterEmail"),type:F.wN.INPUT,name:"email",validator:F.wY.EMAIL},{title:u("full_name"),placeholder:u("enterFullName"),type:F.wN.INPUT,name:"fullname"}],p=[{title:u("aadhaarNumber"),placeholder:u("aadhaarNumber"),type:F.wN.INPUT,name:"aadhar_no",inputType:"number",validator:F.wY.REQUIRED&&F.wY.AADHAR},{title:u("full_name"),placeholder:u("enterFullName"),type:F.wN.INPUT,name:"fullname"}],x=[{title:u("phoneNumber"),placeholder:u("phoneNumber"),type:F.wN.INPUT,name:"phone_number",inputType:"number",validator:F.wY.PHONE},{title:u("employeeID"),placeholder:u("employeeID"),type:F.wN.INPUT,name:"employee_id"},0===c&&{title:"Aadhar Number",placeholder:"Aadhar Number",type:F.wN.INPUT,name:"aadhar_number",inputType:"number",validator:F.wY.AADHAR},{title:u("employeeType"),placeholder:u("employeeType"),type:F.wN.INPUT,name:"employee_type"},{title:u("date_of_joining"),placeholder:u("date_of_joining"),type:F.wN.DATE,name:"date_of_joining"}],[w,y]=(0,g.useState)(new Map),[f,A]=(0,g.useState)(0);return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"50vw",top:"10vh",hideCloseIcon:ee.A,wrapperClasses:"px-5 py-4",crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:[(0,q.jsx)("h3",{className:"opacity-80",children:u(0===c?"add_user":"add_operator")}),(0,q.jsx)(Z.A,{data:s,errors:w,onChange:e=>{const{name:t,value:a}=e.target;y((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:0===f?0===c?h:p:x}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:u("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{if(0===f){const e=(0,K.bG)(0===c?h:p,s);if(console.log("_errors",e),y(e),e.size)return;let t=await r();return console.log("step error-----\x3e>>",t),void(!1!==t&&A((e=>e+1)))}if(1===f){const e=(0,K.bG)(x,s);if(y(e),e.size)return;return await o(),void A(0)}},loading:d,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:u("next")})})]})]})},ae=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,handleAdd2:o,loading:d,tab:c,edit:u,fetchUsers:m}=e;const{t:h,i18n:p}=(0,j.Bd)(),{updateProfile:x,userProfile:w}=V(),f=(0,y.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.USER_ITEM)||void 0===t?void 0:t.data})),[A,v]=(0,g.useState)(new Map),[S,b]=(0,g.useState)(0),[C,_]=(0,g.useState)({username:"",email:"",fullname:"",aadhar_number:"",phone_number:"",employee_id:"",employee_type:"",date_of_joining:"",aadhar_no:""});(0,g.useEffect)((()=>{void 0!==f&&(console.log("user data----------",c),_(1===c?{...C,username:f.username||f.user.username,email:f.email,fullname:f.fullname||f.user.fullname,aadhar_number:f.aadhar_number||"",phone_number:f.phone_number||"",date_of_joining:f.date_of_joining||""}:{...C,aadhar_number:f.aadhar_number||"",phone_number:f.phone_number||"",date_of_joining:f.date_of_joining||""}))}),["edit"===u]);const N=[{title:"Aadhar Number",placeholder:"Aadhar Number",type:F.wN.INPUT,name:"aadhar_number",inputType:"number",validator:F.wY.AADHAR},{title:"Phone Number",placeholder:"Phone Number",type:F.wN.INPUT,name:"phone_number",inputType:"number",validator:F.wY.PHONE},{title:"Date of Joining",placeholder:"date_of_joining",type:F.wN.DATE,name:"date_of_joining"}],k=[{title:h("aadhaarNumber"),placeholder:"Aadhar Number",type:F.wN.INPUT,name:"aadhar_number",inputType:"number",validator:F.wY.REQUIRED&&F.wY.AADHAR},{title:"Phone Number",placeholder:"Phone Number",type:F.wN.INPUT,name:"phone_number",inputType:"number",validator:F.wY.PHONE},{title:h("date_of_joining"),placeholder:"date_of_joining",type:F.wN.DATE,name:"date_of_joining"}];return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsx)("h3",{className:"opacity-80",children:h(0===c?"edit_user":"edit_operator")}),(0,q.jsx)(Z.A,{data:C,errors:A,onChange:e=>{const{name:t,value:a}=e.target;v((e=>(e.delete(t),e))),_((e=>({...e,[t]:a})))},schema:0===c?N:k}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:h("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{if(0!==S);else{const e=(0,K.bG)(0===c?N:k,C);if(console.log("_errors",e),v(e),e.size)return;await async function(){let e={username:C.username,email:C.email,fullname:C.fullname},t={aadhar_number:C.aadhar_number,fullname:C.fullname,phone_number:C.phone_number,date_of_joining:C.date_of_joining},s=await w(0===c?f.id:f.user.id);await x(s.id,0===c?e:t),await a(),await m()}()}},loading:d,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:h("next")})})]})]})};var se=a(8939),ne=a(4056),le=a(3768),ie=a(3159),re=a(9611),oe=a(3845);const de=e=>{let{title:t="N/A",color:a}=e;return t?(0,q.jsx)(oe.A,{label:t,variant:"filled",sx:{backgroundColor:a||"#C1FFB6",fontSize:"10px","& .MuiChip-label":{fontSize:"13px"}},size:"small"}):(0,q.jsx)("p",{className:"c-gray fs-12 ml-1",children:"N/A"})};var ce=a(3374),ue=a(3875),me=a(4973),he=a(5766),pe=a.n(he);const xe=a.p+"static/media/SampleSheet.2da2e90959e1d87dfed0.csv",ge=a.p+"static/media/userCsv.418d2ad887b470847e45.csv",we=a.p+"static/media/operatorCsv.85d82e3f977b5241cc03.csv",ye=a.p+"static/media/mcq.5b1c6a93631799f90371.csv",je=(0,_.A)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),fe=e=>{let{file:t,setFile:a,loading:s,open:n,onClose:r,onSubmit:o,setCsvData:d,tab:c}=e;const[u,m]=(0,g.useState)(!1);return(0,q.jsxs)(J.A,{open:n,onClose:r,width:"min(500px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsxs)("h3",{className:"opacity-80",children:[(0,H.t)("uploadCsv")," "]}),(0,q.jsx)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",my:3,children:(0,q.jsx)(X.A,{bordered:!0,color:"orange",height:"30px",onClick:()=>{window.open(0===c?ge:1===c?we:"question"===c?ye:xe,"_blank")},children:(0,H.t)("downloadSampleCSV")})}),(0,q.jsxs)(h.A,{className:"h-400 w-full rounded-10 flex flex-col items-center justify-center",sx:{border:`2px dotted ${F.lm.GRAY}`},children:[(0,q.jsx)(ce.A,{fontSize:"large",color:"disabled"}),(0,q.jsx)("h3",{className:"opacity-80",children:(0,H.t)("dropYourFileHereToUpload")}),!!t&&(0,q.jsxs)("p",{className:(u?"c-red":"c-primary")+" flex items-center",children:[(0,q.jsx)(ue.A,{fontSize:"small"})," ",null===t||void 0===t?void 0:t.name]}),(0,q.jsxs)(X.A,{onClick:e=>document.getElementById("file").click(),children:[(0,q.jsx)(me.A,{})," ",(0,H.t)("uploadCsvFile")]}),(0,q.jsx)(je,{type:"file",id:"file",onChange:async e=>{var t,s;const n=e.target.files[0];console.log("file-----",n),n&&(null!==n&&void 0!==n&&null!==(t=n.type)&&void 0!==t&&null!==(s=t.toLowerCase())&&void 0!==s&&s.includes("csv")?(m(!1),pe().parse(n,{header:!1,complete:function(e){console.log("csv res-----------",null===e||void 0===e?void 0:e.data),d(null===e||void 0===e?void 0:e.data)}}),a(n)):m("The selected file is not a csv file!"))}})]}),!!u&&(0,q.jsx)("p",{className:"fw-500 c-red text-center",children:u}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",my:2,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:r,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",disabled:u||!t,onClick:o,loading:s,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("create")})})]})]})};var Ae=a(630),ve=a(7739),Se=a(6178),be=a.n(Se),Ce=a(7201);const _e=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,users:d,skill:c,edit:u}=e;const[m,h]=(0,g.useState)(new Map),p=[{title:(0,H.t)("supervisor"),placeholder:"Select Supervisor",type:F.wN.SELECT,name:"supervisor",validator:F.wY.REQUIRED,keyValues:d},{title:(0,H.t)("skill"),placeholder:(0,H.t)("selectSkill"),type:F.wN.SELECT,name:"skill",validator:F.wY.REQUIRED,keyValues:c}];return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsxs)("h3",{className:"opacity-80",children:[u?"Edit":"Add"," Supervisor"]}),(0,q.jsx)(Z.A,{data:s,errors:m,onChange:e=>{const{name:t,value:a}=e.target;h((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:p}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{const e=(0,K.bG)(p,s);h(e),e.size||await r()},loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("submit")})})]})]})},Ne=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:i,loading:r,users:o,testList:d}=e;const[c,u]=(0,g.useState)(new Map),[m,h]=(0,g.useState)(0),[p,x]=(0,g.useState)([]),w=[{title:(0,H.t)("skill"),placeholder:"Select Skill",type:F.wN.SELECT,name:"skill",validator:F.wY.REQUIRED,keyValues:o}];return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsx)("h3",{className:"opacity-80",children:"Add Skill"}),(0,q.jsx)(Z.A,{data:s,errors:c,onChange:e=>{const{name:t,value:a}=e.target;u((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:w}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{onClick:async()=>{const e=(0,K.bG)(w,s);u(e),e.size||await i()},loading:r,children:(0,H.t)("submit")})]})]})},ke=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new Q.Ay,s=await a.get(`training/skills/?page=${e}&page_size=10`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},alllist:async function(){const e=new Q.Ay,a=await e.get("training/skills/",{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post("training/skills/",e,t,(e=>(0,B.So)(e,null,"Skill created successfully!")));return null===s||void 0===s?void 0:s.data},updateProfile:async(e,a)=>{const s=new Q.Ay,n=await s.put(`${Y.H.USER}-${Y.H.PROFILE}/${e}/`,a,t,(e=>(0,B.So)(e,null,"User Updated successfully!")));return null===n||void 0===n?void 0:n.data},update:async(e,a)=>{const s=new Q.Ay,n=await s.put(`${Y.H.USER}/${e}/`,a,t,(e=>(0,B.So)(e,null,"User Updated successfully!")));return null===n||void 0===n?void 0:n.data},addSupervisor:async(e,a)=>{const s=new Q.Ay,n=await s.put(`training/skill/${e}/`,a,t,(e=>(0,B.So)(e,null,"Supervisor Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{if(!e)return;const a=new Q.Ay,s=await a.delete(`training/skills/${e}/`,t,(e=>(0,B.So)(e,null,"Skill deleted successfully!")));return null===s||void 0===s?void 0:s.data},opratorList:async function(){var e;const a=new Q.Ay,s=await a.get(`${Y.H.OPERATORS}/`,{},t,B.So);return(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.results.length)>0?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data.results,s.data.count]):[[],0]},createOperator:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post(`${Y.H.OPERATORS}/`,e,t,(e=>(0,B.So)(e,null,"User created successfully!")));return null===s||void 0===s?void 0:s.data},updateOperator:async(e,a)=>{const s=new Q.Ay,n=await s.put(`${Y.H.OPERATOR}/${e}/`,a,t,(e=>(0,B.So)(e,null,"Operator Updated successfully!")));return null===n||void 0===n?void 0:n.data},removeOperator:async e=>{if(!e)return;const a=new Q.Ay,s=await a.delete(`${Y.H.OPERATOR}/${e}/`,t,(e=>(0,B.So)(e,null,"Operator deleted successfully!")));return null===s||void 0===s?void 0:s.data},updateSkill:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.put(`training/skill/${a}/`,e,t,(e=>(0,B.So)(e,null,"Skill created successfully!")));return null===n||void 0===n?void 0:n.data}}};var Ie=a(7186),Ee=a(5502);const Te=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){const e=new Q.Ay,a=await e.get(`${Y.H.ASSET}/${Y.H.GROUPS}/`,{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post(`${Y.H.ASSET}/${Y.H.GROUPS}/`,e,t,(e=>(0,B.So)(e,null,"Group created successfully!")));return null===s||void 0===s?void 0:s.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.GROUP}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Group Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.GROUP}/${e}/`,t,(e=>(0,B.So)(e,null,"Group deleted successfully!")));return null===s||void 0===s?void 0:s.data},allAssets:async function(){const e=new Q.Ay,a=await e.get(`${Y.H.ASSET}/${Y.H.ALLASSETS}/`,{},t);return null!==a&&void 0!==a&&a.data?[null===a||void 0===a?void 0:a.data]:[[],0]},groupAsset:async e=>{const a=new Q.Ay,s=await a.get(`${Y.H.ASSET}/${Y.H.GROUP}/${e}/`,{},t);return null===s||void 0===s?void 0:s.data},updateAssets:async(e,a)=>{const s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.GROUP}/${a}/`,e,t);return null===n||void 0===n?void 0:n.data}}},De=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){const e=new Q.Ay,a=await e.get(`${Y.H.OPERATOR}-${Y.H.GROUPS}/`,{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post(`${Y.H.OPERATOR}-${Y.H.GROUPS}/`,e,t,(e=>(0,B.So)(e,null,"Group created successfully!")));return null===s||void 0===s?void 0:s.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.OPERATOR}-${Y.H.GROUP}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Group Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.OPERATOR}-${Y.H.GROUP}/${e}/`,t,(e=>(0,B.So)(e,null,"Group deleted successfully!")));return null===s||void 0===s?void 0:s.data},allOperator:async function(){const e=new Q.Ay,a=await e.get(`${Y.H.OPERATORS}/`,{},t);var s;return null!==a&&void 0!==a&&a.data?[null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.results]:[[],0]},groupOp:async e=>{const a=new Q.Ay,s=await a.get(`${Y.H.OPERATOR}-${Y.H.GROUP}/${e}/`,{},t);return null===s||void 0===s?void 0:s.data},updateAssets:async(e,a)=>{const s=new Q.Ay,n=await s.put(`${Y.H.OPERATOR}-${Y.H.GROUP}/${a}/`,e,t);return null===n||void 0===n?void 0:n.data}}},Re=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){const e=new Q.Ay,a=await e.get(`${Y.H.USER}-${Y.H.GROUPS}/`,{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post(`${Y.H.USER}-${Y.H.GROUPS}/`,e,t,(e=>(0,B.So)(e,null,"Group created successfully!")));return null===s||void 0===s?void 0:s.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.USER}-${Y.H.GROUP}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Group Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.USER}-${Y.H.GROUP}/${e}/`,t,(e=>(0,B.So)(e,null,"Group deleted successfully!")));return null===s||void 0===s?void 0:s.data},allUser:async function(){const e=new Q.Ay,a=await e.get(`${Y.H.USERS}/?page=1&page_size=200`,{},t);return null!==a&&void 0!==a&&a.data?[null===a||void 0===a?void 0:a.data]:[[],0]},updateAssets:async(e,a)=>{const s=new Q.Ay,n=await s.put(`${Y.H.USER}-${Y.H.GROUP}/${a}/`,e,t);return null===n||void 0===n?void 0:n.data},groupUser:async e=>{const a=new Q.Ay,s=await a.get(`${Y.H.USER}-${Y.H.GROUP}/${e}/`,{},t);return null===s||void 0===s?void 0:s.data}}};var Pe=a(8089);const Oe=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,modalOpen:o,loading:d,edit:c,tab:u}=e;const{t:m,i18n:h}=(0,j.Bd)(),{getMenu:p,postMenu:x}=(0,Pe.A)(),w=(0,y.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.USER_ITEM)||void 0===t?void 0:t.data})),[f,A]=(0,g.useState)([]),[v,S]=(0,g.useState)([]);(0,g.useEffect)((()=>{null!==w&&void 0!==w&&w.id&&"manage"===o&&b()}),["manage"===o]);const b=async()=>{var e,t;const a=await p(null===w||void 0===w?void 0:w.id);S(null===(e=a[0])||void 0===e?void 0:e.all_menu.menu_items),A((null===(t=a[0])||void 0===t?void 0:t.user_menu.menu_items)||[]),console.log("menu item-----\x3e>>",w)};return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsxs)("h3",{className:"opacity-80",style:{textTransform:"capitalize"},children:[null===w||void 0===w?void 0:w.username," ",m("menuManagement")]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:1,gap:1,height:400},children:[(0,q.jsxs)(l.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:F.lm.LG_GRAY_2,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,q.jsx)(i.A,{sx:{px:1},children:m("permissionsOfUser")}),f.map(((e,t)=>(0,q.jsxs)(l.A,{sx:{flexDirection:"row",backgroundColor:F.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,q.jsxs)(i.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e]},e.name),(0,q.jsx)(Ee.A,{fontSize:"small",sx:{color:F.lm.DARK_RED,m:.2,cursor:"pointer"},onClick:()=>{return t=e,void A((e=>e.filter((e=>e!==t))));var t}})]},t)))]}),(0,q.jsxs)(l.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:F.lm.LG_GRAY_2,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,q.jsx)(i.A,{sx:{px:1},children:m("allMenu")}),v.map(((e,t)=>(0,q.jsxs)(l.A,{sx:{flexDirection:"row",backgroundColor:F.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,q.jsxs)(i.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e]},e.name),(0,q.jsx)(Ce.A,{fontSize:"small",sx:{color:F.lm.DARK_GREEN,m:.2,cursor:"pointer"},onClick:()=>(async e=>{f.includes(e)?k.oR.warn("already in list"):A((t=>[...t,e]))})(e)})]},t)))]})]}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:1,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:m("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>(async()=>{let e={menu_items:f},t=await x(null===w||void 0===w?void 0:w.id,e);console.log("res----menu items",t),await a()})(),loading:d,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:m("submit")})})]})]})},$e=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,modalOpen:o,loading:d,edit:c,tab:u}=e;const{t:m,i18n:h}=(0,j.Bd)(),{getMenu:p,postMenu:x,getMachines:w,postMachine:f}=(0,Pe.A)(),A=(0,y.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.USER_ITEM)||void 0===t?void 0:t.data})),[v,S]=(0,g.useState)([]),[b,C]=(0,g.useState)([]);(0,g.useEffect)((()=>{null!==A&&void 0!==A&&A.id&&"machine"===o&&_()}),["machine"===o]);const _=async()=>{var e,t,a;const s=await w(null===A||void 0===A?void 0:A.id);C((null===(e=s[0])||void 0===e?void 0:e.all_assets.assets)||[]),S((null===(t=s[0])||void 0===t?void 0:t.user_assets.assets)||[]),console.log("getMachines item-----\x3e>>",null===(a=s[0])||void 0===a?void 0:a.all_assets.assets)};return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsxs)("h3",{className:"opacity-80",style:{textTransform:"capitalize"},children:[null===A||void 0===A?void 0:A.username," Machine Permissions"]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:1,gap:1,height:400},children:[(0,q.jsxs)(l.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:F.lm.LG_GRAY_2,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,q.jsx)(i.A,{sx:{px:1},children:m("permissionsOfUser")}),v.map(((e,t)=>(0,q.jsxs)(l.A,{sx:{flexDirection:"row",backgroundColor:F.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,q.jsxs)(i.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e.name]},e.name),(0,q.jsx)(Ee.A,{fontSize:"small",sx:{color:F.lm.DARK_RED,m:.2,cursor:"pointer"},onClick:()=>{return t=e,void S((e=>e.filter((e=>e!==t))));var t}})]},t)))]}),(0,q.jsxs)(l.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:F.lm.LG_GRAY_2,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,q.jsx)(i.A,{sx:{px:1},children:m("All Machines")}),b.map(((e,t)=>(0,q.jsxs)(l.A,{sx:{flexDirection:"row",backgroundColor:F.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,q.jsxs)(i.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e.name]},e.name),(0,q.jsx)(Ce.A,{fontSize:"small",sx:{color:F.lm.DARK_GREEN,m:.2,cursor:"pointer"},onClick:()=>(async e=>{console.log("machine val",e),v.some((t=>t.id===e.id))?k.oR.warn("Machine already in the list"):S((t=>[...t,e]))})(e)})]},t)))]})]}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:1,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:m("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>(async()=>{let e={assets:v.map((e=>e.id))};await f(null===A||void 0===A?void 0:A.id,e),console.log("res----menu items",e),await a()})(),loading:d,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:m("submit")})})]})]})};var Le=a(5374);const Me=()=>{const{t:e,i18n:t}=(0,j.Bd)(),a=(0,y.wA)(),s=localStorage.getItem("userId"),[n,r]=(0,g.useState)(0),[d,c]=(0,g.useState)([]),[u,m]=(0,g.useState)([]),[h,p]=(0,g.useState)([]),[x,w]=(0,g.useState)([]),[f,A]=(0,g.useState)(),[v,S]=(0,g.useState)(0),[b,C]=(0,g.useState)(0),[_,N]=(0,g.useState)(!1),[I,E]=(0,g.useState)([]),[T,D]=(0,g.useState)(0),[R,P]=(0,g.useState)(null),[O,$]=(0,g.useState)({}),[L,M]=(0,g.useState)([]),[U,H]=(0,g.useState)(""),[B,Q]=(0,g.useState)([]),[Y,W]=(0,g.useState)(""),[J,Z]=(0,g.useState)(""),[K,ee]=(0,g.useState)(!1),oe=/^[A-Za-z\s]*$/,[ce,ue]=(0,g.useState)(10),{list:me,listUsers:he,create:pe,updateProfile:xe,update:ge,userProfile:we,remove:ye,listByUserName:je,listByAadhar:Se,updateOpSkill:Ee,createByCsv:Te,updateProfileCSV:De,usersAll:Re}=V(),{list:Pe}=ke(),[Me,ze]=(0,g.useState)("");(0,g.useEffect)((()=>{c([]),He()}),[T,n]),(0,g.useEffect)((()=>{Fe(),async function(){let e=await Re();console.log("alll users",e)}()}),[]);const Fe=async()=>{const[e]=await Pe(),t=e.results.map((e=>({value:e.skill_name,key:e.id})));M((e=>[...e,...t]))};const He=async()=>{A("fetch");try{const[e]=await he(T+1,n);if(S(e.count),0===n){c(e.results||[]);const t=e.results.filter((e=>!e.is_operator&&e.status)).map((e=>{let{username:t,id:a}=e;return{value:t,key:a}}));Q(t)}else if(1===n){const t=await Promise.all(e.results.map((e=>we(e.id))));p(t)}}catch(Ue){console.error("Error fetching users:",Ue)}finally{A(!1)}},qe=async()=>{const e={...O};localStorage.setItem("op_ad_no",O.aadhar_no),e.is_operator=0!==n,e.status=!1,1===n&&(e.username=`op_${O.aadhar_no}`),A("fetch");const t=await pe(e);if(t){return H(t.id),$({}),!0}if(void 0===t){return k.oR.warn("Username already exists."),!1}A(!1)},Ge=async()=>{const e={...O};1===n&&(e.aadhar_number=localStorage.getItem("op_ad_no")),e.is_operator=0!==n,e.status=!1,A("fetch");let t=await we(U);await xe(t.id,e),N(!1),await He(),A(!1)},Be=async(e,t,a)=>{A("fetch");const s={is_admin:!0!==t},n={status:!0!==t};await ge(e,"status"===a?n:s),await He()},Qe=[{id:1,title:e("email"),render:e=>e.email},{id:2,title:e("user_name"),render:e=>e.username},{id:3,title:e("full_name"),render:e=>e.fullname},{id:5,title:e("role"),render:t=>(0,q.jsx)(de,{title:t.is_admin?e("admin"):e("na")})},{id:6,title:e("action"),render:t=>(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(l.A,{flexDirection:"row",sx:{gap:1},children:[(0,q.jsx)(X.A,{width:"fit-content",color:!0===t.status?"light_green":"RADIAL_RED",onClick:()=>Be(null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.status,"status"),children:!0===t.status?e("active"):e("inactive")}),1===n&&(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{a((0,Ie.t)(t)),N("edit")},children:(0,q.jsx)(ie.A,{color:"error",fontSize:"small"})}),0===n&&(null===t||void 0===t?void 0:t.id)!==s.replace(/-/g,"")?(0,q.jsx)(ve.A,{title:"Delete User",children:(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{A("fetch"),await ye(e),await He(),A(!1)})(null===t||void 0===t?void 0:t.id),children:(0,q.jsx)(le.A,{color:"error",fontSize:"small"})})}):null,0===n&&!1===(null===t||void 0===t?void 0:t.is_admin)?(0,q.jsx)(ve.A,{title:"Make Admin",children:(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>Be(null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.is_admin,"delete"),children:(0,q.jsx)(Ae.A,{color:t.is_admin?"error":"success",fontSize:"small"})})}):null,0===n&&(null===t||void 0===t?void 0:t.id)!==s.replace(/-/g,"")?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(ve.A,{title:"Manage Permission",children:(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{a((0,Ie.t)(t)),N("manage")},children:(0,q.jsx)(re.A,{color:"success",fontSize:"small"})})}),(0,q.jsx)(ve.A,{title:"Machine Permission",children:(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{a((0,Ie.t)(t)),N("machine")},children:(0,q.jsx)(Le.A,{color:"success",fontSize:"small"})})})]}):null]})})}],Ye=[{id:4,title:e("aadhar"),render:e=>e.aadhar_number},{id:1,title:e("date_of_joining"),render:e=>be()(e.date_of_joining).format("ll")},{id:11,title:e("supervisor"),render:t=>{var a;return(0,q.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center"},children:[t.passed_induction&&(0,q.jsx)(i.A,{children:null===(a=t.supervisor)||void 0===a?void 0:a.username}),0!==n&&(t.passed_induction?(0,q.jsx)(ve.A,{title:t.supervisor?"Edit Supervisor":"Add Supervisor",children:(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{t.supervisor?ee(!0):ee(!1),H(t.id),Z(t.user.id),N("addSupervisor")},children:t.supervisor?(0,q.jsx)(ie.A,{fontSize:"small",color:"primary"}):(0,q.jsx)(Ce.A,{})})}):(0,q.jsx)(i.A,{children:e("inductionNotPassed")}))]})}},{id:6,title:e("action"),render:t=>{var s;return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(l.A,{flexDirection:"row",sx:{gap:1,alignItems:"center"},children:[0===n?(0,q.jsx)(X.A,{width:"10%",color:!0===t.status?"light_green":"RADIAL_RED",onClick:()=>Be(null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.status,"status"),children:!0===t.status?e("active"):e("inactive")}):(0,q.jsx)(X.A,{width:"10%",color:!0===(null===t||void 0===t||null===(s=t.user)||void 0===s?void 0:s.status)?"light_green":"RADIAL_RED",onClick:()=>{var e,a;return Be(null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.id,null===t||void 0===t||null===(a=t.user)||void 0===a?void 0:a.status,"status")},children:!0===t.user.status?e("active"):e("inactive")}),1===n&&(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{a((0,Ie.t)(t)),N("edit")},children:(0,q.jsx)(ie.A,{color:"error",fontSize:"small"})}),0===n&&!1===(null===t||void 0===t?void 0:t.is_admin)?(0,q.jsx)(ve.A,{title:"Make Admin",children:(0,q.jsx)(o.A,{sx:{height:25,width:25,alignItems:"center"},onClick:()=>Be(null===t||void 0===t?void 0:t.id,null===t||void 0===t?void 0:t.is_admin,"delete"),children:(0,q.jsx)(Ae.A,{sx:{color:t.is_admin?F.lm.RADIAL_RED:F.lm.LIGHT_GREEN}})})}):null]})})}}],We=async()=>{A("fetch");const e={skill:O.skill,supervisor:O.supervisor};Ee(J,e),N(!1),await He(),A(!1)},Ve=e=>{const t=e.target.value;console.log("e.target.value",e.target.value.length),0===n?setTimeout((async()=>{0!==e.target.value.length?await(async e=>{const t=await je(e);c(t||[]),A(!1)})(t):await He()}),1e3):1===n&&setTimeout((async()=>{0!==e.target.value.length?await(async e=>{const t=await Se(e);console.log("operatros------",t),p(t||[]),A(!1)})(t):await He()}),1e3),D(0),W(t)};return(0,q.jsxs)("div",{className:"mx-3 my-2 fw-500",children:[(0,q.jsx)(se.A,{value:n,onChange:(e,t)=>{r(t),D(0),W("")},className:"mb-2 fw-500",children:[e("users"),e("operators")].map(((e,t)=>(0,q.jsx)(ne.A,{label:e,className:"fw-500",value:t})))}),(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsx)(l.A,{mb:1,children:(0,q.jsx)(z.A,{height:"37px",value:Y,placeholder:e(0===n?"search_by_username":"search_by_aadhar"),onChange:e=>Ve(e)})}),(0,q.jsxs)(l.A,{justifyContent:"flex-end",direction:"row",sx:{mb:1,gap:1},children:[(0,q.jsx)(X.A,{onClick:()=>N("csvUser"),color:"gray",children:(0,q.jsxs)(i.A,{className:"fw-20-500-24",children:[e("upload")," ",e("CSV")]})}),(0,q.jsx)(X.A,{color:"gray",onClick:()=>N("add"),children:(0,q.jsxs)(i.A,{className:"fw-20-500-24",children:[e("create")," ",e(0===n?"users":"operators")]})})]})]}),(0,q.jsx)(G,{columns:0===n?Qe:Ye,rows:0===n?d:h,rowsPerPage:10,loading:"fetch"===f,titleCellClasses:"c-gray fw-700",page:T,setPage:D,paginator:!0,serialize:!0,total:v,tableBodyColor:F.lm.WHITE}),(0,q.jsx)(te,{open:"add"===_,onClose:()=>N(!1),data:O,setData:$,onSubmit:qe,loading:"add"===f,tab:n,handleAdd2:Ge}),(0,q.jsx)(ae,{open:"edit"===_,onClose:()=>N(!1),data:O,setData:$,onSubmit:qe,loading:"add"===f,tab:n,handleAdd2:Ge,edit:_,fetchUsers:He}),(0,q.jsx)(_e,{data:O,setData:$,open:"addSupervisor"===_,onClose:()=>N(!1),onSubmit:async()=>{A("fetch");const e={add_supervisor:O.supervisor};xe(U,e),We(),N(!1),await He()},users:B,skill:L,edit:K}),(0,q.jsx)(Ne,{data:O,setData:$,open:"addSkill"===_,onClose:()=>N(!1),onSubmit:We,users:L}),(0,q.jsx)(fe,{onClose:()=>N(!1),open:"csvUser"===_,onSubmit:async()=>{N(!1),A("fetch");const e=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;for(const t of I.slice(1))if(0===n){if(t[0]&&oe.test(t[0])&&e.test(t[2])){const e={username:t[0],fullname:t[1],email:t[2],status:!1};try{const a=await Te(e);if(null!==a&&void 0!==a&&a.id){const e={phone_number:t[3],aadhar_number:t[4],employee_id:t[5],employee_type:t[6],date_of_joining:t[7],status:!1},s=await we(a.id);null!==s&&void 0!==s&&s.id&&await De(s.id,e)}}catch(Ue){k.oR.error("Error processing CSV row:",t,Ue),console.error("Error processing CSV row:",t,Ue)}}}else if(1===n&&t[2]&&t[0]&&12===t[2].length){const e={aadhar_number:t[2],username:"op_"+t[2],fullname:t[0],is_operator:!0,status:!1};try{const a=await Te(e);if(null!==a&&void 0!==a&&a.id){const e={aadhar_number:t[2],is_operator:!0,phone_number:t[1],employee_id:t[3],employee_type:t[4],date_of_joining:t[5],status:!1},s=await we(a.id);null!==s&&void 0!==s&&s.id&&await De(s.id,e)}}catch(Ue){k.oR.error("Error processing CSV row:",t,Ue),console.error("Error processing CSV row:",t,Ue)}}await He()},file:R,setFile:P,setCsvData:E,tab:n}),(0,q.jsx)(Oe,{onClose:()=>N(!1),open:"manage"===_,modalOpen:_}),(0,q.jsx)($e,{onClose:()=>N(!1),open:"machine"===_,modalOpen:_})]})},Ue=()=>{const[e,t]=(0,g.useState)(0),[a,s]=(0,g.useState)(""),[n,r]=(0,g.useState)(""),[o,d]=(0,g.useState)({company:"",location:"",division:"",line:""});return(0,q.jsx)("div",{className:"mx-3 my-2 fw-500",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,q.jsx)(l.A,{sx:{backgroundColor:F.lm.BG_GRAY,p:3,borderRadius:2},children:(0,q.jsxs)(i.A,{className:"fw-20-500-36",children:[(0,H.t)("permissionMsg")," "]})})})},ze=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d,tab:c}=e;const{allAssets:u,groupAsset:m,updateAssets:h}=Te(),{allOperator:p,groupOp:x,updateAssets:w}=De(),{allUser:j,groupUser:f,updateAssets:A}=Re(),[v,S]=(0,g.useState)(new Map),[b,C]=(0,g.useState)([]),[_,N]=(0,g.useState)([]),[k,I]=(0,g.useState)([]),E=(0,y.d4)((e=>{var t,a;return null===e||void 0===e||null===(t=e.SelectedId)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.id})),T=(0,y.d4)((e=>{var t,a;return null===e||void 0===e||null===(t=e.SelectedId)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.name}));(0,g.useLayoutEffect)((()=>{R()}),[""!==E]);const D=async(e,t)=>{let a=t;e.map((e=>{a.map(((t,s)=>{if(t.id===e.id){a.indexOf(t);a.splice(s,1)}}))})),C(a)},R=async()=>{if("Machines"===c){var e;const[t]=await u(),a=await m(E);D(a.assets,t),(null===(e=a.assets)||void 0===e?void 0:e.length)>0&&N(a.assets)}else if("Operators"===c){var t;const[e]=await p(),a=await x(E);D(a.operators,e),(null===(t=a.operators)||void 0===t?void 0:t.length)>0&&N(a.operators)}else if("Users"===c){var a;const[e]=await j(),t=await f(E);D(t.users,e.results),(null===(a=t.users)||void 0===a?void 0:a.length)>0&&N(t.users)}},P=async(e,t)=>{const a={remove:[e]},s={add:[e]};"Machines"===c?await h("add"===t?s:a,E):"Operators"===c?await w("add"===t?s:a,E):"Users"===c&&await A("add"===t?s:a,E),R()};return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsxs)("h3",{className:"opacity-80",style:{textTransform:"capitalize"},children:["(",T,") ",c," Management"]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:1,gap:1,height:400},children:[(0,q.jsxs)(l.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:F.lm.TEXT_GRAY,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,q.jsxs)(i.A,{sx:{px:1},children:[c," in Group"]}),_.map(((e,t)=>(0,q.jsxs)(l.A,{sx:{flexDirection:"row",backgroundColor:F.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,q.jsxs)(i.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e.name||e.fullname||e.username]},e.name),(0,q.jsx)(Ee.A,{fontSize:"small",sx:{color:F.lm.DARK_RED,m:.2,cursor:"pointer"},onClick:()=>P(e.id,"remove")})]},t)))]}),(0,q.jsxs)(l.A,{sx:{width:"49%",border:1,borderRadius:2,borderColor:F.lm.TEXT_GRAY,p:1,overflow:"scroll",scrollbarWidth:"none"},children:[(0,q.jsxs)(i.A,{sx:{px:1},children:["All ",c]}),b.map(((e,t)=>(0,q.jsxs)(l.A,{sx:{flexDirection:"row",backgroundColor:F.lm.GREEN_OPAQUE,mt:.5,borderRadius:2,width:"fit-content",px:.5},children:[(0,q.jsxs)(i.A,{variant:"h6",sx:{textTransform:"capitalize"},children:[t+1,". ",e.name||e.fullname||e.username]},e.name),(0,q.jsx)(Ce.A,{fontSize:"small",sx:{color:F.lm.DARK_GREEN,m:.2,cursor:"pointer"},onClick:()=>P(e.id,"add")})]},t)))]})]})]})};var Fe=a(3985);const He=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;const c=[{title:(0,H.t)("groupName"),placeholder:(0,H.t)("enterGroupName"),type:F.wN.INPUT,name:"name",validator:F.wY.REQUIRED}],[u,m]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsx)("h3",{className:"opacity-80",children:!0===d?(0,H.t)("editNewGroup"):(0,H.t)("addUsersGroup")}),(0,q.jsx)(Z.A,{data:s,errors:u,onChange:e=>{const{name:t,value:a}=e.target;m((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:c}),(0,q.jsx)(Fe.A,{setItemss:s.metadata,setJson:e=>n((t=>({...t,metadata:e}))),title:(0,H.t)("details")}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:r,loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("create")})})]})]})},qe=e=>{var t;let{json:a={},icon:s}=e;return null!==(t=Object.values(a||{}))&&void 0!==t&&t.length?(0,q.jsx)(p.A,{dense:!0,disablePadding:!0,children:Object.entries(a).map((e=>{var t;let[a,n]=e;return(0,q.jsxs)(x.Ay,{dense:!0,disablePadding:!0,disableGutters:!0,alignItems:"center",className:"h-45",children:[(0,q.jsx)(o.A,{className:"h-25 w-25 mr-1 fs-10 c-gray",children:s}),(0,q.jsx)(m.A,{className:"capitalize",primary:null===a||void 0===a||null===(t=a.split("_"))||void 0===t?void 0:t.join(" "),secondary:n})]})}))}):(0,q.jsx)("p",{className:"c-gray fs-12 ml-1",children:"N/A"})};var Ge=a(7404);const Be=()=>{const e=(0,y.wA)(),[t,a]=((0,N.zy)(),(0,N.Zp)(),(0,g.useState)("Users")),[s,n]=(0,g.useState)([]),[r,d]=(0,g.useState)(),[c,u]=(0,g.useState)(0),[m,h]=(0,g.useState)(!1),[p,x]=(0,g.useState)(!1),[w,j]=(0,g.useState)(0),[f,A]=(0,g.useState)({name:"",metadata:{}}),{list:v,create:S,update:b,remove:C}=Te(),{list:_,create:k,update:I,remove:E}=De(),{list:T,create:D,update:R,remove:P}=Re();(0,g.useEffect)((()=>{O()}),[w,t]);const O=async()=>{d("fetch");const[e,a]="Machines"===t?await v(w+1):await T(w+1);n(e),u(a),d(!1)},$=async()=>{const e={...f};d("fetch"),!0===m?"Machines"===t?await b(e):"Operators"===t?await I(e):await R(e):"Machines"===t?await S(e):"Operators"===t?await k(e):await D(e),A({name:"",metadata:{}}),x(!1),await O(),d(!1),h(!1)},L=[{id:1,title:(0,H.t)("groupName"),render:t=>(0,q.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>{e((0,Ge.z)({id:t.id,name:t.name})),x("addremove")},children:t.name})},{id:3,title:(0,H.t)("details"),render:e=>Object.entries(e.metadata).map((e=>{let[t,a]=e;return t&&(0,q.jsxs)(i.A,{className:"fw-12-400",children:[(0,q.jsxs)("strong",{children:[t,":"]})," ",a]},t)}))},{id:5,title:(0,H.t)("action"),render:e=>(0,q.jsxs)(l.A,{flexDirection:"row",children:[(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{h(!0),x("add"),A(e)},children:(0,q.jsx)(ie.A,{color:"primary",fontSize:"small"})}),(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{d("fetch"),"Machines"===t?await C(e):"Operators"===t?await E(e):await P(e),await O(),d(!1)})(null===e||void 0===e?void 0:e.id),children:(0,q.jsx)(le.A,{color:"error",fontSize:"small"})})]})}];return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsx)(l.A,{sx:{flexDirection:"row",alignItems:"center",mb:1},children:(0,q.jsx)(i.A,{className:"fw-20-500-36",children:(0,H.t)("usersGroups")})}),(0,q.jsx)(X.A,{color:"gray",onClick:()=>x("add"),children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("addUsersGroup")})})]}),(0,q.jsx)(G,{columns:L,rows:s,rowsPerPage:10,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:w,setPage:j,paginator:!0,tableBodyColor:F.lm.WHITE,serialize:!0,total:c}),(0,q.jsx)(He,{open:"add"===p,onClose:()=>{x(!1),h(!1)},data:f,edit:m,setData:A,onSubmit:$}),"addremove"===p&&(0,q.jsx)(ze,{open:"addremove"===p,onClose:()=>{x(!1)},data:f,setData:A,onSubmit:$,tab:t})]})};var Qe=a(8903),Ye=a(7965),We=a(9761);const Ve=()=>{(0,N.Zp)();const[e,t]=(0,g.useState)([]),[a,s]=(0,g.useState)(),[n,r]=(0,g.useState)(0),[d,c]=(0,g.useState)(!1),[u,m]=(0,g.useState)(!1),[h,p]=(0,g.useState)(0),[x,y]=(0,g.useState)({name:"",metadata:{}});return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsx)("div",{className:"flex items-center justify-between",children:(0,q.jsx)("h1",{className:"mt-4",children:"Organization Profile"})}),(0,q.jsxs)(l.A,{sx:{backgroundColor:"#edf7ff"},children:[(0,q.jsx)(l.A,{sx:{backgroundColor:"#c5e3f7",height:"35vh"},children:(0,q.jsx)("img",{width:"100%",height:"100%",alt:"image industry",style:{objectFit:"cover"},src:"https://www.advsyscon.com/blog/wp-content/uploads/intelligent-process-automation-examples.jpg"})}),(0,q.jsx)(l.A,{sx:{backgroundColor:"yellow",height:"30vh",borderRadius:"50%",width:"18%",alignSelf:"center",mt:-15,overflow:"hidden"},children:(0,q.jsx)("img",{width:"100%",height:"100%",alt:"image industry",src:"https://wellgroomedgentleman.com/wp-content/uploads/2023/10/Tony_Stark_Beard_with_Quiff_Hairstyle.width-800.jpg"})}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"center",my:2},children:[(0,q.jsx)(o.A,{sx:{p:1,color:"black"},children:(0,q.jsx)(Ye.A,{})}),(0,q.jsx)(o.A,{sx:{p:1,color:"black"},children:(0,q.jsx)(We.A,{})}),(0,q.jsx)(o.A,{sx:{p:1,color:"black"},children:(0,q.jsx)(b.A,{})}),(0,q.jsx)(o.A,{sx:{p:1,color:"black"},children:(0,q.jsx)(ie.A,{})})]})]}),(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{gap:1,mt:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,q.jsxs)(l.A,{sx:{backgroundColor:"#edf7ff",p:1},children:[(0,q.jsx)(i.A,{variant:"h6",sx:{textTransform:"uppercase"},children:"Organizational Details"}),(0,q.jsx)(w.A,{}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:2,mt:1},children:[(0,q.jsx)(i.A,{children:"Organizational Name :"}),(0,q.jsx)(i.A,{children:"Dhoot Transmission"})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:2},children:[(0,q.jsx)(i.A,{children:"Joining Code :"}),(0,q.jsx)(i.A,{children:"SNL1234"})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:2},children:[(0,q.jsx)(i.A,{children:"Organization Type :"}),(0,q.jsx)(i.A,{children:"Dhoot Transmission"})]})]}),(0,q.jsxs)(l.A,{sx:{backgroundColor:"#edf7ff",p:1},children:[(0,q.jsx)(i.A,{variant:"h6",sx:{textTransform:"uppercase"},children:"Address Details"}),(0,q.jsx)(w.A,{}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:2,mt:1},children:[(0,q.jsx)(i.A,{children:"Address :"}),(0,q.jsx)(i.A,{children:"Hoshyarpur, Haryana 202098 "})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:2},children:[(0,q.jsx)(i.A,{children:"City :"}),(0,q.jsx)(i.A,{children:"Hoshyarpur"})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:2},children:[(0,q.jsx)(i.A,{children:"State :"}),(0,q.jsx)(i.A,{children:"Haryana"})]})]}),(0,q.jsxs)(l.A,{sx:{backgroundColor:"#edf7ff",p:1},children:[(0,q.jsx)(i.A,{variant:"h6",sx:{textTransform:"uppercase"},children:"General Details"}),(0,q.jsx)(w.A,{}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:2,mt:1},children:[(0,q.jsx)(i.A,{children:"GSTIN :"}),(0,q.jsx)(i.A,{children:"GSTIN202098 "})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:2},children:[(0,q.jsx)(i.A,{children:"Module Access :"}),(0,q.jsx)(l.A,{sx:{width:"70%"},children:(0,q.jsxs)(Qe.Ay,{sx:{gap:1},children:[(0,q.jsx)(oe.A,{sx:{mb:.5,ml:.2},label:"Module 1"}),(0,q.jsx)(oe.A,{sx:{mb:.5,ml:.2},label:"Module 2"}),(0,q.jsx)(oe.A,{sx:{mb:.5,ml:.2},label:"Module 3"}),(0,q.jsx)(oe.A,{sx:{mb:.5,ml:.2},label:"Module 4"}),(0,q.jsx)(oe.A,{sx:{mb:.5,ml:.2},label:"Module 5"}),(0,q.jsx)(oe.A,{sx:{mb:.5,ml:.2},label:"Module 6"})]})})]})]}),(0,q.jsxs)(l.A,{sx:{backgroundColor:"#edf7ff",p:1},children:[(0,q.jsx)(i.A,{variant:"h6",sx:{textTransform:"uppercase"},children:"Additional Details"}),(0,q.jsx)(w.A,{}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:2,mt:1},children:[(0,q.jsx)(i.A,{children:"Created On :"}),(0,q.jsxs)(i.A,{children:[be()().format("llll")," "]})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:2},children:[(0,q.jsx)(i.A,{children:"Last Modified :"}),(0,q.jsx)(i.A,{children:be()().format("llll")})]})]})]})]})},Xe=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{question_list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const l=new Q.Ay,i=await l.get(`training/question-bank/?page=${e}&page_size=${a}&type=${s}&skill=${n}`,{},t,B.So);return null!==i&&void 0!==i&&i.data?(console.log("res  ",i.data),[null===i||void 0===i?void 0:i.data]):[[],0]},skill_question_list:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new Q.Ay,s=await a.get(`training/skill-questions/${e}/`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},skill_list:async function(){const e=new Q.Ay,a=await e.get("training/skills/",{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},induction_question:async function(){const e=new Q.Ay,a=await e.get("training/induction-questions/",{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},hr_question:async function(){const e=new Q.Ay,a=await e.get("training/miscellaneous-questions/",{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},result:async e=>{const a=new Q.Ay,s=await a.get(`training/update-test-results/${e}/`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},get_Test:async e=>{const a=new Q.Ay,s=await a.get(`training/test-instance/${e}/`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},test_list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new Q.Ay,s=await a.get(`training/test-masters/?page=${e}&page_size=10`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},createTest:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post("training/test-masters/",e,t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data},assignExam:async e=>{const a=new Q.Ay,s=await a.post(`training/${e.test}/test-instance/${e.operator.key}/`,{},t,(e=>(0,B.So)(e,null,"Test Successfully Assign !")));return null===s||void 0===s?void 0:s.data},addQuestion:async(e,a)=>{const s=new Q.Ay,n=await s.put(`training/test-master/${e}/`,a,t,(e=>(0,B.So)(e,null,"Test Updated Successfully!")));return null===n||void 0===n?void 0:n.data},updateTest:async(e,a)=>{const s=new Q.Ay,n=await s.put(`training/test-instance/${e}/`,a,t,(e=>(0,B.So)(e,null)));return null===n||void 0===n?void 0:n.data},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post("training/question-bank/",e,t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data},updateProfile:async(e,a)=>{const s=new Q.Ay,n=await s.put(`${Y.H.USER}-${Y.H.PROFILE}/${e}/`,a,t,(e=>(0,B.So)(e,null,"User Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{if(!e)return;const a=new Q.Ay,s=await a.delete(`${Y.H.USER}/${e}/`,t,(e=>(0,B.So)(e,null,"User deleted successfully!")));return null===s||void 0===s?void 0:s.data},linkPlanTestMaster:async(e,a)=>{const s=new Q.Ay,n=await s.put(`training/training/${e}/`,a,t,(e=>(0,B.So)(e,null)));return null===n||void 0===n?void 0:n.data}}};var Je=a(9413),Ze=a(4605),Ke=a(1962);const et=e=>{let{open:t,onClose:a,data:s,setData:n,onStart:r,loading:o,edit:d,setModalOpen:c,testData:u}=e;return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(h.A,{sx:{display:"flex",gap:2},children:[(0,q.jsxs)(l.A,{sx:{width:"55%"},children:[(0,q.jsx)(l.A,{sx:{backgroundColor:F.lm.LG_BG_BLUE,borderRadius:2,p:2},children:(0,q.jsx)(i.A,{className:"fw-600-16",children:(null===u||void 0===u?void 0:u.test.test_name)||"sass"})}),(0,q.jsxs)(l.A,{className:"fw-500-14",sx:{backgroundColor:F.lm.LIGHT_GRAY,mt:2,borderRadius:2,p:2},children:[(0,q.jsx)(i.A,{className:"fw-500-14",children:(0,q.jsx)("strong",{children:"You are going to start the Test, Please read carefully below Instructions :- "})}),(0,q.jsxs)(l.A,{children:[(0,q.jsxs)(i.A,{className:"fw-500-14",children:["1.This test is designed to evaluate your understanding and skills - ",(0,q.jsx)("strong",{children:(null===u||void 0===u?void 0:u.test.skill)||(null===u||void 0===u?void 0:u.test.test_type)})]}),(0,q.jsxs)(i.A,{className:"fw-500-14",children:["2.Duration: The total time for the test is ",(0,q.jsxs)("strong",{children:[(null===u||void 0===u?void 0:u.test.alloted_minutes)||"-"," minutes."]})]}),(0,q.jsxs)(i.A,{className:"fw-500-14",children:["3.The test will auto-submit once the allocated time ends. ",(0,q.jsxs)("strong",{children:[(null===u||void 0===u?void 0:u.test.alloted_minutes)||"-"," minutes"]})]}),(0,q.jsx)(i.A,{className:"fw-500-14",children:"4.The test consists of multiple-choice questions."}),(0,q.jsxs)(i.A,{className:"fw-500-14",children:["5.There are ",(0,q.jsxs)("strong",{children:[(null===u||void 0===u?void 0:u.test.maximum_questions)||"-"," Questions."]})]}),(0,q.jsx)(i.A,{className:"fw-500-14",children:"6.There is no negative marking, so attempt all questions without hesitation."}),(0,q.jsx)(i.A,{className:"fw-500-14",children:"7.Each question has only one correct answer. Select the best option from the given choices."}),(0,q.jsx)(i.A,{className:"fw-500-14",children:"8.You can navigate between questions and modify your answers before submitting."}),(0,q.jsx)(i.A,{className:"fw-500-14",children:"9.The test must be completed in one sitting."}),(0,q.jsx)(i.A,{className:"fw-500-14",children:"10.After completing the test, click the Submit button to finalize your responses."})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",mt:2},children:[(0,q.jsx)(X.A,{color:"gray",children:"Back"}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>{c("start"),r()},children:"Start"})]})]})]}),(0,q.jsx)(l.A,{sx:{width:"43%"},children:(0,q.jsxs)(l.A,{sx:{backgroundColor:F.lm.LIGHT_GRAY,borderRadius:2,p:2},children:[(0,q.jsx)(i.A,{className:"fw-600-16",children:"Sample Question :"}),(0,q.jsx)(i.A,{sx:{mt:1},className:"fw-600-16",children:"Tick The Correct Options"}),(0,q.jsx)(i.A,{sx:{mt:1},className:"fw-500-14",children:"Question 1"}),(0,q.jsx)(i.A,{sx:{mt:1,mb:1},className:"fw-500-14",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}),[{option:"Answer 1",check:!0},{option:"Answer 2",check:!1},{option:"Answer 3",check:!1},{option:"Answer 4",check:!1}].map(((e,t,a)=>(0,q.jsx)(Je.A,{sx:{mb:1.4},children:(0,q.jsx)(Ze.A,{disabled:!0,control:(0,q.jsx)(Ke.A,{className:"fw-500-14",defaultChecked:e.check}),label:e.option})},a)))]})})]})})};var tt=a(1338);const at=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;return(0,q.jsx)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:(0,q.jsxs)(l.A,{sx:{justifyContent:"center",alignItems:"center",mt:4},children:[(0,q.jsx)(tt.A,{sx:{width:55,height:55},color:"primary"}),(0,q.jsx)(l.A,{sx:{justifyContent:"center",alignItems:"center",mt:2,mb:2},children:(0,q.jsx)(i.A,{sx:{fontSize:20,fontWeight:"bold"},color:"primary",children:"Done !"})})]})})};var st=a(1825);const nt=e=>{let{activeQuestion:t,totalQuestions:a,setModalOpen:s,testData:n,finishTest:r}=e;(0,N.Zp)();const[o,d]=(0,g.useState)(null===n||void 0===n?void 0:n.remaining_time_in_seconds);return(0,g.useEffect)((()=>{if(o>0){const e=setTimeout((()=>{d((e=>e-1)),localStorage.setItem("time",o)}),1e3);return()=>clearTimeout(e)}o<1&&(r(),localStorage.setItem("draweWidth",180))}),[o]),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:.5,alignItems:"baseline"},children:[(0,q.jsx)(i.A,{sx:{fontWeight:500,fontSize:40},children:(0,K.gv)(t)}),(0,q.jsxs)(i.A,{sx:{fontWeight:500,fontSize:20},children:["/",(0,K.gv)(a)]})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:1,alignItems:"center",mr:2},children:[(0,q.jsx)(st.A,{fontSize:"large"}),(0,q.jsx)(i.A,{sx:{fontWeight:500,fontSize:18},children:(0,K.fU)(o)})]})]})};var lt=a(6240);const it=e=>{let{highlightAnswer:t,children:a,...s}=e;const n=(0,lt.A)();return(0,q.jsx)(h.A,{...s,sx:{width:"100%",fontSize:{xs:"18px",sm:"calc(18px + 2vw)",md:"calc(18px + 4vw)",lg:"16px"},color:n.palette.text.secondary,fontWeight:t?400:300,border:`1px solid ${t?n.palette.primary.main:n.palette.divider}`,backgroundColor:t?n.palette.background.selected:n.palette.background.paper,borderRadius:"16px",marginTop:"8px",cursor:"pointer",transition:t?"border 0.2s ease-in":"none","& input":{visibility:"hidden",margin:0}},children:a})},rt=e=>{let{onChange:t,index:a,choice:s,type:n,correct:r}=e;const o=String.fromCharCode(65+a),[d,c]=(0,g.useState)("");return(0,q.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[(0,q.jsxs)(i.A,{sx:{fontWeight:!0===r?"bold":""},children:[o,"."]}),(0,q.jsx)(it,{highlightAnswer:!0===r?"21":"",children:(0,q.jsx)(l.A,{children:(0,q.jsx)(i.A,{sx:{p:1,display:"flex",fontWeight:!0===r?"bold":""},onClick:()=>t(s),children:s})})},a)]})},ot=e=>{let{question:t,code:a,image:s,type:n,choices:r=[],selectedAnswer:o,handleAnswerSelection:d,ans:c,questionNo:u}=e;return(0,q.jsxs)(l.A,{children:[(0,q.jsx)(i.A,{className:"fw-500-14",sx:{mb:1},children:null===t||void 0===t?void 0:t.question_text}),(0,q.jsx)(l.A,{children:r.map(((e,a)=>{var s;return(0,q.jsx)(rt,{choice:e,index:a,onChange:e=>d(a+1,t.id),type:n,selectedAnswer:o,correct:(null===(s=c[u])||void 0===s?void 0:s.ans)-1===a},a)}))})]})},dt=()=>{var e;const t=new URLSearchParams(window.location.search).get("key1"),a=(0,N.zy)(),[s,n]=((0,N.Zp)(),a.state,(0,g.useState)([])),[r,o]=(0,g.useState)(),[d,c]=(0,g.useState)(0),[u,m]=(0,g.useState)(!1),[h,p]=(0,g.useState)("testDetail"),[x,w]=(0,g.useState)(0),[y,j]=(0,g.useState)({name:"",metadata:{}}),{get_Test:f,updateTest:A,result:v}=Xe(),[S,b]=(0,g.useState)([]),[C,_]=(0,g.useState)(0),[I,E]=(0,g.useState)([]),[T,D]=(0,g.useState)(null),[R,P]=(0,g.useState)([]),[O,$]=(0,g.useState)(),[L,M]=(0,g.useState)([]);(0,g.useEffect)((()=>{U()}),[]);const U=async()=>{o("fetch");const[e,a]=await f(t);$(e);const s=e.questions_list.map((e=>({question:e.id,ans:""})));E((e=>[...e,...s]));const n=I.map((e=>({[e.question]:0})));M((e=>[...e,...n])),c(a),o(!1)};function z(e){"pre"===e&&C>=1&&_((e=>e-1)),"next"===e&&C+1<O.questions_list.length&&_((e=>e+1))}function F(){window.opener=null,window.open("","_self"),window.close()}return(0,q.jsxs)("div",{className:"mx-3 my-2",children:["start"===h&&(0,q.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",p:1},children:[(0,q.jsxs)(l.A,{sx:{width:"78%"},children:[(0,q.jsx)(nt,{finishTest:async function(){localStorage.setItem("draweWidth",180);try{let e={completed:!0,remaining_time_in_seconds:0};await A(t,e);const a=await v(t);console.log("Upload result",a),p("timeUps"),setTimeout((()=>{F()}),3e3)}catch(Ue){console.error("Error in the timer flow:",Ue),k.oR.error(Ue)}},activeQuestion:C+1,totalQuestions:O.questions_list.length,setModalOpen:p,testData:O}),(0,q.jsx)(ot,{question:O.questions_list[C],choices:null===(e=O.questions_list[C])||void 0===e?void 0:e.question_options,type:"MAQs",handleAnswerSelection:(e,a)=>{!async function(e,a){let s=localStorage.getItem("time"),n={answers:{[a]:e},remaining_time_in_seconds:s};await A(t,n)}(e,a),E((t=>{const s=t.findIndex((e=>e.question===a));if(-1!==s){const n=[...t];return n[s]={question:a,ans:e},n}return[...t,{question:a,ans:e}]}))},ans:I,questionNo:C}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",mt:3},children:[(0,q.jsx)(X.A,{color:"light_green",onClick:()=>z("pre"),children:"Previous"}),C===O.questions_list.length-1?(0,q.jsx)(X.A,{color:"light_green",onClick:()=>async function(){localStorage.setItem("draweWidth",180),localStorage.setItem("time",0),await A(t,{completed:!0}),await v(t),p("timeUps"),setTimeout((()=>{F()}),3e3)}(),children:(0,q.jsx)(i.A,{children:(0,H.t)("submit")})}):(0,q.jsx)(X.A,{color:"light_green",onClick:()=>z("next"),children:(0,q.jsx)(i.A,{children:(0,H.t)("next")})})]})]}),(0,q.jsxs)(l.A,{sx:{width:"18%",boxShadow:3,p:1,py:2,borderRadius:2,justifyContent:"space-between"},children:[(0,q.jsx)(Qe.Ay,{display:"grid",gap:1,gridTemplateColumns:{sm:"repeat(5, 1fr)",xs:"repeat(5, 1fr)"},children:I.map(((e,t)=>(0,q.jsx)(l.A,{sx:{backgroundColor:e.ans?"#86D56A":"#3E3E3E",justifyContent:"center",alignItems:"center",borderRadius:1,width:22,height:22,cursor:"pointer"},onClick:()=>_(t),children:(0,q.jsx)(i.A,{style:{fontSize:"12px",fontWeight:"bold"},sx:{color:e.ans?"black":"white",textAlign:"center"},children:t+1})},t)))}),(0,q.jsxs)(l.A,{sx:{},children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:1},children:[(0,q.jsx)(l.A,{sx:{backgroundColor:"#86D56A",justifyContent:"center",alignItems:"center",borderRadius:1,width:22,height:22}}),(0,q.jsx)(i.A,{sx:{mb:1,fontWeight:"bold"},children:"Answered"})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:1},children:[(0,q.jsx)(l.A,{sx:{backgroundColor:"#3E3E3E",justifyContent:"center",alignItems:"center",borderRadius:1,width:22,height:22}}),(0,q.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Not Answered"})]})]})]})]}),"testDetail"===h&&(0,q.jsx)(et,{testData:O,setModalOpen:p,onStart:async()=>{await A(t,{started:!0})}}),(0,q.jsx)(at,{open:"timeUps"===h,onClose:()=>p(!1)}),(0,q.jsx)(fe,{onClose:()=>p(!1),open:"csvUser"===h,onSubmit:function(){const e=[];R.slice(1).forEach((t=>{const a=t[0],s=t[t.length-1],n=new Set;t.slice(1).forEach((e=>{""!==e&&n.add(e)}));const l={question:a,choices:Array.from(n),answer:s};e.push(l),console.log("Processed object",l)})),console.log("All results",e)},file:T,setFile:D,setCsvData:P})]})};var ct=a(728);const ut=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:d,tab:c,skills:u}=e;const[m,h]=(0,g.useState)(new Map),[p,x]=(0,g.useState)(0),[w,y]=(0,g.useState)([]),[j,f]=(0,g.useState)([]),[A,v]=(0,g.useState)([]),{question_list:S,skill_question_list:b,induction_question:C,hr_question:_,create:N,update:k,remove:I}=Xe(),[E,T]=(0,g.useState)({skill:""}),[D,R]=(0,g.useState)([]),[P,O]=(0,g.useState)({}),[$,L]=(0,g.useState)([]),[M,U]=(0,g.useState)([]),[z,B]=(0,g.useState)("");(0,g.useEffect)((()=>{""===E.skill&&""===E.skill||Q()}),[E.skill]),(0,g.useEffect)((()=>{Y(),W()}),[]);const Q=async()=>{const[e,t]=await b(1,E.skill?E.skill:s.skill);!function(e){y([]);const t=e.filter((e=>!0===e.compulsory)),a=e.filter((e=>!1===e.compulsory));console.log("compulsoryList",t.length,"List",a.length),y((e=>[...e,...a])),f((e=>[...e,...t]))}(e)},Y=async()=>{const[e,t]=await C();U(e)},W=async()=>{const[e,t]=await _();L(e)};const V=[{title:(0,H.t)("questionType"),placeholder:(0,H.t)("questionType"),type:F.wN.SELECT,name:"tranning",validator:F.wY.REQUIRED,keyValues:[{value:"Induction",key:"Induction"},{value:"Skill",key:"Skill"},{value:"HR",key:"HR"}]},"Skill"===E.tranning&&{title:(0,H.t)("skill"),placeholder:(0,H.t)("selectSkill"),type:F.wN.SELECT,name:"skill",validator:F.wY.REQUIRED,keyValues:u}],K=[{id:122,title:"",render:e=>(0,q.jsx)(Je.A,{children:(0,q.jsx)(Ze.A,{control:(0,q.jsx)(Ke.A,{defaultChecked:e.checked,onChange:t=>((e,t)=>{const a=P[z].findIndex((e=>e.id===t));console.log("index of sel",a),O((t=>({...t,[z]:t[z].map(((t,s)=>s===a?{...t,checked:e}:t))}))),v((a=>e?[...a,t]:a.filter((e=>e!==t))))})(t.target.checked,e.id)})})},e.id)},{id:1,title:(0,H.t)("question"),render:e=>e.question_text},{id:2,title:(0,H.t)("compulsory"),render:e=>!0===e.compulsory?"Yes":"No"},{id:3,title:(0,H.t)("questionLevel"),render:e=>e.skill_level||"-"}];return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(800px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsx)("h3",{className:"opacity-80",children:(0,H.t)("addQuestions")}),(0,q.jsx)(l.A,{sx:{gap:1,alignItems:"flex-start"},children:(0,q.jsx)(Z.A,{data:E,errors:m,onChange:async e=>{const{name:t,value:a}=e.target;if("skill"===t&&"Skill"!==t&&"Skill"!==a){let e=u.filter((e=>a===e.key))[0].value;B(e);const[t,s]=await b(1,a),n=t.map((e=>({...e,checked:e.compulsory})));R((t=>t.includes(e)?t:[...t,e])),O((t=>t.hasOwnProperty(e)?t:{...t,[e]:n}))}if("skill"!==t&&"Skill"!==t&&"Skill"!==a){const e=("Induction"===a?M:$).map((e=>({...e,checked:e.compulsory})));console.log("value question",a),B(a),O((t=>t.hasOwnProperty(a)?t:{...t,[a]:e})),R((e=>e.includes(a)?e:[...e,a]))}T((e=>({...E,[t]:a}))),console.log("name or value------\x3e",P)},schema:V})}),(0,q.jsx)(l.A,{sx:{flexDirection:"row",gap:2,mt:2,border:1,borderColor:F.lm.LIGHT_GRAY,borderTopLeftRadius:5,borderTopRightRadius:5,width:"fit-content"},children:D.map(((e,t)=>(0,q.jsxs)(l.A,{sx:{p:.5,flexDirection:"row",gap:1,borderRight:1,borderColor:F.lm.LIGHT_GRAY},children:[(0,q.jsx)(i.A,{onClick:()=>{B(e)},sx:{fontSize:14,color:z===e?"black":F.lm.GRAY},children:e}),(0,q.jsx)(o.A,{sx:{height:14,width:14,cursor:"pointer"},onClick:()=>(e=>{R((t=>t.filter((t=>t!==e))));const{[e]:t,...a}=P;O(a)})(e),children:(0,q.jsx)(ct.A,{color:z===e?"black":F.lm.LG_GRAY,fontSize:"small"})})]})))}),(0,q.jsx)(l.A,{sx:{},children:(0,q.jsx)(G,{columns:K,rows:D.length>0?P[z]:[],rowsPerPage:10,loading:"fetch"===d,titleCellClasses:"c-gray fw-700"})}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:()=>{0===p?(h(new Map),n({}),x(0),a()):x((e=>e-1))},children:(0,H.t)("back")}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{let e=D.map((e=>P[e].filter((e=>!0===e.checked)))).flat();await r(e)},loading:d,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:1===p?(0,H.t)("create"):(0,H.t)("next")})})]})]})},mt=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,tab:d,setSelectedQuestions:c,skills:u,users:m,testList:h}=e;const[p,x]=(0,g.useState)(new Map),[w,y]=(0,g.useState)(0),[j,f]=(0,g.useState)([]),A=[{title:(0,H.t)("admins"),placeholder:(0,H.t)("selectAdmin"),type:F.wN.SELECT,name:"admins",validator:F.wY.REQUIRED,keyValues:m,multi:!0,height:"auto"}];return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-5",children:[(0,q.jsx)("h3",{className:"opacity-80",children:(0,H.t)("assignAdmins")}),(0,q.jsx)(Z.A,{data:s,errors:p,onChange:e=>{const{name:t,value:a}=e.target;x((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:A}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{if(0!==w);else{const e=(0,K.bG)(A,s);if(x(e),e.size)return;await r()}},loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("next")})})]})]})},ht=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,tab:d,setSelectedQuestions:c,skills:u,users:m,testList:h}=e;const[p,x]=(0,g.useState)(new Map),[w,y]=(0,g.useState)(0),[j,f]=(0,g.useState)([]),A=[{title:(0,H.t)("testType"),placeholder:(0,H.t)("selectTestType"),type:F.wN.SELECT,name:"tranning_type",validator:F.wY.REQUIRED,keyValues:[{value:"Induction Training",key:"Induction Training"},{value:"Skill Test",key:"Skill Test"},{value:"Tranning Test",key:"Tranning Test"}]},"Skill Test"===s.tranning_type&&{title:(0,H.t)("skill"),placeholder:"Select Skill",type:F.wN.SELECT,name:"skill",validator:F.wY.REQUIRED,keyValues:u},"Skill Test"===s.tranning_type&&{title:(0,H.t)("testLevel"),placeholder:(0,H.t)("selectTestLevel"),type:F.wN.SELECT,name:"level",validator:F.wY.REQUIRED,keyValues:[{value:"Level 1",key:1},{value:"Level 2",key:2},{value:"Level 3",key:3}]},{title:(0,H.t)("testName"),placeholder:(0,H.t)("enterTestName"),type:F.wN.INPUT,name:"testname",validator:F.wY.NAME},{title:(0,H.t)("maxQuestion"),placeholder:(0,H.t)("enterNumberOfQuestion"),type:F.wN.INPUT,inputType:"number",name:"totalQuestion",validator:F.wY.REQUIRED},"Skill Test"!==s.tranning_type&&{title:(0,H.t)("examPassingCriteria"),placeholder:(0,H.t)("enterPassingCriteria"),type:F.wN.INPUT,name:"passing_criteria",inputType:"number",validator:F.wY.REQUIRED},{title:(0,H.t)("timeInMin"),placeholder:(0,H.t)("enterTimeInMin"),type:F.wN.INPUT,name:"time",inputType:"number",validator:F.wY.REQUIRED}];return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsx)("h3",{className:"opacity-80",children:(0,H.t)("createTest")}),(0,q.jsx)(Z.A,{data:s,errors:p,onChange:e=>{const{name:t,value:a}=e.target;x((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:A}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{if(0!==w);else{const e=(0,K.bG)(A,s);if(x(e),e.size)return;await r()}},loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("next")})})]})]})},pt=()=>{const e=(0,N.zy)(),t=((0,N.Zp)(),e.state),[a,s]=(0,g.useState)([]),[n,r]=(0,g.useState)(),[d,c]=(0,g.useState)(0),[u,m]=(0,g.useState)(!1),[h,p]=(0,g.useState)("testDetail"),[x,w]=(0,g.useState)(0),[y,j]=(0,g.useState)({name:"",tranning_type:"",metadata:{},skill:""}),{question_list:f,skill_list:A,test_list:v,assignExam:S,createTest:b,update:C,linkPlanTestMaster:_,addQuestion:k}=Xe(),{list:I,activeUsers:E}=V(),[T,D]=(0,g.useState)(new Map),[R,P]=(0,g.useState)([]),[O,$]=(0,g.useState)([]),[L,M]=(0,g.useState)([]),[U,z]=(0,g.useState)(""),B=[{id:1,title:(0,H.t)("testName"),render:e=>(0,q.jsx)(i.A,{children:e.test_name})},{id:2,title:(0,H.t)("testType"),render:e=>(0,q.jsx)(i.A,{children:e.test_type})},{id:3,title:(0,H.t)("skill"),render:e=>(0,q.jsx)(i.A,{children:e.skill})},{id:4,title:(0,H.t)("skillLevel"),render:e=>(0,q.jsx)(i.A,{children:e.skill_level})},{id:5,title:(0,H.t)("maximumQuestions"),render:e=>(0,q.jsx)(i.A,{children:e.maximum_questions})},{id:6,title:(0,H.t)("questionsInTest"),render:e=>(0,q.jsx)(i.A,{children:e.questions_master.length})},{id:7,title:(0,H.t)("allotedMinutes"),render:e=>(0,q.jsx)(i.A,{children:e.alloted_minutes})},{id:8,title:(0,H.t)("admins"),render:e=>(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:1},children:[(0,q.jsx)(l.A,{sx:{flexDirection:"column"},children:e.admin.map(((e,t)=>(0,q.jsx)(i.A,{sx:{textTransform:"capitalize"},children:e.username},t)))}),(0,q.jsx)(ve.A,{title:"add admins",children:(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{z(e.id),p("addAssign"),j({...y,admins:e.admin.map((e=>e.id))})},children:(0,q.jsx)(Ce.A,{color:"primary",fontSize:"small"})})})]})})}];(0,g.useEffect)((()=>{console.log("planData----",t),p(!!t&&"createTest"),W(),Q(),Y()}),[]);const Q=async()=>{const[e]=await v(x+1);console.log("test master-------",e.count),c(e.count),M(e.results)},Y=async()=>{const e=await E(x+1);console.log("active users--------",e),s(e)},W=async()=>{r("fetch");const[e]=await A(x+1),t=e.results.map((e=>({value:e.skill_name,key:e.id})));$((e=>[...e,...t])),r(!1)};return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsx)(l.A,{sx:{flexDirection:"row",alignItems:"center",mb:1},children:(0,q.jsx)(i.A,{className:"fw-20-500-36",children:(0,H.t)("testMaster")})}),(0,q.jsx)(l.A,{sx:{flexDirection:"row",gap:1},children:(0,q.jsx)(X.A,{color:"gray",onClick:()=>p("createTest"),children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("createTest")})})})]}),(0,q.jsx)(G,{columns:B,rows:L,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:x,setPage:w,paginator:!0,serialize:!0,total:d,tableBodyColor:F.lm.WHITE}),(0,q.jsx)(ht,{open:"createTest"===h,onClose:()=>{p(!1)},onSubmit:async()=>{const e={test_name:y.testname,test_type:y.tranning_type,skill:y.skill,skill_level:parseInt(y.level),maximum_questions:parseInt(y.totalQuestion),alloted_minutes:parseInt(y.time)},t={test_name:y.testname,test_type:y.tranning_type,maximum_questions:parseInt(y.totalQuestion),passing_criteria:y.passing_criteria,alloted_minutes:parseInt(y.time)},a=await b("Skill Test"!==y.tranning_type?t:e);a.id&&(z(a.id),p("addQues"))},skills:O,data:y,setData:j}),(0,q.jsx)(ut,{open:"addQues"===h,onClose:()=>{p(!1)},onSubmit:async e=>{const a=e.map((e=>e.id)),s={questions:a};await k(U,s),t&&await _(t.id,{test_master:U,training_admin:t.training_admin,trainees:t.trainees}),j({}),p(!1),await Q()},selectQuestions:R,setSelectedQuestions:P,skills:O,data:y,setData:j}),(0,q.jsx)(mt,{open:"addAssign"===h,onClose:()=>{p(!1)},onSubmit:async()=>{const e={admin:y.admins};await k(U,e),p(!1),j({}),await Q()},users:a,testList:L,data:y,setData:j})]})};var xt=a(6012);const gt=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,tab:d,edit:c,selectSkill:u,user:m}=e;const[h,p]=(0,g.useState)(new Map),[x,w]=(0,g.useState)(0),[y,j]=(0,g.useState)(1),[f,A]=(0,g.useState)(1),v=/^[A-Za-z\s]*$/,S=e=>{const{name:t,value:a}=e.target;n((e=>({...e,[t]:a})))},b=async()=>{if(""!==s.skill_name)return await r(),j(1),void A(1)};return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsx)("h3",{className:"opacity-80",children:!0===c?(0,H.t)("editSkill"):(0,H.t)("addingSkill")}),(0,q.jsxs)("div",{style:{display:"flex",gap:5},className:"fw-16 mb-1",children:[f>1&&(0,q.jsxs)(i.A,{sx:{cursor:"pointer"},onClick:()=>j(1),children:[(0,H.t)("level")," 1 >"]}),f>1&&(0,q.jsxs)(i.A,{sx:{cursor:"pointer"},onClick:()=>j(2),children:[(0,H.t)("level")," 2 >"]}),f>2&&(0,q.jsxs)(i.A,{sx:{cursor:"pointer"},onClick:()=>j(3),children:[(0,H.t)("level")," 3"]})]}),(0,q.jsxs)("div",{style:{display:"grid",gap:10},children:[1===y&&(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:(0,H.t)("enterSkillName")}),(0,q.jsx)(z.A,{name:"skill_name",value:s.skill_name,onChange:S,disabled:!0===c,width:"500px"}),(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:(0,H.t)("addSupervisor")}),(0,q.jsx)(xt.A,{name:"supervisor_one",width:"100%",onChange:S,value:s.supervisor_one,keyValues:m,multi:!0,height:"auto"})]}),1===y&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(i.A,{sx:{textAlign:"center"},onClick:()=>console.log("supervisor",s),children:[(0,H.t)("level")," 1"]}),(0,q.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:(0,H.t)("addDays")}),(0,q.jsx)(z.A,{type:"number",name:"days_1",value:s.days_1,width:"500px",onChange:S})]}),(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:(0,H.t)("examPassingCriteria")}),(0,q.jsx)(z.A,{type:"number",name:"exam_1",value:s.exam_1,onChange:S,width:"500px"})]}),(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:(0,H.t)("floorWorkCriteria")}),(0,q.jsx)(z.A,{type:"number",name:"floor_1",value:s.floor_1,onChange:S,width:"500px"})]}),(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:(0,H.t)("numberOfEntry")}),(0,q.jsx)(z.A,{type:"number",name:"entry_1",value:s.entry_1,onChange:S,width:"500px"})]})]})]}),2===y&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(i.A,{sx:{textAlign:"center"},children:[(0,H.t)("level")," 2"]}),(0,q.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:(0,H.t)("addDays")}),(0,q.jsx)(z.A,{type:"number",name:"days_2",value:s.days_2,width:"500px",onChange:S})]}),(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:(0,H.t)("examPassingCriteria")}),(0,q.jsx)(z.A,{type:"number",name:"exam_2",value:s.exam_2,onChange:S,width:"500px"})]}),(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:(0,H.t)("floorWorkCriteria")}),(0,q.jsx)(z.A,{type:"number",name:"floor_2",value:s.floor_2,onChange:S,width:"500px"})]}),(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:(0,H.t)("numberOfEntry")}),(0,q.jsx)(z.A,{type:"number",name:"entry_2",value:s.entry_2,onChange:S,width:"500px"})]})]})]}),3===y&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(i.A,{sx:{textAlign:"center"},children:[(0,H.t)("level")," 3"]}),(0,q.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:(0,H.t)("addDays")}),(0,q.jsx)(z.A,{type:"number",name:"days_3",value:s.days_3,width:"500px",onChange:S})]}),(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:(0,H.t)("examPassingCriteria")}),(0,q.jsx)(z.A,{type:"number",name:"exam_3",value:s.exam_3,onChange:S,width:"500px"})]}),(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:(0,H.t)("floorWorkCriteria")}),(0,q.jsx)(z.A,{type:"number",name:"floor_3",value:s.floor_3,onChange:S,width:"500px"})]}),(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{gap:1},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:(0,H.t)("numberOfEntry")}),(0,q.jsx)(z.A,{type:"number",name:"entry_3",value:s.entry_3,onChange:S,width:"500px"})]})]})]})]}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,px:8,children:[(0,q.jsx)(X.A,{bordered:!0,color:"light_green",disabled:3===y,onClick:()=>{console.log("data skill-----\x3e>",v.test(s.skill_name)),!0===v.test(s.skill_name)&&""!==s.skill_name&&void 0!==s.skill_name?(y<=3&&j((e=>e+1)),f<=3&&A((e=>e+1))):k.oR.warn("Enter Vaild Skill Name",s.skill_name)},children:(0,q.jsx)(i.A,{color:F.lm.TEXT_GRAY,children:!0===c?(0,H.t)("next"):(0,H.t)("addLevel")})}),!0===c?(0,q.jsx)(X.A,{color:"light_green",onClick:b,loading:o,children:(0,q.jsx)(i.A,{color:F.lm.BLACK,children:(0,H.t)("submit")})}):(0,q.jsx)(X.A,{color:"light_green",disabled:3!=y,onClick:b,loading:o,children:(0,q.jsx)(i.A,{color:F.lm.BLACK,children:(0,H.t)("submit")})})]})]})},wt=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,tab:d}=e;return(0,q.jsxs)(J.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,q.jsx)("h3",{className:"opacity-80",children:"ADD REPORT"}),(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{pt:1,gap:1},gridTemplateColumns:{sm:"repeat(4, 1fr)",xs:"repeat(4, 1fr)"},children:[(0,q.jsx)(i.A,{sx:{fontWeight:"bold"},children:"S no"}),(0,q.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Item Name"}),(0,q.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Plan"}),(0,q.jsx)(i.A,{sx:{fontWeight:"bold"},children:"Actual"}),[{itemName:"item 1",plan:1e3},{itemName:"item 2",plan:800},{itemName:"item 3",plan:1e3}].map(((e,t)=>(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(i.A,{children:t+1}),(0,q.jsx)(i.A,{sx:{textTransform:"capitalize"},children:e.itemName}),(0,q.jsx)(i.A,{children:e.plan}),(0,q.jsx)("input",{type:"text"})]})))]}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,q.jsx)(X.A,{onClick:r,loading:o,children:"Create"})]})]})},yt=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:i,loading:r,user:o}=e;const[d,c]=(0,g.useState)(new Map),u=[{title:(0,H.t)("supervisor"),placeholder:"Select Supervisor",type:F.wN.SELECT,name:"supervisor",multi:!0,height:"auto",keyValues:o}];return(0,q.jsxs)(J.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,q.jsx)("h3",{className:"opacity-80",children:(0,H.t)("addSupervisor")}),(0,q.jsx)(Z.A,{data:s,errors:d,onChange:e=>{const{name:t,value:a}=e.target;c((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:u}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{onClick:i,loading:r,children:(0,H.t)("create")})]})]})},jt=()=>{const[e,t]=(0,g.useState)("Users"),[a,s]=(0,g.useState)([]),[n,r]=(0,g.useState)([]),[d,c]=(0,g.useState)(),[u,m]=(0,g.useState)(0),[h,p]=(0,g.useState)(!1),[x,w]=(0,g.useState)([]),[y,j]=(0,g.useState)(0),[f,A]=(0,g.useState)(null),[v,S]=(0,g.useState)({days_1:"",days_2:"",days_3:"",supervisor_one:"",supervisor_two:"",supervisor_three:"",exam_1:"",exam_2:"",exam_3:"",floor_1:"",floor_2:"",floor_3:"",entry_1:"",entry_2:"",entry_3:""}),{list:b,create:C,updateSkill:_,update:N,addSupervisor:k,remove:I,opratorList:E,createOperator:T,removeOperator:D,updateOperator:R}=ke(),[P,O]=(0,g.useState)(!1),[$,L]=(0,g.useState)(""),{activeUsers:M}=V(),[U,z]=(0,g.useState)();(0,g.useEffect)((()=>{Q()}),[y,e]),(0,g.useEffect)((()=>{B()}),[]);const B=async()=>{c("fetch");const e=await M(y+1);s(e)},Q=async()=>{c("fetch");const[e,t]=await b(y+1);console.log("_list--------------",e),r(e.results),m(e.count),c(!1)},Y=async()=>{const e={skill_name:v.skill_name,test_performance_criteria:[v.exam_1,v.exam_2,v.exam_3],duration_between_two_tests:[v.days_1,v.days_2,v.days_3],floor_performance_criteria:[parseInt(v.floor_1),parseInt(v.floor_2),parseInt(v.floor_3)],no_of_performance_entries:[parseInt(v.entry_1),parseInt(v.entry_2),parseInt(v.entry_3)]};if(c("fetch"),!1===P){let t=await C(e);W(t.id),console.log("add skill respose----",t)}else{await _(e,$);W($)}};async function W(e){const t={add:{...v}.supervisor_one};await k(e,t),p(!1),S({}),await Q(),c(!1)}const J=[{id:1,title:(0,H.t)("skillName"),render:e=>e.skill_name},{id:112,title:(0,H.t)("noOfEntries"),render:e=>(0,q.jsx)(l.A,{sx:{flexDirection:"row",gap:.3},children:e.no_of_performance_entries.map(((t,a)=>(0,q.jsxs)(i.A,{children:[t,a<e.no_of_performance_entries.length-1&&","]})))})},{id:113,title:(0,H.t)("admins"),render:e=>(0,q.jsx)(l.A,{sx:{flexDirection:"row",gap:.3},children:e.supervisor_list.map(((t,a)=>(0,q.jsxs)(i.A,{sx:{fontSize:14},children:[t.username,a<e.supervisor_list.length-1&&","]})))})},{id:6,title:(0,H.t)("action"),render:e=>(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(l.A,{flexDirection:"row",sx:{gap:1},children:(0,q.jsx)(ve.A,{title:"edit skill",children:(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{O(!0),p("add"),z(e),S({...v,skill_name:e.skill_name,supervisor_one:e.supervisor_list.map((e=>e.id)),days_1:e.duration_between_two_tests[0],days_2:e.duration_between_two_tests[1],days_3:e.duration_between_two_tests[2],exam_1:e.test_performance_criteria[0],exam_2:e.test_performance_criteria[1],exam_3:e.test_performance_criteria[2],floor_1:e.floor_performance_criteria[0],floor_2:e.floor_performance_criteria[1],floor_3:e.floor_performance_criteria[2],entry_1:e.no_of_performance_entries[0],entry_2:e.no_of_performance_entries[1],entry_3:e.no_of_performance_entries[2]}),L(e.id)},children:(0,q.jsx)(ie.A,{color:"primary",fontSize:"small"})})})})})}];return(0,q.jsxs)("div",{className:"mx-3 my-2 fw-500",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsx)(i.A,{className:"fw-20-500-36",children:(0,H.t)("skill")}),(0,q.jsx)(l.A,{justifyContent:"flex-end",direction:"row",sx:{mb:1},children:(0,q.jsx)(X.A,{color:"gray",onClick:()=>{p("add"),S({})},children:(0,q.jsxs)(i.A,{className:"fw-20-500-24",children:["+ ",(0,H.t)("createSkill")]})})})]}),(0,q.jsx)(G,{columns:J,rows:n,rowsPerPage:10,loading:"fetch"===d,titleCellClasses:"fw-700",page:y,setPage:j,paginator:!0,serialize:!0,total:u,tableBodyColor:F.lm.WHITE}),(0,q.jsx)(gt,{selectSkill:U,open:"add"===h,onClose:()=>{p(!1),O(!1)},data:v,setData:S,onSubmit:Y,loading:"add"===d,edit:P,user:a}),(0,q.jsx)(yt,{open:"addSuper"===h,onClose:()=>{p(!1),O(!1)},data:v,setData:S,onSubmit:W,loading:"add"===d,user:a}),(0,q.jsx)(wt,{open:"Report"===h,onClose:()=>p(!1),onSubmit:Y}),(0,q.jsx)(fe,{onClose:()=>p(!1),open:"csvUser"===h,onSubmit:async()=>{x.map((async t=>{if("Users"===e){if(""===t.email)return;await C(t)}else{if(""===t.employee_id)return;await T(t)}})),p(!1),await Q(y=1)},file:f,setFile:A,setCsvData:w,tab:e})]})},ft=()=>{const e=(0,N.zy)(),[t,a]=((0,N.Zp)(),e.state,(0,g.useState)(0)),[s,n]=(0,g.useState)([]),[r,o]=(0,g.useState)([{value:"All",key:"All"},{value:"Induction",key:"Induction"},{value:"Training",key:"Training"}]),[d,c]=(0,g.useState)(),[u,m]=(0,g.useState)(0),[h,p]=(0,g.useState)(!1),[x,w]=(0,g.useState)("testDetail"),[y,j]=(0,g.useState)(0),[f,A]=(0,g.useState)({name:"",metadata:{}}),{question_list:v,skill_list:S,create:b,update:C,remove:_}=Xe(),[I,E]=(0,g.useState)(null),[T,D]=(0,g.useState)([]),[R,P]=(0,g.useState)(new Map),[O,$]=(0,g.useState)([]),[L,M]=(0,g.useState)([]),[U,z]=(0,g.useState)(10),[B,Q]=(0,g.useState)(""),[Y,W]=(0,g.useState)("");(0,g.useEffect)((()=>{J()}),[]),(0,g.useEffect)((()=>{V(y||1,U,B,Y)}),[t,y]);const V=async(e,t,a,s)=>{c("fetch");const[n,l]=await v(e,t,a,s);m(n.count),console.log("_count----------------\x3e>",n),M(n.results),$(n.results),c(!1)},J=async()=>{c("fetch");const[e]=await S(y+1),t=e.results.map((e=>({value:e.skill_name,key:e.id})));n((e=>[...e,...t]));const a=e.results.map((e=>({value:e.skill_name,key:e.skill_name})));o((e=>[...e,...a])),c(!1)},K=[{title:(0,H.t)("testType"),placeholder:(0,H.t)("selectTest"),type:F.wN.SELECT,name:"tranning_type",validator:F.wY.REQUIRED,keyValues:[{value:"Induction Training",key:"Induction Training"},{value:"Skill Test",key:"Skill Test"},{value:"Tranning Test",key:"Tranning Test"}]},"Skill Test"===f.tranning_type&&{title:(0,H.t)("skill"),placeholder:(0,H.t)("selectSkill"),type:F.wN.SELECT,name:"skill",validator:F.wY.REQUIRED,keyValues:s},"Skill Test"===f.tranning_type&&{title:(0,H.t)("tranningLevel"),placeholder:(0,H.t)("selectTestLevel"),type:F.wN.SELECT,name:"level",validator:F.wY.REQUIRED,keyValues:[{value:"Level 1",key:1},{value:"Level 2",key:2},{value:"Level 3",key:3}]}],ee=[{placeholder:(0,H.t)("filterBySkill"),type:F.wN.SELECT,name:"questionFilter",validator:F.wY.REQUIRED,keyValues:r}],te=[{id:1,title:(0,H.t)("question"),render:e=>e.question_text},{id:2,title:(0,H.t)("skill"),render:e=>e.skill},{id:3,title:(0,H.t)("skillLevel"),render:e=>e.skill_level?(0,H.t)("level")+" "+e.skill_level:"-"},{id:33,title:(0,H.t)("inductionQuestion"),render:e=>!0===e.induction_question?(0,H.t)("yes"):(0,H.t)("no")},{id:4,title:(0,H.t)("compulsory"),render:e=>!0===e.compulsory?(0,H.t)("yes"):(0,H.t)("no")}];return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsx)("div",{className:"flex items-center justify-between",children:(0,q.jsx)(l.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,q.jsx)(i.A,{className:"fw-20-500-36",children:(0,H.t)("questionBank")})})}),(0,q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,q.jsx)(se.A,{value:t,onChange:(e,t)=>{a(t),j(0)},className:"mb-2 fw-500",children:[(0,H.t)("list"),(0,H.t)("upload")].map(((e,t)=>(0,q.jsx)(ne.A,{label:e,className:"fw-500",value:t},t)))}),0===t&&(0,q.jsx)(Z.A,{data:f,errors:R,onChange:async e=>{const{name:t,value:a}=e.target;console.log("handle filter----",t,a),P((e=>(e.delete(t),e))),A((e=>({...e,[t]:a}))),"Induction"===a?(j(0),Q("induction"),W(""),await V(1,U,"induction")):"Training"===a?(j(0),Q("training"),W(""),await V(1,U,"training")):"Training"!==a&&"Induction"!==a&&"All"!==a&&""!==a?(j(0),Q("skill"),W(a),await V(1,U,"skill",a)):"All"===a&&(j(0),Q(""),W(""),console.log("Alllll------------",B),c("fetch"),await V(1,10))},schema:ee})]}),1===t&&(0,q.jsx)(l.A,{sx:{alignItems:"flex-start",pl:3},children:(0,q.jsxs)(l.A,{children:[(0,q.jsx)(Z.A,{data:f,errors:R,onChange:e=>{const{name:t,value:a}=e.target;"tranning_type"===t&&A({...f,skill:"",level:""}),P((e=>(e.delete(t),e))),A((e=>({...e,[t]:a})))},schema:K}),(0,q.jsx)(X.A,{color:"gray",onClick:()=>w("csvUser"),children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("uploadCsvFile")})})]})}),0===t&&(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(G,{columns:te,rows:O,rowsPerPage:U,loading:"fetch"===d,titleCellClasses:"c-gray fw-700",page:y,setPage:j,paginator:!0,serialize:!0,total:u,tableBodyColor:F.lm.WHITE})}),(0,q.jsx)(fe,{tab:"question",onClose:()=>w(!1),open:"csvUser"===x,onSubmit:async function(){c("fetch"),T.slice(1).forEach((async e=>{const t=e[0],a=e[1],s=e[e.length-1],n=new Set;e.slice(2).forEach((e=>{""!==e&&n.add(e)}));const l=Array.from(n);l.pop();const i={compulsory:"TRUE"===t,question_text:a,question_options:l,correct_answer:parseInt(s),induction_question:"Induction Training"===f.tranning_type},r={compulsory:"TRUE"===t,question_text:a,question_options:l,correct_answer:parseInt(s),skill:f.skill,skill_level:f.level,induction_question:!1};await b("Skill Test"===f.tranning_type?r:i)})),w(!1),c(!1),k.oR.success("Question are uploaded in question bank."),await V(1,10),a(0),A({})},file:I,setFile:E,setCsvData:D})]})};var At=a(3141),vt=a(2019);function St(e){let{title:t,chartColors:a,chart:s,...n}=e;const{series:i,options:r}=s,o=i.map((e=>e.value)),d={chart:{width:150,type:"pie",animations:{enabled:!1}},dataLabels:{enabled:!1},legend:{show:!1},tooltip:{enabled:!1},colors:a,responsive:[{breakpoint:480,options:{chart:{},legend:{position:"bottom"}}}]};return(0,q.jsx)(l.A,{sx:{},dir:"ltr",children:(0,q.jsx)(vt.A,{type:"pie",series:o,options:d})})}const bt=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{skillMatrixList:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new Q.Ay,s=await a.get(`training/all-skill-matrix/?page=${e}&page_size=10`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),null===s||void 0===s?void 0:s.data):[[],0]},list:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new Q.Ay,s=await a.get(`training/${e}/skill-matrix/`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),null===s||void 0===s?void 0:s.data):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.post(`${Y.H.ASSET}/${a}/${Y.H.PLANTS}/`,e,t,(e=>(0,B.So)(e,null,"Plant created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.PLANT}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Plant Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.PLANT}/${e}/`,t,(e=>(0,B.So)(e,null,"Plant deleted successfully!")));return null===s||void 0===s?void 0:s.data},postPerformance:async e=>{const a=new Q.Ay,s=await a.post(`performance-record/${e.operator}/`,{skill:e.skill,skill_level:e.skill_level},t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data},getPerformanceSkill:async e=>{const a=new Q.Ay,s=await a.get(`training/update-skill/${e.operator}/`,{},t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data},performanceRecord:async e=>{const a=new Q.Ay,s=await a.post(`training/${e.operator}/performance-record/`,{skill:e.skill,skill_level:e.skill_level},t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data},putPerformanceRecord:async(e,a)=>{const s=new Q.Ay,n=await s.put(`training/performance-record/${e}/`,a,t,(e=>(0,B.So)(e,null,"Performance uploaded.")));return null===n||void 0===n?void 0:n.data},performanceList:async e=>{const a=e.replace(/-/g,""),s=new Q.Ay,n=await s.get(`training/date-wise-performance-record/${a}/`,{},t,B.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),null===n||void 0===n?void 0:n.data):[[],0]},getPerformanceId:async e=>{const a=new Q.Ay,s=await a.get(`training/${e.operator}/performance-record/`,{},t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data}}};var Ct=a(2204),_t=a(3272);const Nt=e=>{let{row:t,skill:a}=e,s=[F.lm.L4,F.lm.L4,F.lm.L4,F.lm.L1],n=[F.lm.L2,F.lm.L4,F.lm.L4,F.lm.L1],r=[F.lm.L2,F.lm.L3,F.lm.L4,F.lm.L1],o=[F.lm.L2,F.lm.L3,F.lm.L5,F.lm.L1],d=[F.lm.L4,F.lm.L4,F.lm.L4,F.lm.L4];return(0,g.useLayoutEffect)((()=>{console.log("PrintPage--skill----",a),console.warn("PrintPage--skill----",t)}),[t]),(0,q.jsxs)("div",{className:"mx-4 my-4",children:[(0,q.jsxs)(l.A,{sx:{justifyContent:"center",alignItems:"center"},children:[(0,q.jsx)("img",{src:_t,style:{width:"230px",height:"75px",objectFit:"contain"}}),(0,q.jsx)(l.A,{sx:{borderBottom:"2px solid #000",my:2},children:(0,q.jsx)(i.A,{className:"fw-36",sx:{},children:"Operator Skill Matrix"})})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,q.jsxs)(l.A,{children:[(0,q.jsxs)(i.A,{children:["Operator Name : ",t.fullname]}),(0,q.jsxs)(i.A,{children:["Aadhaar Number : ",t.aadhar]})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:2,alignItems:"center",justifyContent:"center"},children:[(0,q.jsxs)(l.A,{sx:{width:50},children:[(0,q.jsx)(St,{chartColors:s,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}}),(0,q.jsx)(i.A,{sx:{fontSize:12},textAlign:"center",children:"Induction"})]}),(0,q.jsxs)(l.A,{sx:{width:50},children:[(0,q.jsx)(St,{chartColors:n,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}}),(0,q.jsx)(i.A,{sx:{fontSize:12},textAlign:"center",children:"Level 1"})]}),(0,q.jsxs)(l.A,{sx:{width:50},children:[(0,q.jsx)(St,{chartColors:r,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}}),(0,q.jsx)(i.A,{sx:{fontSize:12},textAlign:"center",children:"Level 2"})]}),(0,q.jsxs)(l.A,{sx:{width:50},children:[(0,q.jsx)(St,{chartColors:o,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}}),(0,q.jsx)(i.A,{sx:{fontSize:12},textAlign:"center",children:"Level 3"})]})]})]}),(0,q.jsx)(l.A,{children:(0,q.jsx)(Qe.Ay,{display:"grid",gap:1,py:2,gridTemplateColumns:{sm:"repeat(5, 1fr)",xs:"repeat(5, 1fr)"},children:a.map((e=>(0,q.jsxs)(l.A,{sx:{border:2,alignContent:"center",alignItems:"center",borderColor:F.lm.TEXT_GRAY},children:[(0,q.jsx)(i.A,{children:e.skill_name}),(0,q.jsx)(l.A,{sx:{width:70},children:(0,q.jsx)(St,{chartColors:0===t[e.id]?s:1===t[e.id]?n:2===t[e.id]?r:3===t[e.id]?o:d,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}})})]})))})}),(0,q.jsx)(i.A,{sx:{mt:2},children:"\xa9 Dhoot Transmission Pvt. Ltd. All Rights Reserved. | Powered by: Smart Udyog"})]})},kt=()=>{const e=(0,N.zy)(),[t,a]=((0,N.Zp)(),e.state,(0,g.useState)("testDetail")),[s,n]=(0,g.useState)(),[r,d]=(0,g.useState)(1),[c,u]=(0,g.useState)({name:"",tranning_type:"",metadata:{},skill:""}),[m,h]=(0,g.useState)(0),{skillMatrixList:p}=bt(),{list:x}=V(),{list:w}=ke(),[y,j]=(0,g.useState)(new Map),[f,A]=(0,g.useState)([]),[v,S]=(0,g.useState)([]),[b,C]=(0,g.useState)([]),[_,k]=(0,g.useState)({}),[D,z]=(0,g.useState)(!1),[G,B]=(0,g.useState)([{value:"All",key:"123"}]);let Q=[F.lm.L4,F.lm.L4,F.lm.L4,F.lm.L1],Y=[F.lm.L2,F.lm.L4,F.lm.L4,F.lm.L1],W=[F.lm.L2,F.lm.L3,F.lm.L4,F.lm.L1],X=[F.lm.L2,F.lm.L3,F.lm.L5,F.lm.L1],J=[F.lm.L4,F.lm.L4,F.lm.L4,F.lm.L4];const K=[{placeholder:(0,H.t)("filterBySkill"),type:F.wN.SELECT,name:"skill_id",keyValues:G}];(0,g.useLayoutEffect)((()=>{n("fetch"),ee()}),[]),(0,g.useEffect)((()=>{!async function(){n("fetch");const e=await p(r);h(e.count),console.log("skillMatrixList",e.count),S(e.items),C(e.items),n(!1)}()}),[r]);const ee=async()=>{const[e]=await w(),t=e.results.map((e=>({value:e.skill_name,key:e.id})));B((e=>[...e,...t])),A(e.results)},te=(0,g.useRef)(null),ae=(0,At.useReactToPrint)({content:()=>te.current,onPrintError:()=>console.log("error------"),removeAfterPrint:!0}),se=(0,g.useRef)(null),ne=(0,At.useReactToPrint)({content:()=>se.current,onPrintError:()=>console.log("error------"),removeAfterPrint:!0});function le(e){k(e),z(!0),setTimeout((()=>{ae()}),1e3)}return(0,q.jsxs)("div",{className:"mx-3 my-2",ref:se,children:[(0,q.jsx)("div",{className:"flex items-center justify-between",children:(0,q.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center",width:"100%",justifyContent:"space-between"},children:[(0,q.jsx)(i.A,{className:"fw-20-500-36",children:(0,H.t)("skillMatrix")}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",mt:-1},children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,q.jsx)(l.A,{sx:{width:50},children:(0,q.jsx)(St,{chartColors:Q,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}})}),(0,q.jsx)(i.A,{className:"fw-14",textAlign:"center",children:(0,H.t)("induction")})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,q.jsx)(l.A,{sx:{width:50},children:(0,q.jsx)(St,{chartColors:Y,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}})}),(0,q.jsxs)(i.A,{className:"fw-14",textAlign:"center",children:[(0,H.t)("level")," 1"]})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,q.jsx)(l.A,{sx:{width:50},children:(0,q.jsx)(St,{chartColors:W,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}})}),(0,q.jsxs)(i.A,{className:"fw-14",textAlign:"center",children:[(0,H.t)("level")," 2"]})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[(0,q.jsx)(l.A,{sx:{width:50},children:(0,q.jsx)(St,{chartColors:X,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}})}),(0,q.jsxs)(i.A,{className:"fw-14",textAlign:"center",children:[(0,H.t)("level")," 3"]})]})]})]})}),(0,q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,q.jsx)(l.A,{sx:{py:1,flexDirection:"row",gap:1},children:(0,q.jsx)(Z.A,{data:c,errors:y,onChange:e=>{let t=v;const{name:a,value:s}=e.target;if(j((e=>(e.delete(a),e))),u((e=>({...e,[a]:s}))),123===s)C(t);else{let e=t.filter((e=>e[s]>0));C(e.length>0?e:[]),console.log("name----",a,"value-----",s,"templist",e)}},schema:K})}),(0,q.jsx)(l.A,{sx:{flexDirection:"row",gap:2,pr:4,alignItems:"center"},children:(0,q.jsx)(Ct.A,{color:F.lm.BLACK,onClick:()=>ne()})})]}),(0,q.jsx)(R.A,{children:(0,q.jsxs)(I.A,{children:[(0,q.jsx)(P.A,{sx:{backgroundColor:F.lm.BG_GRAY},children:(0,q.jsxs)(O.A,{children:[(0,q.jsx)(T.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:(0,H.t)("sno")}),(0,q.jsx)(T.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:(0,H.t)("operator")}),(0,q.jsx)(T.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:(0,H.t)("aadhaarNumber")}),f.map((e=>(0,q.jsx)(T.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black",pl:5,textAlign:"left"},children:e.skill_name}))),(0,q.jsx)(T.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:(0,H.t)("action")})]})}),(0,q.jsx)(E.A,{children:s?(0,q.jsx)(O.A,{children:(0,q.jsx)(T.A,{colSpan:12,className:"opacity-60 w-full",children:(0,q.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,q.jsx)(M.A,{big:!0,blue:!0})})})}):b.length>0?b.map(((e,t)=>(0,q.jsx)(ie,{row:e,arr:f,index:t,childFun:le}))):(0,q.jsx)(O.A,{children:(0,q.jsxs)(T.A,{colSpan:12,className:"text-center h-300 flex items-center opacity-60 w-full",children:[(0,q.jsx)("img",{src:U,alt:"leaf",height:100,className:"w-full object-contain"}),(0,q.jsx)("p",{className:"text-center",children:"No Records found!"})]})})}),(0,q.jsx)($.A,{children:(0,q.jsx)(O.A,{children:(0,q.jsx)(L.A,{rowsPerPageOptions:[],count:m,rowsPerPage:10,page:r-1,onPageChange:(e,t)=>d(t+1)})})})]})}),!0===D&&(0,q.jsx)("div",{style:{visibility:"hidden"},children:(0,q.jsx)("div",{ref:te,children:(0,q.jsx)(Nt,{skill:f,row:_})})})]});function ie(e){let{row:t,arr:a,index:s,childFun:n}=e;return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(l.A,{sx:{p:.3}}),(0,q.jsxs)(O.A,{sx:{},children:[(0,q.jsx)(T.A,{className:"c-gray fw-500 text-nowrap h3",sx:{color:"black"},children:s+1}),(0,q.jsx)(T.A,{className:"c-gray fw-500 text-nowrap h3",sx:{color:"black"},children:t.fullname}),(0,q.jsx)(T.A,{className:"c-gray fw-500 text-nowrap h3",sx:{color:"black"},children:t.aadhar}),a.map(((e,a)=>(0,q.jsx)(T.A,{className:"",sx:{p:0},children:(0,q.jsx)(l.A,{sx:{width:70,pl:5},children:(0,q.jsx)(St,{chartColors:0===t[e.id]?Q:1===t[e.id]?Y:2===t[e.id]?W:3===t[e.id]?X:J,chart:{series:[{value:25},{value:25},{value:25},{value:25}]}})})}))),(0,q.jsx)(T.A,{className:"c-gray fw-700 text-nowrap h3",sx:{color:"black"},children:(0,q.jsx)(ve.A,{title:(0,H.t)("printSkillMatrix"),children:(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>n(t),children:(0,q.jsx)(Ct.A,{color:"primary",fontSize:"small"})})})})]},t._id)]})}};a(7330);const It=()=>{(0,N.zy)(),(0,y.d4)((e=>e));const[e,t]=(0,g.useState)([]),[a,s]=(0,g.useState)(),[n,r]=(0,g.useState)(0),[o,d]=(0,g.useState)({}),{test_list:c,assignExam:u}=Xe(),{list:m,listByAadhar2:h}=V(),[p,x]=(0,g.useState)(null),[w,j]=(0,g.useState)(new Map),[f,A]=(0,g.useState)([]),[v,S]=(0,g.useState)([]),b=[{title:(0,H.t)("operator"),placeholder:(0,H.t)("selectOperator"),type:F.wN.MASTER,name:"operator",validator:F.wY.REQUIRED,fetch:[h],noSearch:!0},{title:(0,H.t)("test"),placeholder:(0,H.t)("selectTest"),type:F.wN.SELECT,name:"test",validator:F.wY.REQUIRED,keyValues:v}];(0,g.useEffect)((()=>{localStorage.setItem("draweWidth",180),C(),_()}),[]);const C=async()=>{const[e,t]=await c();console.log("testport----",e);const a=e.results.map((e=>({value:`${e.test_name}_${e.skill?e.skill:e.test_type}_${e.skill_level?e.skill_level:""}`,key:e.id})));S(a)},_=async()=>{const[e,a]=await m(n+1),s=e.results.filter((e=>e.is_operator)).map((e=>({value:e.username,key:e.id})));t((e=>[...e,...s]))};return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsx)("div",{className:"flex items-center justify-between",children:(0,q.jsx)(l.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,q.jsx)(i.A,{className:"fw-20-500-36",children:(0,H.t)("testPortal")})})}),(0,q.jsx)(l.A,{sx:{alignItems:"flex-start",pl:3},children:(0,q.jsxs)(l.A,{children:[(0,q.jsx)(Z.A,{data:o,errors:w,onChange:e=>{const{name:t,value:a}=e.target;j((e=>(e.delete(t),e))),d((e=>({...e,[t]:a})))},schema:b}),(0,q.jsx)(X.A,{color:"gray",Button:!0,onClick:async()=>{const e=(0,K.bG)(b,o);if(j(e),e.size)return;let t=await u(o);console.log("response----",t),t&&await async function(e){localStorage.setItem("draweWidth",0);const t={key1:e.id},a=new URLSearchParams(t).toString(),s=`/test?${a}`;window.open(s,"_blank","rel=noopener noreferrer")}(t)},children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("start")})})]})})]})},Et=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){const e=new Q.Ay,a=await e.get(`${Y.H.TRAINING}/${Y.H.TRAININGS}/`,{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post(`${Y.H.TRAINING}/${Y.H.TRAININGS}/`,e,t,(e=>(0,B.So)(e,null,"Created successfully!")));return null===s||void 0===s?void 0:s.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.LINE}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Line Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.LINE}/${e}/`,t,(e=>(0,B.So)(e,null,"Line deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},Tt=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d,users:c}=e;const{list:u,groupUser:m}=Re(),[h,p]=(0,g.useState)([]);(0,g.useEffect)((()=>{j()}),[]);const x=[{title:(0,H.t)("trainingName"),placeholder:(0,H.t)("enterTrainingName"),type:F.wN.INPUT,name:"training_name",validator:F.wY.REQUIRED,width:"350px"},{title:(0,H.t)("trainingStartDate"),placeholder:"Select Start Date",type:F.wN.DATE,name:"start_date",validator:F.wY.REQUIRED,width:"350px"},{title:(0,H.t)("trainingType"),placeholder:(0,H.t)("enterTrainingType"),type:F.wN.INPUT,name:"training_type",validator:F.wY.REQUIRED,width:"350px"},{title:(0,H.t)("trainingEndDate"),placeholder:"Select End Date",type:F.wN.DATE,name:"end_date",width:"350px"},{title:(0,H.t)("trainingDescription"),placeholder:(0,H.t)("enterTrainingDescription"),type:F.wN.INPUT,name:"training_description",width:"350px"},{title:(0,H.t)("trainingStartTime"),type:F.wN.TIME,name:"start_time",validator:F.wY.REQUIRED,width:"350px"},{title:(0,H.t)("trainer"),placeholder:(0,H.t)("enterTrainerName"),type:F.wN.INPUT,name:"trainer",width:"350px"},{title:(0,H.t)("trainingEndTime"),type:F.wN.TIME,name:"end_time",width:"350px"},{title:(0,H.t)("trainingAdmin"),type:F.wN.SELECT,name:"training_admin",validator:F.wY.REQUIRED,keyValues:c,multi:!0,height:"auto",width:"350px"},{title:(0,H.t)("testRequiredAtEndOfTraining"),type:F.wN.RADIO,name:"test_required",validator:F.wY.REQUIRED,keyValues:[{value:"yes",label:(0,H.t)("yes")},{value:"no",label:(0,H.t)("no")}],width:"350px"},{title:(0,H.t)("group"),placeholder:"Select group",type:F.wN.SELECT,name:"group",keyValues:h,multi:!0,height:"auto",width:"350px"},{title:(0,H.t)("feedbackAtEndOfTraining"),type:F.wN.RADIO,name:"feedback_required",validator:F.wY.REQUIRED,keyValues:[{value:"yes",label:(0,H.t)("yes")},{value:"no",label:(0,H.t)("no")}],width:"350px"},{title:(0,H.t)("trainees"),placeholder:"Select Trainees",type:F.wN.SELECT,name:"trainees",keyValues:c,multi:!0,height:"auto",width:"350px"},"yes"===s.feedback_required&&{title:(0,H.t)("feedbackLink"),placeholder:(0,H.t)("enterFeedbackLink"),type:F.wN.INPUT,name:"feedback_link",validator:F.wY.REQUIRED,width:"350px"}],[w,y]=(0,g.useState)(new Map),j=async()=>{const[e]=await u();console.log("fetchGroups------\x3e>>>",e);const t=e.map((e=>({value:e.name,key:e.id})));p((e=>[...e,...t]))};return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(Qe.Ay,{display:"grid",sx:{alignContent:"flex-start"},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:(0,q.jsx)(Z.A,{data:s,errors:w,onChange:e=>{console.log(e.target);const{name:t,value:a}=e.target;y((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:x})}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:2},children:[(0,q.jsx)(X.A,{color:"gray",onClick:a,loading:o,children:(0,q.jsx)(i.A,{sx:{px:2,color:F.lm.BLACK},children:(0,H.t)("back")})}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{const e=(0,K.bG)(x,s);y(e),e.size||await r()},loading:o,children:(0,q.jsx)(i.A,{sx:{px:2,color:F.lm.BLACK},children:(0,H.t)("create")})})]})]})},Dt=()=>{const e=(0,N.zy)(),t=(0,N.Zp)(),a=e.state,[s,n]=(0,g.useState)([]),[r,o]=(0,g.useState)([]),[d,c]=(0,g.useState)(),[u,m]=(0,g.useState)(0),[h,p]=(0,g.useState)(!1),[x,w]=(0,g.useState)(!1),[y,j]=(0,g.useState)(0),[f,A]=(0,g.useState)({feedback_required:"no",test_required:"no"}),{list:v,create:S,update:b,remove:C}=Et(),{groupUser:_,allUser:k}=Re(),{list:I}=V();(0,g.useEffect)((()=>{T(),E()}),[y]);const E=async()=>{const[e]=await v();o(e)},T=async()=>{const[e,t]=await k(y+1),a=e.results.map((e=>({value:e.username,key:e.id})));n((e=>[...e,...a]))},D=[{id:1,title:(0,H.t)("trainingName"),render:e=>(0,q.jsx)(i.A,{children:e.training_name})},{id:2,title:(0,H.t)("trainingType"),render:e=>e.training_type},{id:22,title:(0,H.t)("trainer"),render:e=>e.trainer||"-"},{id:23,title:(0,H.t)("startDate"),render:e=>be()(e.start_date).format("ll")},{id:24,title:(0,H.t)("endDate"),render:e=>e.end_date?be()(e.end_date).format("ll"):"-"}];return(0,q.jsxs)("div",{className:"mx-4",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsx)(l.A,{sx:{flexDirection:"row",alignItems:"center",mb:1},children:(0,q.jsx)(i.A,{className:"fw-20-500-36",children:(0,H.t)("planTraining")})}),"add"!==x&&(0,q.jsx)(X.A,{color:"gray",onClick:()=>w("add"),children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("addTraining")})})]}),"add"!==x?(0,q.jsx)(G,{columns:D,rows:r,rowsPerPage:10,loading:"fetch"===d,titleCellClasses:"c-gray fw-700",page:y,setPage:j,paginator:!0,serialize:!0,total:u,trainings:!0,tableBodyColor:F.lm.WHITE}):(0,q.jsx)(Tt,{users:s,open:"add"===x,onClose:()=>{w(!1),p(!1)},data:f,edit:h,setData:A,onSubmit:async()=>{var e,s=[];if((null===(e=f.group)||void 0===e?void 0:e.length)>0){s=(await Promise.all(f.group.map((e=>_(e))))).map((e=>e.users.map((e=>e.id)))).flat()}const n=Array.isArray(f.trainees)?f.trainees:[],l={training_name:f.training_name,training_type:f.training_type,training_description:f.training_description,trainer:f.trainer,training_admin:f.training_admin,trainees:[...n,...s],start_date:f.start_date,end_date:f.end_date,start_time:f.start_time,end_time:f.end_time,feedback_link:f.feedback_link,test_required:"yes"===f.test_required,feedback_required:"yes"===f.feedback_required};c("fetch");let i=await S(l,a);console.log("planning createRes----",i),A({}),w(!1),"yes"===f.test_required?t("/test-upload",{state:{id:i.id,training_admin:l.training_admin,trainees:l.trainees}}):await E(),c(!1),p(!1)}})]})},Rt=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,onSubmit2:o,loading:d,setSelectedQuestions:c,skills:u,users:m,testList:h}=e;const[p,x]=(0,g.useState)(new Map),[w,y]=(0,g.useState)(0),[j,f]=(0,g.useState)(!1),{getPerformanceSkill:A,getPerformanceId:v}=bt(),S=async()=>{if(0!==w){if(1===w){const e=(0,K.bG)(b,s);if(x(e),e.size)return;return await o(),f(!1),void y(0)}}else{const e=(0,K.bG)(b,s);if(x(e),e.size)return;y((e=>e+1))}},b=[0===w&&{title:(0,H.t)("operator"),placeholder:(0,H.t)("selectOperator"),type:F.wN.SELECT,name:"operator",validator:F.wY.REQUIRED,keyValues:m},0===w&&{title:(0,H.t)("skill"),placeholder:(0,H.t)("selectSkill"),type:F.wN.INPUT,name:"skill",disabled:!0},0===w&&{title:(0,H.t)("skillLevel"),placeholder:(0,H.t)("selectSkillLevel"),type:F.wN.INPUT,name:"skill_level",disabled:!0},1===w&&{title:(0,H.t)("date"),type:F.wN.DATE,name:"plan_date",validator:F.wY.REQUIRED},1===w&&{title:(0,H.t)("plan"),placeholder:"",type:F.wN.INPUT,name:"plan",inputType:"number",validator:F.wY.REQUIRED},1===w&&{title:(0,H.t)("actual"),placeholder:"",type:F.wN.INPUT,inputType:"number",name:"actual",validator:F.wY.REQUIRED},1===w&&{title:(0,H.t)("rejected"),placeholder:(0,H.t)("rejectedCount"),type:F.wN.INPUT,inputType:"number",name:"rejected",validator:F.wY.REQUIRED}];return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsx)("h3",{className:"opacity-80",children:(0,H.t)("addPerformance")}),(0,q.jsx)(Z.A,{data:s,errors:p,onChange:e=>{const{name:t,value:l}=e.target;x((e=>(e.delete(t),e))),n((e=>({...e,[t]:l}))),"operator"===t&&(console.log("operator id ",l),(async e=>{let t=e,l={operator:e};if(void 0!==e){await A(l);let e=(await v(l)).at(-1);console.log("resPer-----lastItem---------",e),null!==e&&void 0!==e&&e.id?(f(e.completed),!0===e.completed&&(k.oR.warn("Performances are already filled. Assign Supervisor for next level."),await a(),n({...s,skill_level:"",skill:"",operator:"",skill_id:""})),n({...s,skill_level:e.skill_level,skill:e.skill.skill_name,operator:t,skill_id:e.id})):(n({...s,skill_level:"",skill:"",operator:"",skill_id:""}),k.oR.warn("record not found"))}else n({...s,skill_level:"",skill:"",operator:"",skill_id:""})})(l))},schema:b}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),0===w&&(0,q.jsx)(X.A,{color:"light_green",onClick:S,loading:d,disabled:j,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("next")})}),1===w&&(0,q.jsx)(X.A,{color:"light_green",onClick:S,loading:d,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("submit")})})]})]})};var Pt=a(1750);const Ot=()=>{const e=(0,N.zy)(),[t,a]=((0,N.Zp)(),e.state,(0,g.useState)([])),[s,n]=(0,g.useState)(),[r,o]=(0,g.useState)(0),[d,c]=(0,g.useState)(!1),[u,m]=(0,g.useState)("testDetail"),[h,p]=(0,g.useState)(0),[x,w]=(0,g.useState)({operator:"",plan_date:(new Date).toISOString().split("T")[0]}),{putPerformanceRecord:y,performanceList:j,createTest:f,update:A,remove:v,performanceRecord:S,getPerformanceRecord:b,postPerformance:C}=bt(),{activeOperators:_}=V(),{list:k}=ke(),[I,E]=(0,g.useState)(new Map),[T,D]=(0,g.useState)([]),[R,P]=(0,g.useState)([]),[O,$]=(0,g.useState)([]),[L,M]=(0,g.useState)([]),[U,z]=(0,g.useState)(""),[B,Q]=(0,g.useState)((new Date).toISOString().split("T")[0]),Y=[{id:1,title:(0,H.t)("operatorAadhar"),render:e=>e.aadhar_number},{id:13,title:(0,H.t)("skill"),render:e=>e.skill},{id:12,title:(0,H.t)("skillLevel"),render:e=>e.skill_level},{id:2,title:(0,H.t)("plan"),render:e=>e.plan},{id:3,title:(0,H.t)("actual"),render:e=>e.actual}];(0,g.useEffect)((()=>{Z(),J()}),[]),(0,g.useEffect)((()=>{W()}),[B]);const W=async()=>{const e=await j(B);console.log("res performance list",e.list),$(e.list)},J=async()=>{const e=await _();console.log("operator-----\x3e>>",e),a(e)},Z=async()=>{const[e]=await k(h+1),t=e.results.map((e=>({value:e.skill_name,key:e.id})));D((e=>[...e,...t]))};return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsx)(l.A,{sx:{flexDirection:"row",alignItems:"center"},children:(0,q.jsx)(i.A,{className:"fw-20-500-36",children:(0,H.t)("performance")})}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:1,mb:1},children:[(0,q.jsx)(l.A,{children:(0,q.jsx)(Pt.A,{InputWidth:"150px",value:B,onChange:e=>{console.log("date------",e.target.value),Q(e.target.value)}})}),(0,q.jsx)(X.A,{width:"fit-content",color:"gray",onClick:()=>m("addReport"),children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("addPerformance")})})]})]}),(0,q.jsx)(G,{columns:Y,rows:O,rowsPerPage:10,loading:"fetch"===s,titleCellClasses:"c-gray fw-700",serialize:!0,paginator:!0,total:r,tableBodyColor:F.lm.WHITE}),(0,q.jsx)(Rt,{open:"addReport"===u,onClose:()=>{m(!1)},users:t,skills:T,testList:R,data:x,setData:w,onSubmit2:async()=>{var e=x.plan_date.replace(/-/g,"");const t={new_entry:{[e]:{plan:x.plan,actual:x.actual,rejected:x.rejected}}};await y(x.skill_id,t),m(!1),w({...x,rejected:"",actual:"",plan:"",plan_date:"",skill_level:"",skill:"",operator:"",plan_date:(new Date).toISOString().split("T")[0]}),W()}})]})};var $t=a(2819),Lt=a(7260);const Mt=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,g.useState)(new Map);return(0,q.jsx)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:(0,q.jsxs)(l.A,{sx:{justifyContent:"center",alignItems:"center",mt:4},children:[(0,q.jsx)(tt.A,{sx:{color:F.lm.LIGHT_GREEN,width:100,height:100}}),(0,q.jsxs)(i.A,{textAlign:"center",className:"fw-24",sx:{py:4},children:["You have successfully changed password.",(0,q.jsx)("br",{}),"You will be automatically logged off ",(0,q.jsx)("br",{}),"Please Login again with new password"]})]})})};var Ut=a(4573);const zt=()=>{const e=(0,y.d4)((e=>{var t;return null===(t=e[W.X.AUTH].user)||void 0===t?void 0:t.data})),t=(0,N.Zp)(),[a,s]=(0,g.useState)([]),[n,r]=(0,g.useState)(),[o,d]=(0,g.useState)(0),[c,u]=(0,g.useState)(0),[m,h]=(0,g.useState)(!1),[p,x]=(0,g.useState)(!0),[w,j]=(0,g.useState)(""),[f,A]=(0,g.useState)(""),[v,S]=(0,g.useState)(""),[b,C]=(0,g.useState)(""),[_,k]=(0,g.useState)({name:"",metadata:{}}),[I,E]=(0,g.useState)(""),{resetPassword:T}=(0,Ut.A)(),{logout:D}=(0,Pe.A)(),R=/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*\W)(?!.* ).{8,16}$/;return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsx)("div",{className:"flex items-center justify-between",children:(0,q.jsx)(i.A,{className:"fw-20-500-36",children:"Profile"})}),(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{gap:1,mt:1,width:"70%"},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:"Name"}),(0,q.jsx)(z.A,{disabled:!0,gray:!0,value:null===e||void 0===e?void 0:e.name})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:1,alignItems:"center",mt:1},children:[(0,q.jsx)(i.A,{className:"fw-24",children:" Change Password"}),(0,q.jsx)(i.A,{color:F.lm.TEXT_GRAY,className:"fw-14",children:"( Password to be min 8 character long with one special character %,&, @ ,$ )"})]}),(0,q.jsxs)(Qe.Ay,{display:"grid",sx:{gap:1,mt:1,width:"70%"},gridTemplateColumns:{sm:"repeat(2, 1fr)",xs:"repeat(2, 1fr)"},children:[(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:"Current Password"}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row"},children:[(0,q.jsx)(z.A,{type:p?"password":"text",value:I,onChange:e=>E(e.target.value)}),!0===p?(0,q.jsx)($t.A,{fontSize:"small",sx:{ml:-4,zIndex:0,alignSelf:"center",cursor:"pointer"},onClick:()=>x(!1)}):(0,q.jsx)(Lt.A,{fontSize:"small",sx:{ml:-4,zIndex:0,alignSelf:"center",cursor:"pointer"},onClick:()=>x(!0)})]}),(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:"New Password"}),(0,q.jsxs)(l.A,{children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row"},children:[(0,q.jsx)(z.A,{type:p?"password":"text",value:w,onChange:e=>{const t=e.target.value;j(t),R.test(t)?A(""):A("Password must contain at least 8 characters, including one letter, one number, and one special character.")}}),!0===p?(0,q.jsx)($t.A,{fontSize:"small",sx:{ml:-4,zIndex:0,alignSelf:"center",cursor:"pointer"},onClick:()=>x(!1)}):(0,q.jsx)(Lt.A,{fontSize:"small",sx:{ml:-4,zIndex:0,alignSelf:"center",cursor:"pointer"},onClick:()=>x(!0)})]}),f&&(0,q.jsx)("div",{style:{color:"red"},children:f})]}),(0,q.jsx)(i.A,{sx:{fontSize:16,fontWeight:"400",color:F.lm.TEXT_GRAY},children:"Re-enter New Password"}),(0,q.jsxs)(l.A,{children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row"},children:[(0,q.jsx)(z.A,{type:p?"password":"text",value:v,onChange:e=>{const t=e.target.value;S(t),C(w!==t?"Passwords do not match.":"")}}),!0===p?(0,q.jsx)($t.A,{fontSize:"small",sx:{ml:-4,zIndex:0,alignSelf:"center",cursor:"pointer"},onClick:()=>x(!1)}):(0,q.jsx)(Lt.A,{fontSize:"small",sx:{ml:-4,zIndex:0,alignSelf:"center",cursor:"pointer"},onClick:()=>x(!0)})]}),b&&(0,q.jsx)("div",{style:{color:"red"},children:b})]})]}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:6,mb:1,px:10,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,children:"Cancel"}),(0,q.jsx)(X.A,{color:"gray",onClick:()=>{(async()=>{let e={old_password:I,new_password:w,confirm_password:v},a=await T(e);null!==a&&void 0!==a&&a.success&&(h("confirm"),setTimeout((async()=>{await D(),t("/")}),2e3))})()},children:(0,q.jsx)(i.A,{color:F.lm.TEXT_GRAY,children:"Confirm"})})]}),(0,q.jsx)(Mt,{open:"confirm"===m,onClose:()=>{h(!1)}})]})},Ft=()=>{const{t:e,i18n:t}=(0,j.Bd)(),{updateProfile:a,userProfile:s,update:n}=((0,N.Zp)(),V()),[r,o]=(0,g.useState)(new Map),[d,c]=(0,g.useState)(!1),[u,m]=(0,g.useState)({language:""}),h=[{placeholder:e("select_language"),type:F.wN.SELECT,name:"language",validator:F.wY.REQUIRED,keyValues:[{value:"English",key:"EN"},{value:"\u0939\u093f\u0928\u094d\u0926\u0940",key:"HI"},{value:"\u092e\u0930\u093e\u0920\u0940",key:"MR"}]}];return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsx)("div",{className:"flex items-center justify-between",children:(0,q.jsx)(i.A,{className:"fw-20-500-36",children:e("changeLanguage")})}),(0,q.jsxs)(l.A,{sx:{justifyContent:"center",alignItems:"center",width:"90%"},children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",width:"90%"},children:[(0,q.jsx)(l.A,{sx:{width:"50%"},children:(0,q.jsx)(i.A,{sx:{fontWeight:500,fontSize:18},children:e("existing")})}),(0,q.jsx)(l.A,{sx:{width:"50%",justifyContent:"center",alignItems:"center"},children:(0,q.jsx)(i.A,{sx:{fontWeight:500,fontSize:18},children:e("select_language")})})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",mt:1,width:"90%"},children:[(0,q.jsx)(i.A,{sx:{fontWeight:500,fontSize:16},children:e("sel_lang")}),(0,q.jsx)(l.A,{sx:{},children:(0,q.jsx)(Z.A,{data:u,errors:r,onChange:e=>{const{name:t,value:a}=e.target;o((e=>(e.delete(t),e))),m((e=>({...e,[t]:a})))},schema:h})})]}),(0,q.jsx)(l.A,{direction:"row",width:"90%",justifyContent:"flex-end",mt:6,mb:1,children:(0,q.jsx)(X.A,{color:"gray",onClick:()=>(async()=>{let e=localStorage.getItem("userId");localStorage.getItem("draweWidth",180),console.log("language-----\x3e>>",u.language),t.changeLanguage(u.language);const a={preferred_language:u.language};await n(e,a),window.location.reload()})(),children:(0,q.jsx)(i.A,{color:F.lm.TEXT_GRAY,children:e("confirm")})})})]})]})},Ht=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.get(`training/all-users-test-history/?page=${e}&page_size=10&aadhar=${a}`,{},t,B.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post(`${Y.H.TRAINING}/${Y.H.TRAININGS}/`,e,t,(e=>(0,B.So)(e,null,"Created successfully!")));return null===s||void 0===s?void 0:s.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.LINE}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Line Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.LINE}/${e}/`,t,(e=>(0,B.So)(e,null,"Line deleted successfully!")));return null===s||void 0===s?void 0:s.data},getResult:async e=>{const a=new Q.Ay,s=await a.get(`training/users-test-history/${e}/`,{},t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data}}},qt=()=>{const e=(0,N.Zp)(),[t,a]=(0,g.useState)("Users"),[s,n]=(0,g.useState)([]),[r,o]=(0,g.useState)([]),[d,c]=(0,g.useState)([]),[u,m]=(0,g.useState)([]),[h,p]=(0,g.useState)(),[x,w]=(0,g.useState)(0),[y,j]=(0,g.useState)(!1),[f,A]=(0,g.useState)([]),[v,S]=(0,g.useState)(0),[b,C]=(0,g.useState)(null),[_,k]=(0,g.useState)({}),[I,E]=(0,g.useState)(""),{list:T,listByUserName:D,listByAadhar:R}=Ht();(0,g.useEffect)((()=>{n([]),P()}),[v,t]);const P=async()=>{p("fetch");try{const e=await T(v+1,"");console.log("list result user",e[0].data),n(e[0].data),w(e[0].count)}catch(Ue){console.error("Error fetching users:",Ue)}finally{p(!1)}},O=[{id:1,title:(0,H.t)("aadhar"),render:t=>(0,q.jsx)(i.A,{sx:{color:"blue",cursor:"pointer"},onClick:()=>e("/result-page",{state:t.user_id}),children:t.aadhar})},{id:2,title:(0,H.t)("user_name"),render:e=>e.username},{id:3,title:(0,H.t)("date_of_joining"),render:e=>be()(e.date_of_joining).format("ll")},{id:5,title:(0,H.t)("testCount"),render:e=>(0,q.jsx)(de,{title:e.tests})}],$=e=>{const t=e.target.value;console.log("e.target.value",e.target.value.length),(async(e,t)=>{p("fetch");try{const a=await T(e,t);console.log("list result user",a[0].data),n(a[0].data),w(a[0].count)}catch(Ue){console.error("Error fetching users:",Ue)}finally{p(!1)}})(1,t),E(t)};return(0,q.jsxs)("div",{className:"mx-3 my-2 fw-500",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsx)(i.A,{className:"fw-20-500-36",children:(0,H.t)("usersTestCompletionList")}),(0,q.jsx)(l.A,{mb:1,children:(0,q.jsx)(z.A,{height:"37px",value:I,placeholder:"Search by Aadhar Number",onChange:e=>$(e)})})]}),(0,q.jsx)(G,{columns:O,rows:s,rowsPerPage:10,loading:"fetch"===h,titleCellClasses:"c-gray fw-700",page:v,setPage:S,paginator:!0,serialize:!0,total:x,tableBodyColor:F.lm.WHITE})]})};var Gt=a(9120);const Bt=()=>{const e=(0,N.Zp)(),t=(0,N.zy)(),a=null===t||void 0===t?void 0:t.state,{getResult:s}=Ht(),[n,r]=(0,g.useState)("Users"),[d,c]=(0,g.useState)([]),[u,m]=(0,g.useState)(),[h,p]=(0,g.useState)(0),[x,w]=(0,g.useState)(0),[y,j]=(0,g.useState)({}),[f,A]=(0,g.useState)(""),{list:v}=V(),{list:S}=ke();(0,g.useEffect)((()=>{!async function(){const e=await s(a);console.log("_list------getResult-------\x3e>>",e),c(e)}()}),[x]);const b=[{id:1,title:(0,H.t)("testName"),render:e=>{var t;return(null===e||void 0===e||null===(t=e.test)||void 0===t?void 0:t.test_name)||"-"}},{id:3,title:(0,H.t)("testType"),render:e=>{var t;return(null===e||void 0===e||null===(t=e.test)||void 0===t?void 0:t.test_type)||"-"}},{id:4,title:(0,H.t)("skill"),render:e=>{var t;return(null===e||void 0===e||null===(t=e.test)||void 0===t?void 0:t.skill)||"-"}},{id:5,title:(0,H.t)("skillLevel"),render:e=>{var t;return(null===e||void 0===e||null===(t=e.test)||void 0===t?void 0:t.skill_level)||"-"}},{id:6,title:(0,H.t)("testResult"),render:e=>!0===(null===e||void 0===e?void 0:e.result)?(0,q.jsx)(i.A,{color:F.lm.LIGHT_GREEN,children:"Pass"}):(0,q.jsx)(i.A,{color:F.lm.RADIAL_RED,children:"Fail"})}];return(0,q.jsxs)("div",{className:"mx-3 my-2 fw-500",children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:1,alignContent:"center",alignItems:"center"},children:[(0,q.jsx)(o.A,{onClick:()=>e(-1),children:(0,q.jsx)(Gt.A,{})}),(0,q.jsx)(i.A,{className:"fw-20-500-36",onClick:()=>console.log("users",d),children:(0,H.t)("testResult")})]}),(0,q.jsx)("div",{className:"flex items-center justify-between"}),(0,q.jsx)(G,{columns:b,rows:d,rowsPerPage:10,loading:"fetch"===u,titleCellClasses:"c-gray fw-700",page:x,setPage:w,paginator:!0,serialize:!0,total:h,tableBodyColor:F.lm.WHITE})]})};var Qt=a(611);function Yt(e){let{value:t,type:a}=e;return(0,q.jsxs)(h.A,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",px:2,gap:1},children:[(0,q.jsx)(l.A,{sx:{width:120},children:(0,q.jsx)(i.A,{className:"LinearProgress-title",children:a})}),(0,q.jsx)(l.A,{sx:{width:180},children:(0,q.jsx)(Qt.A,{variant:"determinate",value:t>100?100:t,sx:{backgroundColor:"#8C8C8C","& .MuiLinearProgress-bar":{backgroundColor:"Availability"===a?"#FF0000":"Performance"===a?"#FAA036":"Quality"===a?"#27AE60":"#000000"},height:"12px"}})}),(0,q.jsx)(l.A,{sx:{width:40},children:(0,q.jsx)(i.A,{className:"LinearProgress-title",sx:{fontWeight:"bold"},children:`${Math.round(t)}%`})})]})}function Wt(e){let{progress:t,type:a}=e;return(0,q.jsx)(h.A,{sx:{width:"100%"},children:(0,q.jsx)(Yt,{value:t,type:a})})}const Vt=a.p+"static/media/refresh.a5d21e69b6e12622d54d1b74dc8da031.svg";const Xt=a.p+"static/media/polygon.33a8f3d09b2c8d86cfa58d933f2cea0b.svg",Jt=e=>{let{data:t,expanded:a,onToggle:s,clickMore:n}=e;return(0,q.jsxs)("div",{className:`card-container ${a?"expanded":""} ${"online"===t.status?"running":"Downtime"} ${"downtime"===t.status?"maintenance":"Downtime"} ${"offline"===t.status?"disconnected":"Downtime"}`,style:{zIndex:a?10:1,position:a?"absolute":"relative",width:"430px"},children:[(0,q.jsx)("div",{className:"refresh-icon",children:(0,q.jsx)("img",{src:Vt})}),(0,q.jsxs)("div",{className:"heading",children:[(0,q.jsx)("h1",{children:t.asset_name}),(0,q.jsxs)("p",{children:["Status |",(0,q.jsx)("span",{className:"status-text",children:t.status})]})]}),(0,q.jsxs)("div",{className:"pie",pointer:!0,children:[(0,q.jsx)(vt.A,{type:"donut",width:"100%",height:"100%",series:[t.oee,100-t.oee],options:{chart:{id:"donut-chart"},colors:[""+(t.completed>50?"#27AE60":"#FF0000"),"#ffffff"],labels:["Used","Remaining"],plotOptions:{pie:{startAngle:-90,endAngle:90,donut:{size:"65%"},expandOnClick:!1}},stroke:{colors:["#D9D9D9"]},legend:{show:!1},dataLabels:{enabled:!1},tooltip:{enabled:!1}}}),(0,q.jsx)("div",{className:"chart-percentage",children:(0,q.jsx)("p",{className:"chart-percentage-text",children:`${t.oee}%`})})]}),(0,q.jsxs)(l.A,{sx:{py:1,backgroundColor:F.lm.RADIAL_LG_GRAY,mt:-7,mb:1,width:"430px"},children:[(0,q.jsx)(Wt,{type:"Availability",progress:t.availability}),(0,q.jsx)(Wt,{type:"Performance",progress:t.utilization}),(0,q.jsx)(Wt,{type:"Quality",progress:t.quality})]}),a&&(0,q.jsxs)("div",{className:"additional-info",style:{width:"100%"},children:[(0,q.jsxs)("div",{className:"product-metrics-section",children:[(0,q.jsx)("h3",{className:"LinearProgress-title-h",children:"Product Metrics"}),(0,q.jsxs)("div",{className:"metrics",children:[(0,q.jsxs)("div",{className:"metric-row",children:[(0,q.jsx)("span",{className:"card-metric-label",children:"Total"}),(0,q.jsx)("span",{className:"card-metric-value",children:t.total})]}),(0,q.jsxs)("div",{className:"metric-row",children:[(0,q.jsx)("span",{className:"card-metric-label",children:"Good"}),(0,q.jsx)("span",{className:"card-metric-value",children:t.total_good})]}),(0,q.jsxs)("div",{className:"metric-row",children:[(0,q.jsx)("span",{className:"card-metric-label",children:"NG"}),(0,q.jsx)("span",{className:"card-metric-value",children:t.total_ng})]}),(0,q.jsxs)("div",{className:"metric-row",children:[(0,q.jsx)("span",{className:"card-metric-label",children:"Pass"}),(0,q.jsx)("span",{className:"card-metric-value",children:t.total_pass})]}),(0,q.jsxs)("div",{className:"metric-row",children:[(0,q.jsx)("span",{className:"card-metric-label",children:"Fail"}),(0,q.jsx)("span",{className:"card-metric-value",children:t.total_fail})]})]})]}),(0,q.jsxs)("div",{className:"cycle-info-section",children:[(0,q.jsx)("h3",{className:"LinearProgress-title-h",children:"Cycle per Second"}),(0,q.jsxs)("div",{className:"metrics",children:[(0,q.jsxs)("div",{className:"metric-row",children:[(0,q.jsx)("span",{className:"card-metric-label",children:"Best"}),(0,q.jsx)("span",{className:"card-metric-value",children:t.best_cycle_time})]}),(0,q.jsxs)("div",{className:"metric-row",children:[(0,q.jsx)("span",{className:"card-metric-label",children:"Worst"}),(0,q.jsx)("span",{className:"card-metric-value",children:t.worst_cycle_time})]}),(0,q.jsxs)("div",{className:"metric-row",children:[(0,q.jsx)("span",{className:"card-metric-label",children:"Average"}),(0,q.jsx)("span",{className:"card-metric-value",children:t.avg_cycle_time})]})]}),n&&(0,q.jsx)("div",{className:"more-button",children:(0,q.jsx)("button",{onClick:()=>n(),children:"More"})})]})]}),(0,q.jsx)("div",{style:{display:"flex",width:"100%",justifyContent:"space-around"},children:(0,q.jsx)("div",{className:"drop-icon "+(a?"rotated":""),onClick:s,children:(0,q.jsx)("img",{src:Xt})})})]})},Zt=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{summary:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0,o=arguments.length>7?arguments[7]:void 0;const d=new Q.Ay,c=await d.get(`monitoring/get-daily-summary/?state=${o}&company_id=${a}&plant_id=${s}&division_id=${n}&line_id=${l}&date=${i}&shift_id=${r}&page=${e}&page_size=10`,{},t,B.So);return null!==c&&void 0!==c&&c.data?(console.log("res  ",c.data),[null===c||void 0===c?void 0:c.data]):[[],0]},assetSummary:async(e,a,s,n,l,i,r)=>{const o=new Q.Ay,d=await o.get(`monitoring/daily-summary/${a}/?date=${r?"":s}&barcode=${r}&shift=${n}&state=${l}&quality=${i}&page=${e}&page_size=10`,{},t,B.So);return null!==d&&void 0!==d&&d.data?(console.log("res  ",d.data),[null===d||void 0===d?void 0:d.data]):[[],0]},timelineSummary:async(e,a,s,n,l)=>{const i=new Q.Ay,r=await i.get(`monitoring/asset-change-history/${e}/?date=${a}&shift=${s}&state=${n}&quality=${l}`,{},t,B.So);return null!==r&&void 0!==r&&r.data?(console.log("res  ",r.data),[null===r||void 0===r?void 0:r.data]):[[],0]},companies:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new Q.Ay,s=await a.get(`monitoring/all-companies/?page=${e}&page_size=10`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},plants:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.get(`monitoring/company/${a}/plants/?page=${e}&page_size=10`,{},t,B.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},divisions:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.get(`monitoring/plant/${a}/divisions/?page=${e}&page_size=10`,{},t,B.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},lines:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.get(`monitoring/division/${a}/lines/?page=${e}&page_size=10`,{},t,B.So);return null!==n&&void 0!==n&&n.data?(console.log("res  ",n.data),[null===n||void 0===n?void 0:n.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post("orders/issue-extra-material/",e,t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data},update:async(e,a)=>{const s=new Q.Ay,n=await s.put(`orders/update-material-failure/${e}/`,a,t,(e=>(0,B.So)(e,null)));return null===n||void 0===n?void 0:n.data},getFilters:async function(){const e=new Q.Ay,a=await e.get("monitoring/get-filters/",{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]}}};var Kt=a(4535),ea=a(4598);const ta=()=>{const{t:e,i18n:t}=(0,j.Bd)(),a=(0,N.Zp)(),{summary:s,companies:n,plants:r,divisions:o,lines:d}=Zt(),[c,u]=(0,g.useState)(null),[m,h]=(0,g.useState)(!1),[p,x]=(0,g.useState)(0),[w,y]=(0,g.useState)(),[f,A]=(0,g.useState)([{email:"email@gmail.com",username:"user",fullname:"fullName",employee_id:"employee_id"}]),[v,S]=(0,g.useState)(new Map),[b,C]=(0,g.useState)({company_id:"",plant_id:"",division_id:"",line_id:"",date:(new Date).toISOString().split("T")[0],shift_id:""}),[_,k]=(0,g.useState)([{value:"All",key:""}]),[I,E]=(0,g.useState)([{value:"All",key:""}]),[T,D]=(0,g.useState)([{value:"All",key:""}]),[R,P]=(0,g.useState)([{value:"All",key:""}]),[O,$]=(0,g.useState)([]),L=[{placeholder:"Company",type:F.wN.SELECT,name:"company_id",width:"150px",keyValues:_},{placeholder:"Plant",type:F.wN.SELECT,name:"plant_id",width:"150px",keyValues:I},{placeholder:"Divison",type:F.wN.SELECT,name:"division_id",validator:F.wY.REQUIRED,width:"150px",keyValues:T},{placeholder:"Line",type:F.wN.SELECT,name:"line_id",validator:F.wY.REQUIRED,width:"150px",keyValues:R},{placeholder:"Status",type:F.wN.SELECT,name:"state",width:"150px",keyValues:[{key:"",value:"All"},{key:1,value:"Online"},{key:2,value:"Offline"},{key:3,value:"Downtime"}]},{placeholder:"Date",type:F.wN.DATE,name:"date",width:"150px"}];(0,g.useEffect)((()=>{!async function(){var e,t,a,n,l,i;let[r]=await s(p+1,b.company_id||"",b.plant_id||"",b.division_id||"",b.line_id||"",b.date,b.shift_id||"",b.state||"");console.log("machine res-------",r);const o=(e,t)=>{const a=new Set(e.map((e=>e.key)));return t.filter((e=>!a.has(e.key)))};(null===r||void 0===r||null===(e=r.companies)||void 0===e?void 0:e.length)>0&&k((e=>[...e,...o(e,null===r||void 0===r?void 0:r.companies.map((e=>({value:e.name,key:e.id}))))]));(null===r||void 0===r||null===(t=r.plants)||void 0===t?void 0:t.length)>0&&E((e=>[...e,...o(e,null===r||void 0===r?void 0:r.plants.map((e=>({value:e.name,key:e.id}))))]));(null===r||void 0===r||null===(a=r.divisions)||void 0===a?void 0:a.length)>0&&D((e=>[...e,...o(e,null===r||void 0===r?void 0:r.divisions.map((e=>({value:e.name,key:e.id}))))]));(null===r||void 0===r||null===(n=r.lines)||void 0===n?void 0:n.length)>0&&P((e=>[...e,...o(e,null===r||void 0===r?void 0:r.lines.map((e=>({value:e.name,key:e.id}))))]));(null===r||void 0===r||null===(l=r.summaries)||void 0===l||null===(i=l.results)||void 0===i?void 0:i.length)>=0&&$(r.summaries.results);C((e=>{var t;return{...e,company:null===(t=_[0])||void 0===t?void 0:t.key}}))}()}),[b.company_id,b.plant_id,b.division_id,b.line_id,b.date,b.shift_id,b.state]);const M=[{id:1,title:"Machine ID",render:e=>e.asset_name},{id:2,title:"Status",render:e=>(0,q.jsx)(i.A,{sx:{textTransform:"capitalize"},color:"offline"===e.status?"#FF0000":"online"===e.status?"#27AE60":"FAA036",children:e.status})},{id:3,title:"OEE",render:e=>e.oee+"%"},{id:4,title:"Availability",render:e=>e.availability+"%"},{id:5,title:"Performance",render:e=>e.utilization+"%"},{id:6,title:"Qty",render:e=>e.quality},{id:7,title:e("action"),render:e=>(0,q.jsx)(i.A,{sx:{color:F.lm.LIGHT_BLUE,cursor:"pointer"},onClick:()=>U(e),children:"Details"})}];function U(e){a("/machines",{state:e})}const z=(0,Kt.Ay)(ea.A)((e=>{let{theme:t}=e;return{width:28,height:16,padding:0,display:"flex","&:active":{"& .MuiSwitch-thumb":{width:15},"& .MuiSwitch-switchBase.Mui-checked":{transform:"translateX(9px)"}},"& .MuiSwitch-switchBase":{padding:2,"&.Mui-checked":{transform:"translateX(12px)",color:"#fff","& + .MuiSwitch-track":{opacity:1,backgroundColor:"#FAA036",border:2,...t.applyStyles("dark",{backgroundColor:"#FAA036"})}}},"& .MuiSwitch-thumb":{width:12,height:12,borderRadius:6,transition:t.transitions.create(["width"],{duration:200})},"& .MuiSwitch-track":{borderRadius:8,opacity:1,backgroundColor:"rgba(0,0,0,.25)",boxSizing:"border-box",...t.applyStyles("dark",{backgroundColor:"rgba(255,255,255,.35)"})}}}));return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,q.jsx)(i.A,{className:"fw-20-500-36",children:"Machine Monitoring"}),(0,q.jsx)(l.A,{sx:{flexDirection:"row",gap:1},children:(0,q.jsxs)(l.A,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[(0,q.jsx)(i.A,{className:"fw-16-400-36",children:"Kanban View"}),(0,q.jsx)(z,{defaultChecked:m,inputProps:{"aria-label":"ant design"},onChange:e=>h(e.target.checked)}),(0,q.jsx)(i.A,{className:"fw-16-400-36",children:"List View"})]})})]}),(0,q.jsx)(l.A,{sx:{flexDirection:"row",gap:1,mb:1},children:(0,q.jsx)(Z.A,{data:b,errors:v,onChange:e=>{const{name:t,value:a}=e.target;console.log("name value",t,a),S((e=>(e.delete(t),e))),C((e=>({...e,[t]:0==a?"":a})))},schema:L})}),!1===m?(0,q.jsx)(Qe.Ay,{container:!0,spacing:2,sx:{mb:50},children:O.length>0?O.map(((e,t)=>(0,q.jsx)(Qe.Ay,{item:!0,size:4,children:(0,q.jsx)("div",{style:{position:"relative",height:"auto",width:"430px"},children:(0,q.jsx)(Jt,{data:e,expanded:c===t,onToggle:()=>(e=>{u(c===e?null:e)})(t),clickMore:()=>U(e)})},t)}))):(0,q.jsx)(l.A,{sx:{justifyContent:"center",alignItems:"center",mt:2,width:"100%"},children:(0,q.jsx)(i.A,{children:"Machine not found !"})})}):(0,q.jsx)(G,{columns:M,rows:O,rowsPerPage:10,loading:"fetch"===w,titleCellClasses:"c-gray fw-700",page:p,setPage:x,paginator:!0,serialize:!0,total:10,tableBodyColor:F.lm.WHITE})]})},aa=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new Q.Ay,s=await a.get(`settings/downtime-reasons/?page=${e}&page_size=10`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},assetList:async function(){const e=new Q.Ay,a=await e.get("asset/all-assets/",{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post("settings/downtime-reasons/",e,t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.COMPANY}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Company Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.COMPANY}/${e}/`,t,(e=>(0,B.So)(e,null,"Company deleted successfully!")));return null===s||void 0===s?void 0:s.data},all_downtime_list:async e=>{const a=new Q.Ay,s=await a.get(`monitoring/all-downtime-list/${e}/`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},unassi_downtime_list:async e=>{const a=new Q.Ay,s=await a.get(`monitoring/unassigned-downtime-list/${e}/`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},reason_list:async e=>{const a=new Q.Ay,s=await a.get(`monitoring/downtime-reasons/${e}/`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},post_reason:async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new Q.Ay,n=await s.patch(`monitoring/downtime-assign/${e}/`,a,t,(e=>(0,B.So)(e,null)));return null===n||void 0===n?void 0:n.data}}};var sa=a(461);a(3063);sa.t1.register(...sa.$L);const na=e=>{let{timeLineData:t}=e;const a=(0,g.useRef)(null),s={labels:[""],datasets:t};return(0,g.useLayoutEffect)((()=>{const e=a.current.getContext("2d"),t={type:"bar",data:s,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:e=>e.dataset.label}}},indexAxis:"y",scales:{x:{beginAtZero:!0,type:"time",time:{unit:"minute"},min:"00:00",max:"23:59",ticks:{stepSize:30,autoSkip:!1}},y:{beginAtZero:!1,stacked:!0}}}},n=new sa.t1(e,t);return()=>{n.destroy()}}),[t]),(0,q.jsx)("div",{style:{position:"relative",height:"100px",width:"100%",marginBottom:"15px"},children:(0,q.jsx)("canvas",{ref:a})})};var la=a(2738);a(4951);const ia=e=>{var t,a,s,n;let{open:r,onClose:o,data:d,setData:c,onSubmit:u,loading:m,edit:h,assetsList:p,rsn:x}=e;const w=[{placeholder:"Select Downtime Reason",type:F.wN.SELECT,name:"reason",validator:F.wY.REQUIRED,keyValues:x}],[y,j]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:r,onClose:o,width:"min(600px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsx)("h3",{className:"opacity-80",children:"Downtime Reason"}),(0,q.jsx)(i.A,{color:"primary",children:(null===(t=d.rowData)||void 0===t?void 0:t.barcode)||"Packet name not found"}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,q.jsxs)(i.A,{children:["Start Time: ",null===(a=d.rowData)||void 0===a?void 0:a.start_time]}),(0,q.jsxs)(i.A,{children:["End Time: ",null===(s=d.rowData)||void 0===s?void 0:s.end_time]})]}),(0,q.jsxs)(i.A,{children:["Duration: ",null===(n=d.rowData)||void 0===n?void 0:n.duration]}),(0,q.jsx)(l.A,{sx:{py:2},children:(0,q.jsx)(Z.A,{data:d,errors:y,onChange:e=>{const{name:t,value:a}=e.target;j((e=>(e.delete(t),e))),c((e=>({...e,[t]:a})))},schema:w})}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:o,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{const e=(0,K.bG)(w,d);j(e),e.size||await u()},loading:m,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("submit")})})]})]})},ra=()=>{const{t:e,i18n:t}=(0,j.Bd)(),a=(0,N.zy)(),s=(0,N.Zp)(),n=null===a||void 0===a?void 0:a.state;console.log("state-----------------------data",n);const{assetSummary:r,timelineSummary:d,getFilters:c}=Zt(),{list:u,post_reason:m,reason_list:h}=aa(),[p,x]=(0,g.useState)(null),[w,y]=(0,g.useState)("Kanban"),[f,A]=(0,g.useState)(0),[v,S]=(0,g.useState)(),[b,C]=(0,g.useState)({}),[_,k]=(0,g.useState)([]),[I,E]=(0,g.useState)(new Map),[T,D]=(0,g.useState)({id:"",date:n.date,shift:"",state:"",quality:"",barcode:""}),[R,P]=(0,g.useState)([]),[O,$]=(0,g.useState)({shifts:[],states:[],quality:[]}),[L,M]=(0,g.useState)(!1),[U,z]=(0,g.useState)([]);(0,g.useEffect)((()=>{!async function(){let[e]=await c(n.data.asset_id);$(e),S(!1)}()}),[]),(0,g.useEffect)((()=>{!async function(){let[e]=await d(n.data.asset_id,T.date,T.shift,T.state,T.quality);k(e.data_set),S(!1)}(),Q()}),[T.date||"",T.shift||"",T.state||"",T.quality||"",T.barcode]);const H=[{id:1,title:"Shift",render:e=>{var t;return null===(t=e.shift)||void 0===t?void 0:t.shift_name}},{id:2,title:"State",render:e=>e.event_type},{id:3,title:"Barcode",render:e=>(0,q.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>s("/packet-detail-page",{state:e}),children:e.barcode})},{id:4,title:"Start Time",render:e=>e.start_time},{id:5,title:"End Time",render:e=>e.end_time},{id:6,title:"Model",render:e=>e.employee_id},{id:7,title:"Duration",render:e=>e.duration},{id:8,title:"Serial No",render:e=>e.employee_id},{id:8,title:"Quantity",render:e=>e.parts_quantity},{id:8,title:"Quality",render:e=>e.parts_quality},{id:8,title:"QC",render:e=>e.employee_id||"-"},{id:8,title:"Operator",render:e=>e.employee_id||"-"},{id:8,title:"Planner Job",render:e=>e.employee_id||"-"},{id:8,title:"Uploaded Job",render:e=>e.employee_id||"-"},{id:8,title:"Downtime Reason",render:e=>"Downtime"===e.event_type&&(0,q.jsx)(l.A,{sx:{flexDirection:"row",alignItems:"center"},children:e.downtime_reason?(0,q.jsx)(i.A,{children:e.downtime_reason}):(0,q.jsx)(la.A,{sx:{cursor:"pointer"},onClick:()=>B(e),color:"error"})})},{id:8,title:"Updated By",render:e=>e.employee_id||"-"},{id:8,title:"Updated At",render:e=>e.employee_id||"-"},{id:8,title:"Edit",render:e=>e.employee_id||"-"}],B=async e=>{z([]),D({...T,id:e.id}),D({...T,rowData:e}),M("submitReason");const[t]=await h(e.id);console.log("reason_list linst",t);const a=t.reasons.map((e=>({value:e.reason_name,key:e.id})));z((e=>[...e,...a]))};async function Q(){let[e]=await r(f+1,n.data.asset_id,T.date,T.shift,T.state,T.quality,T.barcode);C(e.results),P(e.count),S(!1)}const Y=[{placeholder:"Date",type:F.wN.DATE,name:"date",validator:F.wY.REQUIRED,width:"150px"},{placeholder:"Shift",type:F.wN.SELECT,name:"shift",validator:F.wY.REQUIRED,width:"150px",keyValues:[{key:"",value:"All"},...O.shifts]},{placeholder:"State",type:F.wN.SELECT,name:"state",validator:F.wY.REQUIRED,width:"150px",keyValues:[{key:"",value:"All"},...O.states]},{placeholder:"Quality",type:F.wN.SELECT,name:"quality",validator:F.wY.REQUIRED,width:"150px",keyValues:[{key:"",value:"All"},...O.quality]},{placeholder:"Search Barcode",type:F.wN.INPUT,name:"barcode",width:"150px"}];return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)(l.A,{sx:{justifyContent:"space-between",flexDirection:"row"},children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:1},children:[(0,q.jsx)(o.A,{onClick:()=>s(-1),children:(0,q.jsx)(Gt.A,{})}),(0,q.jsx)(i.A,{className:"fw-20-500-36",children:n.data.asset_name||"name not found"})]}),(0,q.jsx)(l.A,{sx:{flexDirection:"row",gap:2},children:(0,q.jsx)(Z.A,{data:T,errors:I,onChange:e=>{A(0);const{name:t,value:a}=e.target;E((e=>(e.delete(t),e))),D((e=>({...e,[t]:a})))},schema:Y})})]}),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(na,{timeLineData:_}),(0,q.jsx)(G,{columns:H,rows:b,rowsPerPage:10,loading:"fetch"===v,titleCellClasses:"c-gray fw-700",page:f,setPage:A,paginator:!0,serialize:!0,total:R,tableBodyColor:F.lm.WHITE}),(0,q.jsx)(ia,{open:"submitReason"===L,onClose:()=>{M(!1)},data:T,setData:D,onSubmit:async()=>{let e=T.id;const t={reason_id:T.reason};S("fetch");let a=await m(e,t);D({id:"",date:(new Date).toISOString().split("T")[0],shift:"",state:"",quality:""}),M(!1),await Q(),console.log("creat res----",a)},rsn:U})]})]})},oa=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,tab:d,setSelectedQuestions:c,skills:u,users:m,testList:h}=e;const[p,x]=(0,g.useState)(new Map),[w,y]=(0,g.useState)(0),j=[{title:"Material QR",placeholder:"Scan QR",type:F.wN.INPUT,name:"material_qr"},{title:"Material Code",placeholder:"Enter material code",type:F.wN.INPUT,name:"material_code"},{title:"GRN NO",placeholder:"Enter grn number",type:F.wN.INPUT,name:"material_grn"},{title:"Quantity",placeholder:"Enter material quantity",type:F.wN.INPUT,name:"material_quantity"},{title:"Comment",placeholder:"Comment",type:F.wN.INPUT,name:"comment"}];return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-5",children:[(0,q.jsx)("h3",{className:"opacity-80",style:{width:"fit-content"},children:"Issuing item "}),(0,q.jsx)(Z.A,{data:s,errors:p,onChange:e=>{const{name:t,value:a}=e.target;x((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:j}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{if(0!==w);else{const e=(0,K.bG)(j,s);if(x(e),e.size)return;await r()}},loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("next")})})]})]})},da=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new Q.Ay,s=await a.get(`orders/pending-items/?page=${e}&page_size=10`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post("orders/issue-extra-material/",e,t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data},update:async(e,a)=>{const s=new Q.Ay,n=await s.put(`orders/update-material-failure/${e}/`,a,t,(e=>(0,B.So)(e,null)));return null===n||void 0===n?void 0:n.data}}};var ca=a(9466),ua=a(5412);const ma=()=>{const e=(0,N.zy)(),t=((0,N.Zp)(),(0,y.wA)()),a=(e.state,(0,y.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.Failure_item)||void 0===t?void 0:t.data}))),[s,n]=(0,g.useState)([]),[r,d]=(0,g.useState)(),[c,u]=(0,g.useState)(0),[m,h]=(0,g.useState)(!1),[p,x]=(0,g.useState)("testDetail"),[w,j]=(0,g.useState)(0),[f,A]=(0,g.useState)({}),{list:v,create:S,update:b}=da(),[C,_]=(0,g.useState)(new Map),[k,I]=(0,g.useState)([]),[E,T]=(0,g.useState)([]),[D,R]=(0,g.useState)([]),[P,O]=(0,g.useState)(""),$=[{id:1,title:"Order No",render:e=>{var t;return(0,q.jsx)(i.A,{children:null===(t=e.work_order)||void 0===t?void 0:t.order_id})}},{id:2,title:"FG Code",render:e=>{var t;return(0,q.jsx)(i.A,{children:null===(t=e.work_order)||void 0===t?void 0:t.name})}},{id:3,title:"Material Name",render:e=>{var t;return(0,q.jsx)(i.A,{children:null===(t=e.material)||void 0===t?void 0:t.material_code})}},{id:4,title:"Resolution Date",render:e=>(0,q.jsx)(i.A,{children:be()(null===e||void 0===e?void 0:e.resolution_date).format("ll")})},{id:5,title:(0,H.t)("status"),render:e=>(0,q.jsx)(i.A,{children:!0===(null===e||void 0===e?void 0:e.status)?"True":"False"})},{id:8,title:(0,H.t)("action"),render:e=>(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(l.A,{sx:{flexDirection:"row",gap:1},children:(0,q.jsx)(ve.A,{title:"scan item",children:(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{t((0,ua.y)(e)),x("addAssign")},children:(0,q.jsx)(ca.A,{color:"primary",fontSize:"small"})})})})})}];(0,g.useEffect)((()=>{L()}),[w]);const L=async()=>{const[e]=await v(w+1);console.log("test master-------",e.count),u(e.count),R(e.results)};return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsx)("div",{className:"flex items-center justify-between",children:(0,q.jsx)(l.A,{sx:{flexDirection:"row",alignItems:"center",mb:1},children:(0,q.jsx)(i.A,{className:"fw-20-500-36",children:"Store Pending Items"})})}),(0,q.jsx)(G,{columns:$,rows:D,rowsPerPage:10,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:w,setPage:j,paginator:!0,serialize:!0,total:c,tableBodyColor:F.lm.WHITE}),(0,q.jsx)(oa,{open:"addAssign"===p,onClose:()=>{x(!1)},onSubmit:async()=>{const e={material_failure_id:null===a||void 0===a?void 0:a.id,workorder_id:null===a||void 0===a?void 0:a.work_order.id,material_qr:f.material_qr,material_code:f.material_code,material_grn:f.material_grn,material_quantity:f.material_quantity};let t=await S(e);console.log("res - create mat------",t);let s=null===a||void 0===a?void 0:a.id;"OK"===(null===t||void 0===t?void 0:t.message)?await b(s,{status:!1,comments:f.comment}):await b(s,{status:!0,comments:f.comment}),x(!1)},users:s,testList:D,data:f,setData:A})]})};var ha=a(5475),pa=a(8625);const xa=e=>{let{rows:t=[],columns:a=[],minWidth:s=650,tableClasses:n="",titleCellClasses:i="",rowClassesMethod:r=()=>{},rowClasses:o="",rowCellClasses:d="",rowsPerPage:c=10,paginator:u=!1,loading:m,dense:h,hideBorder:p=!1,onRowClick:x=Function.prototype,onTableHeadCellClick:w=Function.prototype,handleFgCodeFilterInput:y=Function.prototype,handleOrderIdFilterInput:j=Function.prototype,handleOrderTypeFilterInput:f=Function.prototype,handleOrderStatusFilterInput:A=Function.prototype,serialize:v=!1,page:S=0,setPage:b=Function.prototype,total:C}=e;const[_,N]=(0,g.useState)(null),[k,z]=(0,g.useState)(null),[H,G]=(0,g.useState)(null),[B,Q]=(0,g.useState)(null);return(0,q.jsx)(R.A,{children:(0,q.jsxs)(I.A,{sx:{minWidth:s},className:`${n}`,size:h&&"small",children:[(0,q.jsx)(P.A,{sx:{backgroundColor:F.lm.BG_GRAY},children:(0,q.jsxs)(O.A,{children:[v&&(0,q.jsx)(T.A,{className:`${i} text-nowrap h3`,sx:{color:"black"},children:"S No."}),a.map(((e,t)=>(0,q.jsxs)(T.A,{style:{width:e.width&&e.width,color:"black"},className:`${i} text-nowrap`,children:[(0,q.jsx)("div",{onClick:()=>w(e.id),children:e.title}),"order_id"===e.id&&(0,q.jsx)("input",{type:"text",placeholder:"filter by order_id",value:_,onChange:e=>{console.log(`Updated value: ${e.target.value}`),N(e.target.value),j(e.target.value)},style:{borderRadius:"0.35vw",border:"1px solid grey",padding:"0.25vw",width:"90%",fontSize:"0.8rem"}}),"fg_code"===e.id&&(0,q.jsx)("input",{type:"text",placeholder:`filter by ${e.id}`,value:k,onChange:e=>{console.log(`Updated value: ${e.target.value}`),z(e.target.value),y(e.target.value)},style:{borderRadius:"0.35vw",border:"1px solid grey",padding:"0.25vw",width:"90%"}}),"order_type"===e.id&&(0,q.jsxs)("select",{value:H,onChange:e=>{console.log(`Updated value: ${e.target.value}`),G(e.target.value),f(e.target.value)},style:{borderRadius:"0.35vw",border:"1px solid grey",padding:"0.25vw",width:"10vw"},children:[(0,q.jsx)("option",{value:"",children:"Select Order Type"}),(0,q.jsx)("option",{value:"ACC",children:"ACC"}),(0,q.jsx)("option",{value:"LPC",children:"LPC"}),(0,q.jsx)("option",{value:"ASSEMBLY",children:"ASSEMBLY"})]}),"status"===e.id&&(0,q.jsxs)("select",{value:B,onChange:e=>{console.log(`Updated value: ${e.target.value}`),Q(e.target.value),A(e.target.value)},style:{borderRadius:"0.35vw",border:"1px solid grey",padding:"0.25vw",width:"8vw"},children:[(0,q.jsx)("option",{value:"",children:"Select Status"}),(0,q.jsx)("option",{value:"PLAN",children:"PLAN"}),(0,q.jsx)("option",{value:"ISSUING",children:"ISSUING"}),(0,q.jsx)("option",{value:"RUNNING",children:"RUNNING"})]})]},t)))]})}),(0,q.jsx)(l.A,{sx:{p:.3}}),(0,q.jsx)(E.A,{children:m?(0,q.jsx)(O.A,{children:(0,q.jsx)(T.A,{colSpan:12,className:"flex h-300 text-center",children:(0,q.jsx)(M.A,{big:!0,blue:!0})})}):t&&t.length?t.map(((e,t)=>(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(O.A,{sx:{backgroundColor:F.lm.LG_GRAY,[`& .${D.A.root}`]:{borderBottom:p?"none":"true",mt:10},...r(t,e)},className:`${o}`,onClick:()=>x(e.id),children:[v&&(0,q.jsx)(T.A,{sx:{color:"black"},className:`${d} fw-500 `,align:"left",children:t+1}),a.map(((t,a)=>(0,q.jsx)(T.A,{sx:{width:t.width&&t.width,color:"black"},className:`${d} fw-500`,align:"left",children:t.render(e)},a)))]},t),(0,q.jsx)(l.A,{sx:{p:.3}})]}))):(0,q.jsx)(O.A,{children:(0,q.jsxs)(T.A,{colSpan:12,className:"text-center h-300 flex items-center opacity-60 w-full",children:[(0,q.jsx)("img",{src:U,alt:"leaf",height:100,className:"w-full object-contain"}),(0,q.jsx)("p",{className:"text-center",children:"No Records found!"})]})})}),u&&(0,q.jsx)($.A,{children:(0,q.jsx)(O.A,{children:(0,q.jsx)(L.A,{rowsPerPageOptions:[],count:C||t.length,rowsPerPage:c,onPageChange:(e,t)=>b(t),page:S})})})]})})},ga="capsule_capsule__AYGR4";function wa(e){let{capsuleText:t}=e;var a;switch(t){case"PLAN":default:a="#fa7474";break;case"ISSUING":a="#ffd6b0";break;case"RUNNING":a="#e9efc5"}return(0,q.jsx)("div",{className:ga,style:{backgroundColor:a},children:t})}const ya="button_button__n8rYf";var ja=a(1906);const fa=e=>{let{children:t,onClick:a,top:s,color:n,classes:l,height:i,width:r,bordered:o,gray:d,disabled:c,loading:u,hide:m,background:h,white:p,customStyle:x={}}=e;const g={blue:F.lm.DARK_BLUE,orange:F.lm.ORANGE,green:F.lm.GREEN,red:F.lm.RED,gray:F.lm.BG_GRAY,yellow:F.lm.YELLOW,white:F.lm.WHITE,light_green:F.lm.LIGHT_GREEN}[n]||"#498cce";return m?null:(0,q.jsx)(ja.A,{"data-testid":"button",style:{marginTop:s,backgroundColor:o?h||"transparent":g,height:!!i&&i,width:!!r&&r,border:!!o&&`1.5px solid ${d?"lightgray":g}`,color:p?"#0A2B77":d?"lightgray":o?g:"#ffffff",opacity:c&&.8,pointerEvents:c&&"none",...x},className:`${ya} ${l}`,onClick:a,disabled:c,children:u?(0,q.jsx)(M.A,{red:"red"===n&&!!o,orange:"orange"===n&&!!o,green:"green"===n&&!!o,blue:!!o}):t})};const Aa=a.p+"static/media/action-icon.7ea474ec817bbcbc0bcf492a497a0fdd.svg",va=e=>{let{open:t,onClose:a,data:s={},setData:n,onSubmit:l,handleAdd2:i,loading:r,tab:o}=e;const d=Object.entries(s).filter((e=>{let[t,a]=e;return"id"!==t&&null!=a}));return console.log("order details data",s),(0,q.jsx)(J.A,{open:t,onClose:a,wrapperClasses:"px-5 py-4",width:"81vw",hideCloseIcon:ee.A,crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:(0,q.jsxs)("div",{className:"orderDetailsContainer",children:[(0,q.jsx)("div",{className:"leftPart",children:(0,q.jsx)("ul",{className:"orderDetailKeyList",children:d.map((e=>{let[t]=e;return(0,q.jsx)("li",{children:(a=t,a.charAt(0).toUpperCase()+a.slice(1))},t);var a}))})}),(0,q.jsx)("div",{className:"rightPart",children:(0,q.jsx)("ul",{className:"orderDetailValueList",children:d.map((e=>{let[t,a]=e;return(0,q.jsx)("li",{children:a},t)}))})})]})})},Sa=()=>{const[e,t]=(0,g.useState)(!1),[a,s]=(0,g.useState)(null),{token:n}=(0,y.d4)((e=>e[W.X.AUTH])),l={Authorization:`Bearer ${n}`,"Content-Type":Q.yw.APPLICATION_JSON},i=new Q.Ay,r=(0,g.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,d=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0,m=arguments.length>7?arguments[7]:void 0,h=arguments.length>8?arguments[8]:void 0,p=arguments.length>9?arguments[9]:void 0,x=arguments.length>10?arguments[10]:void 0,g=arguments.length>11?arguments[11]:void 0,w=`${Y.H.ORDERS}/all/?page=${e}`;n||r||o||d||c||u?w+="&sort_by=":!1!==n&&!1!==r&&!1!==o&&!1!==d&&!1!==c&&!1!==u||(w+="&sort_by="),m.forEach((e=>{switch(e){case"fg_code":switch(n){case!1:console.log("Code is false"),w+=w.endsWith("&sort_by=")?"-fg_code":",-fg_code";break;case!0:console.log("Code is true"),w+=w.endsWith("&sort_by=")?"fg_code":",fg_code";break;default:console.log("Code is an unexpected value")}break;case"order_type":switch(r){case!1:console.log("Order type is false"),w+=w.endsWith("&sort_by=")?"-order_type":",-order_type";break;case!0:console.log("Order type is true"),w+=w.endsWith("&sort_by=")?"order_type":",order_type";break;default:console.log("Order type is an unexpected value")}break;case"status":switch(o){case!1:console.log("Status is false"),w+=w.endsWith("&sort_by=")?"-status":",-status";break;case!0:console.log("Status is true"),w+=w.endsWith("&sort_by=")?"status":",status";break;default:console.log("Status is an unexpected value")}break;case"order_id":switch(d){case!1:console.log("Order ID is false"),w+=w.endsWith("&sort_by=")?"-order_id":",-order_id";break;case!0:console.log("Order ID is true"),w+=w.endsWith("&sort_by=")?"order_id":",order_id";break;default:console.log("Order ID is an unexpected value")}break;case"name":switch(c){case!1:console.log("Name is false"),w+=w.endsWith("&sort_by=")?"-name":",-name";break;case!0:console.log("Name is true"),w+=w.endsWith("&sort_by=")?"name":",name";break;default:console.log("Name is an unexpected value")}break;case"quantity":switch(u){case!1:console.log("Quantity is false"),w+=w.endsWith("&sort_by=")?"-quantity":",-quantity";break;case!0:console.log("Quantity is true"),w+=w.endsWith("&sort_by=")?"quantity":",quantity";break;default:console.log("Quantity is an unexpected value")}break;default:console.log("Unknown column ID:",e)}})),h&&(w+="&order_id=",w+=h),p&&(w+="&fg_code=",w+=p),x&&(w+="&type=",w+=x),g&&(w+="&status=",w+=g),t(!0),s(null);try{return(await i.get(w,{},l)).data}catch(a){s(a.message||"Error in fetchOrders:")}finally{t(!1)}}),[i,l]),o=(0,g.useCallback)((async()=>{const e=`${Y.H.ORDERS}/order-matrix-view/`;t(!0),s(null);try{return(await i.get(e,{},l)).data}catch(a){s(a.message||"Error in fetchOrders:")}finally{t(!1)}}),[i,l]),d=(0,g.useCallback)((async e=>{const s=`${Y.H.ORDERS}/order-details/${e}/`;try{t(!0);return(await i.get(s,{},l)).data}catch(a){console.error(a.message||"Error in fetching orders by id")}finally{t(!1)}}),[i,l]),c=(0,g.useCallback)((async e=>{const s=`${Y.H.ORDERS}/material-on-hold/${e}/`;try{t(!0);return(await i.get(s,{},l)).data}catch(a){console.error(a.message||"Error in getting order on hold quantity")}finally{t(!1)}}),[i,l]),u=(0,g.useCallback)((async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=`${Y.H.ORDERS}/bom-submit/${e}/`;try{t(!0);return(await i.post(n,s,l)).data}catch(a){console.error(a.message||"Error in submitting BOM")}finally{t(!1)}}),[i,l]),m=(0,g.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=`${Y.H.ORDERS}/material-failure-reasons/`,r={reason_name:e,resolution_date_required:s};try{t(!0);return(await i.post(n,r,l)).data}catch(a){console.error(a.message||"Error in getting Failure Reasons")}finally{t(!1)}}),[i,l]);return{loading:e,error:a,fetchOrders:r,fetchOrdersMatrixView:o,fetchOrdersById:d,getOrderHoldQuantity:c,submitBOM:u,postFailureReason:m}},ba=()=>{const[e,t]=(0,g.useState)(!1),[a,s]=(0,g.useState)(null),{token:n}=(0,y.d4)((e=>e[W.X.AUTH])),l={Authorization:`Bearer ${n}`,"Content-Type":Q.yw.APPLICATION_JSON},i=new Q.Ay,r=(0,g.useCallback)((async e=>{const s=`${Y.H.ORDERS}/materials-required/${e}/`;try{t(!0);return(await i.get(s,{},l)).data}catch(a){console.error(a.message||"Error in fetching orders by id")}finally{t(!1)}}),[i,l]),o=(0,g.useCallback)((async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=`${Y.H.ORDERS}/material-on-hold/${e}/`;try{t(!0);return(await i.post(n,s,l)).data}catch(a){console.error(a.message||"Error in setting order on hold quantity")}finally{t(!1)}}),[i,l]),d=(0,g.useCallback)((async(e,s)=>{const n=`${Y.H.ORDERS}/update-state/${e}/`,r={state:s};try{t(!0);return(await i.put(n,r,l)).data}catch(a){console.error(a.message||"Error in submitting BOM")}finally{t(!1)}}),[i,l]),c=(0,g.useCallback)((async(e,s,n,r,o,d)=>{const c=`${Y.H.ORDERS}/label-generator/`,u={material_code:e,grn_number:s,grn_date:n,unit:r,qty1:o,qty2:d};try{t(!0);return(await i.post(c,u,l)).data}catch(a){console.error(a.message||"Error in submitting BOM")}finally{t(!1)}}),[i,l]),u=(0,g.useCallback)((async()=>{const e=`${Y.H.ORDERS}/material-failure-reasons/`;try{t(!0);return(await i.get(e,{},l)).data}catch(a){console.error(a.message||"Error in getting Failure Reasons")}finally{t(!1)}}),[i,l]),m=(0,g.useCallback)((async function(e,s,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Fake comment";const d=`${Y.H.ORDERS}/material-failure-entry/${e}/`,c={material_code:s,failure_reason_id:n,comments:o,resolution_date:r};try{t(!0);return(await i.post(d,c,l)).data}catch(a){console.error(a.message||"Error in submitting Failure Reason")}finally{t(!1)}}),[i,l]),h=(0,g.useCallback)((async(e,s)=>{const n=`${Y.H.AUTH}/supervisor-authentication/`,r={username:e,password:s};try{t(!0);return(await i.post(n,r,l)).data}catch(a){console.error(a.message||"Error in supervisor login")}finally{t(!1)}}),[i,l]),p=(0,g.useCallback)((async(e,s,n,r,o,d)=>{const c=`${Y.H.ORDERS}/stock-transfer/`,u={material_code1:e,material_code2:s,quantity:n,grn_number:r,unit:o,grn_date:d};try{t(!0);return(await i.post(c,u,l)).data}catch(a){console.error(a.message||"Error in Stock Transfer")}finally{t(!1)}}),[i,l]),x=(0,g.useCallback)((async e=>{const s=`${Y.H.ORDERS}/kitting-qr/${e}/`;try{t(!0);return(await i.get(s,{},l)).data}catch(a){console.error(a.message||"Error in getting Kitting Label")}finally{t(!1)}}),[i,l]),w=(0,g.useCallback)((async e=>{const s={labelData:e};try{t(!0);return(await i.post_local("print-labels/",s,l)).data}catch(a){console.error(a.message||"Error in Printing Labels")}finally{t(!1)}}),[i,l]);return{loading:e,error:a,fetchMaterialsRequired:r,setOrderHoldQuantity:o,updateOrderState:d,generateLabels:c,getFailureReasons:u,submitFailureReason:m,supervisorLogin:h,stockTransfer:p,getKittingLabel:x,printLabels:w}},Ca=e=>{let{setLocalUI:t,data:a={},noStepFn:s=()=>{},nextStepFn:n=()=>{}}=e;const{fetchOrdersById:l,error:i,loading:r}=Sa();console.log("FulfilledOrderActionModal data",a);const[o,d]=(0,g.useState)(null);return(0,g.useEffect)((()=>{a&&a.orderId&&l(a.orderId).then((e=>{console.log("setSelectedOrderDetails data",e),d(e)}))}),[a]),(0,q.jsxs)("div",{className:"action_modal__container",children:[(0,q.jsx)("div",{children:(0,q.jsx)(tt.A,{sx:{fontSize:"6rem",color:"#86D56A"}})}),(0,q.jsxs)("p",{children:["Material Planning for Order ",(0,q.jsx)("strong",{children:null===o||void 0===o?void 0:o.name})," is successfully done."]}),(0,q.jsxs)("p",{children:["Order ",(0,q.jsx)("strong",{children:null===o||void 0===o?void 0:o.order_id})," is in Processing Stage now."]}),(0,q.jsxs)("p",{children:["Do you want to move it to ",(0,q.jsx)("em",{children:"Running Stage"}),"?"]}),(0,q.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,q.jsx)(fa,{onClick:s,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"No"}),(0,q.jsx)(fa,{onClick:n,color:"green",width:"8rem",height:"2.5rem",children:"Yes"})]})]})},_a=e=>{let{setLocalUI:t,data:a={},noStepFn:s=()=>{},nextStepFn:n=()=>{},isPartialFulfilledOrderActionModalEditBtnEnabled:l=!1}=e;const{fetchOrdersById:i,error:r,loading:o}=Sa();console.log("PartialFulfilledOrderActionModal data",a);const[d,c]=(0,g.useState)(null);return(0,g.useEffect)((()=>{a&&a.orderId&&i(a.orderId).then((e=>{console.log("setSelectedOrderDetails data",e),c(e)}))}),[a]),(0,q.jsxs)("div",{className:"action_modal__container",children:[(0,q.jsx)("div",{children:(0,q.jsx)(tt.A,{sx:{fontSize:"6rem",color:"#86D56A"}})}),(0,q.jsxs)("p",{children:["Do you want to Edit",l&&(0,q.jsx)("span",{children:" or Run"})]}),(0,q.jsxs)("span",{children:["Order ",null===d||void 0===d?void 0:d.order_id," ",(0,q.jsx)("strong",{children:null===d||void 0===d?void 0:d.name})," "]}),(0,q.jsx)("br",{}),(0,q.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,q.jsx)(fa,{onClick:s,white:!!l,color:l?"":"green",width:"8rem",height:"2.5rem",bordered:!!l,customStyle:l?{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"}:{},children:"Edit"}),l&&(0,q.jsx)(fa,{onClick:n,color:"green",width:"8rem",height:"2.5rem",children:"Run"})]})]})},Na=[{color:"var(--primary-color)",title:"Plan",value:38},{color:"var(--secondary-color)",title:"Issuing",value:14},{color:"var(--tertiary-color)",title:"Running",value:2}];const ka=e=>{let{color:t,title:a,value:s}=e;return(0,q.jsxs)("div",{className:"overview-metrics-box",style:{backgroundColor:t},children:[(0,q.jsx)("p",{children:a}),(0,q.jsx)("p",{children:s})]})},Ia=function(){const e=(0,N.Zp)(),[t]=(0,ha.ok)(),[a,s]=(0,g.useState)(!0),[n,l]=(0,g.useState)({pageLoading:!0,isFulfilledOrderActionModalOpen:!1,isPartialFulfilledOrderActionModalOpen:!1,selectedOrderId:null,selectedOrderOrderId:null,selectedOrderName:null,selectedOrderStatus:null,userActionStatus:null,selectedOrderType:null,selectedHoldingOrderMaterialsQty:null,isPartialFulfilledOrderActionModalEditBtnEnabled:null}),[i,r]=(0,g.useState)([]),[d,c]=(0,g.useState)([]),{fetchOrders:u,fetchOrdersMatrixView:m,fetchOrdersById:h,getOrderHoldQuantity:p,submitBOM:x,error:w,loading:y}=Sa(),{updateOrderState:j}=ba(),[f,A]=(0,g.useState)(0),[v,S]=(0,g.useState)(!1),[b,C]=(0,g.useState)({}),[_,k]=(0,g.useState)(1),[I,E]=(0,g.useState)(null),[T,D]=(0,g.useState)(null),[R,P]=(0,g.useState)(5),[O,$]=(0,g.useState)(null),[L,U]=(0,g.useState)(null),[z,H]=(0,g.useState)(!1),[G,B]=(0,g.useState)({specification:{},location:{}}),[Q,Y]=(0,g.useState)(Na),[W,V]=(0,g.useState)(null),[X,Z]=(0,g.useState)(null),[K,te]=(0,g.useState)(null),[ae,se]=(0,g.useState)(null),[ne,le]=(0,g.useState)(!0),[ie,re]=(0,g.useState)(null),[oe,de]=(0,g.useState)(null),[ce,ue]=(0,g.useState)(["order_id"]),[me,he]=(0,g.useState)(null),[pe,xe]=(0,g.useState)(null),[ge,we]=(0,g.useState)(null),[ye,je]=(0,g.useState)(null);(0,g.useEffect)((()=>{u(_,X,K,ae,ne,ie,oe,ce,me,pe,ge,ye).then((e=>{c(e.results),E(e.count);const t=Math.ceil(e.count/R);D(t),Ne(_),e.previous?$(!0):$(!1),e.next?U(!0):U(!1)}))}),[_,X,K,ae,ne,ie,oe,me,pe,ge,ye]);const fe=t=>{switch(t.status){case F.ht.PLAN:e(`/material-planner-plan?orderId=${t.id}&orderStatus=${t.status}&orderType=${t.order_type}&orderOrderId=${t.order_id}`);break;case F.ht.ISSUING:console.log("orderData.order_type",t.order_type),l((e=>({...e,isPartialFulfilledOrderActionModalOpen:!0,selectedOrderOrderId:t.order_id,selectedOrderStatus:t.status,selectedOrderId:t.id,selectedOrderType:t.order_type,isPartialFulfilledOrderActionModalEditBtnEnabled:"ASSEMBLY"!==t.order_type})));break;case F.ht.RUNNING:l((e=>({...e,selectedOrderOrderId:t.order_id,selectedOrderStatus:t.status,selectedOrderId:t.id,selectedOrderType:t.order_type,isPartialFulfilledOrderActionModalEditBtnEnabled:!1}))),Ce(t.id,t.status,t.order_type,t.order_id)}},Ae=t.get("orderId"),ve=t.get("status"),Se=t.get("orderStatus"),be=()=>{m().then((e=>{const t=Q.map((t=>({...t,value:e[t.title.toLowerCase()]})));Y(t),V((new Date).toLocaleString())}))};(0,g.useEffect)((()=>{be();const e=t.get("orderId"),a=t.get("status"),s=t.get("orderStatus");e&&a&&s?(l((t=>{let n={...t};return a.toLowerCase()===F.eN.SCANNED&&(console.log("paramStatus.toLowerCase() === USER_ACTIONS.SCANNED"),n.isFulfilledOrderActionModalOpen=!0,n.selectedOrderId=e,n.selectedOrderStatus=s,n.userActionStatus=a),n.pageLoading=!1,n})),h(e).then((e=>{if(console.log("fetchOrdersById",n.selectedOrderId,"data",e),e){const t=e.name||"",a=e.order_id||"";l((e=>({...e,selectedOrderOrderId:a,selectedOrderName:t})))}}))):l((e=>({...e,pageLoading:!1})))}),[Ae,ve,Se]);const Ce=(t,a,s,n)=>{e(`/material-planner-plan/scanning?orderId=${t}&orderStatus=${a}&orderType=${s}&orderOrderId=${n}`)},[_e,Ne]=(0,g.useState)(_);return n.pageLoading?(0,q.jsx)("div",{className:"mx-3 my-2",style:{display:"grid",placeItems:"center"},children:(0,q.jsx)(M.A,{green:!0})}):(0,q.jsxs)("div",{className:"mx-3 my-2 material-planner-layout",children:[(0,q.jsxs)("div",{className:"material-planner-layout-header",children:[(0,q.jsx)("div",{className:"overview-heading",children:"Overview"}),(0,q.jsxs)("div",{className:"overview-metrics-container",children:[Q.map((e=>(0,q.jsx)(ka,{color:e.color,title:e.title,value:e.value}))),(0,q.jsxs)("div",{className:"overview-last-refresh",children:[(0,q.jsxs)("div",{className:"leftPart",children:[(0,q.jsx)("div",{children:"Last refresh"}),(0,q.jsx)("div",{children:W})]}),(0,q.jsx)("div",{className:"rightPart",children:(0,q.jsx)(o.A,{onClick:be,children:(0,q.jsx)(pa.A,{})})})]})]})]}),(0,q.jsxs)("div",{className:"material-planner-layout-body",children:[(0,q.jsx)(xa,{edit:z,columns:[{id:"order_id",title:"Order ID "+(!0===ne?"\u2191":!1===ne?"\u2193":"\u2191\u2193"),render:e=>(0,q.jsx)("span",{onClick:()=>(async e=>{S(!0);try{const t=await h(e);C(t)}catch(Ue){console.error("Error in fetchOrderDetails:",Ue)}})(e.id),style:{cursor:"pointer",color:"blue"},children:e.order_id})},{id:"name",title:"Name "+(!0===ie?"\u2191":!1===ie?"\u2193":"\u2191\u2193"),render:e=>e.name},{id:"quantity",title:"Qty",title:"Qty "+(!0===oe?"\u2191":!1===oe?"\u2193":"\u2191\u2193"),render:e=>e.quantity},{id:"fg_code",title:"Code "+(!0===X?"\u2191":!1===X?"\u2193":"\u2191\u2193"),render:e=>e.fg_code},{id:5,title:"Description",render:e=>e.fg_description},{id:"order_type",title:"Order type "+(!0===K?"\u2191":!1===K?"\u2193":"\u2191\u2193"),render:e=>e.order_type},{id:"status",title:"Status "+(!0===ae?"\u2191":!1===ae?"\u2193":"\u2191\u2193"),render:e=>(0,q.jsx)(wa,{capsuleText:e.status})},{id:9,title:"Action",render:e=>(0,q.jsx)("img",{src:Aa,style:{width:"2.78vw",height:"2.78vw",cursor:"pointer"},alt:"Action Icon",onClick:()=>fe(e)})}],onTableHeadCellClick:e=>{(e=>{switch(e){case"fg_code":Z((t=>{switch(t){case null:return console.log("a is null"),ue((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),ue((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("code case");break;case"order_type":te((t=>{switch(t){case null:return console.log("a is null"),ue((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),ue((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("order type case");break;case"status":se((t=>{switch(t){case null:return console.log("a is null"),ue((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),ue((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("status case");break;case"order_id":le((t=>{switch(t){case null:return console.log("a is null"),ue((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),ue((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("order id case");break;case"name":re((t=>{switch(t){case null:return console.log("a is null"),ue((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),ue((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("order id case");break;case"quantity":de((t=>{switch(t){case null:return console.log("a is null"),ue((t=>[...t,e])),!0;case!0:return console.log("a is true"),!1;case!1:return console.log("a is false"),ue((t=>t.filter((t=>t!==e)))),null;default:return console.log("a is an unexpected value"),t}})),console.log("order id case");break;default:console.log(e,"clicked")}})(e)},rows:d,rowsPerPage:R,loading:y,titleCellClasses:"c-gray fw-700",page:_-1,serialize:!0,total:I,handleOrderIdFilterInput:e=>{(e=>{console.log("handleOrderIdFilterInput",e),he(e)})(e)},handleFgCodeFilterInput:e=>{(e=>{console.log("handleFgCodeFilterInput",e),xe(e)})(e)},handleOrderTypeFilterInput:e=>{(e=>{console.log("handleOrderTypeFilterInput",e),we(e)})(e)},handleOrderStatusFilterInput:e=>{(e=>{console.log("handleOrderStatusFilterInput",e),je(e)})(e)}}),(0,q.jsxs)("div",{className:"pagination-controls",children:[(0,q.jsx)(fa,{onClick:()=>{k(_-1),console.log("prev page")},white:!0,width:"auto",height:"auto",bordered:!0,disabled:!O,customStyle:{border:"1px solid #3E3E3E",backgroundColor:O?"#FFFFFF":"#CCCCCC",color:O?"#000000":"#999999",cursor:O?"pointer":"not-allowed"},children:"Prev"}),(0,q.jsxs)("div",{className:"page-details",children:[(0,q.jsx)("div",{children:"Page"})," ",(0,q.jsx)("input",{type:"number",value:_e,onChange:e=>{const t=e.target.value;/^\d*$/.test(t)&&Ne(t)},onBlur:()=>{const e=Math.ceil(_e);!isNaN(e)&&e>0&&e<=T?k(e):Ne(_)},className:"page-number-input"}),(0,q.jsx)("div",{children:"of "}),(0,q.jsx)("div",{children:(0,q.jsx)("strong",{children:T})})]}),(0,q.jsx)(fa,{onClick:()=>{k(_+1),console.log("next page")},color:"green",width:"auto",height:"auto",disabled:!L,customStyle:{backgroundColor:L?"#27ae60":"#CCCCCC",color:L?"#FFFFFF":"#999999",cursor:L?"pointer":"not-allowed"},children:"Next"})]})]}),v&&(0,q.jsx)(va,{open:v,onClose:()=>S(!1),data:b}),n.isFulfilledOrderActionModalOpen&&(0,q.jsx)(J.A,{open:n.isFulfilledOrderActionModalOpen,onClose:()=>l({isFulfilledOrderActionModalOpen:!1}),width:"80vw",top:"10vh",hideCloseIcon:ee.A,wrapperClasses:"px-5 py-4",crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:(0,q.jsx)(Ca,{data:{orderId:n.selectedOrderId,status:n.selectedOrderStatus},noStepFn:()=>{const t=[...i],a=i.findIndex((e=>e.order_id===n.selectedOrderId));-1!==a&&n.userActionStatus===F.eN.SCANNED&&(t[a].status=F.ht.ISSUING),r(t),l({...n,isFulfilledOrderActionModalOpen:!1}),e("/material-planner/")},nextStepFn:()=>{const a=t.get("orderId");p(n.selectedOrderId).then((t=>{l((e=>({...e,selectedHoldingOrderMaterialsQty:t}))),console.log("getOrderHoldQuantity data",t),console.log("selectedHoldingOrderMaterialsQty",n.selectedHoldingOrderMaterialsQty),x(n.selectedOrderId,{material_issue:t}).then((t=>{console.log("submit BOM data",t),j(a,F.ht.RUNNING).then((e=>{be()}));const s=d.map((e=>({...e}))),i=d.findIndex((e=>e.id===a));-1!==i&&(s[i].status=F.ht.RUNNING),c(s),l({...n,isFulfilledOrderActionModalOpen:!1}),e("/material-planner/")}))}))}})}),n.isPartialFulfilledOrderActionModalOpen&&(0,q.jsx)(J.A,{open:n.isPartialFulfilledOrderActionModalOpen,onClose:()=>l({isPartialFulfilledOrderActionModalOpen:!1}),width:"50vw",top:"20vh",hideCloseIcon:ee.A,wrapperClasses:"px-5 py-4",crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:(0,q.jsx)(_a,{data:{orderId:n.selectedOrderId,status:n.selectedOrderStatus},noStepFn:()=>{l({...n,isPartialFulfilledOrderActionModalOpen:!1}),e("/material-planner/"),e(`/material-planner-plan/scanning?orderId=${n.selectedOrderId}&orderStatus=${n.selectedOrderStatus}&orderType=${n.selectedOrderType}&orderOrderId=${n.selectedOrderOrderId}`)},nextStepFn:()=>{const e=n.selectedOrderId;p(n.selectedOrderId).then((t=>{l((e=>({...e,selectedHoldingOrderMaterialsQty:t}))),console.log("getOrderHoldQuantity data",t),console.log("selectedHoldingOrderMaterialsQty",n.selectedHoldingOrderMaterialsQty),x(n.selectedOrderId,{material_issue:t}).then((t=>{console.log("submit BOM data",t),j(e,F.ht.RUNNING).then((e=>{be()}));const a=d.map((e=>({...e}))),s=d.findIndex((t=>t.id===e));-1!==s&&(a[s].status=F.ht.RUNNING),c(a),l({...n,isPartialFulfilledOrderActionModalOpen:!1}),be()}))}))},isPartialFulfilledOrderActionModalEditBtnEnabled:n.isPartialFulfilledOrderActionModalEditBtnEnabled})})]})},Ea=e=>{let{open:t,onClose:a,failureReasonText:s="",isResolutionDateRequired:n=null,nextStepFn:l=()=>{},setData:i,onSubmit:r,handleAdd2:o,loading:d,tab:c}=e;return console.log("FailureReasonSuccessModal isResolutionDateRequired",n),(0,q.jsx)(J.A,{open:t,onClose:a,wrapperClasses:"px-5 py-4",width:"min(700px,90vw)",hideCloseIcon:ee.A,crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:(0,q.jsxs)("div",{className:"failure-submit-success-message",children:[(0,q.jsx)("p",{children:(0,q.jsx)("strong",{children:"Success!"})}),(0,q.jsxs)("p",{children:["Failure Reason ",(0,q.jsx)("strong",{children:s})," with Resolution Date required"," ",(0,q.jsx)("strong",{children:n?"true":"false"})," is submitted successfully."]}),(0,q.jsx)(X.A,{onClick:l,color:"green",customStyle:{borderRadius:"0.5vw",border:"1px solid grey",padding:"0.7vw",marginBottom:"1rem",marginTop:"1rem",fontSize:"1rem"},children:"OK"})]})})},Ta=e=>{let{open:t,onClose:a,failureReasonText:s="",setFailureReasonText:n=()=>{},isResolutionDateRequired:l=null,setIsResolutionDateRequired:i=()=>{},handleSubmit:r=()=>{}}=e;return(0,q.jsx)(J.A,{open:t,onClose:a,wrapperClasses:"px-5 py-4",width:"min(700px,90vw)",hideCloseIcon:ee.A,crossIconClasses:"w-2.5vw w-5vw--mob h-2.5vw h-5vw--mob",children:(0,q.jsxs)("div",{className:"failure-submit-success-message",children:[(0,q.jsx)("p",{children:(0,q.jsx)("strong",{children:"Add Failure Reason"})}),(0,q.jsxs)("form",{action:"",method:"post",className:"failure-reason-form",children:[(0,q.jsx)("div",{className:"failureReason-input-text-container",children:(0,q.jsxs)("label",{htmlFor:"failureReason",children:[(0,q.jsx)("div",{className:"label-text",children:"Reason name"}),(0,q.jsx)("input",{type:"text",name:"failureReason",placeholder:"Write failure reason here",value:s,onChange:e=>{console.log(`Updated value: ${e.target.value}`),n(e.target.value)},style:{borderRadius:"0.5vw",border:"1px solid grey",padding:"0.75vw",marginBottom:"1rem",fontSize:"1rem"}})]})}),(0,q.jsxs)("div",{className:"checkbox-items-container",children:[(0,q.jsx)("div",{className:"resolution-date-label",children:"Resolution Date required?"}),(0,q.jsx)("div",{children:(0,q.jsxs)("label",{className:"checkbox-item-container",children:["Yes",(0,q.jsx)("input",{type:"checkbox",name:"isResolutionDateRequiredYes",checked:!0===l,onChange:e=>{console.log(`Yes checkbox updated: ${e.target.checked}`),i(!!e.target.checked||!1===l&&null)}})]})}),(0,q.jsx)("div",{children:(0,q.jsxs)("label",{className:"checkbox-item-container",children:["No",(0,q.jsx)("input",{type:"checkbox",name:"isResolutionDateRequiredNo",checked:!1===l,onChange:e=>{console.log(`No checkbox updated: ${e.target.checked}`),i(!e.target.checked&&(!0!==l||null))}})]})})]}),(0,q.jsx)("div",{className:"submit-btn-container",children:(0,q.jsx)(X.A,{onClick:r,color:"green",customStyle:{borderRadius:"0.5vw",border:"1px solid grey",padding:"0.7vw",marginBottom:"1rem",fontSize:"1rem"},disabled:!s||null===l,children:"Submit"})})]})]})})};const Da=function(){const{postFailureReason:e,error:t,loading:a}=Sa(),{getFailureReasons:s}=ba(),[n,l]=(0,g.useState)(null),[i,r]=(0,g.useState)(null),[o,d]=(0,g.useState)(!1),[c,u]=(0,g.useState)(null),[m,h]=(0,g.useState)(null),[p,x]=(0,g.useState)(!1);return(0,g.useEffect)((()=>{s().then((e=>{l(e),r(Object.values(e))}))}),[p]),(0,q.jsxs)("div",{className:"mx-3 my-2 mp-instruction-layout",children:[(0,q.jsx)("div",{className:"mp-instruction-header",children:(0,q.jsxs)("p",{className:"issues-header",children:[(0,q.jsx)("strong",{children:"Failure Reasons"}),(0,q.jsx)("div",{className:"add-issue-btn",children:!o&&(0,q.jsx)(fa,{onClick:()=>{d(!0)},color:"gray",customStyle:{borderRadius:"0.25rem",border:"1px solid #D9D9D9",padding:"0.7vw",fontSize:"1rem",color:"black"},children:"Add Failure Reasons"})})]})}),(0,q.jsx)("div",{className:"material-planner-layout-body",children:(0,q.jsx)(G,{columns:[{id:"reason_name",title:"Reason name",render:e=>(0,q.jsx)("span",{children:e.name})},{id:"resolution_date_required",title:"Resolution Date Required",render:e=>(0,q.jsx)("span",{children:e.resolution_date_required?"Yes":"No"})}],rows:i,titleCellClasses:"c-gray fw-700",serialize:!0})}),o&&(0,q.jsx)(Ta,{open:o,onClose:()=>{d(!1)},failureReasonText:c,setFailureReasonText:u,isResolutionDateRequired:m,setIsResolutionDateRequired:h,handleSubmit:()=>{e(c,m).then((e=>{console.log("postFailureReason data",e),e&&"OK"===e.message&&(x(!0),d(!1))})).catch((e=>{console.error("postFailureReason error",e)}))}}),p&&(0,q.jsx)(Ea,{open:p,onClose:()=>{x(!1),u("")},failureReasonText:c,isResolutionDateRequired:m,nextStepFn:()=>{x(!1)}})]})};var Ra=a(1707);const Pa=e=>{let{label:t,path:a,isLast:s}=e;return s?(0,q.jsx)("span",{className:"breadcrumb-item current",children:t}):(0,q.jsx)(ha.N_,{to:a,className:"breadcrumb-item",children:t})},Oa=()=>{const e=(0,N.zy)(),[t,a]=(0,g.useState)([]),[s]=(0,ha.ok)();return(0,g.useEffect)((()=>{if(e){const t=e.pathname.split("/"),n=[];t.forEach(((e,t)=>{switch(e){case"material-planner-plan":n.push({label:"Home",path:"/material-planner"}),n.push({label:"Order ID",path:""});break;case"plan":n.push({label:"Plan",path:"/material-planner/plan"})}})),n.push({label:s.get("orderOrderId"),path:""}),a(n)}}),[e]),(0,q.jsx)("nav",{"aria-label":"Breadcrumb",children:(0,q.jsx)("ol",{className:"breadcrumb-container",children:t.map(((e,a)=>(0,q.jsxs)("li",{children:[(0,q.jsx)(Pa,{label:e.label,path:e.path,isLast:a===t.length-1}),a<t.length-1&&(0,q.jsx)("span",{className:"breadcrumb-separator",children:(0,q.jsx)(Ra.A,{})})]},e.path)))})})};const $a=function(){const e=(0,N.Zp)(),[t]=(0,ha.ok)(),[a,s]=(0,g.useState)([]),{fetchBOM:n,error:l,loading:i}=(()=>{const[e,t]=(0,g.useState)(!1),[a,s]=(0,g.useState)(null),{token:n}=(0,y.d4)((e=>e[W.X.AUTH])),l={Authorization:`Bearer ${n}`,"Content-Type":Q.yw.APPLICATION_JSON},i=new Q.Ay,r=(0,g.useCallback)((async e=>{const s=`${Y.H.ORDERS}/order-bom/${e}/`;try{return t(!0),(await i.get(s,{},l)).data}catch(a){console.error(a.message||"Error in fetching BOM by id")}finally{t(!1)}}),[i,l]);return{loading:e,error:a,fetchBOM:r}})(),[r,o]=(0,g.useState)(),[d,c]=(0,g.useState)(0),[u,m]=(0,g.useState)(0),[h,p]=(0,g.useState)(!1),[x,w]=(0,g.useState)({});return(0,g.useEffect)((()=>{t.get("orderId")&&n(t.get("orderId")).then((e=>s(e.items)))}),[]),(0,q.jsxs)("div",{className:"mx-3 my-2 mp-instruction-layout",children:[(0,q.jsxs)("div",{className:"mp-instruction-header",children:[(0,q.jsx)(Oa,{}),(0,q.jsx)("p",{className:"instruction-text",children:"Please follow the instruction to complete the Material Planning for this Order ID"})]}),(0,q.jsx)("div",{className:"instruction-layout-body",children:(0,q.jsx)(xa,{edit:h,columns:[{id:1,title:"Material Code",render:e=>e.material_code},{id:2,title:"Material Name",render:e=>e.material_name},{id:3,title:"Qty",render:e=>e.quantity}],rows:a,rowsPerPage:5,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:u,setPage:m,paginator:!0,serialize:!0,total:d})}),(0,q.jsxs)("div",{className:"material-planner-layout-footer",children:[(0,q.jsx)(fa,{onClick:()=>e("/material-planner"),white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"Back"}),(0,q.jsx)(fa,{onClick:async()=>{console.log("submit");e(`/material-planner-plan/scanning?orderId=${t.get("orderId")}&orderStatus=${t.get("orderStatus")}&orderType=${t.get("orderType")}&orderOrderId=${t.get("orderOrderId")}`)},color:"green",width:"8rem",height:"2.5rem",children:"Plan"})]})]})},La=e=>{let{kitting:t=!1,payload:a}=e;const[s,n]=(0,g.useState)(!1),[l,i]=(0,g.useState)(null);(0,g.useEffect)((()=>{r(),console.log("payload",a)}),[]);const r=async()=>{try{const e=(await navigator.usb.getDevices()).filter((e=>4611===e.vendorId));if(e.length>0){const t=e[0];console.log("Auto-connecting to device:",t),await t.open(),null===t.configuration&&await t.selectConfiguration(1),await t.claimInterface(0),i(t),n(!0),console.log("Auto-connected to printer:",t)}else k.oR.error("No previously printer devices found."),console.log("No previously connected devices found.")}catch(Ue){console.error("Error during auto-connect:",Ue),k.oR.error("Error during auto-connect:",Ue)}},o=async e=>{if(l)try{const t=(new TextEncoder).encode(e);await l.transferOut(1,t),console.log("Command sent:",e)}catch(Ue){k.oR.error("Error sending command to printer:",Ue),console.error("Error sending command to printer:",Ue)}else console.log("No printer connected.")};return(0,q.jsx)("div",{children:s?(0,q.jsxs)("div",{children:[(0,q.jsxs)("p",{children:["Printer connected: ",(null===l||void 0===l?void 0:l.productName)||"TSC Printer"]}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>{if(!0===t){const e=`\n            SPEED 2\n            DENSITY 12\n            SIZE 3:2\n            GAP 0,0\n            DIRECTION 1\n            CLS\n            FONT 0,0,1,0,0,""\n            TEXT 110,30,"4",0,1,1,"Dhoot Transmission"\n            TEXT 70,100,"2",0,1,1,"FG CODE : ${a[0].Fg_Code}"\n            TEXT 70,150,"2",0,1,1,"ORDER No : ${a[0].Order_no}"\n            TEXT 70,200,"2",0,1,1,"QUANTITY: ${a[0].Quantity}"\n            QRCODE 420,200,M,4,A,0,M2,"${a[0].QR_DATA}"\n            PRINT 1,1\n            `;o(e),console.log("kitting Payload".kitting)}else a.map((e=>{const t=`\n                SPEED 2\n                DENSITY 12\n                SIZE 3:2\n                GAP 0,0\n                DIRECTION 1\n                CLS\n                FONT 0,0,1,0,0,""\n                TEXT 110,30,"4",0,1,1,"Dhoot Transmission"\n                TEXT 70,100,"2",0,1,1,"Part No : ${e.material_code}"\n                TEXT 70,150,"2",0,1,1,"GRN No : ${e.grn_number}"\n                TEXT 70,200,"2",0,1,1,"GRN Date : ${be()(e.grn_date).format("ll")}"\n                TEXT 70,250,"2",0,1,1,"QUANTITY : ${e.quantity}"\n                QRCODE 420,200,M,4,A,0,M2,"${e.QR_DATA}"\n                PRINT 1,1\n                `;o(t),console.log("packetBreaking Payload".packetBreaking)}))},children:"Print Label"})]}):(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{try{const e=await navigator.usb.requestDevice({filters:[{vendorId:4611}]});await e.open(),null===e.configuration&&await e.selectConfiguration(1),console.log("Available interfaces:",e.configuration.interfaces),await e.claimInterface(0),console.log("claimInterface"),i(e),n(!0),k.oR.success("Printer connected"),console.log("Printer connected manually:",e)}catch(Ue){console.error("Failed to connect to printer manually:",Ue),k.oR.error("Failed to connect to printer manually:",Ue)}},children:"Connect to Printer"})})},Ma=e=>{let{qty1:t=0,qty2:a=0,label1:s="",label2:n="",noStepFn:l=()=>{},nextStepFn:i=()=>{}}=e;(0,g.useRef)();const[r,o]=(0,g.useState)(null);return(0,g.useEffect)((()=>{const[e,t,a,l,i]=s.split("#"),[r,d,c,u,m]=n.split("#"),h=[{head:"Dhoot Transmission",material_code:e,quantity:t,unit:a,grn_number:l,grn_date:i,QR_DATA:s},{head:"Dhoot Transmission",material_code:r,quantity:d,unit:c,grn_number:u,grn_date:m,QR_DATA:n}];console.log("transformedKittingLabelDataArray",h),o(h)}),[]),(0,q.jsxs)("div",{className:"action_modal__container",children:[(0,q.jsx)("div",{children:(0,q.jsx)("img",{src:"/error_outline.svg",alt:"icon"})}),(0,q.jsx)("span",{children:"Please break the packet into 2 parts: "}),(0,q.jsxs)("span",{children:["First one with ",(0,q.jsx)("strong",{children:t})," units, and second one with"," ",(0,q.jsx)("strong",{children:a})," units."," "]}),(0,q.jsxs)("span",{children:["Then, please paste label: ",(0,q.jsx)("strong",{children:s})," on the first packet,"]}),(0,q.jsxs)("span",{children:["and label: ",(0,q.jsx)("strong",{children:n})," on the second packet."," "]}),(0,q.jsx)(La,{kitting:!1,payload:r}),(0,q.jsx)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:(0,q.jsx)(fa,{onClick:i,color:"green",width:"16rem",height:"2.5rem",children:"I have pasted new labels"})})]})},Ua=e=>{let{orderId:t=null,getKittingLabel:a=()=>{},noStepFn:s=()=>{},nextStepFn:n=()=>{}}=e;(0,g.useRef)();const[l,i]=(0,g.useState)(null);return(0,g.useEffect)((()=>{a(t).then((e=>{console.log("getKittingLabel data",e);const t=[{head:"Dhoot Transmission",Fg_Code:e.fg_code,Order_no:e.order_no.toString(),Quantity:e.quantity.toString(),QR_DATA:e.label}];console.log("transformedKittingLabelDataArray",t),i(t)}))}),[]),(0,q.jsxs)("div",{className:"action_modal__container",children:[(0,q.jsx)("div",{children:(0,q.jsx)("img",{src:"/error_outline.svg",alt:"icon"})}),(0,q.jsxs)("div",{style:{marginBottom:"5vw"},children:[(0,q.jsx)("strong",{children:"Do you want to print kitting Label for this order?"})," "]}),(0,q.jsx)(La,{kitting:!0,payload:l}),(0,q.jsx)("div",{style:{gap:"2.5rem",display:"flex",flexDirection:"row"},children:(0,q.jsx)(fa,{onClick:s,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"No"})})]})},za=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n}=e;const[l,i]=(0,g.useState)(null),{getFailureReasons:r}=ba(),[o,d]=(0,g.useState)(null);return(0,g.useEffect)((()=>{r().then((e=>{console.log("getFailureReasons data",e),i(e)}))}),[]),(0,q.jsx)("div",{className:"action_modal__container",children:(0,q.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem",display:"flex",flexDirection:"column"},children:[(0,q.jsxs)("form",{style:{gap:"1rem",display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%"},children:[(0,q.jsx)("p",{style:{margin:"0",alignSelf:"center",fontWeight:"600"},children:"Partially Fulfilled Order Detected"}),(0,q.jsx)("p",{style:{margin:"0",alignSelf:"center",fontSize:"0.85rem"},children:"Please select the method to replenish and proceed as per guidelines"})," ",l&&Object.entries(l).map((e=>{let[t,a]=e;return(0,q.jsxs)("div",{children:[" ",(0,q.jsxs)("label",{children:[" ",(0,q.jsx)("input",{type:"checkbox",value:t,checked:o===t,onChange:()=>(e=>{d(e)})(t)})," ",a.name," "]})," "]},t)}))," "]}),(0,q.jsxs)("div",{style:{gap:"2.5rem",display:"flex",flexDirection:"row"},children:[(0,q.jsx)(fa,{onClick:s,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"Cancel"}),(0,q.jsx)(fa,{onClick:()=>n(o,l[o].resolution_date_required,l[o].name),color:"green",width:"8rem",height:"2.5rem",disabled:null===o,children:"Submit"})]})]})})},Fa=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n}=e;return(0,q.jsx)("div",{className:"action_modal__container",children:(0,q.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"1rem",display:"flex",flexDirection:"column"},children:[(0,q.jsx)("p",{children:"Failure Reason has been submitted successfully!"}),(0,q.jsx)("p",{children:"An email has also been sent to the supervisor regarding this."}),(0,q.jsx)(fa,{onClick:n,color:"green",width:"8rem",height:"2.5rem",children:"OK"})]})})},Ha=e=>{let{noStepFn:t,nextStepFn:a}=e;const[s,n]=(0,g.useState)({username:"",password:""}),l=e=>{const{name:t,value:a}=e.target;n({...s,[t]:a})},i=e=>{e.preventDefault(),a(s.username,s.password)};return(0,q.jsx)("div",{className:"action_modal__container",children:(0,q.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem",display:"flex",flexDirection:"column"},children:[(0,q.jsxs)("div",{children:[(0,q.jsx)("p",{children:"Supervisor Login is required to proceed further."}),(0,q.jsx)("p",{style:{display:"flex",justifyContent:"center"},children:(0,q.jsx)("strong",{children:"Please Login."})})]}),(0,q.jsxs)("form",{onSubmit:i,style:{gap:"2.5rem",display:"flex",flexDirection:"column"},children:[(0,q.jsxs)("div",{children:[(0,q.jsx)("label",{htmlFor:"username",style:{marginRight:"0.5rem"},children:"Username:"}),(0,q.jsx)("input",{type:"text",id:"username",name:"username",value:s.username,onChange:l,required:!0})]}),(0,q.jsxs)("div",{children:[(0,q.jsx)("label",{htmlFor:"password",style:{marginRight:"0.5rem"},children:"Password:"}),(0,q.jsx)("input",{type:"password",id:"password",name:"password",value:s.password,onChange:l,required:!0})]}),(0,q.jsxs)("div",{style:{gap:"2.5rem",display:"flex"},children:[(0,q.jsx)(X.A,{onClick:t,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"Cancel"}),(0,q.jsx)(X.A,{onClick:i,color:"green",width:"8rem",height:"2.5rem",disabled:!s.username||!s.password,children:"Submit"})]})]})]})})},qa=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n}=e;return(0,q.jsx)("div",{className:"action_modal__container",children:(0,q.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:".5rem",display:"flex",flexDirection:"column"},children:[(0,q.jsx)("p",{children:"Thank you for your input."}),(0,q.jsxs)("p",{style:{textAlign:"center"},children:["Please close this modal and click ",(0,q.jsx)("strong",{children:"Submit"})," button at the bottom of page to issue the materials for this order."]}),(0,q.jsx)(X.A,{onClick:n,color:"green",width:"8rem",height:"2.5rem",children:"Close"})]})})},Ga=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n,message:l}=e;return(0,q.jsx)("div",{className:"action_modal__container",children:(0,q.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:".5rem",display:"flex",flexDirection:"column"},children:[(0,q.jsx)("p",{style:{textAlign:"center"},children:l}),(0,q.jsx)(fa,{onClick:n,color:"blue",width:"8rem",height:"2.5rem",children:"OK"})]})})},Ba=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n}=e;const[l,i]=(0,g.useState)(null),r=(0,g.useRef)(null);(0,g.useEffect)((()=>{r.current.focus()}),[]);return(0,q.jsxs)("div",{className:"action_modal__container",children:[(0,q.jsx)("p",{style:{fontWeight:"600",fontSize:"1.2rem"},children:"Stock Transfer"}),(0,q.jsx)("p",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Please scan the barcode of the substitute material to proceed."}),(0,q.jsx)("div",{children:(0,q.jsx)("input",{ref:r,type:"text",onKeyPress:e=>{"Enter"===e.key&&(console.log("Scanned Barcode:",e.target.value),i(e.target.value),a(e.target.value),e.target.value="")},style:{width:"100%",padding:"10px",fontSize:"16px"},placeholder:"Scan or type available barcode here"})}),l&&(0,q.jsxs)("p",{children:["Scanned: ",l]}),(0,q.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,q.jsx)(fa,{onClick:s,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"Cancel"}),(0,q.jsx)(fa,{onClick:n,color:"green",width:"8rem",height:"2.5rem",disabled:null===l,children:"Submit"})]})]})},Qa=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n,materialCodes:l}=e;console.log("materialCodes",l);const[i,r]=(0,g.useState)("");return(0,q.jsxs)("div",{className:"action_modal__container",children:[(0,q.jsx)("p",{style:{fontWeight:"600",fontSize:"1.2rem"},children:"Stock Transfer"}),(0,q.jsx)("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Please select the material to substitute (stock transfer)."}),(0,q.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignContent:"start",width:"100%",gap:"1vw"},children:[l.map(((e,t)=>(0,q.jsxs)("div",{style:{display:"flex",gap:"1vw",alignItems:"baseline"},children:[(0,q.jsx)("input",{type:"radio",id:`material-${t}`,name:"materialCode",value:e,checked:i===e,onChange:()=>(e=>{r(e)})(e)}),(0,q.jsx)("label",{htmlFor:`material-${t}`,children:e})]},t))),(0,q.jsx)("div",{})]}),(0,q.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,q.jsx)(fa,{onClick:s,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"Cancel"}),(0,q.jsx)(fa,{onClick:()=>{n(i)},color:"green",width:"8rem",height:"2.5rem",children:"Submit"})]})]})},Ya=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n,materialCodes:l}=e;console.log("materialCodes",l);const[i,r]=(0,g.useState)(null);return(0,q.jsxs)("div",{className:"action_modal__container",children:[(0,q.jsx)("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Please select the reference material"}),(0,q.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignContent:"start",width:"100%",gap:"1vw"},children:[l&&l.map(((e,t)=>(0,q.jsxs)("div",{style:{display:"flex",gap:"1vw",alignItems:"baseline"},children:[(0,q.jsx)("input",{type:"radio",id:`material-${t}`,name:"materialCode",value:e,checked:i===e,onChange:()=>(e=>{r(e)})(e)}),(0,q.jsx)("label",{htmlFor:`material-${t}`,children:e})]},t))),(0,q.jsx)("div",{})]}),(0,q.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,q.jsx)(fa,{onClick:s,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"Cancel"}),(0,q.jsx)(fa,{onClick:()=>{n(i)},color:"green",width:"8rem",height:"2.5rem",disabled:null===i,children:"Submit"})]})]})},Wa=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n}=e;const[l,i]=(0,g.useState)(null),r=(new Date).toISOString().split("T")[0];return(0,q.jsxs)("div",{className:"action_modal__container",children:[(0,q.jsx)("span",{style:{fontWeight:"600",fontSize:"1.1rem"},children:"Please input the resolution date"}),(0,q.jsx)("input",{type:"date",value:l,onChange:e=>{i(e.target.value)},min:r,style:{margin:"1rem 0",padding:"0.5rem",fontSize:"1rem"}}),(0,q.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"2.5rem"},children:[(0,q.jsx)(fa,{onClick:s,white:!0,width:"8rem",height:"2.5rem",bordered:!0,customStyle:{border:"1px solid #3E3E3E",backgroundColor:"#FFFFFF"},children:"Cancel"}),(0,q.jsx)(fa,{onClick:()=>{n(l)},color:"green",width:"8rem",height:"2.5rem",disabled:null===l,children:"Submit"})]})]})},Va=e=>{let{onClose:t,onScan:a,noStepFn:s,nextStepFn:n,newLabel:l}=e;(0,g.useRef)();const[i,r]=(0,g.useState)(null);return(0,g.useEffect)((()=>{const[e,t,a,s,n]=l.split("#"),i=[{head:"Dhoot Transmission",material_code:e,quantity:t,unit:a,grn_number:s,grn_date:n,QR_DATA:l}];console.log("transformedKittingLabelDataArray",i),r(i)}),[]),(0,q.jsx)("div",{className:"action_modal__container",children:(0,q.jsxs)("div",{className:"material-planner-layout-footer",style:{gap:"1rem",display:"flex",flexDirection:"column"},children:[(0,q.jsx)("p",{children:"Stock Transfer Success!"}),(0,q.jsx)("p",{children:"Please paste the following new label on the scanned packet."}),(0,q.jsx)("p",{children:(0,q.jsx)("strong",{children:l})}),(0,q.jsx)(La,{kitting:!1,payload:i}),(0,q.jsx)(fa,{onClick:n,color:"blue",width:"8rem",height:"2.5rem",children:"OK"})]})})};const Xa=function(e){let{orderId:t}=e;const a=(0,N.Zp)(),[s,n]=(0,ha.ok)(),[l,i]=(0,g.useState)({submitLoading:!1,submitDisabled:!0}),[r,o]=(0,g.useState)(!0),[d,c]=(0,g.useState)(!0),[u,m]=(0,g.useState)(!1),[h,p]=(0,g.useState)([]),{fetchMaterialsRequired:x,setOrderHoldQuantity:w,updateOrderState:j,generateLabels:f,submitFailureReason:A,supervisorLogin:v,stockTransfer:S,getKittingLabel:b,printLabels:C,error:_,loading:k}=ba(),{verifyMaterial:I,error:E,loading:T}=(()=>{const[e,t]=(0,g.useState)(!1),[a,s]=(0,g.useState)(null),{token:n}=(0,y.d4)((e=>e[W.X.AUTH])),l={Authorization:`Bearer ${n}`,"Content-Type":Q.yw.APPLICATION_JSON},i=new Q.Ay,r=(0,g.useCallback)((async(e,s,n,r)=>{const o=`${Y.H.ORDERS}/material-verifier/${e}/`,d={material_code:s,grn_number:n,quantity:r};try{return t(!0),(await i.post(o,d,l)).data}catch(a){console.error(a.message||"Error in verifying material")}finally{t(!1)}}),[i,l]);return{loading:e,error:a,verifyMaterial:r}})(),[D,R]=(0,g.useState)({}),[P,O]=(0,g.useState)(),[$,L]=(0,g.useState)(0),[M,U]=(0,g.useState)(!1),[z,F]=(0,g.useState)(!1),[H,G]=(0,g.useState)(""),[B,V]=(0,g.useState)(""),[X,Z]=(0,g.useState)({material_on_hold:{}}),{getOrderHoldQuantity:K,submitBOM:te}=Sa(),[ae,se]=(0,g.useState)(!1),[ne,le]=(0,g.useState)(null),[ie,re]=(0,g.useState)(null),[oe,de]=(0,g.useState)(!1),[ce,ue]=(0,g.useState)(!1),[me,he]=(0,g.useState)(!1),[pe,xe]=(0,g.useState)(!1),[ge,we]=(0,g.useState)(""),[ye,je]=(0,g.useState)(!1),[fe,Ae]=(0,g.useState)(!1),[ve,Se]=(0,g.useState)(null),[be,Ce]=(0,g.useState)(!1),[_e,Ne]=(0,g.useState)(!1),[ke,Ie]=(0,g.useState)(!1),[Ee,Te]=(0,g.useState)(!1),[De,Re]=(0,g.useState)(!1),[Pe,Oe]=(0,g.useState)(null),[$e,Le]=(0,g.useState)(null),[Me,ze]=(0,g.useState)(null),[Fe,He]=(0,g.useState)(null),[qe,Ge]=(0,g.useState)(null),Be=(0,g.useRef)(null),Qe=[{id:1,title:"Material",render:e=>e.material_name},{id:2,title:"Location",render:e=>e.location},{id:3,title:"Required Qty",render:e=>e.required},{id:4,title:"Collected Qty",render:e=>(0,q.jsx)("div",{children:(0,q.jsxs)("span",{children:[e.collected," ",""]})})}],Ye=e=>{const t=e.filter((e=>e.required>e.collected));return t.length>0?t.map((e=>e.material_code)):[]},We=e=>{G(e)},Ve=(e,t,a)=>{Z((l=>{const i=JSON.parse(JSON.stringify(X));i.material_on_hold[e]?i.material_on_hold[e]=[...i.material_on_hold[e],{grn_number:t,quantity:a}]:i.material_on_hold[e]=[{grn_number:t,quantity:a}];const r=s.get("orderId");return w(r,i).then((e=>{j(r,"ISSUING").then((e=>{s.set("orderStatus","ISSUING"),n(s)}))})),i}))};return(0,g.useEffect)((()=>{s.get("orderId")&&x(s.get("orderId")).then((e=>{if("RUNNING"!==s.get("orderStatus")&&Be.current.focus(),"PLAN"===s.get("orderStatus")){const t=e.items.map((e=>({...e,collected:0})));p(t);const a=Ye(t);Oe(a)}if("ISSUING"===s.get("orderStatus")||"RUNNING"===s.get("orderStatus")){const t=e.items;K(s.get("orderId")).then((e=>{Z({material_on_hold:e});const a=((e,t)=>t.map((t=>{const a=t.material_code;let s=0;return e[a]&&(s=e[a].reduce(((e,t)=>e+t.quantity),0)),{...t,collected:s}})))(e,t);p(a);const s=Ye(a);Oe(s)}))}"RUNNING"===s.get("orderStatus")&&(o(!1),c(!1),m(!0))}))}),[]),(0,g.useEffect)((()=>{const e=Ye(h);Oe(e)}),[h]),(0,g.useEffect)((()=>{H&&(e=>{const[t,a,n,l,i]=e.split("#"),r=parseFloat(a),o=s.get("orderType"),d=h.find((e=>e.material_code===t));if(void 0===d)return;const c=d.required-d.collected,u=d.break_packet;if("ASSEMBLY"==o){if(0===c)return we("Item already collected in full required quantity. Please scan a different item or submit the order."),void xe(!0);if(c&&r>c&&u){const e=r-c;return void f(t,l,i,n,c,e).then((t=>{t&&(R({qty1:c,qty2:e,label1:t.label1,label2:t.label2}),U(!0))}))}}I(s.get("orderId"),t,l,r).then((e=>{if(e&&"OK"===e.message){if("ASSEMBLY"==o&&(r<=c||!u)&&(p((e=>e.map((e=>e.material_code===t?{...e,collected:e.collected+r}:e)))),Ve(t,l,r)),"ACC"===o||"LPC"===o){const e=h.map((e=>e.material_code===t?{...e,collected:e.collected+r}:e));p(e),Ve(t,l,r)}}else we("Incorrect bar code. Please try again with different bar code."),xe(!0)})).catch((e=>{we(e),xe(!0)})),G(null)})(H)}),[H]),(0,q.jsxs)("div",{className:"mx-3 my-2 mp-instruction-layout",children:[(0,q.jsx)("div",{className:"mp-instruction-header",children:d&&(0,q.jsxs)("div",{style:{display:"flex",alignItems:"center",position:"fixed",top:"60px",left:"200px",marginLeft:"1rem",width:"60vw",height:"3rem",backgroundColor:"white",padding:"10px",zIndex:1e3},children:[(0,q.jsx)("p",{className:"instruction-text",style:{marginRight:"10px"},children:"Please Scan the Barcode or enter Qty"}),(0,q.jsx)("input",{ref:Be,type:"text",onKeyPress:e=>{"Enter"===e.key&&(We(e.target.value),e.target.value="")},style:{width:"100%",padding:"10px",fontSize:"16px"},placeholder:"Click here and Scan or Type barcode here"})]})}),(0,q.jsxs)("div",{className:"instruction-layout-body",children:[(0,q.jsx)(Oa,{}),(0,q.jsx)(xa,{columns:Qe,rows:h,rowsPerPage:5,loading:"fetch"===P,titleCellClasses:"c-gray fw-700",page:$,setPage:L,paginator:!0,serialize:!0,total:0})]}),(0,q.jsxs)("div",{className:"material-planner-layout-footer",children:[(0,q.jsx)(fa,{onClick:async()=>{const e=s.get("orderId"),t=s.get("orderType");try{if("ASSEMBLY"===t&&!ye&&0!==Pe.length)return void se(!0);j(e,"RUNNING").then((s=>{te(e,{material_issue:X.material_on_hold}).then((e=>{"ASSEMBLY"!==t?a("/material-planner/"):F(!0)}))}))}catch(Ue){we(Ue.message),xe(!0)}},disabled:!r,color:"green",width:"8rem",height:"2.5rem",loading:l.submitLoading,customStyle:{backgroundColor:"#86D56A"},children:"Submit"}),u&&(0,q.jsx)(fa,{onClick:()=>{const e=document.createElement("table"),t=document.createElement("tr");["S.no","Material Code","Quantity","GRN Number"].forEach((e=>{const a=document.createElement("th");a.textContent=e,t.appendChild(a)})),e.appendChild(t);let a=1;for(const n in X.material_on_hold)X.material_on_hold[n].forEach((t=>{const s=document.createElement("tr"),l=document.createElement("td");l.textContent=a++,s.appendChild(l);const i=document.createElement("td");i.textContent=n,s.appendChild(i);const r=document.createElement("td");r.textContent=t.quantity,s.appendChild(r);const o=document.createElement("td");o.textContent=t.grn_number,s.appendChild(o),e.appendChild(s)}));const s=window.open("","_blank");s.document.write("<html><head><title>Print Table</title><style>table { width: 100%; border-collapse: collapse; }th, td { border: 1px solid #dddddd; text-align: center; padding: 8px; }th { background-color: #f2f2f2; }tr:nth-child(even) { background-color: #f9f9f9; }tr:nth-child(odd) { background-color: #ffffff; }</style></head><body>"),s.document.write(e.outerHTML),s.document.write("</body></html>"),s.document.close(),s.print()},color:"green",width:"10rem",height:"2.5rem",loading:l.submitLoading,children:"Print Hold Quantity"})]}),M&&(0,q.jsx)(J.A,{open:M,onClose:()=>U(!1),width:"75vw",top:"5vh",hideCloseIcon:ee.A,children:(0,q.jsx)(Ma,{qty1:D.qty1,qty2:D.qty2,label1:D.label1,label2:D.label2,noStepFn:()=>{U(!1)},nextStepFn:()=>{U(!1)}})}),z&&(0,q.jsx)(J.A,{open:z,onClose:()=>F(!1),width:"75vw",top:"5vh",hideCloseIcon:ee.A,children:(0,q.jsx)(Ua,{orderId:s.get("orderId"),getKittingLabel:b,noStepFn:()=>{F(!1),a("/material-planner/")},nextStepFn:()=>{const e=s.get("orderId");b(e).then((e=>{const t=[{head:"Dhoot Transmission",Fg_Code:e.fg_code,Order_no:e.order_no.toString(),Quantity:e.quantity.toString(),QR_DATA:e.label}];C(t).then((e=>{F(!1),a("/material-planner/")}))}))}})}),ae&&(0,q.jsxs)(J.A,{open:ae,onClose:()=>se(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,q.jsx)(za,{noStepFn:()=>{se(!1)},nextStepFn:(e,t,a)=>{if(le(t),a&&He(a),e&&"Stock Transfer"===a)return se(!1),ze(e),V(null),void Ne(!0);e&&(ze(e),se(!1),Ie(!0))}})," "]}),_e&&(0,q.jsxs)(J.A,{open:_e,onClose:()=>Ne(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,q.jsx)(Qa,{noStepFn:()=>{Ne(!1)},nextStepFn:e=>{if(Le(e),Ge(e),Ne(!1),fe){if(fe){const e=s.get("orderId");A(e,qe,Me,ve,ie).then((e=>{e&&Ce(!0)})).catch((e=>{ue(!1),se(!0)}))}}else ue(!0)},materialCodes:Pe})," "]}),ke&&(0,q.jsxs)(J.A,{open:ke,onClose:()=>Ie(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,q.jsx)(Ya,{noStepFn:()=>{Ie(!1)},nextStepFn:e=>{if(Ge(e),ne)ne&&(Ie(!1),Te(!0));else if(Ie(!1),fe){if(fe){const t=s.get("orderId");A(t,e,Me,ve).then((t=>{if(t)if("Stock Transfer"!==Fe){const t=Pe.filter((t=>t!==e));Oe(t),0===t.length?he(!0):se(!0)}else"Stock Transfer"===Fe&&Ce(!0)})).catch((e=>{ue(!1),se(!0)}))}}else ue(!0)},materialCodes:Pe})," "]}),Ee&&(0,q.jsxs)(J.A,{open:Ee,onClose:()=>Te(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,q.jsx)(Wa,{noStepFn:()=>{Te(!1)},nextStepFn:e=>{if(re(e),Te(!1),fe){if(fe){const t=s.get("orderId");A(t,qe,Me,ve,e).then((e=>{if(e)if("Stock Transfer"!==Fe){const e=Pe.filter((e=>e!==qe));Oe(e),0===e.length?he(!0):se(!0)}else"Stock Transfer"===Fe&&Ce(!0)})).catch((e=>{ue(!1),se(!0)}))}}else ue(!0)}})," "]}),oe&&(0,q.jsxs)(J.A,{open:oe,onClose:()=>de(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,q.jsx)(Fa,{nextStepFn:()=>{de(!1),ue(!0)}})," "]}),ce&&(0,q.jsxs)(J.A,{open:ce,onClose:()=>ue(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,q.jsx)(Ha,{noStepFn:()=>{ue(!1)},nextStepFn:(e,t)=>{v(e,t).then((t=>{if(t&&"Authentication successful"===t.message){ue(!1),Ae(!0),Se(e);const t=s.get("orderId");A(t,qe,Me,e,ie).then((e=>{if(e)if(ue(!1),"Stock Transfer"!==Fe){const e=Pe.filter((e=>e!==qe));Oe(e),0===e.length?he(!0):se(!0)}else"Stock Transfer"===Fe&&Ce(!0)})).catch((e=>{ue(!1),se(!0)}))}}))}})," "]}),pe&&(0,q.jsxs)(J.A,{open:pe,onClose:()=>xe(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,q.jsx)(Ga,{nextStepFn:()=>{xe(!1)},message:ge})," "]}),me&&(0,q.jsxs)(J.A,{open:me,onClose:()=>he(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,q.jsx)(qa,{nextStepFn:()=>{he(!1)}})," "]}),be&&(0,q.jsxs)(J.A,{open:be,onClose:()=>Ce(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,q.jsx)(Ba,{onScan:e=>{e&&V(e)},noStepFn:()=>{Ce(!1)},nextStepFn:()=>{if(B){const[e,t,a,s,n]=B.split("#"),l=parseFloat(t);S($e,e,l,s,a,n).then((e=>{e&&(V(e.label),Ce(!1),Re(!0))}))}}})," "]}),De&&(0,q.jsxs)(J.A,{open:De,onClose:()=>Re(!1),width:"50vw",top:"10vh",hideCloseIcon:!1,children:[" ",(0,q.jsx)(Va,{nextStepFn:()=>{Re(!1)},newLabel:B})," "]})]})},Ja=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{matrixCount:async function(){const e=new Q.Ay,a=await e.get("machining/order-matrix/",{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},orderList:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new Q.Ay,s=await a.get(`machining/all-orders/?page=${e}&page_size=10`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},orderTasks:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new Q.Ay,s=await a.get(`machining/order-tasks/${e}/`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},orderAssetList:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new Q.Ay,s=await a.get(`machining/asset-list/${e}/`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post("orders/issue-extra-material/",e,t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data},update:async(e,a)=>{const s=new Q.Ay,n=await s.put(`orders/update-material-failure/${e}/`,a,t,(e=>(0,B.So)(e,null)));return null===n||void 0===n?void 0:n.data}}},Za=[{id:1,orderID:"100",name:"100_SZXB0601",qty:25,code:"SZXB0601",description:"ACC",orderType:"ACC",status:"Issuing"},{id:2,orderID:"101",name:"200_SZXB0601",qty:25,code:"SZXB0601",description:"Desc",orderType:"LPC",status:"PLAN"},{id:3,orderID:"102",name:"SZXB0601",qty:25,code:"SZXB0601",description:"",orderType:"ASSEMBLY",status:"RUNNING"},{id:4,orderID:"140",name:"HERO887677889",qty:50,code:"HERO887677889",description:"",orderType:"ASSEMBLY",status:"PLAN"},{id:5,orderID:"140",name:"HERO887677889",qty:50,code:"HERO887677889",description:"",orderType:"ASSEMBLY",status:"PLAN"},{id:6,orderID:"140",name:"HERO887677889",qty:50,code:"HERO887677889",description:"",orderType:"ASSEMBLY",status:"PLAN"}],Ka=()=>{const e=(0,N.Zp)(),{fetchOrdersMatrixView:t,fetchOrdersById:a,getOrderHoldQuantity:s,submitBOM:n,error:l,loading:i}=(()=>{const[e,t]=(0,g.useState)(!1),[a,s]=(0,g.useState)(null),{token:n}=(0,y.d4)((e=>e[W.X.AUTH])),l={Authorization:`Bearer ${n}`,"Content-Type":Q.yw.APPLICATION_JSON},i=new Q.Ay,r=(0,g.useCallback)((async function(){let e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,d=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,u=arguments.length>8?arguments[8]:void 0,m=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0,x=`machining/all-orders/?page=${arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}`;e||n||r||o||d||c?x+="&sort_by=":!1!==e&&!1!==n&&!1!==r&&!1!==o&&!1!==d&&!1!==c||(x+="&sort_by="),(arguments.length>7?arguments[7]:void 0).forEach((t=>{switch(t){case"fg_code":switch(e){case!1:console.log("Code is false"),x+=x.endsWith("&sort_by=")?"-fg_code":",-fg_code";break;case!0:console.log("Code is true"),x+=x.endsWith("&sort_by=")?"fg_code":",fg_code";break;default:console.log("Code is an unexpected value")}break;case"order_type":switch(n){case!1:console.log("Order type is false"),x+=x.endsWith("&sort_by=")?"-order_type":",-order_type";break;case!0:console.log("Order type is true"),x+=x.endsWith("&sort_by=")?"order_type":",order_type";break;default:console.log("Order type is an unexpected value")}break;case"status":switch(r){case!1:console.log("Status is false"),x+=x.endsWith("&sort_by=")?"-status":",-status";break;case!0:console.log("Status is true"),x+=x.endsWith("&sort_by=")?"status":",status";break;default:console.log("Status is an unexpected value")}break;case"order_id":switch(o){case!1:console.log("Order ID is false"),x+=x.endsWith("&sort_by=")?"-order_id":",-order_id";break;case!0:console.log("Order ID is true"),x+=x.endsWith("&sort_by=")?"order_id":",order_id";break;default:console.log("Order ID is an unexpected value")}break;case"name":switch(d){case!1:console.log("Name is false"),x+=x.endsWith("&sort_by=")?"-name":",-name";break;case!0:console.log("Name is true"),x+=x.endsWith("&sort_by=")?"name":",name";break;default:console.log("Name is an unexpected value")}break;case"quantity":switch(c){case!1:console.log("Quantity is false"),x+=x.endsWith("&sort_by=")?"-quantity":",-quantity";break;case!0:console.log("Quantity is true"),x+=x.endsWith("&sort_by=")?"quantity":",quantity";break;default:console.log("Quantity is an unexpected value")}break;default:console.log("Unknown column ID:",t)}})),u&&(x+="&order_id=",x+=u),m&&(x+="&fg_code=",x+=m),h&&(x+="&type=",x+=h),p&&(x+="&status=",x+=p),t(!0),s(null);try{return(await i.get(x,{},l)).data}catch(a){s(a.message||"Error in fetchOrders:")}finally{t(!1)}}),[i,l]),o=(0,g.useCallback)((async()=>{const e=`${Y.H.ORDERS}/order-matrix-view/`;t(!0),s(null);try{return(await i.get(e,{},l)).data}catch(a){s(a.message||"Error in fetchOrders:")}finally{t(!1)}}),[i,l]),d=(0,g.useCallback)((async e=>{const s=`${Y.H.ORDERS}/order-details/${e}/`;try{return t(!0),(await i.get(s,{},l)).data}catch(a){console.error(a.message||"Error in fetching orders by id")}finally{t(!1)}}),[i,l]),c=(0,g.useCallback)((async e=>{const s=`${Y.H.ORDERS}/material-on-hold/${e}/`;try{return t(!0),(await i.get(s,{},l)).data}catch(a){console.error(a.message||"Error in getting order on hold quantity")}finally{t(!1)}}),[i,l]),u=(0,g.useCallback)((async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=`${Y.H.ORDERS}/bom-submit/${e}/`;try{return t(!0),(await i.post(n,s,l)).data}catch(a){console.error(a.message||"Error in submitting BOM")}finally{t(!1)}}),[i,l]),m=(0,g.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=`${Y.H.ORDERS}/material-failure-reasons/`,r={reason_name:e,resolution_date_required:s};try{return t(!0),(await i.post(n,r,l)).data}catch(a){console.error(a.message||"Error in getting Failure Reasons")}finally{t(!1)}}),[i,l]);return{loading:e,error:a,fetchOrders:r,fetchOrdersMatrixView:o,fetchOrdersById:d,getOrderHoldQuantity:c,submitBOM:u,postFailureReason:m}})(),{matrixCount:r,orderList:d}=Ja(),[c,u]=(0,g.useState)(1),[m,h]=(0,g.useState)("1"),[p,x]=(0,g.useState)(""),[w,j]=(0,g.useState)(""),[f,A]=(0,g.useState)(""),[v,S]=(0,g.useState)(!1),[b,C]=(0,g.useState)({}),[_,k]=(0,g.useState)(1),[I,E]=(0,g.useState)(null),[T,D]=(0,g.useState)(null),[R,P]=(0,g.useState)(10),[O,$]=(0,g.useState)(null),[L,M]=(0,g.useState)(null),[U,z]=(0,g.useState)(null),[F,H]=(0,g.useState)(null),[G,B]=(0,g.useState)(null),[V,X]=(0,g.useState)(null),[J,Z]=(0,g.useState)(!0),[K,ee]=(0,g.useState)(null),[te,ae]=(0,g.useState)(null),[se,ne]=(0,g.useState)(["order_id"]),[le,ie]=(0,g.useState)(null),[re,oe]=(0,g.useState)(null),[de,ce]=(0,g.useState)(null),[ue,me]=(0,g.useState)(null),[he,pe]=(0,g.useState)([]),[xe,ge]=(0,g.useState)(_),[we,ye]=(0,g.useState)({});(0,g.useState)((()=>{!async function(){let e=await r();console.log("fetchMatrix ---",e),ye(e[0])}(),async function(){let[e]=await d();console.log("all order -------",e),pe(e.results),E(e.count);const t=Math.ceil(e.count/R);D(t),ge(_),e.previous?$(!0):$(!1);e.next?M(!0):M(!1)}()}),[]);const je=Za.filter((e=>(""===p||e.code.toLowerCase().includes(p.toLowerCase()))&&(""===w||e.orderType.toLowerCase().includes(w.toLowerCase()))&&(""===f||e.status.toLowerCase().includes(f.toLowerCase())))),fe=Math.ceil(je.length/5),Ae=()=>{(""===m||isNaN(parseInt(m,10))||parseInt(m,10)<1||parseInt(m,10)>fe)&&h(c.toString())},ve=5*(c-1);je.slice(ve,ve+5);g.useEffect((()=>{u(1),h("1")}),[p,w,f]);return(0,q.jsxs)("div",{children:[(0,q.jsx)("div",{className:"planning-overview-heading",children:"Planning"}),(0,q.jsxs)("div",{className:"planning-overview-metrics-container",children:[(0,q.jsxs)("div",{className:"planning-metrics-box4",children:[(0,q.jsx)("p",{children:"Planned"}),(0,q.jsx)("p",{children:(0,q.jsx)("strong",{children:we.planned})})]}),(0,q.jsxs)("div",{className:"planning-metrics-box1",children:[(0,q.jsx)("p",{children:"Plan"}),(0,q.jsx)("p",{children:(0,q.jsx)("strong",{children:we.plan})})]}),(0,q.jsxs)("div",{className:"planning-metrics-box2",children:[(0,q.jsx)("p",{children:"Running"}),(0,q.jsx)("p",{children:(0,q.jsx)("strong",{children:we.running})})]}),(0,q.jsxs)("div",{className:"planning-metrics-box3",children:[(0,q.jsx)("p",{children:"Completed"}),(0,q.jsx)("p",{children:(0,q.jsx)("strong",{children:we.completed})})]}),(0,q.jsxs)("div",{className:"planning-last-refresh",children:[(0,q.jsxs)("div",{className:"planning-left-part",children:[(0,q.jsx)("p",{children:"Last Refresh"}),(0,q.jsx)("p",{children:"12/29/2024, 4:31:53 PM"})]}),(0,q.jsx)("div",{className:"planning-right-part",children:(0,q.jsx)(o.A,{children:(0,q.jsx)(pa.A,{})})})]})]}),(0,q.jsx)("div",{style:{padding:10},children:(0,q.jsx)(xa,{columns:(e=>[{id:"order_id",title:"Order ID "+(!0===J?"\u2191":!1===J?"\u2193":"\u2191\u2193"),render:e=>(0,q.jsx)("span",{style:{cursor:"pointer",color:"blue"},children:e.order_id})},{id:"name",title:"Name "+(!0===K?"\u2191":!1===K?"\u2193":"\u2191\u2193"),render:e=>e.name},{id:"quantity",title:"Qty",title:"Qty "+(!0===te?"\u2191":!1===te?"\u2193":"\u2191\u2193"),render:e=>e.quantity},{id:"fg_code",title:"Code "+(!0===F?"\u2191":!1===F?"\u2193":"\u2191\u2193"),render:e=>e.fg_code},{id:5,title:"Description",render:e=>e.fg_description},{id:"order_type",title:"Order type "+(!0===G?"\u2191":!1===G?"\u2193":"\u2191\u2193"),render:e=>e.order_type},{id:"status",title:"Status "+(!0===V?"\u2191":!1===V?"\u2193":"\u2191\u2193"),render:e=>(0,q.jsx)(wa,{capsuleText:e.running_status})},{id:9,title:"Action",render:t=>(0,q.jsx)("img",{src:Aa,style:{width:"2.78vw",height:"2.78vw",cursor:"pointer"},alt:"Action Icon",onClick:()=>e("/planning-material-plan",{state:t})})}])(e),rows:he,rowsPerPage:R,loading:i,titleCellClasses:"c-gray fw-700",page:_-1,serialize:!0,total:I})}),(0,q.jsxs)("div",{className:"planning-footer-container",children:[(0,q.jsx)("button",{onClick:()=>{if(c>1){const e=c-1;u(e),h(e.toString())}},disabled:1===c,children:"Prev"}),(0,q.jsxs)("div",{className:"planning-overview-page-details",children:[(0,q.jsx)("h1",{children:"Page"}),(0,q.jsx)("input",{type:"number",className:"planning-page-number-input",value:m,onChange:e=>{const t=e.target.value;h(t);const a=parseInt(t,10);!isNaN(a)&&a>=1&&a<=fe&&u(a)},onBlur:Ae,min:"1",max:fe}),(0,q.jsx)("h1",{children:"Of"}),(0,q.jsx)("p",{children:fe})]}),(0,q.jsx)("button",{onClick:()=>{if(c<fe){const e=c+1;u(e),h(e.toString())}},disabled:c===fe,children:"Next"})]})]})},es=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d,assetsList:c}=e;const{orderAssetList:u}=Ja(),m=[{title:"Machines",placeholder:"Select Machine",type:F.wN.SELECT,name:"machine",validator:F.wY.REQUIRED,keyValues:c}],[h,p]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsx)("h3",{className:"opacity-80",children:"Assign To Machine"}),(0,q.jsx)(Z.A,{data:s,errors:h,onChange:e=>{const{name:t,value:a}=e.target;p((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:m}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{const e=(0,K.bG)(m,s);p(e),e.size||(console.log("handleSubmit----------",s.reason),await r())},loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("submit")})})]})]})};const ts=function(){const e=(0,N.Zp)(),t=(0,N.zy)(),a=null===t||void 0===t?void 0:t.state,[s,n]=(0,g.useState)([]),{orderTasks:l,orderAssetList:i}=Ja(),[r,d]=(0,g.useState)(),[c,u]=(0,g.useState)(0),[m,h]=(0,g.useState)(0),[p,x]=(0,g.useState)(!1),[w,y]=(0,g.useState)({rowData:{}}),[j,f]=(0,g.useState)(),[A,v]=(0,g.useState)(new Map);(0,g.useEffect)((()=>{!async function(){let[e]=await l(m,null===a||void 0===a?void 0:a.id);console.log("circuit data----",m,a),n(e.circuits)}(),async function(){let[e]=await i(1,null===a||void 0===a?void 0:a.id);console.log("asset list-------",e);const t=e.map((e=>({value:e.name,key:e.id})));f(t)}()}),[]);const S=[{placeholder:"Select Machine",type:F.wN.SELECT,name:"machine",validator:F.wY.REQUIRED,keyValues:j,width:"200px"}],b=[{id:1,title:"Circuit Code",render:e=>{var t;return null===(t=e.circuit_information)||void 0===t?void 0:t.circuit_code}},{id:2,title:"Circuit Name",render:e=>{var t;return null===(t=e.circuit_information)||void 0===t?void 0:t.name}},{id:3,title:"Qty",render:e=>e.quantity},{id:4,title:"Action",render:e=>(0,q.jsx)(Z.A,{data:w,errors:A,onChange:C,schema:S})}],C=e=>{const{name:t,value:a}=e.target;v((e=>(e.delete(t),e))),y((e=>({...e,[t]:a})))};return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:2},children:[(0,q.jsx)(o.A,{onClick:()=>e(-1),children:(0,q.jsx)(Gt.A,{})}),(0,q.jsxs)("p",{className:"instruction-text",children:[a.name," / ",a.order_id," / ",a.order_type," / ",a.running_status]})]}),(0,q.jsx)(G,{columns:b,rows:s,rowsPerPage:10,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:m,setPage:h,paginator:!0,serialize:!0,total:10,tableBodyColor:F.lm.WHITE}),(0,q.jsx)(es,{open:"add"===p,onClose:()=>{x(!1)},data:w,setData:y,assetsList:j})]})},as=[{id:1,name:"LED 1",code:"QTYPW112",qty:1,vendor:"Sameera Enterprises"},{id:2,name:"Wire 6",code:"QTI99012",qty:1,vendor:"Mayfair Enterprises"},{id:3,name:"Wire12",code:"QTI9911",qty:1,vendor:"Axar Industries"},{id:4,name:"Wire11",code:"QTI99726",qty:1,vendor:"Axar Industries"},{id:5,name:"Wire9",code:"QTI90011",qty:1,vendor:"Axar Industries"},{id:6,name:"Wire3",code:"QTI91423",qty:1,vendor:"Axar Industries"}];function ss(){return(0,q.jsx)(R.A,{sx:{},children:(0,q.jsxs)(I.A,{sx:{borderSpacing:"0 15px",borderCollapse:"separate"},"aria-label":"parts table",children:[(0,q.jsx)(P.A,{children:(0,q.jsxs)(O.A,{sx:{backgroundColor:"#E9EFC5"},children:[(0,q.jsx)(T.A,{sx:{fontSize:"22px",fontWeight:"500"},children:"S. No."}),(0,q.jsx)(T.A,{sx:{fontSize:"22px",fontWeight:"500"},children:"QR Code"}),(0,q.jsx)(T.A,{sx:{fontSize:"22px",fontWeight:"500"},children:"Client"}),(0,q.jsx)(T.A,{sx:{fontSize:"22px",fontWeight:"500"},children:"Date"}),(0,q.jsx)(T.A,{sx:{fontSize:"22px",fontWeight:"500"},children:"Tag"}),(0,q.jsx)(T.A,{sx:{fontSize:"22px",fontWeight:"500"},children:"Comments"})]})}),(0,q.jsx)(E.A,{children:as.map((e=>(0,q.jsxs)(O.A,{sx:{backgroundColor:"#EEEEEE"},children:[(0,q.jsx)(T.A,{sx:{fontSize:"22px",fontWeight:"500"},children:e.id}),(0,q.jsx)(T.A,{sx:{fontSize:"22px",fontWeight:"500"},children:e.name}),(0,q.jsx)(T.A,{sx:{fontSize:"22px",fontWeight:"500"},children:e.code}),(0,q.jsx)(T.A,{sx:{fontSize:"22px",fontWeight:"500"},children:e.qty}),(0,q.jsx)(T.A,{sx:{fontSize:"22px",fontWeight:"500"},children:e.vendor}),(0,q.jsx)(T.A,{sx:{fontSize:"22px",fontWeight:"500"},children:(0,q.jsx)(ha.N_,{to:"/",onClick:t=>{t.preventDefault(),console.log(`Reporting issue for part ${e.id}`)},sx:{color:"#rgba(21, 53, 219, 1)",textDecoration:"none"},children:"View"})})]},e.id)))})]})})}const ns=()=>(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:"issue-search-bar",children:[(0,q.jsx)("h1",{children:"Rework open issues"}),(0,q.jsx)("input",{type:"text",placeholder:"Search"})]}),(0,q.jsx)("div",{className:"issue-table",children:(0,q.jsx)(ss,{})})]});var ls=a(3336),is=a(1888),rs=a(5353),os=a(4256),ds=a(8492),cs=a(3193);const us=(0,Kt.Ay)(T.A)((e=>{let{theme:t}=e;return{[`&.${D.A.head}`]:{backgroundColor:"#D9D9D9",color:"#3E3E3E",fontSize:"clamp(16px, 1.5vw, 20px)",fontWeight:"bold",padding:"20px 16px",borderBottom:"1px"},[`&.${D.A.body}`]:{fontSize:"clamp(14px, 1.2vw, 20px)",padding:"16px",borderBottom:"1px solid #D9D9D9"}}})),ms=(0,Kt.Ay)(O.A)((e=>{let{theme:t}=e;return{"&:last-child td, &:last-child th":{borderBottom:"1px"},"& td, & th":{border:"none",height:"60px"}}})),hs={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,maxWidth:"90%",bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",maxHeight:"90vh",overflowY:"auto"},ps=()=>{const[e,t]=(0,g.useState)(!1),[a,s]=(0,g.useState)(""),[n,l]=(0,g.useState)("Yes"),[i,r]=(0,g.useState)([]),o=()=>t(!1);return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:"add-issue",children:[(0,q.jsx)("h1",{children:"Issues"}),(0,q.jsx)(ja.A,{onClick:()=>t(!0),sx:{backgroundColor:"rgb(217, 217, 217)",color:"#3E3E3E",fontSize:"20px",fontWeight:"500",border:"none",padding:"10px 20px","&:hover":{backgroundColor:"rgb(200, 200, 200)"}},children:"+ Add Issue"})]}),(0,q.jsx)(R.A,{component:ls.A,sx:{width:"auto",marginTop:"10px",overflowX:"auto",borderRadius:0,borderBottom:"1px solid #D9D9D9",boxShadow:"none"},children:(0,q.jsxs)(I.A,{"aria-label":"customized table",sx:{border:"none","& .MuiTableCell-root":{border:"none"}},children:[(0,q.jsx)(P.A,{children:(0,q.jsxs)(O.A,{children:[(0,q.jsx)(us,{sx:{width:"10%"},children:"S No"}),(0,q.jsx)(us,{sx:{width:"45%"},children:"Reason Name"}),(0,q.jsx)(us,{sx:{width:"45%"},children:"Resolution Date Required"})]})}),(0,q.jsx)(E.A,{children:i.map(((e,t)=>(0,q.jsxs)(ms,{children:[(0,q.jsx)(us,{children:t+1}),(0,q.jsx)(us,{children:e.reasonName}),(0,q.jsx)(us,{children:e.resolutionDate})]},e.reasonName)))})]})}),(0,q.jsx)(is.A,{open:e,onClose:o,"aria-labelledby":"add-issue-modal",children:(0,q.jsxs)(h.A,{sx:hs,children:[(0,q.jsxs)("div",{style:{border:"none",display:"flex",justifyContent:"space-between",width:"100%",marginBottom:"20px"},children:[(0,q.jsx)("h2",{style:{fontSize:"24px",margin:0},children:"Add Issue"}),(0,q.jsx)(ja.A,{onClick:o,sx:{minWidth:"auto",marginTop:"-15px",padding:0,"&:hover":{backgroundColor:"transparent"}},children:(0,q.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"45",height:"45",fill:"none",children:(0,q.jsx)("path",{fill:"#F84343",d:"M24 4C12.94 4 4 12.94 4 24s8.94 20 20 20 20-8.94 20-20S35.06 4 24 4m0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16m7.18-26L24 21.18 16.82 14 14 16.82 21.18 24 14 31.18 16.82 34 24 26.82 31.18 34 34 31.18 26.82 24 34 16.82z"})})})]}),(0,q.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px",width:"100%",marginBottom:"16px"},children:[(0,q.jsx)("h3",{style:{fontSize:"20px",fontWeight:500,margin:0,fontFamily:"metropolis",minWidth:"120px",borderBottom:"none"},children:"Reason Name"}),(0,q.jsx)(rs.A,{fullWidth:!0,placeholder:"Enter reason name",value:a,onChange:e=>s(e.target.value)})]}),(0,q.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px",width:"100%",marginBottom:"16px"},children:[(0,q.jsx)("h3",{style:{fontSize:"20px",fontWeight:500,margin:0,minWidth:"120px",borderBottom:"none"},children:"Required"}),(0,q.jsx)(cs.A,{component:"fieldset",children:(0,q.jsxs)(ds.A,{row:!0,value:n,onChange:e=>l(e.target.value),children:[(0,q.jsx)(Ze.A,{value:"Yes",control:(0,q.jsx)(os.A,{}),label:"Yes"}),(0,q.jsx)(Ze.A,{value:"No",control:(0,q.jsx)(os.A,{}),label:"No"})]})})]}),(0,q.jsx)(ja.A,{variant:"contained",fullWidth:!0,onClick:()=>{if(!a)return void t(!1);const e={reasonName:a,resolutionDate:n};r([...i,e]),s(""),l("Yes"),t(!1)},sx:{mt:2,backgroundColor:"rgb(134, 213, 106)",color:"rgb(5, 4, 4)",fontSize:"20px",fontWeight:"500",border:"none",height:"40px",width:"85px",opacity:""===a?.8:1,"&:hover":{backgroundColor:"rgb(134, 213, 106)"}},children:"Submit"})]})})]})},xs=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,q.jsx)(i.A,{className:"fw-36",sx:{mt:4},children:" Job ID - JB18769827629102"}),(0,q.jsx)(i.A,{className:"fw-24",children:"Detail"}),(0,q.jsxs)(l.A,{children:[(0,q.jsx)(i.A,{className:"fw-24",children:"1. Detail 1"}),(0,q.jsx)(i.A,{className:"fw-24",children:"2. Detail 2"})]})]})};var gs=a(7759);const ws=e=>{let{open:t,onClose:a}=e;(0,N.Zp)();const[s,n]=(0,g.useState)(new Map),[r,o]=(0,g.useState)(!0);return(0,q.jsx)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:r?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(l.A,{sx:{alignItems:"center",mt:4},children:[(0,q.jsx)(i.A,{className:"fw-24",children:"Please Scan the machine barcode to proceed"}),(0,q.jsx)("img",{className:"mt-2",src:gs.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,q.jsx)(i.A,{className:"fw-24",children:"or"}),(0,q.jsx)(i.A,{className:"fw-24",children:"Enter Machine Code"}),(0,q.jsx)(l.A,{children:(0,q.jsx)(z.A,{})})]}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:"Clear All"}),(0,q.jsx)(X.A,{color:"light_green",onClick:a,children:(0,q.jsx)(i.A,{color:"black",children:"Confirm"})})]})]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(i.A,{className:"fw-24",sx:{mt:4},children:"As we are going to start the process, Please check the machine and confirm"}),(0,q.jsxs)(l.A,{children:[(0,q.jsx)(i.A,{className:"fw-24",children:"1. Instruction 1"}),(0,q.jsx)(i.A,{className:"fw-24",children:"2. Instruction 2"}),(0,q.jsx)(i.A,{className:"fw-24",children:"3. Instruction 3"})]}),(0,q.jsx)(i.A,{className:"fw-24",sx:{mt:4},children:"Quantity is distributed in 5 batches, 5 barcodes will be printed, Please apply on each batch"}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>o(!0),children:(0,q.jsx)(i.A,{color:"black",children:"Start"})})]})]})})},ys=()=>{const e=(0,N.zy)(),t=(0,N.Zp)(),[a,s]=(e.state,(0,g.useState)([{jobid:"JOB_123",client:"unx@32",operations:5,qty:200}])),[n,r]=(0,g.useState)(),[o,d]=(0,g.useState)(0),[c,u]=(0,g.useState)(!1),[m,h]=(0,g.useState)("start"),[p,x]=(0,g.useState)(0),[w,y]=(0,g.useState)({name:"",metadata:{}});(0,g.useEffect)((()=>{console.log("num.toString(16).toUpperCase()",34..toString(16))}),[]);const j=async()=>{u(!1)},f=[{id:1,title:"Job ID",render:e=>(0,q.jsx)(i.A,{sx:{cursor:"pointer",fontWeight:"bold"},onClick:()=>h("detail"),children:e.jobid})},{id:2,title:"Client ",render:e=>e.client},{id:6,title:"Operation",render:e=>null===e||void 0===e?void 0:e.operations},{id:66,title:"Oty",render:e=>null===e||void 0===e?void 0:e.qty},{id:5,title:"Actions",render:e=>(0,q.jsx)(X.A,{color:"light_green",onClick:()=>t("/myjob"),children:(0,q.jsx)(i.A,{color:"black",children:"Start"})})}];return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,q.jsx)("h1",{className:"mt-4",children:"Job List"}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:2},children:[(0,q.jsxs)(l.A,{sx:{backgroundColor:F.lm.LG_GREEN,width:240,height:80,borderRadius:2,flexDirection:"row",justifyContent:"space-between"},children:[(0,q.jsxs)(i.A,{sx:{p:2,fontSize:20,fontWeight:500},children:["Today",(0,q.jsx)("br",{})," Jobs"]}),(0,q.jsx)(i.A,{sx:{p:2,fontSize:36,fontWeight:700},children:"38"})]}),(0,q.jsxs)(l.A,{sx:{backgroundColor:F.lm.LG_PINK,width:240,height:80,borderRadius:2,flexDirection:"row",justifyContent:"space-between"},children:[(0,q.jsxs)(i.A,{sx:{p:2,fontSize:20,fontWeight:500},children:["Remaining ",(0,q.jsx)("br",{}),"Jobs"]}),(0,q.jsx)(i.A,{sx:{p:2,fontSize:36,fontWeight:700},children:"38"})]}),(0,q.jsxs)(l.A,{sx:{backgroundColor:"#C4D7FC",width:240,height:80,borderRadius:2,flexDirection:"row",justifyContent:"space-between"},children:[(0,q.jsxs)(i.A,{sx:{p:2,fontSize:20,fontWeight:500},children:["Issued ",(0,q.jsx)("br",{}),"Jobs"]}),(0,q.jsx)(i.A,{sx:{p:2,fontSize:36,fontWeight:700},children:"38"})]})]})]}),(0,q.jsx)(G,{columns:f,rows:a,rowsPerPage:5,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:p,setPage:x,paginator:!0,serialize:!0,total:o}),(0,q.jsx)(xs,{open:"detail"===m,onClose:()=>{h(!1),u(!1)},data:w,edit:c,setData:y,onSubmit:j}),(0,q.jsx)(ws,{open:"start"===m,onClose:()=>{h(!1),u(!1)},data:w,edit:c,setData:y,onSubmit:j}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,children:"Cancel"}),(0,q.jsx)(X.A,{color:"gray",children:(0,q.jsx)(i.A,{color:F.lm.TEXT_GRAY,children:"Next"})})]})]})},js=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,g.useState)(new Map);return(0,q.jsx)(J.A,{open:t,onClose:a,width:"50vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:ee.A,children:(0,q.jsxs)(l.A,{sx:{justifyContent:"center",alignItems:"center",mt:4},children:[(0,q.jsx)(tt.A,{sx:{color:F.lm.LIGHT_GREEN,width:100,height:100}}),(0,q.jsx)(i.A,{textAlign:"center",className:"fw-24",sx:{py:4},children:"All Material successfully scanned"})]})})};const fs=a.p+"static/media/warning_amber.bffc0687d9fa87c562989614b31a56ea.svg",As=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,g.useState)(new Map),[r,o]=(0,g.useState)(!1),[d,c]=(0,g.useState)({});F.wN.RADIO,F.wY.REQUIRED;return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"50vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:ee.A,children:[(0,q.jsx)(l.A,{sx:{justifyContent:"center",alignItems:"center"},children:(0,q.jsx)("img",{src:fs,style:{width:"100px",height:"100px"},alt:"warning Icon"})}),(0,q.jsxs)(i.A,{className:"fw-24",sx:{pl:4},children:["Issue reported on this machine.",(0,q.jsx)("br",{}),"Machine not working since"]}),(0,q.jsxs)(l.A,{sx:{justifyContent:"space-between",flexDirection:"row",alignItems:"center",mt:2,px:10,pb:2},children:[(0,q.jsx)(i.A,{className:"fw-36",sx:{color:F.lm.LG_RED},children:"02 hrs"}),(0,q.jsx)(i.A,{className:"fw-36",sx:{color:F.lm.LG_RED},children:"30 mins"}),(0,q.jsx)(i.A,{className:"fw-36",sx:{color:F.lm.LG_RED},children:"02 sec"})]}),(0,q.jsxs)(l.A,{sx:{px:4},children:[(0,q.jsxs)(Je.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,q.jsx)(i.A,{children:"Barcode Missing"}),(0,q.jsx)(Ze.A,{control:(0,q.jsx)(Ke.A,{defaultChecked:!0})})]}),(0,q.jsxs)(Je.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,q.jsx)(i.A,{children:"Material not available"}),(0,q.jsx)(Ze.A,{control:(0,q.jsx)(Ke.A,{defaultChecked:!0})})]}),(0,q.jsxs)(Je.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,q.jsx)(i.A,{children:"Barcode available but material missing or less qty"}),(0,q.jsx)(Ze.A,{control:(0,q.jsx)(Ke.A,{defaultChecked:!0})})]}),(0,q.jsxs)(Je.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[(0,q.jsx)(i.A,{children:"Other"}),(0,q.jsx)(Ze.A,{control:(0,q.jsx)(Ke.A,{defaultChecked:!0})})]})]}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:2,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,children:"Cancel"}),(0,q.jsx)(X.A,{color:"gray",onClick:a,children:(0,q.jsx)(i.A,{color:F.lm.TEXT_GRAY,children:"Confirm"})})]})]})},vs=()=>{const e=(0,N.zy)(),[t,a]=((0,N.Zp)(),e.state,(0,g.useState)([{jobid:"JOB_123",client:"unx@32",operations:5,qty:200,scan:!0},{jobid:"JOB_1234",client:"unx_32",operations:5,qty:200,scan:!1}])),[s,n]=(0,g.useState)(),[r,o]=(0,g.useState)(0),[d,c]=(0,g.useState)(!1),[u,m]=(0,g.useState)(!1),[h,p]=(0,g.useState)(0),[x,w]=(0,g.useState)({name:"",metadata:{}}),y=async()=>{c(!1)},j=[{id:2,title:"Material",render:e=>e.client},{id:66,title:"Oty",render:e=>null===e||void 0===e?void 0:e.qty},{id:5,title:"Actions",render:e=>(0,q.jsx)(X.A,{color:"LG_PINK",onClick:()=>m("start"),children:(0,q.jsx)(i.A,{color:"black",children:"Report Issue"})})},{id:2,title:"Status",render:e=>e.scan?"To Scan":(0,q.jsx)(tt.A,{fontSize:"large",sx:{color:F.lm.LIGHT_GREEN}})}];return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:" items-center mb-2",children:[(0,q.jsx)("h1",{className:"mt-4",children:"My Job > JOB_132425"}),(0,q.jsx)("h1",{className:"fw-24 mt-4",children:"Please scan the material and confirm"})]}),(0,q.jsx)(G,{columns:j,rows:t,rowsPerPage:5,loading:"fetch"===s,titleCellClasses:"c-gray fw-700",page:h,setPage:p,paginator:!0,serialize:!0,total:r}),(0,q.jsx)(js,{open:"detail"===u,onClose:()=>{m(!1),c(!1)},data:x,edit:d,setData:w,onSubmit:y}),(0,q.jsx)(As,{open:"start"===u,onClose:()=>{m(!1),c(!1)},data:x,edit:d,setData:w,onSubmit:y}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,children:"Cancel"}),(0,q.jsx)(X.A,{color:"gray",onClick:()=>m("detail"),children:(0,q.jsx)(i.A,{color:F.lm.TEXT_GRAY,children:"Confirm"})})]})]})},Ss=a.p+"static/media/image.7df633c24c17b3ea3125.png",bs=()=>{const e=(0,N.Zp)();return(0,q.jsx)("div",{children:(0,q.jsxs)("div",{className:"content-container",children:[(0,q.jsx)("p",{className:"detail-heading",children:"Please Scan the part QR Code to start"}),(0,q.jsx)("div",{className:"barcode",children:(0,q.jsx)("img",{src:Ss,alt:"qrscanner",width:160})}),(0,q.jsxs)("div",{className:"sub-headings",children:[(0,q.jsx)("p",{children:"Or"}),(0,q.jsx)("p",{className:"detail-heading2",children:"Enter Code printed on QR Code"})]}),(0,q.jsx)("input",{type:"text",placeholder:"",className:"inputbar"}),(0,q.jsxs)("div",{className:"buttons",children:[(0,q.jsx)("button",{children:"Clear All"}),(0,q.jsx)("button",{onClick:()=>e("/product-details"),children:"Confirm"})]})]})})},Cs=()=>(0,q.jsxs)("div",{className:"report-container",children:[(0,q.jsx)("div",{className:"report-details-t",children:(0,q.jsxs)("div",{className:"grid-container",children:[(0,q.jsx)("div",{className:"font-medium",children:"Part Name"}),(0,q.jsx)("div",{className:"font-semibold",children:"SSKSKK2"}),(0,q.jsx)("div",{className:"font-medium",children:"Customer"}),(0,q.jsx)("div",{className:"font-semibold",children:"Mars Motors"}),(0,q.jsx)("div",{className:"font-medium",children:"Date of Manufacture"}),(0,q.jsx)("div",{className:"font-semibold",children:"12 Aug 2024"}),(0,q.jsx)("div",{className:"font-medium",children:"Plant"}),(0,q.jsx)("div",{className:"font-semibold",children:"Plant no-32"})]})}),(0,q.jsxs)("div",{className:"report-actions",children:[(0,q.jsx)("button",{className:"action-button",children:"Print Report"}),(0,q.jsx)("button",{className:"action-button",children:"Share Report"})]})]}),_s=()=>{const[e,t]=(0,g.useState)(0),[a,s]=(0,g.useState)(10),[n,l]=(0,g.useState)(1),r=[{id:1,title:"Part Name",render:e=>e.name},{id:2,title:"Part Code",render:e=>e.code},{id:3,title:"Oty",render:e=>e.qty},{id:3,title:"Vendor",render:e=>e.vendor},{id:112,title:"Issue",render:e=>(0,q.jsx)(i.A,{color:"#1535DB",children:"Report Issue"})}],o=[{id:1,title:"Machine Name",render:e=>e.name},{id:2,title:"Machine Code",render:e=>e.code},{id:3,title:"Finish Time",render:e=>e.qty},{id:3,title:"Process",render:e=>"Crimping"},{id:112,title:"Issue",render:e=>(0,q.jsx)(i.A,{color:"#1535DB",children:"Report Issue"})}],d=[{id:1,title:"Operator Name",render:e=>e.name},{id:2,title:"Machine Code",render:e=>e.code},{id:3,title:"Finish Time",render:e=>"-"},{id:3,title:"Process",render:e=>"Wirecutting"},{id:112,title:"Issue",render:e=>(0,q.jsx)(i.A,{color:"#1535DB",children:"Report Issue"})}];return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsx)(i.A,{className:"fw-20-500-36",children:"Details"}),(0,q.jsx)(Cs,{}),(0,q.jsx)("div",{className:"details-cards-container",children:[{label:"Number of Parts",value:"12",variant:"green"},{label:"Machining",value:"2",variant:"pink"},{label:"Operator",value:"2",variant:"blue"},{label:"Rework",value:"2",variant:"purple"}].map(((a,s)=>(0,q.jsx)(Ns,{label:a.label,value:a.value,variant:a.variant,isActive:e===s,onClick:()=>t(s)},a.label)))}),(0,q.jsx)("div",{className:"table mt-2",children:(0,q.jsx)(G,{columns:0==e?r:1==e?o:2==e?d:o,rows:[{id:1,name:"LED 1",code:"QTYPW112",qty:1,vendor:"Sameera Enterprises"},{id:2,name:"Wire 6",code:"QTI99012",qty:1,vendor:"Mayfair Enterprises"},{id:3,name:"Wire12",code:"QTI9911",qty:1,vendor:"Axar Industries"},{id:4,name:"Wire11",code:"QTI99726",qty:1,vendor:"Axar Industries"},{id:5,name:"Wire9",code:"QTI90011",qty:1,vendor:"Axar Industries"},{id:6,name:"Wire3",code:"QTI91423",qty:1,vendor:"Axar Industries"}],rowsPerPage:10,titleCellClasses:"fw-700",page:n,setPage:l,paginator:!0,serialize:!0,total:a,headColor:0==e?F.lm.LG_GREEN:1==e?F.lm.LG_PINK:2==e?F.lm.LG_BG_BLUE:F.lm.LG_PURPLE,tableBodyColor:F.lm.LG_GRAY})})]})};function Ns(e){let{label:t,value:a,variant:s,isActive:n,onClick:l}=e;return(0,q.jsx)("div",{className:`metric-card ${s} ${n?"active":""}`,onClick:l,children:(0,q.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[(0,q.jsx)("p",{className:"metric-label",children:t}),(0,q.jsx)("p",{className:"metric-value",children:a})]})})}const ks=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,tab:d,setSelectedQuestions:c,skills:u,users:m,testList:h}=e;const[p,x]=(0,g.useState)(new Map),[w,y]=(0,g.useState)(0),j=["Outward"===d&&{title:"Work Order ID",placeholder:"Enter work order id",type:F.wN.INPUT,name:"work_order_id"},{title:"Material QR",placeholder:"Scan QR",type:F.wN.INPUT,name:"material_qr"},{title:"Material Code",placeholder:"Enter material code",type:F.wN.INPUT,name:"material_code"},{title:"GRN NO",placeholder:"Enter grn number",type:F.wN.INPUT,name:"material_grn"},{title:"Quantity",placeholder:"Enter material quantity",type:F.wN.INPUT,name:"material_quantity"},{title:"Location",placeholder:"Select Location",type:F.wN.SELECT,name:"location",keyValues:[{value:"SH11",key:"SH11"},{value:"SH12",key:"SH12"}],width:"512px"}];return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-5",children:[(0,q.jsxs)("h3",{className:"opacity-80",style:{width:"fit-content"},children:["Add ",d," Material"]}),(0,q.jsx)(Z.A,{data:s,errors:p,onChange:e=>{const{name:t,value:a}=e.target;x((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:j}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{if(0!==w);else{const e=(0,K.bG)(j,s);if(x(e),e.size)return;await r()}},loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("next")})})]})]})},Is=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{listout:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new Q.Ay,s=await a.get(`materials/material-out/?page=${e}&page_size=10`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},listreturn:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new Q.Ay,s=await a.get(`materials/material-return/?page=${e}&page_size=10`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},createOutward:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post("materials/material-out/",e,t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data},createInward:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post("materials/material-return/",e,t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data},update:async(e,a)=>{const s=new Q.Ay,n=await s.put(`orders/update-material-failure/${e}/`,a,t,(e=>(0,B.So)(e,null)));return null===n||void 0===n?void 0:n.data}}},Es=()=>{const e=(0,N.zy)(),[t,a]=((0,N.Zp)(),(0,y.wA)(),e.state,(0,y.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.Failure_item)||void 0===t?void 0:t.data})),(0,g.useState)([])),[s,n]=(0,g.useState)(),[r,o]=(0,g.useState)(0),[d,c]=(0,g.useState)(!1),[u,m]=(0,g.useState)("testDetail"),[h,p]=(0,g.useState)(0),[x,w]=(0,g.useState)({}),{listout:j,listreturn:f,createOutward:A,createInward:v,update:S}=Is(),[b,C]=(0,g.useState)(new Map),[_,k]=(0,g.useState)([]),[I,E]=(0,g.useState)([]),[T,D]=(0,g.useState)([]),[R,P]=(0,g.useState)(""),[O,$]=(0,g.useState)("Outward"),L=[{id:1,title:"Material Name",render:e=>{var t;return(0,q.jsx)(i.A,{children:null===(t=e.material)||void 0===t?void 0:t.name})}},{id:2,title:"Material Code",render:e=>{var t;return(0,q.jsx)(i.A,{children:null===(t=e.material)||void 0===t?void 0:t.material_code})}},{id:22,title:"Work Order",render:e=>{var t;return(0,q.jsx)(i.A,{children:(null===(t=e.material)||void 0===t?void 0:t.work_order)||"-"})}},{id:3,title:"Unit",render:e=>{var t;return(0,q.jsx)(i.A,{children:null===(t=e.material)||void 0===t?void 0:t.unit})}},{id:4,title:"Description",render:e=>{var t;return(0,q.jsx)(i.A,{children:null===(t=e.material)||void 0===t?void 0:t.description})}},{id:5,title:"GRN Number",render:e=>(0,q.jsx)(i.A,{children:null===e||void 0===e?void 0:e.grn_number})},{id:6,title:"Movement Date",render:e=>(0,q.jsx)(i.A,{children:be()(null===e||void 0===e?void 0:e.movement_date).format("ll")})},{id:7,title:"Quantity",render:e=>(0,q.jsx)(i.A,{children:null===e||void 0===e?void 0:e.quantity})},{id:8,title:"Outward"===O?"To Location":"From Location",render:e=>(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(i.A,{children:"Outward"===O?e.to_location:e.from_location})})}];(0,g.useEffect)((()=>{M()}),[h,O]);const M=async()=>{const[e]="Outward"===O?await j(h+1):await f(h+1);console.log("test master-------",e),o(e.count),D(e.results)};return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsx)("div",{className:"flex items-center justify-between",children:(0,q.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",width:"100%"},children:[(0,q.jsx)(i.A,{className:"fw-20-500-36",children:"Store Material Movement"}),(0,q.jsx)(X.A,{color:"gray",onClick:()=>{m("add")},children:(0,q.jsxs)(i.A,{className:"fw-20-500-24",children:["Add ",O," Material"]})})]})}),(0,q.jsx)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between"},children:(0,q.jsx)(se.A,{value:O,onChange:(e,t)=>{$(t),p(0)},className:"mb-2 fw-500",children:["Outward","Inward"].map(((e,t)=>(0,q.jsx)(ne.A,{label:e,className:"fw-500",value:e})))})}),(0,q.jsx)(G,{columns:L,rows:T,rowsPerPage:10,loading:"fetch"===s,titleCellClasses:"c-gray fw-700",page:h,setPage:p,paginator:!0,serialize:!0,total:r,tableBodyColor:F.lm.WHITE}),(0,q.jsx)(ks,{open:"add"===u,onClose:()=>{m(!1)},onSubmit:async()=>{if("Outward"===O){const e={workorder_id:x.work_order_id,material_qr:x.material_qr,material_code:x.material_code,material_grn:x.material_grn,material_quantity:x.material_quantity,to_location:x.location};console.log("payload----",e);let t=await A(e);console.log("res - create mat------",t),m(!1)}else{alert("Inward");const e={material_qr:x.material_qr,material_code:x.material_code,material_grn:x.material_grn,material_quantity:x.material_quantity,from_location:x.location};let t=await v(e);console.log("res - create mat------",t),m(!1)}},users:t,testList:T,data:x,setData:w,tab:O})]})},Ts=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){const e=new Q.Ay,a=await e.get("orders/acc-circuit-list/",{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.post(`${Y.H.ASSET}/${a}/${Y.H.DIVISIONS}/`,e,t,(e=>(0,B.So)(e,null,"Division created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.DIVISION}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Division Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.DIVISION}/${e}/`,t,(e=>(0,B.So)(e,null,"Division deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},Ds=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,q.jsx)(i.A,{className:"fw-36",sx:{mt:4},children:" Job ID - JB18769827629102"}),(0,q.jsx)(i.A,{className:"fw-24",children:"Detail"}),(0,q.jsxs)(l.A,{children:[(0,q.jsx)(i.A,{className:"fw-24",children:"1. Detail 1"}),(0,q.jsx)(i.A,{className:"fw-24",children:"2. Detail 2"})]})]})},Rs=e=>{let{open:t,onClose:a}=e;const s=(0,N.Zp)(),[n,r]=(0,g.useState)(new Map),[o,d]=(0,g.useState)(!1);return(0,q.jsx)(J.A,{open:t,onClose:a,width:"50vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:ee.A,children:o?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(l.A,{sx:{alignItems:"center",mt:4},children:[(0,q.jsx)(i.A,{className:"fw-24",children:"Please Scan the machine barcode to proceed"}),(0,q.jsx)("img",{className:"mt-2",src:gs.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,q.jsx)(i.A,{className:"fw-24",children:"or"}),(0,q.jsx)(i.A,{className:"fw-24",children:"Enter Machine Code"}),(0,q.jsx)(l.A,{children:(0,q.jsx)(z.A,{})})]}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:"Clear All"}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>s("/myjob"),children:(0,q.jsx)(i.A,{color:"black",children:"Confirm"})})]})]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(i.A,{className:"fw-24",sx:{mt:4},children:"As we are going to start the process, Please check the machine and confirm"}),(0,q.jsxs)(l.A,{children:[(0,q.jsx)(i.A,{className:"fw-24",children:"1. Instruction 1"}),(0,q.jsx)(i.A,{className:"fw-24",children:"2. Instruction 2"}),(0,q.jsx)(i.A,{className:"fw-24",children:"3. Instruction 3"})]}),(0,q.jsx)(i.A,{className:"fw-24",sx:{mt:4},children:"Quantity is distributed in 5 batches, 5 barcodes will be printed, Please apply on each batch"}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>d(!0),children:(0,q.jsx)(i.A,{color:"black",children:"Start"})})]})]})})},Ps=()=>{const e=(0,N.zy)(),t=((0,N.Zp)(),e.state),[a,s]=(0,g.useState)([{jobid:"JOB_123",client:"unx@32",operations:5,qty:200}]),[n,l]=(0,g.useState)(),[i,r]=(0,g.useState)(0),[o,d]=(0,g.useState)(!1),[c,u]=(0,g.useState)(!1),[m,h]=(0,g.useState)(0),[p,x]=(0,g.useState)({name:"",metadata:{}}),{list:w,create:y,update:j,remove:f}=Ts();(0,g.useEffect)((()=>{A()}),[m]);const A=async()=>{l("fetch");const[e,a]=await w(m+1,t);s(e),r(a),l(!1)},v=async()=>{const e={...p};l("fetch"),!0===o?await j(e):await y(e,t),x({}),u(!1),await A(),l(!1),d(!1)};return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsx)("div",{className:"flex items-center justify-between",children:(0,q.jsx)("h1",{className:"mt-4",children:"ACC Circuit Master"})}),(0,q.jsx)(G,{columns:[{id:1,title:"Circuit Name",render:e=>null===e||void 0===e?void 0:e.name},{id:2,title:"Circuit Code",render:e=>null===e||void 0===e?void 0:e.circuit_code},{id:3,title:"Description",render:e=>null===e||void 0===e?void 0:e.circuit_description},{id:5,title:"Materials Req",render:e=>null===e||void 0===e?void 0:e.qty}],rows:a,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:h,paginator:!0,serialize:!0,total:i}),(0,q.jsx)(Ds,{open:"detail"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:v}),(0,q.jsx)(Rs,{open:"start"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:v})]})},Os=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){const e=new Q.Ay,a=await e.get("orders/lpc-circuit-list/",{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.post(`${Y.H.ASSET}/${a}/${Y.H.DIVISIONS}/`,e,t,(e=>(0,B.So)(e,null,"Division created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.DIVISION}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Division Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.DIVISION}/${e}/`,t,(e=>(0,B.So)(e,null,"Division deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},$s=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,q.jsx)(i.A,{className:"fw-36",sx:{mt:4},children:" Job ID - JB18769827629102"}),(0,q.jsx)(i.A,{className:"fw-24",children:"Detail"}),(0,q.jsxs)(l.A,{children:[(0,q.jsx)(i.A,{className:"fw-24",children:"1. Detail 1"}),(0,q.jsx)(i.A,{className:"fw-24",children:"2. Detail 2"})]})]})},Ls=e=>{let{open:t,onClose:a}=e;const s=(0,N.Zp)(),[n,r]=(0,g.useState)(new Map),[o,d]=(0,g.useState)(!1);return(0,q.jsx)(J.A,{open:t,onClose:a,width:"50vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:ee.A,children:o?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(l.A,{sx:{alignItems:"center",mt:4},children:[(0,q.jsx)(i.A,{className:"fw-24",children:"Please Scan the machine barcode to proceed"}),(0,q.jsx)("img",{className:"mt-2",src:gs.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,q.jsx)(i.A,{className:"fw-24",children:"or"}),(0,q.jsx)(i.A,{className:"fw-24",children:"Enter Machine Code"}),(0,q.jsx)(l.A,{children:(0,q.jsx)(z.A,{})})]}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:"Clear All"}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>s("/myjob"),children:(0,q.jsx)(i.A,{color:"black",children:"Confirm"})})]})]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(i.A,{className:"fw-24",sx:{mt:4},children:"As we are going to start the process, Please check the machine and confirm"}),(0,q.jsxs)(l.A,{children:[(0,q.jsx)(i.A,{className:"fw-24",children:"1. Instruction 1"}),(0,q.jsx)(i.A,{className:"fw-24",children:"2. Instruction 2"}),(0,q.jsx)(i.A,{className:"fw-24",children:"3. Instruction 3"})]}),(0,q.jsx)(i.A,{className:"fw-24",sx:{mt:4},children:"Quantity is distributed in 5 batches, 5 barcodes will be printed, Please apply on each batch"}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>d(!0),children:(0,q.jsx)(i.A,{color:"black",children:"Start"})})]})]})})},Ms=()=>{const e=(0,N.zy)(),t=((0,N.Zp)(),e.state),[a,s]=(0,g.useState)([{jobid:"JOB_123",client:"unx@32",operations:5,qty:200}]),[n,l]=(0,g.useState)(),[i,r]=(0,g.useState)(0),[o,d]=(0,g.useState)(!1),[c,u]=(0,g.useState)(!1),[m,h]=(0,g.useState)(0),[p,x]=(0,g.useState)({name:"",metadata:{}}),{list:w,create:y,update:j,remove:f}=Os();(0,g.useEffect)((()=>{A()}),[m]);const A=async()=>{l("fetch");const[e,a]=await w(m+1,t);s(e),r(a),l(!1)},v=async()=>{const e={...p};l("fetch"),!0===o?await j(e):await y(e,t),x({}),u(!1),await A(),l(!1),d(!1)};return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsx)("div",{className:"flex items-center justify-between",children:(0,q.jsx)("h1",{className:"mt-4",children:"LPC Circuit Master"})}),(0,q.jsx)(G,{columns:[{id:1,title:"Circuit Name",render:e=>null===e||void 0===e?void 0:e.operations},{id:2,title:"Circuit Code",render:e=>null===e||void 0===e?void 0:e.operations},{id:3,title:"Description",render:e=>null===e||void 0===e?void 0:e.operations},{id:4,title:"Stages",render:e=>null===e||void 0===e?void 0:e.qty},{id:5,title:"Materials",render:e=>null===e||void 0===e?void 0:e.qty},{id:6,title:"ACC Circuit Req",render:e=>null===e||void 0===e?void 0:e.qty}],rows:a,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:h,paginator:!0,serialize:!0,total:i}),(0,q.jsx)($s,{open:"detail"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:v}),(0,q.jsx)(Ls,{open:"start"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:v})]})},Us=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){const e=new Q.Ay,a=await e.get("orders/lpc-stage-master/",{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.post(`${Y.H.ASSET}/${a}/${Y.H.DIVISIONS}/`,e,t,(e=>(0,B.So)(e,null,"Division created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.DIVISION}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Division Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.DIVISION}/${e}/`,t,(e=>(0,B.So)(e,null,"Division deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},zs=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,q.jsx)(i.A,{className:"fw-36",sx:{mt:4},children:" Job ID - JB18769827629102"}),(0,q.jsx)(i.A,{className:"fw-24",children:"Detail"}),(0,q.jsxs)(l.A,{children:[(0,q.jsx)(i.A,{className:"fw-24",children:"1. Detail 1"}),(0,q.jsx)(i.A,{className:"fw-24",children:"2. Detail 2"})]})]})},Fs=e=>{let{open:t,onClose:a}=e;const s=(0,N.Zp)(),[n,r]=(0,g.useState)(new Map),[o,d]=(0,g.useState)(!1);return(0,q.jsx)(J.A,{open:t,onClose:a,width:"50vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:ee.A,children:o?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(l.A,{sx:{alignItems:"center",mt:4},children:[(0,q.jsx)(i.A,{className:"fw-24",children:"Please Scan the machine barcode to proceed"}),(0,q.jsx)("img",{className:"mt-2",src:gs.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,q.jsx)(i.A,{className:"fw-24",children:"or"}),(0,q.jsx)(i.A,{className:"fw-24",children:"Enter Machine Code"}),(0,q.jsx)(l.A,{children:(0,q.jsx)(z.A,{})})]}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:"Clear All"}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>s("/myjob"),children:(0,q.jsx)(i.A,{color:"black",children:"Confirm"})})]})]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(i.A,{className:"fw-24",sx:{mt:4},children:"As we are going to start the process, Please check the machine and confirm"}),(0,q.jsxs)(l.A,{children:[(0,q.jsx)(i.A,{className:"fw-24",children:"1. Instruction 1"}),(0,q.jsx)(i.A,{className:"fw-24",children:"2. Instruction 2"}),(0,q.jsx)(i.A,{className:"fw-24",children:"3. Instruction 3"})]}),(0,q.jsx)(i.A,{className:"fw-24",sx:{mt:4},children:"Quantity is distributed in 5 batches, 5 barcodes will be printed, Please apply on each batch"}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>d(!0),children:(0,q.jsx)(i.A,{color:"black",children:"Start"})})]})]})})},Hs=()=>{const e=(0,N.zy)(),t=((0,N.Zp)(),e.state),[a,s]=(0,g.useState)([{jobid:"JOB_123",client:"unx@32",operations:5,qty:200}]),[n,l]=(0,g.useState)(),[i,r]=(0,g.useState)(0),[o,d]=(0,g.useState)(!1),[c,u]=(0,g.useState)(!1),[m,h]=(0,g.useState)(0),[p,x]=(0,g.useState)({name:"",metadata:{}}),{list:w,create:y,update:j,remove:f}=Us();(0,g.useEffect)((()=>{A()}),[m]);const A=async()=>{l("fetch");const[e,a]=await w(m+1,t);s(e),r(a),l(!1)},v=async()=>{const e={...p};l("fetch"),!0===o?await j(e):await y(e,t),x({}),u(!1),l(!1),d(!1)};return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsx)("div",{className:"flex items-center justify-between",children:(0,q.jsx)("h1",{className:"mt-4",children:"LPC Stage Master"})}),(0,q.jsx)(G,{columns:[{id:6,title:"Stage Name",render:e=>null===e||void 0===e?void 0:e.operations},{id:66,title:"Material Required",render:e=>null===e||void 0===e?void 0:e.qty}],rows:a,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:h,paginator:!0,serialize:!0,total:i}),(0,q.jsx)(zs,{open:"detail"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:v}),(0,q.jsx)(Fs,{open:"start"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:v})]})},qs=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new Q.Ay,s=await a.get(`materials/material-master/?page=${e}&page_size=10`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.post(`${Y.H.ASSET}/${a}/${Y.H.DIVISIONS}/`,e,t,(e=>(0,B.So)(e,null,"Division created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.DIVISION}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Division Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.DIVISION}/${e}/`,t,(e=>(0,B.So)(e,null,"Division deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},Gs=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,q.jsx)(i.A,{className:"fw-36",sx:{mt:4},children:" Job ID - JB18769827629102"}),(0,q.jsx)(i.A,{className:"fw-24",children:"Detail"}),(0,q.jsxs)(l.A,{children:[(0,q.jsx)(i.A,{className:"fw-24",children:"1. Detail 1"}),(0,q.jsx)(i.A,{className:"fw-24",children:"2. Detail 2"})]})]})},Bs=e=>{let{open:t,onClose:a}=e;const s=(0,N.Zp)(),[n,r]=(0,g.useState)(new Map),[o,d]=(0,g.useState)(!1);return(0,q.jsx)(J.A,{open:t,onClose:a,width:"50vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:ee.A,children:o?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(l.A,{sx:{alignItems:"center",mt:4},children:[(0,q.jsx)(i.A,{className:"fw-24",children:"Please Scan the machine barcode to proceed"}),(0,q.jsx)("img",{className:"mt-2",src:gs.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,q.jsx)(i.A,{className:"fw-24",children:"or"}),(0,q.jsx)(i.A,{className:"fw-24",children:"Enter Machine Code"}),(0,q.jsx)(l.A,{children:(0,q.jsx)(z.A,{})})]}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:"Clear All"}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>s("/myjob"),children:(0,q.jsx)(i.A,{color:"black",children:"Confirm"})})]})]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(i.A,{className:"fw-24",sx:{mt:4},children:"As we are going to start the process, Please check the machine and confirm"}),(0,q.jsxs)(l.A,{children:[(0,q.jsx)(i.A,{className:"fw-24",children:"1. Instruction 1"}),(0,q.jsx)(i.A,{className:"fw-24",children:"2. Instruction 2"}),(0,q.jsx)(i.A,{className:"fw-24",children:"3. Instruction 3"})]}),(0,q.jsx)(i.A,{className:"fw-24",sx:{mt:4},children:"Quantity is distributed in 5 batches, 5 barcodes will be printed, Please apply on each batch"}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>d(!0),children:(0,q.jsx)(i.A,{color:"black",children:"Start"})})]})]})})},Qs=()=>{const e=(0,N.zy)(),t=((0,N.Zp)(),e.state),[a,s]=(0,g.useState)([{jobid:"JOB_123",client:"unx@32",operations:5,qty:200}]),[n,l]=(0,g.useState)(),[i,r]=(0,g.useState)(0),[o,d]=(0,g.useState)(!1),[c,u]=(0,g.useState)(!1),[m,h]=(0,g.useState)(0),[p,x]=(0,g.useState)({name:"",metadata:{}}),{list:w,create:y,update:j,remove:f}=qs();(0,g.useEffect)((()=>{A()}),[m]);const A=async()=>{l("fetch");const[e]=await w(m+1);s(null===e||void 0===e?void 0:e.results),r(null===e||void 0===e?void 0:e.count),l(!1)},v=async()=>{const e={...p};l("fetch"),!0===o?await j(e):await y(e,t),x({}),u(!1),await A(),l(!1),d(!1)};return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsx)("div",{className:"flex items-center justify-between",children:(0,q.jsx)("h1",{className:"mt-4",children:"Location Master"})}),(0,q.jsx)(G,{columns:[{id:6,title:"Location",render:e=>null===e||void 0===e?void 0:e.operations},{id:66,title:"Type",render:e=>null===e||void 0===e?void 0:e.qty}],rows:a,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:h,paginator:!0,serialize:!0,total:i}),(0,q.jsx)(Gs,{open:"detail"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:v}),(0,q.jsx)(Bs,{open:"start"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:v})]})},Ys=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new Q.Ay,s=await a.get(`materials/material-master/?page=${e}&page_size=10`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.post(`${Y.H.ASSET}/${a}/${Y.H.DIVISIONS}/`,e,t,(e=>(0,B.So)(e,null,"Division created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.DIVISION}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Division Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.DIVISION}/${e}/`,t,(e=>(0,B.So)(e,null,"Division deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},Ws=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,q.jsx)(i.A,{className:"fw-36",sx:{mt:4},children:" Job ID - JB18769827629102"}),(0,q.jsx)(i.A,{className:"fw-24",children:"Detail"}),(0,q.jsxs)(l.A,{children:[(0,q.jsx)(i.A,{className:"fw-24",children:"1. Detail 1"}),(0,q.jsx)(i.A,{className:"fw-24",children:"2. Detail 2"})]})]})},Vs=e=>{let{open:t,onClose:a}=e;const s=(0,N.Zp)(),[n,r]=(0,g.useState)(new Map),[o,d]=(0,g.useState)(!1);return(0,q.jsx)(J.A,{open:t,onClose:a,width:"50vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:ee.A,children:o?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(l.A,{sx:{alignItems:"center",mt:4},children:[(0,q.jsx)(i.A,{className:"fw-24",children:"Please Scan the machine barcode to proceed"}),(0,q.jsx)("img",{className:"mt-2",src:gs.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,q.jsx)(i.A,{className:"fw-24",children:"or"}),(0,q.jsx)(i.A,{className:"fw-24",children:"Enter Machine Code"}),(0,q.jsx)(l.A,{children:(0,q.jsx)(z.A,{})})]}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:"Clear All"}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>s("/myjob"),children:(0,q.jsx)(i.A,{color:"black",children:"Confirm"})})]})]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(i.A,{className:"fw-24",sx:{mt:4},children:"As we are going to start the process, Please check the machine and confirm"}),(0,q.jsxs)(l.A,{children:[(0,q.jsx)(i.A,{className:"fw-24",children:"1. Instruction 1"}),(0,q.jsx)(i.A,{className:"fw-24",children:"2. Instruction 2"}),(0,q.jsx)(i.A,{className:"fw-24",children:"3. Instruction 3"})]}),(0,q.jsx)(i.A,{className:"fw-24",sx:{mt:4},children:"Quantity is distributed in 5 batches, 5 barcodes will be printed, Please apply on each batch"}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>d(!0),children:(0,q.jsx)(i.A,{color:"black",children:"Start"})})]})]})})},Xs=()=>{const e=(0,N.zy)(),t=((0,N.Zp)(),e.state),[a,s]=(0,g.useState)([{jobid:"JOB_123",client:"unx@32",operations:5,qty:200}]),[n,l]=(0,g.useState)(),[i,r]=(0,g.useState)(0),[o,d]=(0,g.useState)(!1),[c,u]=(0,g.useState)(!1),[m,h]=(0,g.useState)(0),[p,x]=(0,g.useState)({name:"",metadata:{}}),{list:w,create:y,update:j,remove:f}=Ys();(0,g.useEffect)((()=>{A()}),[m]);const A=async()=>{l("fetch");const[e]=await w(m+1);console.log("results=---",e),s(null===e||void 0===e?void 0:e.results),r(null===e||void 0===e?void 0:e.count),l(!1)},v=async()=>{const e={...p};l("fetch"),!0===o?await j(e):await y(e,t),x({}),u(!1),await A(),l(!1),d(!1)};return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsx)("div",{className:"flex items-center justify-between",children:(0,q.jsx)("h1",{className:"mt-4",children:"Material Master"})}),(0,q.jsx)(G,{columns:[{id:2,title:"Material Code ",render:e=>e.material_code},{id:6,title:"Material Name",render:e=>null===e||void 0===e?void 0:e.name},{id:66,title:"Unit",render:e=>null===e||void 0===e?void 0:e.unit},{id:668,title:"Description",render:e=>null===e||void 0===e?void 0:e.description}],rows:a,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:h,paginator:!0,serialize:!0,total:i}),(0,q.jsx)(Ws,{open:"detail"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:v}),(0,q.jsx)(Vs,{open:"start"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:v})]})},Js=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new Q.Ay,s=await a.get(`materials/material-master/?page=${e}&page_size=10`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.post(`${Y.H.ASSET}/${a}/${Y.H.DIVISIONS}/`,e,t,(e=>(0,B.So)(e,null,"Division created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.DIVISION}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Division Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.DIVISION}/${e}/`,t,(e=>(0,B.So)(e,null,"Division deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},Zs=e=>{let{open:t,onClose:a}=e;const[s,n]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,wrapperClasses:"px-5 pt-0 pb-4",width:"min(500px,90vw)",children:[(0,q.jsx)(i.A,{className:"fw-36",sx:{mt:4},children:" Job ID - JB18769827629102"}),(0,q.jsx)(i.A,{className:"fw-24",children:"Detail"}),(0,q.jsxs)(l.A,{children:[(0,q.jsx)(i.A,{className:"fw-24",children:"1. Detail 1"}),(0,q.jsx)(i.A,{className:"fw-24",children:"2. Detail 2"})]})]})},Ks=e=>{let{open:t,onClose:a}=e;const s=(0,N.Zp)(),[n,r]=(0,g.useState)(new Map),[o,d]=(0,g.useState)(!1);return(0,q.jsx)(J.A,{open:t,onClose:a,width:"50vw",top:"20vh",wrapperClasses:"px-5",hideCloseIcon:ee.A,children:o?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(l.A,{sx:{alignItems:"center",mt:4},children:[(0,q.jsx)(i.A,{className:"fw-24",children:"Please Scan the machine barcode to proceed"}),(0,q.jsx)("img",{className:"mt-2",src:gs.A,width:"160px",height:"160px",style:{objectFit:"contain"}}),(0,q.jsx)(i.A,{className:"fw-24",children:"or"}),(0,q.jsx)(i.A,{className:"fw-24",children:"Enter Machine Code"}),(0,q.jsx)(l.A,{children:(0,q.jsx)(z.A,{})})]}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:"Clear All"}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>s("/myjob"),children:(0,q.jsx)(i.A,{color:"black",children:"Confirm"})})]})]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(i.A,{className:"fw-24",sx:{mt:4},children:"As we are going to start the process, Please check the machine and confirm"}),(0,q.jsxs)(l.A,{children:[(0,q.jsx)(i.A,{className:"fw-24",children:"1. Instruction 1"}),(0,q.jsx)(i.A,{className:"fw-24",children:"2. Instruction 2"}),(0,q.jsx)(i.A,{className:"fw-24",children:"3. Instruction 3"})]}),(0,q.jsx)(i.A,{className:"fw-24",sx:{mt:4},children:"Quantity is distributed in 5 batches, 5 barcodes will be printed, Please apply on each batch"}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:"Cancel"}),(0,q.jsx)(X.A,{color:"light_green",onClick:()=>d(!0),children:(0,q.jsx)(i.A,{color:"black",children:"Start"})})]})]})})},en=()=>{const e=(0,N.zy)(),t=((0,N.Zp)(),e.state),[a,s]=(0,g.useState)([{jobid:"JOB_123",client:"unx@32",operations:5,qty:200}]),[n,l]=(0,g.useState)(),[i,r]=(0,g.useState)(0),[o,d]=(0,g.useState)(!1),[c,u]=(0,g.useState)(!1),[m,h]=(0,g.useState)(0),[p,x]=(0,g.useState)({name:"",metadata:{}}),{list:w,create:y,update:j,remove:f}=Js();(0,g.useEffect)((()=>{A()}),[m]);const A=async()=>{l("fetch");const[e]=await w(m+1);s(null===e||void 0===e?void 0:e.results),r(null===e||void 0===e?void 0:e.count),l(!1)},v=async()=>{const e={...p};l("fetch"),!0===o?await j(e):await y(e,t),x({}),u(!1),await A(),l(!1),d(!1)};return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsx)("div",{className:"flex items-center justify-between",children:(0,q.jsx)("h1",{className:"mt-4",children:"Store Mapping"})}),(0,q.jsx)(G,{columns:[{id:2,title:"Material Code ",render:e=>e.client},{id:6,title:"Material Name",render:e=>null===e||void 0===e?void 0:e.operations},{id:66,title:"BIN No.",render:e=>null===e||void 0===e?void 0:e.qty}],rows:a,rowsPerPage:10,loading:"fetch"===n,titleCellClasses:"c-gray fw-700",page:m,setPage:h,paginator:!0,serialize:!0,total:i}),(0,q.jsx)(Zs,{open:"detail"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:v}),(0,q.jsx)(Ks,{open:"start"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:v})]})},tn=()=>{const{t:e,i18n:t}=(0,j.Bd)(),a=(0,N.Zp)(),s=(0,N.zy)().state,{summary:n,companies:r,plants:d,divisions:c,lines:u}=Zt(),[m,h]=(0,g.useState)(null),[p,x]=(0,g.useState)(!1),[w,y]=(0,g.useState)(0),[f,A]=(0,g.useState)(),[v,S]=(0,g.useState)([{email:"email@gmail.com",username:"user",fullname:"fullName",employee_id:"employee_id"}]),[b,C]=(0,g.useState)(new Map),[_,k]=(0,g.useState)({company_id:"",plant_id:"",division_id:"",line_id:s.line_id||"",date:s.date,shift_id:""}),[I,E]=(0,g.useState)([{value:"All",key:""}]),[T,D]=(0,g.useState)([{value:"All",key:""}]),[R,P]=(0,g.useState)([{value:"All",key:""}]),[O,$]=(0,g.useState)([{value:"All",key:""}]),[L,M]=(0,g.useState)([]),U=[{placeholder:"Date",type:F.wN.DATE,name:"date",width:"150px"}];(0,g.useEffect)((()=>{!async function(){var e,t;let[a]=await n(w+1,_.company_id,_.plant_id,_.division_id,_.line_id,_.date,_.shift_id);console.log("machine res-------",a);const s=(e,t)=>{const a=new Set(e.map((e=>e.key)));return t.filter((e=>!a.has(e.key)))};E((e=>[...e,...s(e,null===a||void 0===a?void 0:a.companies.map((e=>({value:e.name,key:e.id}))))])),D((e=>[...e,...s(e,null===a||void 0===a?void 0:a.plants.map((e=>({value:e.name,key:e.id}))))])),P((e=>[...e,...s(e,null===a||void 0===a?void 0:a.divisions.map((e=>({value:e.name,key:e.id}))))])),$((e=>[...e,...s(e,null===a||void 0===a?void 0:a.lines.map((e=>({value:e.name,key:e.id}))))])),(null===a||void 0===a||null===(e=a.summaries)||void 0===e||null===(t=e.results)||void 0===t?void 0:t.length)>=0&&M(a.summaries.results);k((e=>{var t;return{...e,company:null===(t=I[0])||void 0===t?void 0:t.key}}))}()}),[_.company_id,_.plant_id,_.division_id,_.line_id,_.date,_.shift_id]);const z=[{id:1,title:"Machine ID",render:e=>e.asset_name},{id:2,title:"Status",render:e=>(0,q.jsx)(i.A,{sx:{textTransform:"capitalize"},color:"offline"===e.status?"#FF0000":"online"===e.status?"#27AE60":"FAA036",children:e.status})},{id:3,title:"OEE",render:e=>e.oee+"%"},{id:4,title:"Availability",render:e=>e.availability+"%"},{id:5,title:"Performance",render:e=>e.utilization+"%"},{id:6,title:"Qty",render:e=>e.quality},{id:7,title:e("action"),render:e=>(0,q.jsx)(i.A,{sx:{color:F.lm.LIGHT_BLUE,cursor:"pointer"},onClick:()=>H(e),children:"Details"})}];function H(e){a("/child-machine",{state:{data:e,date:_.date}})}const B=(0,Kt.Ay)(ea.A)((e=>{let{theme:t}=e;return{width:28,height:16,padding:0,display:"flex","&:active":{"& .MuiSwitch-thumb":{width:15},"& .MuiSwitch-switchBase.Mui-checked":{transform:"translateX(9px)"}},"& .MuiSwitch-switchBase":{padding:2,"&.Mui-checked":{transform:"translateX(12px)",color:"#fff","& + .MuiSwitch-track":{opacity:1,backgroundColor:"#FAA036",border:2,...t.applyStyles("dark",{backgroundColor:"#FAA036"})}}},"& .MuiSwitch-thumb":{width:12,height:12,borderRadius:6,transition:t.transitions.create(["width"],{duration:200})},"& .MuiSwitch-track":{borderRadius:8,opacity:1,backgroundColor:"rgba(0,0,0,.25)",boxSizing:"border-box",...t.applyStyles("dark",{backgroundColor:"rgba(255,255,255,.35)"})}}}));return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",mb:1},children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:1},children:[(0,q.jsx)(o.A,{onClick:()=>a(-1),children:(0,q.jsx)(Gt.A,{})}),(0,q.jsxs)(i.A,{className:"fw-20-500-36",children:[s.line_name," Machines"]})]}),(0,q.jsx)(Z.A,{data:_,errors:b,onChange:e=>{const{name:t,value:a}=e.target;console.log("name value",t,a),C((e=>(e.delete(t),e))),k((e=>({...e,[t]:0==a?"":a})))},schema:U}),(0,q.jsx)(l.A,{sx:{flexDirection:"row",gap:1},children:(0,q.jsxs)(l.A,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[(0,q.jsx)(i.A,{className:"fw-16-400-36",children:"Kanban View"}),(0,q.jsx)(B,{defaultChecked:p,inputProps:{"aria-label":"ant design"},onChange:e=>x(e.target.checked)}),(0,q.jsx)(i.A,{className:"fw-16-400-36",children:"List View"})]})})]}),!1===p?(0,q.jsx)(Qe.Ay,{container:!0,spacing:2,sx:{mb:50,mt:1},children:L.length>0?L.map(((e,t)=>(0,q.jsx)(Qe.Ay,{item:!0,size:4,children:(0,q.jsx)("div",{style:{position:"relative",width:"430px",height:"auto"},children:(0,q.jsx)(Jt,{data:e,expanded:m===t,onToggle:()=>(e=>{h(m===e?null:e)})(t),clickMore:()=>H(e)})},t)}))):(0,q.jsx)(l.A,{sx:{justifyContent:"center",alignItems:"center",mt:2,width:"100%"},children:(0,q.jsx)(i.A,{children:"Machine not found !"})})}):(0,q.jsx)(G,{columns:z,rows:L,rowsPerPage:10,loading:"fetch"===f,titleCellClasses:"c-gray fw-700",page:w,setPage:y,paginator:!0,serialize:!0,total:10,tableBodyColor:F.lm.WHITE})]})},an=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){const e=new Q.Ay,a=await e.get(`${Y.H.ASSET}/${Y.H.COMPANIES}/`,{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post(`${Y.H.ASSET}/${Y.H.COMPANIES}/`,e,t,(e=>(0,B.So)(e,null,"Company created successfully!")));return null===s||void 0===s?void 0:s.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.COMPANY}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Company Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.COMPANY}/${e}/`,t,(e=>(0,B.So)(e,null,"Company deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},sn=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;const c=[{title:"Company Name",placeholder:"Enter Company Name",type:F.wN.INPUT,name:"name",validator:F.wY.REQUIRED}],[u,m]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsxs)("h3",{className:"opacity-80",children:[!0===d?"EDIT":"ADD"," NEW COMPANY"]}),(0,q.jsx)(Z.A,{data:s,errors:u,onChange:e=>{const{name:t,value:a}=e.target;m((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:c}),(0,q.jsx)(Fe.A,{setItemss:null===s||void 0===s?void 0:s.metadata,setJson:e=>{n((t=>({...t,metadata:e}))),console.log("data------",e)},title:"Details"}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:r,loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("create")})})]})]})};var nn=a(9254);const ln=()=>{const e=(0,N.Zp)(),[t,a]=(0,g.useState)([]),[s,n]=(0,g.useState)(),[r,d]=(0,g.useState)(0),[c,u]=(0,g.useState)(!1),[m,h]=(0,g.useState)(!1),[p,x]=(0,g.useState)(0),[w,y]=(0,g.useState)({name:"",metadata:{}}),{list:j,create:f,update:A,remove:v}=an();(0,g.useEffect)((()=>{S()}),[p]);const S=async()=>{n("fetch");const[e,t]=await j(p+1);a(e),d(t),n(!1)},b=[{id:2,title:"Company Name",render:t=>(0,q.jsx)(i.A,{color:"primary",sx:{cursor:"pointer",fontSize:20},onClick:()=>e("/plantpage",{state:t.id}),children:t.name})},{id:6,title:"Details",render:e=>(0,q.jsx)(qe,{icon:(0,q.jsx)(nn.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})},{id:5,title:"Actions",render:e=>(0,q.jsxs)(l.A,{flexDirection:"row",children:[(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{y(e),u(!0),h("add")},children:(0,q.jsx)(ie.A,{color:"primary",fontSize:"small"})}),(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{n("fetch"),await v(e),await S(),n(!1)})(null===e||void 0===e?void 0:e.id),children:(0,q.jsx)(le.A,{color:"error",fontSize:"small"})})]})}];return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsx)(i.A,{className:"fw-20-500-36",children:"Companies"}),(0,q.jsx)(X.A,{color:"gray",onClick:()=>h("add"),loading:s,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:"Create Company"})})]}),(0,q.jsx)(G,{columns:b,rows:t,rowsPerPage:5,loading:"fetch"===s,titleCellClasses:"c-gray fw-700",page:p,setPage:x,paginator:!0,serialize:!0,total:r}),(0,q.jsx)(sn,{open:"add"===m,onClose:()=>{h(!1),u(!1)},data:w,edit:c,setData:y,onSubmit:async()=>{const e={...w};console.log("payload",e),n("fetch"),!0===c?await A(e):await f(e),y({name:"",metadata:{}}),h(!1),await S(),n(!1),u(!1)}})]})},rn=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d,assetsList:c}=e;const u=[{title:"Name",placeholder:"Enter Name",type:F.wN.INPUT,name:"name",validator:F.wY.REQUIRED},{title:"Asset",placeholder:"Select Assests",type:F.wN.SELECT,name:"assets",multi:!0,validator:F.wY.REQUIRED,keyValues:c},{title:"Threshold (seconds)",placeholder:"Enter Name",type:F.wN.INPUT,name:"timeLimit",validator:F.wY.REQUIRED},{title:"Type",type:F.wN.RADIO,name:"type",keyValues:[{value:!1,label:"Productive"},{value:!0,label:"Non-Productive"}]}],[m,h]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsxs)("h3",{className:"opacity-80",children:[!0===d?"EDIT":"ADD"," DOWNTIME REASON"]}),(0,q.jsx)(Z.A,{data:s,errors:m,onChange:e=>{const{name:t,value:a}=e.target;h((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:u}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{const e=(0,K.bG)(u,s);h(e),e.size||await r()},loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("create")})})]})]})},on=()=>{(0,N.Zp)();const[e,t]=(0,g.useState)([]),[a,s]=(0,g.useState)(),[n,r]=(0,g.useState)(0),[o,d]=(0,g.useState)(!1),[c,u]=(0,g.useState)(!1),[m,h]=(0,g.useState)(0),[p,x]=(0,g.useState)({name:"",metadata:{}}),[w,y]=(0,g.useState)([]),{list:j,create:f,update:A,remove:v,assetList:S}=aa();(0,g.useEffect)((()=>{b()}),[m]),(0,g.useEffect)((()=>{C()}),[]);const b=async()=>{s("fetch");const[e]=await j(m+1);t(e.results),r(e.count),s(!1)},C=async()=>{s("fetch");const[e]=await S(m+1);console.log("assets linst",e);const t=e.map((e=>({value:`${e.owner} > ${e.line} > ${e.name}`,key:e.id})));y((e=>[...e,...t]))},_=[{id:1,title:"Name",render:e=>(0,q.jsx)(i.A,{sx:{cursor:"pointer",textTransform:"capitalize"},children:e.reason_name})},{id:2,title:"Effective Downtime",render:e=>(0,q.jsx)(i.A,{children:e.effective_downtime?"True":"False"})},{id:4,title:"Created on",render:e=>(0,q.jsx)(i.A,{children:be()(e.created).format("ll")})},{id:7,title:"Status",render:e=>(0,q.jsx)(i.A,{children:e.status?"True":"False"})},{id:8,title:"Lines",render:e=>(0,q.jsx)(i.A,{children:e.applicable_to.map((e=>e.name))})},{id:2,title:"Threshold",render:e=>(0,q.jsx)(i.A,{children:e.time_limit})}];return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsx)(i.A,{className:"fw-20-500-36",children:"Downtime Master"}),(0,q.jsx)(l.A,{sx:{flexDirection:"row",gap:1},children:(0,q.jsx)(X.A,{color:"gray",onClick:()=>u("add"),loading:a,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:"Add Downtime Reason"})})})]}),(0,q.jsx)(G,{columns:_,rows:e,rowsPerPage:10,loading:"fetch"===a,titleCellClasses:"c-gray fw-700",page:m,setPage:h,paginator:!0,serialize:!0,total:n}),(0,q.jsx)(rn,{open:"add"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:async()=>{const e={...p};console.log("payload",e);const t={reason_name:e.name,effective_downtime:e.type,time_limit:e.timeLimit,asset_list:e.assets};s("fetch");let a=await f(t);x({}),u(!1),await b(),console.log("creat res----",a)},assetsList:w})]})},dn=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new Q.Ay,s=await a.get(`settings/shifts/?page=${e}&page_size=10`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},plantList:async function(){const e=new Q.Ay,a=await e.get("asset/all-plants/",{},t,B.So);return null!==a&&void 0!==a&&a.data?(console.log("res  ",a.data),[null===a||void 0===a?void 0:a.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post("settings/shifts/",e,t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.COMPANY}/${e.id}/`,a,t,(e=>(0,B.So)(e,null)));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.COMPANY}/${e}/`,t,(e=>(0,B.So)(e,null)));return null===s||void 0===s?void 0:s.data}}},cn=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d,plantList:c,days:u,setDays:m,masterShift:h}=e;const p=[{title:"Name",placeholder:"Enter Name",type:F.wN.INPUT,name:"name",validator:F.wY.REQUIRED},{title:"Plant",placeholder:"Select Plant",type:F.wN.SELECT,name:"plant",validator:F.wY.REQUIRED,keyValues:c},{title:"Start Time",placeholder:"select time",type:F.wN.TIME,name:"start_time",validator:F.wY.REQUIRED},{title:"End Time",placeholder:"select time",type:F.wN.TIME,name:"end_time",validator:F.wY.REQUIRED},{title:"Type",type:F.wN.RADIO,name:"type",validator:F.wY.REQUIRED,keyValues:[{value:!0,label:"Working Shift"},{value:!1,label:"Planned Break"}]},"false"===s.type&&{title:"Master Shift",placeholder:"Select Master Shift",type:F.wN.SELECT,name:"swiftmaster",keyValues:[{key:"",value:"None"},...h]}],[x,w]=(0,g.useState)(new Map),y={inputProps:{"aria-label":"Checkbox demo"}},j=e=>t=>{m((a=>({...a,[e]:t.target.checked}))),console.log("days--------",u)};return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsx)("h3",{className:"opacity-80",children:"Add Shift Schedule"}),(0,q.jsx)(Z.A,{data:s,errors:x,onChange:e=>{const{name:t,value:a}=e.target;w((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:p}),(0,q.jsxs)(l.A,{sx:{mt:1},children:[(0,q.jsx)(i.A,{children:"Week Days"}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:1},children:[(0,q.jsx)(Ke.A,{onChange:j("monday"),...y,icon:(0,q.jsx)(i.A,{children:"M"}),checkedIcon:(0,q.jsx)(i.A,{children:"M"})}),(0,q.jsx)(Ke.A,{onChange:j("tuesday"),...y,icon:(0,q.jsx)(i.A,{children:"T"}),checkedIcon:(0,q.jsx)(i.A,{children:"T"})}),(0,q.jsx)(Ke.A,{onChange:j("wednesday"),...y,icon:(0,q.jsx)(i.A,{children:"W"}),checkedIcon:(0,q.jsx)(i.A,{children:"W"})}),(0,q.jsx)(Ke.A,{onChange:j("thursday"),...y,icon:(0,q.jsx)(i.A,{children:"T"}),checkedIcon:(0,q.jsx)(i.A,{children:"T"})}),(0,q.jsx)(Ke.A,{onChange:j("friday"),...y,icon:(0,q.jsx)(i.A,{children:"F"}),checkedIcon:(0,q.jsx)(i.A,{children:"F"})}),(0,q.jsx)(Ke.A,{onChange:j("saturday"),...y,icon:(0,q.jsx)(i.A,{children:"S"}),checkedIcon:(0,q.jsx)(i.A,{children:"S"})}),(0,q.jsx)(Ke.A,{onChange:j("sunday"),...y,icon:(0,q.jsx)(i.A,{children:"S"}),checkedIcon:(0,q.jsx)(i.A,{children:"S"})})]})]}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{const e=(0,K.bG)(p,s);w(e),e.size||await r()},loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("create")})})]})]})};var un=a(4992);const mn=()=>{(0,N.Zp)();const[e,t]=(0,g.useState)([]),[a,s]=(0,g.useState)(),[n,r]=(0,g.useState)(0),[o,d]=(0,g.useState)(!1),[c,u]=(0,g.useState)(!1),[m,h]=(0,g.useState)(0),[p,x]=(0,g.useState)({name:"",metadata:{}}),[w,y]=(0,g.useState)([]),[j,f]=(0,g.useState)([]),[A,v]=(0,g.useState)([]),[S,b]=(0,g.useState)({monday:!1,tuesday:!1,wednesday:!1,thursday:!1,friday:!1,saturday:!1,sunday:!1}),{list:C,create:_,update:k,remove:I,plantList:E}=dn();(0,g.useEffect)((()=>{T()}),[m]),(0,g.useEffect)((()=>{D()}),[]);const T=async()=>{s("fetch");const[e]=await C(m+1);y(e.results),r(e.count),s(!1),f([]);const t=e.results.map((e=>({value:e.shift_name,key:e.id})));f((e=>[...e,...t]))},D=async()=>{const[e,t]=await E(m+1);console.log("plants---",e),v([]);const a=e.map((e=>({value:e.name,key:e.id})));v((e=>[...e,...a]))},R=[{id:1,title:"Plant",render:e=>(0,q.jsx)(i.A,{children:e.plant.name})},{id:2,title:"Name",render:e=>(0,q.jsx)(i.A,{sx:{textTransform:"capitalize"},children:e.shift_name})},{id:3,title:"Type",render:e=>(0,q.jsx)(i.A,{children:e.is_shift?"Working Shift":"Planned Break"})},{id:4,title:"Duration",render:e=>(0,q.jsxs)(i.A,{children:[e.duration/60," min"]})},{id:5,title:"Start",render:e=>(0,q.jsx)(i.A,{children:e.start_time})},{id:6,title:"End",render:e=>(0,q.jsx)(i.A,{children:e.end_time})},{id:7,title:"Mon",render:e=>(0,q.jsx)(un.A,{color:e.monday?"success":"error"})},{id:8,title:"Tue",render:e=>(0,q.jsx)(un.A,{color:e.tuesday?"success":"error"})},{id:9,title:"Wed",render:e=>(0,q.jsx)(un.A,{color:e.wednesday?"success":"error"})},{id:10,title:"Thu",render:e=>(0,q.jsx)(un.A,{color:e.thursday?"success":"error"})},{id:11,title:"Fri",render:e=>(0,q.jsx)(un.A,{color:e.friday?"success":"error"})},{id:12,title:"Sat",render:e=>(0,q.jsx)(un.A,{color:e.saturday?"success":"error"})},{id:13,title:"Sun",render:e=>(0,q.jsx)(un.A,{color:e.sunday?"success":"error"})}];return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsx)(i.A,{className:"fw-20-500-36",children:"Shift Master"}),(0,q.jsx)(l.A,{sx:{flexDirection:"row",gap:1},children:(0,q.jsx)(X.A,{color:"gray",onClick:()=>u("add"),loading:a,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:"Add Shift Schedule"})})})]}),(0,q.jsx)(G,{columns:R,rows:w,rowsPerPage:10,loading:"fetch"===a,titleCellClasses:"c-gray fw-700",page:m,setPage:h,paginator:!0,serialize:!0,total:n}),(0,q.jsx)(cn,{open:"add"===c,onClose:()=>{u(!1),d(!1)},data:p,edit:o,setData:x,onSubmit:async()=>{const e={...p},t={shift_name:e.name,plant_code:e.plant,start_time:e.start_time,end_time:e.end_time,is_shift:e.type,master_shift_id:0===e.swiftmaster?"":e.swiftmaster,...S};console.log("shift final payload",t),s("fetch");await _(t);x({}),u(!1),await T()},plantList:A,days:S,setDays:b,masterShift:j})]})},hn=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new Q.Ay,s=await a.get(`${Y.H.ASSET}/${e}/${Y.H.PLANTS}/`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.post(`${Y.H.ASSET}/${a}/${Y.H.PLANTS}/`,e,t,(e=>(0,B.So)(e,null,"Plant created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.PLANT}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Plant Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.PLANT}/${e}/`,t,(e=>(0,B.So)(e,null,"Plant deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},pn=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;const c=[{title:"Plant Name",placeholder:"Enter Plant Name",type:F.wN.INPUT,name:"name",validator:F.wY.REQUIRED}],[u,m]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsxs)("h3",{className:"opacity-80",children:[!0===d?"EDIT":"ADD"," NEW PLANT"]}),(0,q.jsx)(Z.A,{data:s,errors:u,onChange:e=>{const{name:t,value:a}=e.target;m((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:c}),(0,q.jsx)(Fe.A,{setItemss:s.metadata,setJson:e=>n((t=>({...t,metadata:e}))),title:"Details"}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:r,loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("create")})})]})]})},xn=()=>{const e=(0,N.zy)(),t=(0,N.Zp)(),a=e.state,[s,n]=(0,g.useState)([]),[r,d]=(0,g.useState)(),[c,u]=(0,g.useState)(0),[m,h]=(0,g.useState)(!1),[p,x]=(0,g.useState)(!1),[w,y]=(0,g.useState)(0),[j,f]=(0,g.useState)({name:"",metadata:{}}),{list:A,create:v,update:S,remove:b}=hn();(0,g.useEffect)((()=>{C()}),[w]);const C=async()=>{d("fetch");const[e,t]=await A(w+1,a);n(e),u(t),d(!1)},_=[{id:1,title:"Plant Name",render:e=>(0,q.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>t("/divisionpage",{state:e.id}),children:e.name})},{id:2,title:"Company Name",render:e=>e.company},{id:3,title:"Details",render:e=>(0,q.jsx)(qe,{icon:(0,q.jsx)(nn.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})},{id:5,title:"Actions",render:e=>(0,q.jsxs)(l.A,{flexDirection:"row",children:[(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{h(!0),x("add"),f(e)},children:(0,q.jsx)(ie.A,{color:"primary",fontSize:"small"})}),(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{d("fetch"),await b(e),await C(),d(!1)})(null===e||void 0===e?void 0:e.id),children:(0,q.jsx)(le.A,{color:"error",fontSize:"small"})})]})}];return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[(0,q.jsx)(o.A,{onClick:()=>t(-1),children:(0,q.jsx)(Gt.A,{})}),(0,q.jsx)(i.A,{className:"fw-20-500-36",children:"Plants"})]}),(0,q.jsx)(X.A,{color:"gray",onClick:()=>x("add"),loading:r,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:"Add Plant"})})]}),(0,q.jsx)(G,{columns:_,rows:s,rowsPerPage:5,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:w,setPage:y,paginator:!0,serialize:!0,total:c}),(0,q.jsx)(pn,{open:"add"===p,onClose:()=>{x(!1),h(!1)},data:j,edit:m,setData:f,onSubmit:async()=>{const e={...j};d("fetch"),!0===m?await S(e):await v(e,a),f({name:"",metadata:{}}),x(!1),await C(),d(!1),h(!1)}})]})},gn=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new Q.Ay,s=await a.get(`${Y.H.ASSET}/${e}/${Y.H.DIVISIONS}/`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.post(`${Y.H.ASSET}/${a}/${Y.H.DIVISIONS}/`,e,t,(e=>(0,B.So)(e,null,"Division created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.DIVISION}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Division Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.DIVISION}/${e}/`,t,(e=>(0,B.So)(e,null,"Division deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},wn=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;const c=[{title:"Division Name",placeholder:"Enter Division Name",type:F.wN.INPUT,name:"name",validator:F.wY.REQUIRED}],[u,m]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsxs)("h3",{className:"opacity-80",children:[!0===d?"EDIT":"ADD"," NEW DIVISION"]}),(0,q.jsx)(Z.A,{data:s,errors:u,onChange:e=>{const{name:t,value:a}=e.target;m((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:c}),(0,q.jsx)(Fe.A,{setItemss:s.metadata,setJson:e=>n((t=>({...t,metadata:e}))),title:"Details"}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{const e=(0,K.bG)(c,s);m(e),e.size||await r()},loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("create")})})]})]})},yn=()=>{const e=(0,N.zy)(),t=(0,N.Zp)(),a=e.state,[s,n]=(0,g.useState)([]),[r,d]=(0,g.useState)(),[c,u]=(0,g.useState)(0),[m,h]=(0,g.useState)(!1),[p,x]=(0,g.useState)(!1),[w,y]=(0,g.useState)(0),[j,f]=(0,g.useState)({name:"",metadata:{}}),{list:A,create:v,update:S,remove:b}=gn();(0,g.useEffect)((()=>{C()}),[w]);const C=async()=>{d("fetch");const[e,t]=await A(w+1,a);n(e),u(t),d(!1)},_=[{id:1,title:"Division Name",render:e=>(0,q.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>t("/line",{state:e.id}),children:e.name})},{id:2,title:"Plant Name",render:e=>e.plant},{id:6,title:"Details",render:e=>(0,q.jsx)(qe,{icon:(0,q.jsx)(nn.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})},{id:5,title:"Actions",render:e=>(0,q.jsxs)(l.A,{flexDirection:"row",children:[(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{h(!0),x("add"),f(e)},children:(0,q.jsx)(ie.A,{color:"primary",fontSize:"small"})}),(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{d("fetch"),await b(e),await C(),d(!1)})(null===e||void 0===e?void 0:e.id),children:(0,q.jsx)(le.A,{color:"error",fontSize:"small"})})]})}];return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[(0,q.jsx)(o.A,{onClick:()=>t(-1),children:(0,q.jsx)(Gt.A,{})}),(0,q.jsx)(i.A,{className:"fw-20-500-36",children:"Divisions"})]}),(0,q.jsx)(X.A,{color:"gray",onClick:()=>x("add"),loading:r,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:"Add Division"})})]}),(0,q.jsx)(G,{columns:_,rows:s,rowsPerPage:5,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:w,setPage:y,paginator:!0,serialize:!0,total:c}),(0,q.jsx)(wn,{open:"add"===p,onClose:()=>{x(!1),h(!1)},data:j,edit:m,setData:f,onSubmit:async()=>{const e={...j};d("fetch"),!0===m?await S(e):await v(e,a),f({name:"",metadata:{}}),x(!1),await C(),d(!1),h(!1)}})]})},jn=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new Q.Ay,s=await a.get(`${Y.H.ASSET}/${e}/${Y.H.LINES}/`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.post(`${Y.H.ASSET}/${a}/${Y.H.LINES}/`,e,t,(e=>(0,B.So)(e,null,"Line created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.LINE}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Line Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.LINE}/${e}/`,t,(e=>(0,B.So)(e,null,"Line deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},fn=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;const c=[{title:"Line Name",placeholder:"Enter Line Name",type:F.wN.INPUT,name:"name",validator:F.wY.REQUIRED}],[u,m]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsxs)("h3",{className:"opacity-80",children:[!0===d?"EDIT":"ADD"," NEW LINE"]}),(0,q.jsx)(Z.A,{data:s,errors:u,onChange:e=>{const{name:t,value:a}=e.target;m((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:c}),(0,q.jsx)(Fe.A,{setItemss:s.metadata,setJson:e=>n((t=>({...t,metadata:e}))),title:"Details"}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:r,loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("create")})})]})]})},An=()=>{const e=(0,N.zy)(),t=(0,N.Zp)(),a=e.state,[s,n]=(0,g.useState)([]),[r,d]=(0,g.useState)(),[c,u]=(0,g.useState)(0),[m,h]=(0,g.useState)(!1),[p,x]=(0,g.useState)(!1),[w,y]=(0,g.useState)(0),[j,f]=(0,g.useState)({name:"",metadata:{}}),{list:A,create:v,update:S,remove:b}=jn();(0,g.useEffect)((()=>{C()}),[w]);const C=async()=>{d("fetch");const[e,t]=await A(w+1,a);n(e),u(t),d(!1)},_=[{id:1,title:"Line Name",render:e=>(0,q.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>t("/asset",{state:e.id}),children:e.name})},{id:2,title:"Division Name",render:e=>e.division},{id:3,title:"Details",render:e=>(0,q.jsx)(qe,{icon:(0,q.jsx)(nn.A,{fontSize:"small"}),json:null===e||void 0===e?void 0:e.metadata})},{id:5,title:"Actions",render:e=>(0,q.jsxs)(l.A,{flexDirection:"row",children:[(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{h(!0),x("add"),f(e)},children:(0,q.jsx)(ie.A,{color:"primary",fontSize:"small"})}),(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{d("fetch"),await b(e),await C(),d(!1)})(null===e||void 0===e?void 0:e.id),children:(0,q.jsx)(le.A,{color:"error",fontSize:"small"})})]})}];return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[(0,q.jsx)(o.A,{onClick:()=>t(-1),children:(0,q.jsx)(Gt.A,{})}),(0,q.jsx)(i.A,{className:"fw-20-500-36",children:"Lines"})]}),(0,q.jsx)(X.A,{color:"gray",onClick:()=>x("add"),loading:r,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:"Add Line"})})]}),(0,q.jsx)(G,{columns:_,rows:s,rowsPerPage:5,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:w,setPage:y,paginator:!0,serialize:!0,total:c}),(0,q.jsx)(fn,{open:"add"===p,onClose:()=>{x(!1),h(!1)},data:j,edit:m,setData:f,onSubmit:async()=>{const e={...j};d("fetch"),!0===m?await S(e):await v(e,a),f({name:"",metadata:{}}),x(!1),await C(),d(!1),h(!1)}})]})},vn=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new Q.Ay,s=await a.get(`${Y.H.ASSET}/${e}/${Y.H.ASSETS}/`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;const s=new Q.Ay,n=await s.post(`${Y.H.ASSET}/${a}/${Y.H.ASSETS}/`,e,t,(e=>(0,B.So)(e,null,"Asset created successfully!")));return null===n||void 0===n?void 0:n.data},update:async e=>{const a={name:e.name,metadata:e.metadata},s=new Q.Ay,n=await s.put(`${Y.H.ASSET}/${Y.H.ASSET}/${e.id}/`,a,t,(e=>(0,B.So)(e,null,"Asset Updated successfully!")));return null===n||void 0===n?void 0:n.data},remove:async e=>{const a=new Q.Ay,s=await a.delete(`${Y.H.ASSET}/${Y.H.ASSET}/${e}/`,t,(e=>(0,B.So)(e,null,"Asset deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},Sn=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;const[c,u]=(0,g.useState)("Yes"),[m,h]=(0,g.useState)("Job/Part based"),[p,x]=(0,g.useState)("Yes"),w=[{title:"Asset Name",placeholder:"Enter Machine Name",type:F.wN.INPUT,name:"alias",validator:F.wY.REQUIRED},{title:"Model",placeholder:"Enter Machine Model",type:F.wN.INPUT,name:"model"},{title:"Device ID",placeholder:"Enter Machine Device ID",type:F.wN.INPUT,name:"machineID"},{title:"Serial Number",placeholder:"Enter Machine serial number",type:F.wN.INPUT,name:"snumber"},{title:"API Endpoint",placeholder:"Enter Machine API Endpoint",type:F.wN.INPUT,name:"api_endpoint"},{title:"Show Parts (per seconds)",type:F.wN.RADIO,name:"show_parts",keyValues:[{value:!0,label:"Yes"},{value:!1,label:"No"}],pl:.2},{title:"Is end of line",type:F.wN.RADIO,name:"isEndLine",keyValues:[{value:!0,label:"Yes"},{value:!1,label:"No"}],pl:.2},{title:"Performance Calculation",type:F.wN.RADIO,name:"PerformanceCal",keyValues:[{value:!0,label:"Job/Part based"},{value:!1,label:"Output based"}],pl:.2},"true"===s.PerformanceCal&&{title:"Fixed Capacity ",type:F.wN.RADIO,name:"fixed_capacity",keyValues:[{value:!0,label:"Yes"},{value:!1,label:"No"}],pl:.2},"true"===s.PerformanceCal&&"true"===s.fixed_capacity&&{title:"Ideal Cycle Time (seconds)",placeholder:"",type:F.wN.INPUT,name:"cycle_time"},"false"===s.PerformanceCal&&{title:"Production Output Time (per hour)",placeholder:"",type:F.wN.INPUT,name:"productionTime"}],[y,j]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsxs)("h3",{className:"opacity-80",children:[!0===d?"EDIT":"ADD"," Machine"]}),(0,q.jsx)(Z.A,{data:s,errors:y,onChange:e=>{const{name:t,value:a}=e.target;j((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:w}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{const e=(0,K.bG)(w,s);j(e),e.size||await r()},loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("create")})})]})]})},bn=()=>{const e=(0,N.zy)(),t=(0,N.Zp)(),a=e.state,[s,n]=(0,g.useState)([]),[r,d]=(0,g.useState)(),[c,u]=(0,g.useState)(0),[m,h]=(0,g.useState)(!1),[p,x]=(0,g.useState)(!1),[w,y]=(0,g.useState)(0),[j,f]=(0,g.useState)({isEndLine:"",PerformanceCal:"",fixed_capacity:""}),{list:A,create:v,update:S,remove:b}=vn();(0,g.useEffect)((()=>{C()}),[w]);const C=async()=>{d("fetch");const[e,t]=await A(w+1,a);n(e),u(t),d(!1)},_=[{id:11,title:"Created At",render:e=>be()(e.created).format("ll")},{id:1,title:"Asset Name",render:e=>e.name},{id:2,title:"Line Name",render:e=>e.line},{id:3,title:"Owner",render:e=>e.owner}];return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",alignItems:"center",gap:1},children:[(0,q.jsx)(o.A,{onClick:()=>t(-1),children:(0,q.jsx)(Gt.A,{})}),(0,q.jsx)(i.A,{className:"fw-20-500-36",children:"Assets"})]}),(0,q.jsx)(X.A,{color:"gray",onClick:()=>x("add"),loading:r,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:"Add Asset"})})]}),(0,q.jsx)(G,{columns:_,rows:s,rowsPerPage:5,loading:"fetch"===r,titleCellClasses:"c-gray fw-700",page:w,setPage:y,paginator:!0,serialize:!0,total:c}),(0,q.jsx)(Sn,{open:"add"===p,onClose:()=>{x(!1),h(!1)},data:j,edit:m,setData:f,onSubmit:async()=>{const e={...j};let t={name:e.alias,api_url:e.api_endpoint,device_id:e.machineID,serial_number:e.snumber,machine_model:e.model,is_end_of_line:"true"===e.isEndLine,show_parts_per_second:e.show_parts,time_based_utilization:"true"===e.PerformanceCal,fixed_capacity:"true"===e.PerformanceCal&&"true"===e.fixed_capacity,default_cycle_time:"true"===e.PerformanceCal&&"true"===e.fixed_capacity&&parseInt(e.cycle_time,10)||0,default_production_per_hour:"false"===e.PerformanceCal&&parseFloat(e.productionTime)||0};console.log("machine ---payload",t),d("fetch");let s=await v(t,a);console.log("machine response",s),f({}),x(!1),await C()}})]})};var Cn=a(1473),_n=a(4400),Nn=a(7875);const kn=()=>(0,q.jsx)("div",{children:(0,q.jsx)(vt.A,{options:{chart:{id:"line-chart",toolbar:{show:!1}},xaxis:{categories:["1","2","3","4","5","6","7"]},stroke:{curve:"smooth"},title:{text:"Spindle Speed",align:"left"}},series:[{name:"Speed",data:[30,40,35,50,49,60,70]}],type:"line",height:350})}),In=()=>{const{t:e,i18n:t}=(0,j.Bd)(),a=(0,N.zy)(),s=(0,N.Zp)(),n=null===a||void 0===a?void 0:a.state;console.log("location packet detail",n);const{assetSummary:r,timelineSummary:d,getFilters:c}=Zt(),[u,m]=(0,g.useState)(null),[p,x]=(0,g.useState)("Kanban"),[w,y]=(0,g.useState)(0),[f,A]=(0,g.useState)(),[v,S]=(0,g.useState)({}),[b,C]=(0,g.useState)([]),[_,k]=(0,g.useState)(new Map),[I,E]=(0,g.useState)({date:"",shift:"",state:"",quality:""}),[T,D]=(0,g.useState)([]),[R,P]=(0,g.useState)({shifts:[],states:[],quality:[]});F.wN.DATE,F.wY.REQUIRED,F.wN.SELECT,F.wY.REQUIRED,R.shifts,F.wN.SELECT,F.wY.REQUIRED,R.states,F.wN.SELECT,F.wY.REQUIRED,R.quality;return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)(l.A,{sx:{justifyContent:"space-between",flexDirection:"row"},children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:1},children:[(0,q.jsx)(o.A,{onClick:()=>s(-1),children:(0,q.jsx)(Gt.A,{})}),(0,q.jsx)(i.A,{className:"fw-20-500-36",children:"Data Point"})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",justifyContent:"space-between",gap:2},children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:1,alignItems:"center"},children:[(0,q.jsx)(Cn.A,{color:"primary",fontSize:"small"}),(0,q.jsxs)(i.A,{className:"fw-20-500-36",children:[(0,q.jsx)("strong",{children:"Machine:"})," ",n.asset_name||"-"]})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:1,alignItems:"center"},children:[(0,q.jsx)(Nn.A,{color:"primary",fontSize:"small"}),(0,q.jsxs)(i.A,{className:"fw-20-500-36",children:[(0,q.jsx)("strong",{children:"Barcode: "}),n.barcode||"-"]})]}),(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:1,alignItems:"center"},children:[(0,q.jsx)(_n.A,{color:"primary",fontSize:"small"}),(0,q.jsxs)(i.A,{className:"fw-20-500-36",children:[(0,q.jsx)("strong",{children:"Energy: "})," ",n.energy||"-"]})]})]})]}),(0,q.jsx)(h.A,{display:"flex",justifyContent:"center",children:(0,q.jsxs)(ls.A,{elevation:3,sx:{padding:"20px",borderRadius:"8px",width:"100%",boxShadow:3},children:[(0,q.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:"Additional Details"}),(0,q.jsxs)(Qe.Ay,{container:!0,spacing:2,children:[(0,q.jsx)(Qe.Ay,{item:!0,xs:6,children:(0,q.jsxs)(i.A,{color:"text.secondary",children:[(0,q.jsx)("strong",{children:"ID:"})," ",n.id]})}),(0,q.jsx)(Qe.Ay,{item:!0,xs:6,children:(0,q.jsxs)(i.A,{color:"text.secondary",children:[(0,q.jsx)("strong",{children:"Created At:"})," ",new Date(n.modified_at).toLocaleString()]})}),(0,q.jsx)(Qe.Ay,{item:!0,xs:6,children:(0,q.jsxs)(i.A,{color:"text.secondary",children:[(0,q.jsx)("strong",{children:"QC Passed:"})," ",n.parts_quantity]})}),(0,q.jsx)(Qe.Ay,{item:!0,xs:6,children:(0,q.jsxs)(i.A,{color:"text.secondary",children:[(0,q.jsx)("strong",{children:"Serial Number:"})," ",n.serial_number]})}),(0,q.jsx)(Qe.Ay,{item:!0,xs:6,children:(0,q.jsxs)(i.A,{color:"text.secondary",children:[(0,q.jsx)("strong",{children:"Start Time:"})," ",n.start_time]})}),(0,q.jsx)(Qe.Ay,{item:!0,xs:6,children:(0,q.jsxs)(i.A,{color:"text.secondary",children:[(0,q.jsx)("strong",{children:"End Time:"})," ",n.end_time]})}),(0,q.jsx)(Qe.Ay,{item:!0,xs:6,children:(0,q.jsxs)(i.A,{color:"text.secondary",children:[(0,q.jsx)("strong",{children:"Event Id:"})," ",n.event_id]})}),(0,q.jsx)(Qe.Ay,{item:!0,xs:6,children:(0,q.jsxs)(i.A,{color:"text.secondary",children:[(0,q.jsx)("strong",{children:"Event Type:"})," ",n.event_type]})}),(0,q.jsx)(Qe.Ay,{item:!0,xs:6,children:(0,q.jsx)(i.A,{color:"text.secondary",children:(0,q.jsx)("strong",{children:"Associated Job:"})})}),(0,q.jsx)(Qe.Ay,{item:!0,xs:6,children:(0,q.jsxs)(i.A,{color:"text.secondary",children:[(0,q.jsx)("strong",{children:"Operator Name:"})," ",n.operator_name]})})]})]})}),(0,q.jsx)(h.A,{display:"flex",justifyContent:"center",mt:2,children:(0,q.jsx)(ls.A,{elevation:3,sx:{padding:"20px",borderRadius:"8px",width:"100%",boxShadow:3},children:(0,q.jsx)(kn,{})})})]})},En=()=>{(0,N.Zp)();const[e,t]=(0,g.useState)([{assets:"machine1"}]),[a,s]=(0,g.useState)(),[n,r]=(0,g.useState)(0),[o,d]=(0,g.useState)(!1),[c,u]=(0,g.useState)(!1),[m,h]=(0,g.useState)(0),[p,x]=(0,g.useState)({email_notification:"",sms_notification:"",whatsapp_notification:""}),{list:w,create:y,update:j,remove:f}=an(),{getNotification:A,postNotification:v}=V();(0,g.useEffect)((()=>{S()}),[]);const S=async()=>{s("fetch");const e=await A(m+1);console.log("notification fetch",e),e.email_notification&&x((t=>({...t,email_notification:e.email_notification.toString(),sms_notification:e.sms_notification.toString(),whatsapp_notification:e.whatsapp_notification.toString()}))),s(!1)},b=[{title:"Email Notification",type:F.wN.RADIO,name:"email_notification",validator:F.wY.REQUIRED,keyValues:[{value:!0,label:"Yes"},{value:!1,label:"No"}],pl:.2},{title:"SMS Notification",type:F.wN.RADIO,name:"sms_notification",validator:F.wY.REQUIRED,keyValues:[{value:!0,label:"Yes"},{value:!1,label:"No"}],pl:.2},{title:"Whatsapp Notification",type:F.wN.RADIO,name:"whatsapp_notification",validator:F.wY.REQUIRED,keyValues:[{value:!0,label:"Yes"},{value:!1,label:"No"}],pl:.2}],[C,_]=(0,g.useState)(new Map);return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsx)("div",{className:"flex items-center justify-between",children:(0,q.jsx)("h1",{className:"mt-4",children:"Notification Settings"})}),(0,q.jsx)(Z.A,{data:p,errors:C,onChange:e=>{const{name:t,value:a}=e.target;x((e=>({...e,[t]:a})))},schema:b}),(0,q.jsx)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{s("fetch");const e={email_notification:"true"===p.email_notification,sms_notification:"true"===p.sms_notification,whatsapp_notification:"true"===p.whatsapp_notification};await v(e);await S()},loading:a,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("create")})})})]})},Tn=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d,assetsList:c}=e;const u=[{title:"Reason",placeholder:"Select Reason",type:F.wN.SELECT,name:"reason",validator:F.wY.REQUIRED,keyValues:c}],[m,h]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsx)("h3",{className:"opacity-80",children:"ADD DOWNTIME REASON"}),(0,q.jsx)(Z.A,{data:s,errors:m,onChange:e=>{const{name:t,value:a}=e.target;h((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:u}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{const e=(0,K.bG)(u,s);h(e),e.size||(console.log("handleSubmit----------",s.reason),await r())},loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("create")})})]})]})},Dn=()=>{(0,N.Zp)();const[e,t]=(0,g.useState)([]),[a,s]=(0,g.useState)(),[n,r]=(0,g.useState)(0),[d,c]=(0,g.useState)(!1),[u,m]=(0,g.useState)(!1),[h,p]=(0,g.useState)(!1),[x,w]=(0,g.useState)(0),[y,j]=(0,g.useState)({company_id:"",plant_id:"",division_id:"",line_id:"",date:(new Date).toISOString().split("T")[0],shift_id:""}),[f,A]=(0,g.useState)((new Date).toISOString().split("T")[0]),{all_downtime_list:v,unassi_downtime_list:S,reason_list:b,post_reason:C}=aa(),{summary:_}=Zt(),[k,I]=(0,g.useState)(new Map),[E,T]=(0,g.useState)([{value:"All",key:""}]),[D,R]=(0,g.useState)([{value:"All",key:""}]),[P,O]=(0,g.useState)([{value:"All",key:""}]),[$,L]=(0,g.useState)([{value:"All",key:""}]),[M,U]=(0,g.useState)([]);(0,g.useEffect)((()=>{z()}),[x,h]),(0,g.useEffect)((()=>{!async function(){let[e]=await _(x+1,y.company_id||"",y.plant_id||"",y.division_id||"",y.line_id||"",y.date||"",y.shift_id||"");console.log("machine res-------",e);const t=(e,t)=>{const a=new Set(e.map((e=>e.key)));return t.filter((e=>!a.has(e.key)))};T((a=>[...a,...t(a,null===e||void 0===e?void 0:e.companies.map((e=>({value:e.name,key:e.id}))))])),R((a=>[...a,...t(a,null===e||void 0===e?void 0:e.plants.map((e=>({value:e.name,key:e.id}))))])),O((a=>[...a,...t(a,null===e||void 0===e?void 0:e.divisions.map((e=>({value:e.name,key:e.id}))))])),L((a=>[...a,...t(a,null===e||void 0===e?void 0:e.lines.map((e=>({value:e.name,key:e.id}))))])),j((e=>{var t;return{...e,company:null===(t=E[0])||void 0===t?void 0:t.key}}))}()}),[h,y.company_id,y.plant_id,y.division_id,y.line_id,y.date,y.shift_id]);const z=async()=>{s("fetch");const[e]=!1===h?await S(y.date):await v(y.date);t(e),s(!1)},H=[{id:1,title:"Company",render:e=>(0,q.jsx)(i.A,{sx:{cursor:"pointer",textTransform:"capitalize"},children:e.company_name})},{id:2,title:"Plant",render:e=>(0,q.jsx)(i.A,{children:e.plant_name})},{id:3,title:"Division",render:e=>(0,q.jsx)(i.A,{children:e.division_name})},{id:4,title:"Line",render:e=>(0,q.jsx)(i.A,{children:e.line_name})},{id:7,title:"Station",render:e=>(0,q.jsx)(i.A,{children:e.asset_name})},{id:22,title:"Start Time",render:e=>(0,q.jsx)(i.A,{children:e.start_time})},{id:23,title:"End Time",render:e=>(0,q.jsx)(i.A,{children:e.end_time})},{id:24,title:"Duration",render:e=>(0,q.jsx)(i.A,{children:e.duration})},!1===h?{id:54,title:"Action",render:e=>(0,q.jsx)(l.A,{flexDirection:"row",children:(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{(async e=>{U([]),j({...y,id:e.id}),c(!0),m("add");const[t]=await b(e.id);console.log("reason_list linst",t);const a=t.reasons.map((e=>({value:e.reason_name,key:e.id})));U((e=>[...e,...a]))})(e)},children:(0,q.jsx)(Ce.A,{color:"primary",fontSize:"small"})})})}:{id:234,title:"Reason",render:e=>(0,q.jsx)(i.A,{children:e.downtime_reason})}],B=(0,Kt.Ay)(ea.A)((e=>{let{theme:t}=e;return{width:28,height:16,padding:0,display:"flex","&:active":{"& .MuiSwitch-thumb":{width:15},"& .MuiSwitch-switchBase.Mui-checked":{transform:"translateX(9px)"}},"& .MuiSwitch-switchBase":{padding:2,"&.Mui-checked":{transform:"translateX(12px)",color:"#fff","& + .MuiSwitch-track":{opacity:1,backgroundColor:"#FAA036",border:2,...t.applyStyles("dark",{backgroundColor:"#FAA036"})}}},"& .MuiSwitch-thumb":{width:12,height:12,borderRadius:6,transition:t.transitions.create(["width"],{duration:200})},"& .MuiSwitch-track":{borderRadius:8,opacity:1,backgroundColor:"rgba(0,0,0,.25)",boxSizing:"border-box",...t.applyStyles("dark",{backgroundColor:"rgba(255,255,255,.35)"})}}})),Q=[{placeholder:"Company",type:F.wN.SELECT,name:"company_id",width:"150px",keyValues:E},{placeholder:"Plant",type:F.wN.SELECT,name:"plant_id",width:"150px",keyValues:D},{placeholder:"Divison",type:F.wN.SELECT,name:"division_id",validator:F.wY.REQUIRED,width:"150px",keyValues:P},{placeholder:"Line",type:F.wN.SELECT,name:"line_id",validator:F.wY.REQUIRED,width:"150px",keyValues:$},{placeholder:"Date",type:F.wN.DATE,name:"date",width:"150px"}];return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsx)(i.A,{className:"fw-20-500-36",children:"Downtime"}),(0,q.jsx)(l.A,{sx:{flexDirection:"row",gap:1},children:(0,q.jsxs)(l.A,{direction:"row",spacing:1,sx:{alignItems:"center"},children:[(0,q.jsx)(i.A,{className:"fw-16-400-36",children:"Unassigned"}),(0,q.jsx)(B,{defaultChecked:h,inputProps:{"aria-label":"ant design"},onChange:e=>p(e.target.checked)}),(0,q.jsx)(i.A,{className:"fw-16-400-36",children:"All"})]})})]}),(0,q.jsx)(l.A,{sx:{mb:1,flexDirection:"row",gap:1},children:(0,q.jsx)(Z.A,{data:y,errors:k,onChange:e=>{const{name:t,value:a}=e.target;console.log("name value",t,a),I((e=>(e.delete(t),e))),j((e=>({...e,[t]:0==a?"":a})))},schema:Q})}),(0,q.jsx)(G,{columns:H,rows:e,rowsPerPage:10,loading:"fetch"===a,titleCellClasses:"c-gray fw-700",page:x,setPage:w,paginator:!0,serialize:!0,total:n}),(0,q.jsx)(Tn,{open:"add"===u,onClose:()=>{m(!1),c(!1)},data:y,edit:d,setData:j,onSubmit:async()=>{let e=y.id;const t={reason_id:y.reason};s("fetch");let a=await C(e,t);j({company_id:"",plant_id:"",division_id:"",line_id:"",date:(new Date).toISOString().split("T")[0],shift_id:""}),m(!1),await z(),console.log("creat res----",a)},assetsList:M})]})},Rn=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const a=new Q.Ay,s=await a.get(`${Y.H.TENANTS}/?page=${e}`,{},t,B.So);var n,l;return null!==s&&void 0!==s&&s.data?[null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.results,null===s||void 0===s||null===(l=s.data)||void 0===l?void 0:l.count]:[[],0]},create:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=new Q.Ay,s=await a.post(`${Y.H.TENANTS}/`,e,t,(e=>(0,B.So)(e,null,"Tenant created successfully!")));return null===s||void 0===s?void 0:s.data},update:async(e,a)=>{const s=new Q.Ay,n=await s.put(`tenant/${e}/`,a,t,(e=>(0,B.So)(e,null)));return null===n||void 0===n?void 0:n.data},remove:async e=>{if(!e)return;const a=new Q.Ay,s=await a.delete(`${Y.H.TENANT}/${e}/`,t,(e=>(0,B.So)(e,null,"Tenant deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},Pn=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,edit:d}=e;return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsxs)("h3",{className:"opacity-80",children:[d?"Edit":"Create new"," Tenant"]}),(0,q.jsx)(z.A,{title:"Tenant name",placeholder:"Enter tenant name",width:"99%",name:"name",onChange:n,value:s.name}),(0,q.jsx)(z.A,{title:"Secret Key",placeholder:"Enter secret key",width:"99%",name:"secret_key",onChange:n,value:s.secret_key}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:r,loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("create")})})]})]})},On=()=>{const e=(0,N.Zp)(),[t,a]=(0,g.useState)([]),[s,n]=(0,g.useState)(),[r,d]=(0,g.useState)(0),[c,u]=(0,g.useState)(!1),[m,h]=(0,g.useState)(0),[p,x]=(0,g.useState)({name:"",secret_key:""}),[w,y]=(0,g.useState)(!1),{list:j,create:f,remove:A,update:v}=Rn();(0,g.useEffect)((()=>{S()}),[m]);const S=async()=>{n("fetch");const[e,t]=await j(m+1);a(e),d(t),n(!1)},b=[{id:3,title:"Tenant Name",render:t=>(0,q.jsx)(i.A,{color:"primary",sx:{cursor:"pointer"},onClick:()=>e("/tenant-Users",{state:t}),children:t.name})},{id:4,title:"Secret Code",render:e=>e.secret_key},{id:5,title:"Actions",render:e=>(0,q.jsxs)(l.A,{flexDirection:"row",children:[(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>(async e=>{n("fetch"),await A(e),await S(),n(!1)})(null===e||void 0===e?void 0:e.id),children:(0,q.jsx)(le.A,{color:"error",fontSize:"small"})}),(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>{u("edit"),x(e),y(!0)},children:(0,q.jsx)(ie.A,{color:"primary",fontSize:"small"})})]})}];return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsx)(i.A,{className:"fw-20-500-36",children:"Tenants"}),(0,q.jsx)(X.A,{color:"gray",onClick:()=>{u(!0)},children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("Create Tenant")})})]}),(0,q.jsx)(G,{columns:b,rows:t,rowsPerPage:5,loading:"fetch"===s,titleCellClasses:"c-gray fw-700",page:m,setPage:h,paginator:!0,serialize:!0,total:r}),(0,q.jsx)(Pn,{open:c,onClose:()=>{u(!1),y(!1)},data:p,setData:e=>x((t=>({...t,[e.target.name]:e.target.value}))),onSubmit:async()=>{let e;if(null!==p&&void 0!==p&&p.name||(e="Please enter the tenant name!"),null!==p&&void 0!==p&&p.secret_key||(e="Please enter the secret key!"),e)return void k.oR.error(e);n("add");let t={name:p.name,secret_key:p.secret_key};const a=!1===w?await f(p):await v(p.id,t);null!==a&&void 0!==a&&a.id&&(x({}),u(!1),S()),n(!1)},loading:"add"===s,edit:w})]})},$n=()=>{const{token:e}=(0,y.d4)((e=>e[W.X.AUTH])),t={Authorization:`Bearer ${e}`,"Content-Type":Q.yw.APPLICATION_JSON};return{list:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new Q.Ay,s=await a.get(`${e}/${Y.H.USERS}/`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},create:async(e,a)=>{const s=new Q.Ay,n=await s.post(`${a}/${Y.H.USERS}/`,e,t,(e=>(0,B.So)(e,null,"User created successfully!")));return null===n||void 0===n?void 0:n.data},update:async(e,a,s)=>{const n=new Q.Ay,l=await n.put(`${e}/${Y.H.USER}/${a}/`,s,t,(e=>(0,B.So)(e,null,"User Updated successfully!")));return null===l||void 0===l?void 0:l.data},remove:async e=>{if(!e)return;const a=new Q.Ay,s=await a.delete(`${Y.H.USER}/${e}/`,t,(e=>(0,B.So)(e,null,"User deleted successfully!")));return null===s||void 0===s?void 0:s.data},opratorList:async function(){let e=arguments.length>1?arguments[1]:void 0;const a=new Q.Ay,s=await a.get(`${e}/${Y.H.OPERATORS}/`,{},t,B.So);return null!==s&&void 0!==s&&s.data?(console.log("res  ",s.data),[null===s||void 0===s?void 0:s.data]):[[],0]},createOperator:async(e,a)=>{const s=new Q.Ay,n=await s.post(`${a}/${Y.H.OPERATORS}/`,e,t,(e=>(0,B.So)(e,null,"Operator created successfully!")));return null===n||void 0===n?void 0:n.data},updateOperator:async(e,a)=>{const s=new Q.Ay,n=await s.put(`${Y.H.OPERATOR}/${e}/`,a,t,(e=>(0,B.So)(e,null,"Operator Updated successfully!")));return null===n||void 0===n?void 0:n.data},removeOperator:async e=>{if(!e)return;const a=new Q.Ay,s=await a.delete(`${Y.H.OPERATOR}/${e}/`,t,(e=>(0,B.So)(e,null,"Operator deleted successfully!")));return null===s||void 0===s?void 0:s.data}}},Ln=e=>{let{open:t,onClose:a,data:s,setData:n,onSubmit:r,loading:o,tab:d}=e;const c=[{title:"User Name",placeholder:"Enter User Name",type:F.wN.INPUT,name:"username",validator:F.wY.REQUIRED},{title:"Email",placeholder:"Enter Email",type:F.wN.INPUT,name:"email"},{title:"Full Name",placeholder:"Enter Full Name",type:F.wN.INPUT,name:"fullname"}],u=[{title:"Employee Id",placeholder:"Employee Id",type:F.wN.INPUT,name:"employee_id",validator:F.wY.REQUIRED},{title:"Full Name",placeholder:"Enter Full Name",type:F.wN.INPUT,name:"fullname"}],[m,h]=(0,g.useState)(new Map);return(0,q.jsxs)(J.A,{open:t,onClose:a,width:"min(700px,90vw)",hideCloseIcon:ee.A,wrapperClasses:"px-6",children:[(0,q.jsxs)("h3",{className:"opacity-80",children:["ADD ",d]}),(0,q.jsx)(Z.A,{data:s,errors:m,onChange:e=>{const{name:t,value:a}=e.target;h((e=>(e.delete(t),e))),n((e=>({...e,[t]:a})))},schema:"Users"===d?c:u}),(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",mt:4,mb:1,children:[(0,q.jsx)(X.A,{bordered:!0,gray:!0,onClick:a,children:(0,H.t)("cancel")}),(0,q.jsx)(X.A,{color:"light_green",onClick:async()=>{const e=(0,K.bG)(c,s);h(e),e.size||r()},loading:o,children:(0,q.jsx)(i.A,{className:"fw-20-500-24",children:(0,H.t)("create")})})]})]})},Mn=()=>{const e=(0,N.zy)(),t=(0,N.Zp)(),a=null===e||void 0===e?void 0:e.state,{list:s,opratorList:n,create:r,createOperator:d,update:c}=$n(),[u,m]=(0,g.useState)("Users"),[h,p]=(0,g.useState)([]),[x,w]=(0,g.useState)(),[y,j]=(0,g.useState)(0),[f,A]=(0,g.useState)(0),[v,S]=(0,g.useState)(!1),[b,C]=(0,g.useState)({});(0,g.useEffect)((()=>{_()}),[f,u]);const _=async()=>{w("fetch");const[e,t]=await s(f+1,a.id),n=e.filter((e=>!e.is_operator));p(n),j(t),w(!1)},k=[{id:1,title:"Email",render:e=>e.email||"-"},{id:2,title:"User Name",render:e=>e.username||"-"},{id:3,title:"Full Name",render:e=>e.fullname||"-"},{id:5,title:"Role",render:e=>(0,q.jsx)(de,{title:e.is_admin?"admin":"Na"})},{id:6,title:"Action",render:e=>(0,q.jsx)(ve.A,{title:e.is_admin?"Remove Admin":"Make Admin",children:(0,q.jsx)(o.A,{sx:{height:25,width:25},onClick:()=>I(null===e||void 0===e?void 0:e.id,null===e||void 0===e?void 0:e.is_admin),children:(0,q.jsx)(Ae.A,{color:e.is_admin?"error":"success",fontSize:"small"})})})}],I=async(e,t)=>{w("fetch");const s={is_admin:!0!==t};await c(a.id,e,s),await _(),w(!1)};return(0,q.jsxs)("div",{className:"mx-3 my-2",children:[(0,q.jsxs)("div",{className:"flex items-center justify-between",children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:1},children:[(0,q.jsx)(o.A,{onClick:()=>t(-1),children:(0,q.jsx)(Gt.A,{})}),(0,q.jsxs)(i.A,{className:"fw-20-500-36",children:[a.name," ",u]})]}),(0,q.jsx)(X.A,{color:"gray",onClick:()=>{S(!0)},children:(0,q.jsxs)(i.A,{className:"fw-20-500-24",children:["Create ",u]})})]}),(0,q.jsx)(G,{columns:k,rows:h,rowsPerPage:10,loading:"fetch"===x,titleCellClasses:"c-gray fw-700",page:f,setPage:A,paginator:!0,serialize:!0,total:y}),(0,q.jsx)(Ln,{open:v,onClose:()=>S(!1),data:b,setData:C,onSubmit:async()=>{const e={...b};w("fetch"),"Users"===u?await r(e,a.id):await d(e,a.id),C({}),S(!1),await _(),w(!1)},loading:"add"===x,tab:u})]})},Un=()=>{var e,t;const a=(0,y.wA)(),[s,n]=(0,g.useState)(!1),l=(0,y.d4)((e=>e[W.X.AUTH])),[i,r]=(null===l||void 0===l||null===(e=l.user)||void 0===e||null===(t=e.data)||void 0===t||t.role,(0,g.useState)(new Set));(0,g.useEffect)((()=>{const e=localStorage.getItem("menu");if(e){const t=JSON.parse(e);r(new Set(t))}(0,B.A)(a,l),n(!0)}),[a,l]);const o=[{name:"Material Master",path:"/material-master",element:(0,q.jsx)(Xs,{})},{name:"Material Movement",path:"/store-material-movement",element:(0,q.jsx)(Es,{})},{name:"Pending Items",path:"/store-pending-items",element:(0,q.jsx)(ma,{})},{name:"Failure Reasons",path:"/material-planner/addfailureReasonPage",element:(0,q.jsx)(Da,{})},{name:"Store",path:"/material-planner",element:(0,q.jsx)(Ia,{})},{name:"test result",path:"/test-users",element:(0,q.jsx)(qt,{})},{name:"performance",path:"/report",element:(0,q.jsx)(Ot,{})},{name:"plan training",path:"/plan-training",element:(0,q.jsx)(Dt,{})},{name:"test portal",path:"/test-portal",element:(0,q.jsx)(It,{})},{name:"skill matrix",path:"/skill-matrix",element:(0,q.jsx)(kt,{})},{name:"test master",path:"/test-upload",element:(0,q.jsx)(pt,{})},{name:"skill page",path:"/skill-page",element:(0,q.jsx)(jt,{})},{name:"question bank",path:"/question-bank",element:(0,q.jsx)(ft,{})},{name:"groups",path:"/group",element:(0,q.jsx)(Be,{})},{name:"users",path:"/users",element:(0,q.jsx)(Me,{})},{name:"test portal",path:"/test",element:(0,q.jsx)(dt,{})},{name:"test portal",path:"/TestDetail",element:(0,q.jsx)(et,{})},{name:"test result",path:"/result-page",element:(0,q.jsx)(Bt,{})},{name:"Machine Monitoring",path:"/machine-monitoring",element:(0,q.jsx)(ta,{})},{name:"Machine Monitoring",path:"/child-machine",element:(0,q.jsx)(ra,{})},{name:"Machine Monitoring",path:"/machines",element:(0,q.jsx)(tn,{})},{name:"Machine Monitoring",path:"/packet-detail-page",element:(0,q.jsx)(In,{})},{name:"Notification",path:"/notification",element:(0,q.jsx)(En,{})},{name:"Tenant Master",path:"/tenant-master",element:(0,q.jsx)(On,{})},{name:"Tenant Master",path:"/tenant-Users",element:(0,q.jsx)(Mn,{})},{name:"Asset Master",path:"/company-master",element:(0,q.jsx)(ln,{})},{name:"Asset Master",path:"/plantpage",element:(0,q.jsx)(xn,{})},{name:"Asset Master",path:"/divisionpage",element:(0,q.jsx)(yn,{})},{name:"Asset Master",path:"/line",element:(0,q.jsx)(An,{})},{name:"Asset Master",path:"/asset",element:(0,q.jsx)(bn,{})},{name:"Shift Master",path:"/shift-master",element:(0,q.jsx)(mn,{})},{name:"Downtime Master",path:"/downtime-master",element:(0,q.jsx)(on,{})},{name:"Downtime",path:"/downtime-packet",element:(0,q.jsx)(Dn,{})},{path:"/error",element:(0,q.jsx)(Ue,{})}],d=[{path:"/profile",element:(0,q.jsx)(Ve,{})},{path:"/change-password",element:(0,q.jsx)(zt,{})},{path:"/change-language",element:(0,q.jsx)(Ft,{})},{path:"/material-planner-plan",element:(0,q.jsx)($a,{})},{path:"/material-planner-plan/scanning",element:(0,q.jsx)(Xa,{})},{path:"/planning-material",element:(0,q.jsx)(Ka,{})},{path:"/planning-material-plan",element:(0,q.jsx)(ts,{})},{path:"/acc-circuit-master",element:(0,q.jsx)(Ps,{})},{path:"/lpc-circuit-master",element:(0,q.jsx)(Ms,{})},{path:"/lpc-stage-master",element:(0,q.jsx)(Hs,{})},{path:"/material-mapping",element:(0,q.jsx)(en,{})},{path:"/locaton-master",element:(0,q.jsx)(Qs,{})},{path:"/job",element:(0,q.jsx)(ys,{})},{path:"/myjob",element:(0,q.jsx)(vs,{})},{path:"/traceablity",element:(0,q.jsx)(bs,{})},{path:"/product-details",element:(0,q.jsx)(_s,{})},{path:"/open-issues",element:(0,q.jsx)(ns,{})},{path:"/add-issue",element:(0,q.jsx)(ps,{})}],c=o.map((e=>i.has(e.name)?e:{...e,element:(0,q.jsx)(Ue,{})}));return s?(0,q.jsxs)(N.BV,{children:[c.map((e=>{let{path:t,element:a}=e;return(0,q.jsx)(N.qh,{element:a,path:t},t)})),d.map((e=>{let{path:t,element:a}=e;return(0,q.jsx)(N.qh,{element:a,path:t},t)}))]}):null};var zn=a(2177),Fn=a(4717),Hn=a(3235),qn=a(1006),Gn=a(6472);const Bn=parseInt(localStorage.getItem("draweWidth")),Qn=(0,_.A)(s.Ay,{shouldForwardProp:e=>"open"!==e})((e=>{let{open:t}=e;return{width:Bn,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...t&&{width:Bn,overflowX:"hidden","& .MuiDrawer-paper":{width:Bn,overflowX:"hidden",backgroundColor:F.lm.BG_GRAY}},...!t&&{overflowX:"hidden",width:"50px","& .MuiDrawer-paper":{overflowX:"hidden",width:"50px"}}}})),Yn=()=>{const e=localStorage.getItem("t_token"),{t:t,i18n:a}=(0,j.Bd)(),[s,_]=(0,g.useState)([]),I=((0,y.d4)((e=>e[W.X.AUTH])),(0,y.d4)((e=>{var t;return null===(t=e[W.X.AUTH].user)||void 0===t?void 0:t.data}))),{logout:E,profile2:T}=(0,Pe.A)(),[D,R]=(0,g.useState)(!0),P=(0,N.Zp)(),{pathname:O}=(0,N.zy)(),[$,L]=(0,g.useState)(null),M=Boolean($),U=[{name:"users",title:t("users"),icon:f.A,path:"/users"},{name:"groups",title:t("groups"),icon:A.A,path:"/group"},{name:"skill matrix",title:t("skillMatrix"),icon:v.A,path:"/skill-matrix"},{name:"plan training",title:t("planTraining"),icon:v.A,path:"/plan-training"},{name:"skill page",title:t("skillPage"),icon:v.A,path:"/skill-page"},{name:"performance",title:t("performance"),icon:v.A,path:"/report"},{name:"test portal",title:t("testPortal"),icon:v.A,path:"/test-portal"},{name:"question bank",title:t("questionBank"),icon:v.A,path:"/question-bank"},{name:"test master",title:t("testMaster"),icon:v.A,path:"/test-upload"},{name:"test result",title:t("testResult"),icon:v.A,path:"/test-users"},{name:"Store",title:"Store",icon:v.A,path:"/material-planner"},{name:"Pending Items",title:"Pending Items",icon:v.A,path:"/store-pending-items"},{name:"Failure Reasons",title:"Failure Reasons",icon:C.A,path:"/material-planner/addfailureReasonPage"},{name:"Material Movement",title:"Material Movement",path:"/store-material-movement"},{name:"Material Master",title:"Material Master",path:"/material-master"},{name:"users",title:"Planning",path:"/planning-material"},{name:"Machine Monitoring",title:"Machine Monitoring",path:"/machine-monitoring"},{name:"Asset Master",title:"Asset Master",path:"/company-master"},{name:"Shift Master",title:"Shift Master",path:"/shift-master"},{name:"Downtime Master",title:"Downtime Master",path:"/downtime-master"},{name:"Downtime",title:"Downtime",path:"/downtime-packet"},{name:"Notification",title:"Notification",path:"/notification"},{name:"Tenant Master",title:"Tenant Master",path:"/tenant-master"}];(0,g.useEffect)((()=>{if(e){const e=localStorage.getItem("menu"),t=JSON.parse(e);if(null!==t){const e=U.filter((e=>t.some((t=>t===e.name))));_(e)}}else k.oR.error("Please login!"),P("/")}),[e,P]);const z=()=>{L(null)};return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(n.A,{variant:"outlined",sx:{zIndex:e=>e.zIndex.drawer+1,width:"100%",position:"fixed",backgroundColor:F.lm.WHITE},children:(0,q.jsxs)(l.A,{sx:{flexDirection:"row",px:1,py:.5,justifyContent:"space-between"},children:[(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:2,alignItems:"center"},children:[(0,q.jsx)("img",{src:qn,width:"80px",height:"43px",style:{objectFit:"contain"}}),(0,q.jsx)("img",{src:_t,width:"180px",height:"45px",style:{objectFit:"contain"}})]}),0!==Bn&&(0,q.jsxs)(l.A,{sx:{flexDirection:"row",gap:2,justifyContent:"flex-end",alignItems:"center"},children:[(0,q.jsxs)(i.A,{className:"fw-14",sx:{width:"100%",pr:2,mt:1,color:F.lm.TEXT_GRAY},children:[t("welcome")," ",null===I||void 0===I?void 0:I.username]}),(0,q.jsx)(r.A,{sx:{maxWidth:`calc(100vw - ${D?180:50}px)`},disableGutters:!0,className:"h-50 minh-50",children:(0,q.jsxs)(l.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,q.jsx)(o.A,{id:"basic-button","aria-controls":M?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":M?"true":void 0,onClick:e=>{console.log("popup",e.currentTarget),L(e.currentTarget)},children:(0,q.jsx)(Hn.A,{fontSize:"large"})}),(0,q.jsxs)(d.A,{id:"basic-menu",anchorEl:$,open:M,onClose:z,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,q.jsxs)(c.A,{sx:{py:0},onClick:()=>{z()},children:[(0,q.jsx)(u.A,{children:(0,q.jsx)(zn.A,{fontSize:"small"})}),(0,q.jsx)(m.A,{children:null===I||void 0===I?void 0:I.username})]}),(0,q.jsx)(w.A,{}),(0,q.jsxs)(c.A,{sx:{py:0},onClick:()=>{z()},children:[(0,q.jsx)(u.A,{children:(0,q.jsx)(b.A,{fontSize:"small"})}),(0,q.jsx)(m.A,{children:null===I||void 0===I?void 0:I.email})]}),(0,q.jsx)(w.A,{}),(0,q.jsxs)(c.A,{sx:{py:0},onClick:()=>{z(),P("/change-password")},children:[(0,q.jsx)(u.A,{children:(0,q.jsx)(Fn.A,{fontSize:"small"})}),(0,q.jsx)(m.A,{children:t("changePassword")})]}),(0,q.jsx)(w.A,{}),(0,q.jsxs)(c.A,{sx:{py:0},onClick:()=>{z(),P("/change-language")},children:[(0,q.jsx)(u.A,{children:(0,q.jsx)(Gn.A,{fontSize:"small"})}),(0,q.jsx)(m.A,{children:t("changeLanguage")})]}),(0,q.jsx)(w.A,{}),(0,q.jsxs)(c.A,{sx:{py:0},onClick:()=>{z(),E()},children:[(0,q.jsx)(u.A,{children:(0,q.jsx)(S.A,{fontSize:"small"})}),(0,q.jsx)(m.A,{children:t("logout")})]})]})]})})]})]})}),(0,q.jsx)(Qn,{open:D,variant:"permanent",onClose:()=>R((e=>!e)),sx:{},children:(0,q.jsx)(h.A,{sx:{width:Bn,backgroundColor:F.lm.BG_GRAY,mt:7},role:"presentation",children:(0,q.jsx)(p.A,{dense:!0,children:s.map((e=>{let{title:t,path:a,icon:s}=e;return(0,q.jsx)(x.Ay,{sx:{ml:1},button:!0,onClick:()=>P(a),children:(0,q.jsx)(m.A,{sx:{"& .MuiListItemText-primary":{fontSize:"16px",fontWeight:""+(O===a?"700":"500")}},primary:t,className:"fw-700"})},a)}))})})}),(0,q.jsx)(h.A,{sx:{mt:8,position:"relative",left:D?Bn:"50px",overflow:"hidden"},children:(0,q.jsx)(h.A,{sx:{maxWidth:`calc(100vw - ${D?Bn:50}px)`},children:(0,q.jsx)(Un,{})})})]})}}}]);
//# sourceMappingURL=584.851663bc.chunk.js.map